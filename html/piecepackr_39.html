<div class="container">

<table style="width: 100%;"><tr>
<td>grid.piece</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Draw board game pieces with grid</h2>

<h3>Description</h3>

<p><code>grid.piece()</code> draws board game pieces onto the graphics device.
<code>pieceGrob()</code> is its <code>grid</code> “grob” counterpart.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pieceGrob(
  piece_side = "tile_back",
  suit = NA,
  rank = NA,
  cfg = getOption("piecepackr.cfg", pp_cfg()),
  x = unit(0.5, "npc"),
  y = unit(0.5, "npc"),
  z = NA,
  angle = 0,
  ...,
  width = NA,
  height = NA,
  depth = NA,
  op_scale = getOption("piecepackr.op_scale", 0),
  op_angle = getOption("piecepackr.op_angle", 45),
  default.units = getOption("piecepackr.default.units", "npc"),
  envir = getOption("piecepackr.envir"),
  name = NULL,
  gp = NULL,
  vp = NULL,
  scale = 1,
  alpha = 1,
  type = "normal",
  bleed = FALSE
)

grid.piece(
  piece_side = "tile_back",
  suit = NA,
  rank = NA,
  cfg = getOption("piecepackr.cfg", pp_cfg()),
  x = unit(0.5, "npc"),
  y = unit(0.5, "npc"),
  z = NA,
  angle = 0,
  ...,
  width = NA,
  height = NA,
  depth = NA,
  op_scale = getOption("piecepackr.op_scale", 0),
  op_angle = getOption("piecepackr.op_angle", 45),
  default.units = getOption("piecepackr.default.units", "npc"),
  envir = getOption("piecepackr.envir"),
  name = NULL,
  gp = NULL,
  draw = TRUE,
  vp = NULL,
  scale = 1,
  alpha = 1,
  type = "normal",
  bleed = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>piece_side</code></td>
<td>
<p>A string with piece and side separated by a underscore e.g. "coin_face"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suit</code></td>
<td>
<p>Number of suit (starting from 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank</code></td>
<td>
<p>Number of rank (starting from 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfg</code></td>
<td>
<p>Piecepack configuration list or <code>pp_cfg</code> object,
a list of <code>pp_cfg</code> objects,
or a character vector referring to names in <code>envir</code>
or a character vector referring to object names that
can be retrieved by <code>base::dynGet()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Where to place piece on x axis of viewport</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Where to place piece on y axis of viewport</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>z-coordinate of the piece.  Has no effect if <code>op_scale</code> is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>Angle (on xy plane) to draw piece at</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Width of piece</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Height of piece</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>Depth (thickness) of piece.  Has no effect if <code>op_scale</code> is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>op_scale</code></td>
<td>
<p>How much to scale the depth of the piece in the oblique projection
(viewed from the top of the board).
<code>0</code> (the default) leads to an “orthographic” projection,
<code>0.5</code> is the most common scale used in the “cabinet” projection,
and <code>1.0</code> is the scale used in the “cavalier” projection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>op_angle</code></td>
<td>
<p>What is the angle of the oblique projection?  Has no effect if <code>op_scale</code> is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default.units</code></td>
<td>
<p>A string indicating the default units to use if
'x', 'y', 'width', and/or 'height' are only given as numeric vectors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>Environment (or named list) containing configuration list(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>A character identifier (for grid)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gp</code></td>
<td>
<p>An object of class “gpar”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp</code></td>
<td>
<p>A <code>grid</code> viewport object (or <code>NULL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>Multiplicative scaling factor to apply to width, height, and depth.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Alpha channel for transparency.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Type of grid grob to use.  Either <code>"normal"</code> (default), <code>"picture"</code>, <code>"raster"</code>, or <code>"transformation"</code>.
<code>"picture"</code> exports to (temporary) svg and re-imports as a <code>grImport2::pictureGrob</code>.
<code>"raster"</code> exports to (temporary) png and re-imports as a <code>grid::rasterGrob</code>.
<code>"transformation"</code> uses the affine transformation feature only supported in
R 4.2+ within select graphic devices.
The latter three can be useful if drawing pieces really big or small and don't want
to mess with re-configuring fontsizes and linewidths.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bleed</code></td>
<td>
<p>If <code>FALSE</code> do not add a “bleed” zone around the piece,
otherwise add a “bleed” zone around the piece:</p>

<ul>
<li>
<p>If <code>bleed</code> is <code>TRUE</code> we will add 1/8 inch bleeds
</p>
</li>
<li>
<p>If <code>bleed</code> is a <code>grid::unit()</code> we will use it as bleed size
</p>
</li>
<li>
<p>If <code>bleed</code> is numeric we will convert to <code>grid::unit()</code> via <code>grid::unit(bleed, default.units)</code>
</p>
</li>
</ul>
<p>A non-<code>FALSE</code> <code>bleed</code> is incompatible with <code>op_scale &gt; 0</code> (drawing in an “oblique projection”).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw</code></td>
<td>
<p>A logical value indicating whether graphics output should be produced.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>grid</code> grob object.  If <code>draw</code> is <code>TRUE</code> then as a side effect
<code>grid.piece()</code> will also draw it to the graphics device.
</p>


<h3>See Also</h3>

<p><code>pmap_piece()</code> which applies <code>pieceGrob()</code> over rows of a data frame.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  if (requireNamespace("grid", quietly = TRUE) &amp;&amp; piecepackr:::device_supports_unicode()) {
    opt &lt;- options(piecepackr.at.inform = FALSE)
    on.exit(options(opt))

    draw_pp_diagram &lt;- function(cfg=pp_cfg(), op_scale=0) {
        g.p &lt;- function(...) {
            grid.piece(..., op_scale=op_scale, cfg=cfg, default.units="in")
        }
        g.p("tile_back", x=0.5+c(3,1,3,1), y=0.5+c(3,3,1,1))
        g.p("tile_back", x=0.5+3, y=0.5+1, z=1/4+1/8)
        g.p("tile_back", x=0.5+3, y=0.5+1, z=2/4+1/8)
        g.p("die_face", suit=3, rank=5, x=1, y=1, z=1/4+1/4)
        g.p("pawn_face", x=1, y=4, z=1/4+1/2, angle=90)
        g.p("coin_back", x=3, y=4, z=1/4+1/16, angle=180)
        g.p("coin_back", suit=4, x=3, y=4, z=1/4+1/8+1/16, angle=180)
        g.p("coin_back", suit=2, x=3, y=1, z=3/4+1/8, angle=90)
    }

    # default piecepack, orthogonal projection
    draw_pp_diagram(cfg=pp_cfg())
  }
  if (requireNamespace("grid", quietly = TRUE) &amp;&amp; piecepackr:::device_supports_unicode()) {
    # custom configuration, orthogonal projection
    grid::grid.newpage()
    dark_colorscheme &lt;- list(suit_color="darkred,black,darkgreen,darkblue,black",
                         invert_colors.suited=TRUE, border_color="black", border_lex=2)
    traditional_ranks &lt;- list(use_suit_as_ace=TRUE, rank_text=",a,2,3,4,5")
    cfg &lt;- c(dark_colorscheme, traditional_ranks)
    draw_pp_diagram(cfg=pp_cfg(cfg))
  }
  if (requireNamespace("grid", quietly = TRUE) &amp;&amp; piecepackr:::device_supports_unicode()) {
    # custom configuration, oblique projection
    grid::grid.newpage()
    cfg3d &lt;- list(width.pawn=0.75, height.pawn=0.75, depth.pawn=1,
                       dm_text.pawn="", shape.pawn="convex6", invert_colors.pawn=TRUE,
                       edge_color.coin="tan", edge_color.tile="tan")
    cfg &lt;- pp_cfg(c(cfg, cfg3d))
    draw_pp_diagram(cfg=pp_cfg(cfg), op_scale=0.5)
  }
</code></pre>


</div>
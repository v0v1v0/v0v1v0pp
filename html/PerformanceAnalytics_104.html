<div class="container">

<table style="width: 100%;"><tr>
<td>EWMAMoments</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Functions for calculating EWMA comoments of financial time series</h2>

<h3>Description</h3>

<p>calculates exponentially weighted moving average covariance, coskewness and cokurtosis matrices
</p>


<h3>Usage</h3>

<pre><code class="language-R">M2.ewma(R, lambda = 0.97, last.M2 = NULL, ...)

M3.ewma(R, lambda = 0.97, last.M3 = NULL, as.mat = TRUE, ...)

M4.ewma(R, lambda = 0.97, last.M4 = NULL, as.mat = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>an xts, vector, matrix, data frame, timeSeries or zoo object of
asset returns (with mean zero)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>decay coefficient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last.M2</code></td>
<td>
<p>last estimated covariance matrix before the observed returns R</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>any other passthru parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last.M3</code></td>
<td>
<p>last estimated coskewness matrix before the observed returns R</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.mat</code></td>
<td>
<p>TRUE/FALSE whether to return the full moment matrix or only
the vector with the unique elements (the latter is advised for speed), default
TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last.M4</code></td>
<td>
<p>last estimated cokurtosis matrix before the observed returns R</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The coskewness and cokurtosis matrices are defined as the matrices of dimension 
p x p^2 and p x p^3 containing the third and fourth order central moments. They
are useful for measuring nonlinear dependence between different assets of the 
portfolio and computing modified VaR and modified ES of a portfolio.
</p>
<p>EWMA estimation of the covariance matrix was popularized by the RiskMetrics report in 1996.
The M3.ewma and M4.ewma are straightforward extensions to the setting of third and fourth
order central moments
</p>


<h3>Author(s)</h3>

<p>Dries Cornilly
</p>


<h3>References</h3>

<p>JP Morgan. Riskmetrics technical document. 1996.
</p>


<h3>See Also</h3>

<p><code>CoMoments</code> <br><code>ShrinkageMoments</code> <br><code>StructuredMoments</code> <br><code>MCA</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(edhec)

# EWMA estimation
# 'as.mat = F' would speed up calculations in higher dimensions
sigma &lt;- M2.ewma(edhec, 0.94)
m3 &lt;- M3.ewma(edhec, 0.94)
m4 &lt;- M4.ewma(edhec, 0.94)

# compute equal-weighted portfolio modified ES 
mu &lt;- colMeans(edhec)
p &lt;- length(mu)
ES(p = 0.95, portfolio_method = "component", weights = rep(1 / p, p), mu = mu, 
    sigma = sigma, m3 = m3, m4 = m4)

# compare to sample method
sigma &lt;- cov(edhec)
m3 &lt;- M3.MM(edhec)
m4 &lt;- M4.MM(edhec)
ES(p = 0.95, portfolio_method = "component", weights = rep(1 / p, p), mu = mu, 
    sigma = sigma, m3 = m3, m4 = m4)

</code></pre>


</div>
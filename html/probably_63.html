<div class="container">

<table style="width: 100%;"><tr>
<td>cal_validate_isotonic</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Measure performance with and without using isotonic regression calibration</h2>

<h3>Description</h3>

<p>This function uses resampling to measure the effect of calibrating predicted
values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cal_validate_isotonic(
  .data,
  truth = NULL,
  estimate = dplyr::starts_with(".pred"),
  metrics = NULL,
  save_pred = FALSE,
  ...
)

## S3 method for class 'resample_results'
cal_validate_isotonic(
  .data,
  truth = NULL,
  estimate = dplyr::starts_with(".pred"),
  metrics = NULL,
  save_pred = FALSE,
  ...
)

## S3 method for class 'rset'
cal_validate_isotonic(
  .data,
  truth = NULL,
  estimate = dplyr::starts_with(".pred"),
  metrics = NULL,
  save_pred = FALSE,
  ...
)

## S3 method for class 'tune_results'
cal_validate_isotonic(
  .data,
  truth = NULL,
  estimate = NULL,
  metrics = NULL,
  save_pred = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>An <code>rset</code> object or the results of <code>tune::fit_resamples()</code> with
a <code>.predictions</code> column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truth</code></td>
<td>
<p>The column identifier for the true class results
(that is a factor). This should be an unquoted column name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimate</code></td>
<td>
<p>A vector of column identifiers, or one of <code>dplyr</code> selector
functions to choose which variables contains the class probabilities. It
defaults to the prefix used by tidymodels (<code>.pred_</code>). The order of the
identifiers will be considered the same as the order of the levels of the
<code>truth</code> variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>A set of metrics passed created via <code>yardstick::metric_set()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_pred</code></td>
<td>
<p>Indicates whether to a column of post-calibration predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Options to pass to <code>cal_estimate_logistic()</code>, such as the <code>smooth</code>
argument.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are designed to calculate performance with and without
calibration. They use resampling to measure out-of-sample effectiveness.
There are two ways to pass the data in:
</p>

<ul>
<li>
<p> If you have a data frame of predictions, an <code>rset</code> object can be created
via <span class="pkg">rsample</span> functions. See the example below.
</p>
</li>
<li>
<p> If you have already made a resampling object from the original data and
used it with <code>tune::fit_resamples()</code>, you can pass that object to the
calibration function and it will use the same resampling scheme. If a
different resampling scheme should be used, run
<code>tune::collect_predictions()</code> on the object and use the process in the
previous bullet point.
</p>
</li>
</ul>
<p>Please note that these functions do not apply to <code>tune_result</code> objects. The
notion of "validation" implies that the tuning parameter selection has been
resolved.
</p>
<p><code>collect_predictions()</code> can be used to aggregate the metrics for analysis.
</p>


<h3>Value</h3>

<p>The original object with a <code>.metrics_cal</code> column and, optionally,
an additional <code>.predictions_cal</code> column. The class <code>cal_rset</code> is also added.
</p>


<h3>Performance Metrics</h3>

<p>By default, the average of the Brier scores (classification calibration) or the
root mean squared error (regression) is returned. Any appropriate
<code>yardstick::metric_set()</code> can be used. The validation function compares the
average of the metrics before, and after the calibration.
</p>


<h3>See Also</h3>

<p><a href="https://www.tidymodels.org/learn/models/calibration/">https://www.tidymodels.org/learn/models/calibration/</a>,
<code>cal_estimate_isotonic()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)

segment_logistic %&gt;%
  rsample::vfold_cv() %&gt;%
  cal_validate_isotonic(Class)

</code></pre>


</div>
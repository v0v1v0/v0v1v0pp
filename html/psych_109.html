<div class="container">

<table style="width: 100%;"><tr>
<td>densityBy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a 'violin plot' or density plot of the distribution of a set of variables</h2>

<h3>Description</h3>

<p>Among the many ways to describe a data set, one is a density plot for each value of a grouping variable and another is violin plot of multiple variables.  A density plot shows the density for different groups to show effect sizes. A violin plot is similar 
to a box plot but shows the actual distribution.
Median and 25th and 75th percentile lines are added to the display. If a grouping variable is specified, violinBy will draw violin plots for each variable and for each group. Data points may be drawn as well in what is known as a "raincloud plot".
</p>


<h3>Usage</h3>

<pre><code class="language-R">
violin(x,data=NULL, var=NULL, grp=NULL, grp.name=NULL, xlab=NULL, ylab=NULL,
	main="Density plot", vertical=TRUE, dots=FALSE, rain=FALSE, jitter=.05, alpha=1,
	errors=FALSE, eyes=TRUE, adjust=1, restrict=TRUE, xlim=NULL, add=FALSE, 
	col=NULL, pch=20, scale=NULL,...) 
 
violinBy(x, var=NULL, grp=NULL, data=NULL, grp.name=NULL, xlab=NULL, ylab=NULL,
	main="Density plot", vertical=TRUE, dots=FALSE, rain=FALSE, jitter=.05, alpha= 1,
	errors=FALSE, eyes=TRUE, adjust=1, restrict=TRUE, xlim=NULL, add=FALSE, 
	col=NULL, pch=20, scale=NULL,...) 
 
densityBy(x, var=NULL, grp=NULL,data=NULL, freq=FALSE, col=c("blue","red","black"), 
	alpha=.5, adjust=1, ylim=NULL, xlim=NULL, xlab="Variable", ylab="Density",
     main="Density Plot",legend=NULL)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A matrix or data.frame (can be expressed in formula input)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>The variable(s) to display</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grp</code></td>
<td>
<p>The grouping variable(s) </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The name of the data object if using formula input</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grp.name</code></td>
<td>
<p>If the grouping variable is specified, then what names should be give to the group? Defaults to 1:ngrp</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>The y label</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>The x label</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Figure title</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vertical</code></td>
<td>
<p>If TRUE, plot the violins vertically, otherwise, horizontonally</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dots</code></td>
<td>
<p>if TRUE, add a stripchart with the data points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rain</code></td>
<td>
<p>If TRUE, draw a half violin with rain drops</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jitter</code></td>
<td>
<p>If doing a stripchart, then jitter the points this much</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>errors</code></td>
<td>
<p>If TRUE, add error bars or cats eyes to the violins</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eyes</code></td>
<td>
<p>if TRUE and errors=TRUE, then draw cats eyes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A degree of transparency (0=transparent ... 1 not transparent)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjust</code></td>
<td>
<p>Allows smoothing of density histograms when plotting variables like height</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>
<p>if TRUE, then plot frequencies (n * density)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>restrict</code></td>
<td>
<p>Restrict the density to the observed max and min of the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>if not specified, will be .5 beyond the number of variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>If not specified, determined by the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>Allows overplotting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Allows for specification of colours.  The default for 2 groups is 
blue and red, for more group levels, rainbows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>
<p>The plot character for the mean is by default a small filled circle.  To not show the mean, use pch=NA </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>If NULL, scale the widths by the square root of sample size, otherwise scale by the value supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>If not NULL, draw a legend at c(topleft,topright,top,left,right) </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other graphic parameters</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Describe the data using a violin plot. Change alpha to modify the shading.  
The grp variable may be used to draw separate violin plots for each of multiple groups.
</p>
<p>For relatively smallish data sets (&lt; 500-1000), it is informative to also show the actual data points. This done with the dots=TRUE option. The jitter value is arbitrarily set to .05, but making it larger (say .1 or .2) will display more points.
</p>
<p>Perhaps even prettier, is draw "raincloud" plots (half violins with rain drops)
</p>


<h3>Value</h3>

<p>The density (y axis) by value (x axis)  of the data  (for densityBy) or a violin plot for each variable (perhaps broken down by groups)
</p>


<h3>Note</h3>

<p>Formula input added July 12, 2020</p>


<h3>Author(s)</h3>

<p>William Revelle
</p>


<h3>See Also</h3>

  <p><code>describe</code>, <code>describeBy</code> and  <code>statsBy</code> for descriptive statistics and <code>error.bars</code>, <code>error.bars.by</code> and  <code>bi.bars</code>, <code>histBy</code> and <code>scatterHist</code> for other graphic displays </p>


<h3>Examples</h3>

<pre><code class="language-R">violin(bfi[4:8])
violin(SATV + SATQ ~ gender, data=sat.act, grp.name =cs(MV,FV,MQ,FQ)) #formula input
violinBy(bfi,var=4:7,grp ="gender",grp.name=c("M","F"))
#rain does not work for multiple DVS, just up to 2 IVs 
violinBy(SATV  ~ education,data =sat.act, rain=TRUE, pch=".", vertical=FALSE)  #rain 

densityBy(SATV  ~ gender,data =sat.act,legend=1)  #formula input 

  
</code></pre>


</div>
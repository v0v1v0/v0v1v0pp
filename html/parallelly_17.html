<div class="container">

<table style="width: 100%;"><tr>
<td>availableConnections</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Number of Available and Free Connections</h2>

<h3>Description</h3>

<p>The number of connections that can be open at the same time in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is
<em>typically</em> 128, where the first three are occupied by the always open
<code>stdin()</code>, <code>stdout()</code>, and <code>stderr()</code> connections, which leaves 125 slots
available for other types of connections.  Connections are used in many
places, e.g. reading and writing to file, downloading URLs, communicating
with parallel <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> processes over a socket connections (e.g.
<code>parallel::makeCluster()</code> and <code>makeClusterPSOCK()</code>), and capturing
standard output via text connections (e.g. <code>utils::capture.output()</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">availableConnections()

freeConnections()
</code></pre>


<h3>Value</h3>

<p>A non-negative integer, or <code>+Inf</code> if the available number of connections
is greater than 16384, which is a limit be set via option
<code>parallelly.availableConnections.tries</code>.
</p>


<h3>How to increase the limit</h3>

<p>In R (&gt;= 4.4.0), it is possible to <em>increase</em> the limit of 128 connections
to a greater number via command-line option <code>--max-connections=N</code>, e.g.
</p>
<div class="sourceCode r"><pre>$ Rscript -e "parallelly::availableConnections()"
[1] 128

$ Rscript --max-connections=512 -e "parallelly::availableConnections()"
[1] 512
</pre></div>
<p>For R (&lt; 4.4.0), the limit can only be changed by rebuilding <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> from
source, because the limited is hardcoded as a
</p>
<div class="sourceCode c"><pre>#define NCONNECTIONS 128
</pre></div>
<p>in ‘<span class="file">src/main/connections.c</span>’.
</p>


<h3>How the limit is identified</h3>

<p>Since the limit <em>might</em> changed, for instance in custom <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> builds or in
future releases of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, we do not want to assume that the limit is 128 for
all <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> installation.  Unfortunately, it is not possible to query <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> for what
the limit is.
Instead, <code>availableConnections()</code> infers it from trial-and-error.
until it fails.  For efficiency, the result is memoized throughout the
current <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session.
</p>


<h3>References</h3>


<ol><li>
<p> 'WISH: Increase limit of maximum number of open connections (currently 125+3)', 2016-07-09,
<a href="https://github.com/HenrikBengtsson/Wishlist-for-R/issues/28">https://github.com/HenrikBengtsson/Wishlist-for-R/issues/28</a>
</p>
</li></ol>
<h3>See Also</h3>

<p><code>base::showConnections()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">total &lt;- availableConnections()
message("You can have ", total, " connections open in this R installation")
free &lt;- freeConnections()
message("There are ", free, " connections remaining")

</code></pre>


</div>
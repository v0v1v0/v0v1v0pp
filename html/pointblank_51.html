<div class="container">

<table style="width: 100%;"><tr>
<td>email_create</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an email object from a <strong>pointblank</strong> <em>agent</em>
</h2>

<h3>Description</h3>

<p>The <code>email_create()</code> function produces an email message object that could be
sent using the <strong>blastula</strong> package. By supplying a <strong>pointblank</strong> agent, a
<strong>blastula</strong> <code>email_message</code> message object will be created and printing it
will make the HTML email message appear in the Viewer.
</p>


<h3>Usage</h3>

<pre><code class="language-R">email_create(
  x,
  msg_header = NULL,
  msg_body = stock_msg_body(),
  msg_footer = stock_msg_footer()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><em>The pointblank agent object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;ptblank_agent&gt;⁠</code> // <strong>required</strong>
</p>
<p>A <strong>pointblank</strong> <em>agent</em> object that is commonly created through the use of
the <code>create_agent()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>msg_header, msg_body, msg_footer</code></td>
<td>
<p>Content for the header, body, and
footer components of the HTML email message.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <strong>blastula</strong> <code>email_message</code> object.
</p>


<h3>Examples</h3>

<p>For the example provided here, we'll use the included <code>small_table</code> dataset.
We are also going to create an <code>action_levels()</code> list object since this is
useful for demonstrating an emailing scenario. It will have absolute values
for the <code>warn</code> and <code>notify</code> states (with thresholds of <code>1</code> and <code>2</code> 'fail'
units, respectively, for the two states).
</p>
<div class="sourceCode r"><pre>al &lt;- 
  action_levels(
    warn_at = 1,
    notify_at = 2
  )
</pre></div>
<p>In a workflow that involves an <code>agent</code> object, we can make use of the
<code>end_fns</code> argument and programmatically email the report with the
<code>email_blast()</code> function. However, an alternate workflow that is demonstrated
here is to produce the email object directly. This provides the flexibility
to send the email outside of the <strong>pointblank</strong> API. The <code>email_create()</code>
function lets us do this with an <code>agent</code> object. We can then view the HTML
email just by printing <code>email_object</code>. It should appear in the Viewer.
</p>
<div class="sourceCode r"><pre>email_object &lt;-
  create_agent(
    tbl = small_table,
    tbl_name = "small_table",
    label = "An example.",
    actions = al
  ) %&gt;%
  col_vals_gt(a, value = 1) %&gt;%
  col_vals_lt(a, value = 7) %&gt;%
  interrogate() %&gt;%
  email_create()
  
email_object
</pre></div>


<img src="https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_email_create_1.png" alt="This image was generated from the first code example in the `email_create()` help file." style="width:100%;"><h3>Function ID</h3>

<p>4-2
</p>


<h3>See Also</h3>

<p>Other Emailing: 
<code>email_blast()</code>,
<code>stock_msg_body()</code>,
<code>stock_msg_footer()</code>
</p>


</div>
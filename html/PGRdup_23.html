<div class="container">

<table style="width: 100%;"><tr>
<td>ViewProbDup</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualize the probable duplicate sets retrieved in a <code>ProbDup</code> object</h2>

<h3>Description</h3>

<p><code>ViewProbDup</code> plots summary visualizations of accessions within the
probable duplicate sets retrieved in a <code>ProbDup</code> object according to a 
grouping factor field(column) in the original database(s).
</p>


<h3>Usage</h3>

<pre><code class="language-R">ViewProbDup(
  pdup,
  db1,
  db2 = NULL,
  factor.db1,
  factor.db2 = NULL,
  max.count = 30,
  select,
  order = "type",
  main = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pdup</code></td>
<td>
<p>An object of class <code>ProbDup</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db1</code></td>
<td>
<p>A data frame of the PGR passport database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db2</code></td>
<td>
<p>A data frame of the PGR passport database. Required when 
<code>pdup</code> was created using more than one KWIC Index.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor.db1</code></td>
<td>
<p>The <code>db1</code> column to be considered for grouping the 
accessions. Should be of class character or factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor.db2</code></td>
<td>
<p>The <code>db2</code> column to be considered for grouping the 
accessions. Should be of class character or factor. retrieved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.count</code></td>
<td>
<p>The maximum count of probable duplicate sets whose 
information is to be plotted (see <strong>Note</strong>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>A character vector of factor names in <code>factor.db1</code> and/or 
<code>factor.db2</code> to be considered for grouping accessions (see 
<strong>Note</strong>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>The order of the type of sets retrieved in the plot. The default
is <code>"type"</code> (see <strong>Details</strong>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>The title of the plot.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the following objects: </p>

<table>
<tr>
<td style="text-align: left;"> 
  <code>Summary1</code> </td>
<td style="text-align: left;"> The summary <code>data.frame</code> of number of accessions 
  per factor level. </td>
</tr>
<tr>
<td style="text-align: left;"> <code>Summary2</code> </td>
<td style="text-align: left;"> The summary <code>data.frame</code> of
  number of accessions and sets per each type of sets classified according to
  factor levels. </td>
</tr>
<tr>
<td style="text-align: left;"> <code>SummaryGrob</code> </td>
<td style="text-align: left;"> A grid graphical object (Grob) 
  of the summary visualization plot. Can be plotted using the <code>grid.arrange</code> function </td>
</tr>
<tr>
<td style="text-align: left;"> </td>
</tr>
</table>
<h3>Note</h3>

<p>When any primary ID/key records in the fuzzy, phonetic or semantic 
duplicate sets are found to be missing from the original databases 
<code>db1</code> and <code>db2</code>, then they are ignored and only the matching 
records are considered for visualization.
</p>
<p>This may be due to data standardization of the primary ID/key field using 
the function <code>DataClean</code> before creation of the KWIC 
index and subsequent identification of probable duplicate sets. In such a 
case, it is recommended to use an identical data standardization operation 
on the databases <code>db1</code> and <code>db2</code> before running this function. 
For summary and visualization of the set information in the object of class
<code>ProbDup</code> by <code>ViewProbDup</code>, the disjoint of the retrieved sets 
are made use of, as they are more meaningful than the raw sets retrieved. 
So it is recommended that the disjoint of sets obtained using the 
<code>DisProbDup</code> be used as the input <code>pdup</code>.
</p>
<p>All the accession records in sets with count &gt; <code>max.count</code> will be 
considered as being unique.
</p>
<p>The factor levels in the <code>factor.db1</code> and/or <code>factor.db2</code> columns
corresponding to those mentioned in <code>select</code> argument alone will be 
considered for visualization. All other factor levels will be grouped 
together to a single level named "Others".
</p>
<p>The argument <code>order</code> can be used to specify the order in which the 
type of sets retrieved are to be plotted in the visualization. The default 
<code>"type"</code> will order according to the kind of sets, <code>"sets"</code> will 
order according to the number of sets in each kind and <code>"acc"</code> will 
order according to the number of accessions in each kind.
</p>
<p>The individual plots are made using <code>ggplot</code> and then 
grouped together using <code>gridExtra-package</code>.
</p>


<h3>See Also</h3>

<p><code>ProbDup</code>, <code>DisProbDup</code>, 
<code>DataClean</code>, <code>ggplot</code>, 
<code>gridExtra-package</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">


## Not run: 

# Method "b and c"
#=================

# Load PGR passport databases
GN1 &lt;- GN1000[!grepl("^ICG", GN1000$DonorID), ]
GN1$DonorID &lt;- NULL
GN2 &lt;- GN1000[grepl("^ICG", GN1000$DonorID), ]
GN2 &lt;- GN2[!grepl("S", GN2$DonorID), ]
GN2$NationalID &lt;- NULL

GN1$SourceCountry &lt;- toupper(GN1$SourceCountry)
GN2$SourceCountry &lt;- toupper(GN2$SourceCountry)

GN1$SourceCountry &lt;- gsub("UNITED STATES OF AMERICA", "USA", GN1$SourceCountry)
GN2$SourceCountry &lt;- gsub("UNITED STATES OF AMERICA", "USA", GN2$SourceCountry)

# Specify as a vector the database fields to be used
GN1fields &lt;- c("NationalID", "CollNo", "OtherID1", "OtherID2")
GN2fields &lt;- c("DonorID", "CollNo", "OtherID1", "OtherID2")

# Clean the data
GN1[GN1fields] &lt;- lapply(GN1[GN1fields], function(x) DataClean(x))
GN2[GN2fields] &lt;- lapply(GN2[GN2fields], function(x) DataClean(x))
y1 &lt;- list(c("Gujarat", "Dwarf"), c("Castle", "Cary"), c("Small", "Japan"),
           c("Big", "Japan"), c("Mani", "Blanco"), c("Uganda", "Erect"),
           c("Mota", "Company"))
y2 &lt;- c("Dark", "Light", "Small", "Improved", "Punjab", "SAM")
y3 &lt;- c("Local", "Bold", "Cary", "Mutant", "Runner", "Giant", "No.",
        "Bunch", "Peanut")
GN1[GN1fields] &lt;- lapply(GN1[GN1fields], function(x) MergeKW(x, y1, delim = c("space", "dash")))
GN1[GN1fields] &lt;- lapply(GN1[GN1fields], function(x) MergePrefix(x, y2, delim = c("space", "dash")))
GN1[GN1fields] &lt;- lapply(GN1[GN1fields], function(x) MergeSuffix(x, y3, delim = c("space", "dash")))
GN2[GN2fields] &lt;- lapply(GN2[GN2fields], function(x) MergeKW(x, y1, delim = c("space", "dash")))
GN2[GN2fields] &lt;- lapply(GN2[GN2fields], function(x) MergePrefix(x, y2, delim = c("space", "dash")))
GN2[GN2fields] &lt;- lapply(GN2[GN2fields], function(x) MergeSuffix(x, y3, delim = c("space", "dash")))

# Remove duplicated DonorID records in GN2
GN2 &lt;- GN2[!duplicated(GN2$DonorID), ]

# Generate KWIC index
GN1KWIC &lt;- KWIC(GN1, GN1fields)
GN2KWIC &lt;- KWIC(GN2, GN2fields)

# Specify the exceptions as a vector
exep &lt;- c("A", "B", "BIG", "BOLD", "BUNCH", "C", "COMPANY", "CULTURE",
          "DARK", "E", "EARLY", "EC", "ERECT", "EXOTIC", "FLESH", "GROUNDNUT",
          "GUTHUKAI", "IMPROVED", "K", "KUTHUKADAL", "KUTHUKAI", "LARGE",
          "LIGHT", "LOCAL", "OF", "OVERO", "P", "PEANUT", "PURPLE", "R",
          "RED", "RUNNER", "S1", "SAM", "SMALL", "SPANISH", "TAN", "TYPE",
          "U", "VALENCIA", "VIRGINIA", "WHITE")

# Specify the synsets as a list
syn &lt;- list(c("CHANDRA", "AH114"), c("TG1", "VIKRAM"))

GNdupc &lt;- ProbDup(kwic1 = GN1KWIC, kwic2 = GN2KWIC, method = "c",
                  excep = exep, fuzzy = TRUE, phonetic = TRUE,
                  encoding = "primary", semantic = TRUE, syn = syn)

GNdupcView &lt;- ViewProbDup(GNdupc, GN1, GN2, "SourceCountry", "SourceCountry",
                         max.count = 30, select = c("INDIA", "USA"), order = "type",
                         main = "Groundnut Probable Duplicates")

library(gridExtra)                                                    
grid.arrange(GNdupcView$SummaryGrob)                          


## End(Not run)   


    
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>get_agent_x_list</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get the agent's <strong>x-list</strong>
</h2>

<h3>Description</h3>

<p>The agent's <strong>x-list</strong> is a record of information that the agent possesses at
any given time. The <strong>x-list</strong> will contain the most complete information
after an interrogation has taken place (before then, the data largely
reflects the validation plan). The <strong>x-list</strong> can be constrained to a
particular validation step (by supplying the step number to the <code>i</code>
argument), or, we can get the information for all validation steps by leaving
<code>i</code> unspecified. The <strong>x-list</strong> is indeed an R <code>list</code> object that contains a
veritable cornucopia of information.
</p>
<p>For an <strong>x-list</strong> obtained with <code>i</code> specified for a validation step, the
following components are available:
</p>

<ul>
<li> <p><code>time_start</code>: the time at which the interrogation began
(<code style="white-space: pre;">⁠POSIXct [0 or 1]⁠</code>)
</p>
</li>
<li> <p><code>time_end</code>: the time at which the interrogation ended
(<code style="white-space: pre;">⁠POSIXct [0 or 1]⁠</code>)
</p>
</li>
<li> <p><code>label</code>: the optional label given to the agent (<code>chr [1]</code>)
</p>
</li>
<li> <p><code>tbl_name</code>: the name of the table object, if available (<code>chr [1]</code>)
</p>
</li>
<li> <p><code>tbl_src</code>: the type of table used in the validation (<code>chr [1]</code>)
</p>
</li>
<li> <p><code>tbl_src_details</code>: if the table is a database table, this provides
further details for the DB table (<code>chr [1]</code>)
</p>
</li>
<li> <p><code>tbl</code>: the table object itself
</p>
</li>
<li> <p><code>col_names</code>: the table's column names (<code>chr [ncol(tbl)]</code>)
</p>
</li>
<li> <p><code>col_types</code>: the table's column types (<code>chr [ncol(tbl)]</code>)
</p>
</li>
<li> <p><code>i</code>: the validation step index (<code>int [1]</code>)
</p>
</li>
<li> <p><code>type</code>: the type of validation, value is validation function name
(<code>chr [1]</code>)
</p>
</li>
<li> <p><code>columns</code>: the columns specified for the validation function
(<code style="white-space: pre;">⁠chr [variable length]⁠</code>)
</p>
</li>
<li> <p><code>values</code>: the values specified for the validation function
(<code style="white-space: pre;">⁠mixed types [variable length]⁠</code>)
</p>
</li>
<li> <p><code>briefs</code>: the brief for the validation step in the specified <code>lang</code>
(<code>chr [1]</code>)
</p>
</li>
<li> <p><code>eval_error</code>, <code>eval_warning</code>: indicates whether the evaluation of the
step function, during interrogation, resulted in an error or a warning
(<code>lgl [1]</code>)
</p>
</li>
<li> <p><code>capture_stack</code>: a list of captured errors or warnings during
step-function evaluation at interrogation time (<code>list [1]</code>)
</p>
</li>
<li> <p><code>n</code>: the number of test units for the validation step (<code>num [1]</code>)
</p>
</li>
<li> <p><code>n_passed</code>, <code>n_failed</code>: the number of passing and failing test units
for the validation step (<code>num [1]</code>)
</p>
</li>
<li> <p><code>f_passed</code>: the fraction of passing test units for the validation step,
<code>n_passed</code> / <code>n</code> (<code>num [1]</code>)
</p>
</li>
<li> <p><code>f_failed</code>: the fraction of failing test units for the validation step,
<code>n_failed</code> / <code>n</code> (<code>num [1]</code>)
</p>
</li>
<li> <p><code>warn</code>, <code>stop</code>, <code>notify</code>: a logical value indicating whether the level
of failing test units caused the corresponding conditions to be entered
(<code>lgl [1]</code>)
</p>
</li>
<li> <p><code>lang</code>: the two-letter language code that indicates which
language should be used for all briefs, the agent report, and the reporting
generated by the <code>scan_data()</code> function (<code>chr [1]</code>)
</p>
</li>
</ul>
<p>If <code>i</code> is unspecified (i.e., not constrained to a specific validation step)
then certain length-one components in the <strong>x-list</strong> will be expanded to the
total number of validation steps (these are: <code>i</code>, <code>type</code>, <code>columns</code>,
<code>values</code>, <code>briefs</code>, <code>eval_error</code>, <code>eval_warning</code>, <code>capture_stack</code>, <code>n</code>,
<code>n_passed</code>, <code>n_failed</code>, <code>f_passed</code>, <code>f_failed</code>, <code>warn</code>, <code>stop</code>, and
<code>notify</code>). The <strong>x-list</strong> will also have additional components when <code>i</code> is
<code>NULL</code>, which are:
</p>

<ul>
<li> <p><code>report_object</code>: a <strong>gt</strong> table object, which is also presented as the
default print method for a <code>ptblank_agent</code>
</p>
</li>
<li> <p><code>email_object</code>: a <strong>blastula</strong> <code>email_message</code> object with a default
set of components
</p>
</li>
<li> <p><code>report_html</code>: the HTML source for the <code>report_object</code>, provided as
a length-one character vector
</p>
</li>
<li> <p><code>report_html_small</code>: the HTML source for a narrower, more condensed
version of <code>report_object</code>, provided as a length-one character vector; The
HTML has inlined styles, making it more suitable for email message bodies
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">get_agent_x_list(agent, i = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>agent</code></td>
<td>
<p><em>The pointblank agent object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;ptblank_agent&gt;⁠</code> // <strong>required</strong>
</p>
<p>A <strong>pointblank</strong> <em>agent</em> object that is commonly created through the use of
the <code>create_agent()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p><em>A validation step number</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>The validation step number, which is assigned to each validation step in
the order of invocation. If <code>NULL</code> (the default), the <strong>x-list</strong> will
provide information for all validation steps. If a valid step number is
provided then <strong>x-list</strong> will have information pertaining only to that
step.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>x_list</code> object.
</p>


<h3>Examples</h3>

<p>Create a simple data frame with a column of numerical values.
</p>
<div class="sourceCode r"><pre>tbl &lt;- dplyr::tibble(a = c(5, 7, 8, 5))

tbl
#&gt; # A tibble: 4 x 1
#&gt;       a
#&gt;   &lt;dbl&gt;
#&gt; 1     5
#&gt; 2     7
#&gt; 3     8
#&gt; 4     5
</pre></div>
<p>Create an <code>action_levels()</code> list with fractional values for the <code>warn</code>,
<code>stop</code>, and <code>notify</code> states.
</p>
<div class="sourceCode r"><pre>al &lt;-
  action_levels(
    warn_at = 0.2,
    stop_at = 0.8,
    notify_at = 0.345
  )
</pre></div>
<p>Create an agent (giving it the <code>tbl</code> and the <code>al</code> objects), supply two
validation step functions, then interrogate.
</p>
<div class="sourceCode r"><pre>agent &lt;-
  create_agent(
    tbl = tbl,
    actions = al
  ) %&gt;%
  col_vals_gt(columns = a, value = 7) %&gt;%
  col_is_numeric(columns = a) %&gt;%
  interrogate()
</pre></div>
<p>Get the <code>f_passed</code> component of the agent x-list.
</p>
<div class="sourceCode r"><pre>x &lt;- get_agent_x_list(agent)

x$f_passed
</pre></div>
<div class="sourceCode"><pre>#&gt; [1] 0.25 1.00
</pre></div>


<h3>Function ID</h3>

<p>8-1
</p>


<h3>See Also</h3>

<p>Other Post-interrogation: 
<code>all_passed()</code>,
<code>get_data_extracts()</code>,
<code>get_sundered_data()</code>,
<code>write_testthat_file()</code>
</p>


</div>
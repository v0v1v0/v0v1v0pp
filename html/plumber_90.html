<div class="container">

<table style="width: 100%;"><tr>
<td>serializer_headers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plumber Serializers</h2>

<h3>Description</h3>

<p>Serializers are used in Plumber to transform the R object produced by a
filter/endpoint into an HTTP response that can be returned to the client. See
<a href="https://www.rplumber.io/articles/rendering-output.html#serializers-1">here</a> for
more details on Plumber serializers and how to customize their behavior.
</p>


<h3>Usage</h3>

<pre><code class="language-R">serializer_headers(headers = list(), serialize_fn = identity)

serializer_content_type(type, serialize_fn = identity)

serializer_octet(..., type = "application/octet-stream")

serializer_csv(..., type = "text/csv; charset=UTF-8")

serializer_tsv(..., type = "text/tab-separated-values; charset=UTF-8")

serializer_html(type = "text/html; charset=UTF-8")

serializer_json(..., type = "application/json")

serializer_unboxed_json(auto_unbox = TRUE, ..., type = "application/json")

serializer_geojson(..., type = "application/geo+json")

serializer_rds(version = "2", ascii = FALSE, ..., type = "application/rds")

serializer_feather(type = "application/vnd.apache.arrow.file")

serializer_parquet(type = "application/vnd.apache.parquet")

serializer_yaml(..., type = "text/x-yaml; charset=UTF-8")

serializer_text(
  ...,
  serialize_fn = as.character,
  type = "text/plain; charset=UTF-8"
)

serializer_format(..., type = "text/plain; charset=UTF-8")

serializer_print(..., type = "text/plain; charset=UTF-8")

serializer_cat(..., type = "text/plain; charset=UTF-8")

serializer_write_file(type, write_fn, fileext = NULL)

serializer_htmlwidget(..., type = "text/html; charset=UTF-8")

serializer_device(type, dev_on, dev_off = grDevices::dev.off)

serializer_jpeg(..., type = "image/jpeg")

serializer_png(..., type = "image/png")

serializer_svg(..., type = "image/svg+xml")

serializer_bmp(..., type = "image/bmp")

serializer_tiff(..., type = "image/tiff")

serializer_pdf(..., type = "application/pdf")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>headers</code></td>
<td>
<p><code>list()</code> of headers to add to the response object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>serialize_fn</code></td>
<td>
<p>Function to serialize the data. The result object will be converted to a character string. Ex: <code>jsonlite::toJSON()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The value to provide for the <code>Content-Type</code> HTTP header.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments supplied to respective internal serialization function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auto_unbox</code></td>
<td>
<p>automatically <code>unbox()</code> all atomic vectors of length 1. It is usually safer to avoid this and instead use the <code>unbox()</code> function to unbox individual elements.
An exception is that objects of class <code>AsIs</code> (i.e. wrapped in <code>I()</code>) are not automatically unboxed. This is a way to mark single values as length-1 arrays.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>the workspace format version to use.  <code>NULL</code>
specifies the current default version (3). The only other supported
value is 2, the default from <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 1.4.0 to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 3.5.0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ascii</code></td>
<td>
<p>a logical.  If <code>TRUE</code> or <code>NA</code>, an ASCII
representation is written; otherwise (default) a binary one.
See also the comments in the help for <code>save</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write_fn</code></td>
<td>
<p>Function that should write serialized content to the temp file provided. <code>write_fn</code> should have the function signature of <code>function(value, tmp_file){}</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileext</code></td>
<td>
<p>A non-empty character vector giving the file extension. This value will try to be inferred from the content type provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dev_on</code></td>
<td>
<p>Function to turn on a graphics device.
The graphics device <code>dev_on</code> function will receive any arguments supplied to the serializer in addition to <code>filename</code>.
<code>filename</code> points to the temporary file name that should be used when saving content.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dev_off</code></td>
<td>
<p>Function to turn off the graphics device. Defaults to <code>grDevices::dev.off()</code></p>
</td>
</tr>
</table>
<h3>Functions</h3>


<ul>
<li> <p><code>serializer_headers()</code>: Add a static list of headers to each return value. Will add <code>Content-Disposition</code> header if a value is the result of <code>as_attachment()</code>.
</p>
</li>
<li> <p><code>serializer_content_type()</code>: Adds a <code>Content-Type</code> header to the response object
</p>
</li>
<li> <p><code>serializer_octet()</code>: Octet serializer. If content is received that does
not have a <code>"raw"</code> type, then an error will be thrown.
</p>
</li>
<li> <p><code>serializer_csv()</code>: CSV serializer. See also: <code>readr::format_csv()</code>
</p>
</li>
<li> <p><code>serializer_tsv()</code>: TSV serializer. See also: <code>readr::format_tsv()</code>
</p>
</li>
<li> <p><code>serializer_html()</code>: HTML serializer
</p>
</li>
<li> <p><code>serializer_json()</code>: JSON serializer. See also: <code>jsonlite::toJSON()</code>
</p>
</li>
<li> <p><code>serializer_unboxed_json()</code>: JSON serializer with <code>auto_unbox</code> defaulting to <code>TRUE</code>. See also: <code>jsonlite::toJSON()</code>
</p>
</li>
<li> <p><code>serializer_geojson()</code>: GeoJSON serializer. See also <code>geojsonsf::sf_geojson()</code> and [<code>geojsonsf::sfc_geojson()</code>].
</p>
</li>
<li> <p><code>serializer_rds()</code>: RDS serializer. See also: <code>base::serialize()</code>
</p>
</li>
<li> <p><code>serializer_feather()</code>: feather serializer. See also: <code>arrow::write_feather()</code>
</p>
</li>
<li> <p><code>serializer_parquet()</code>: parquet serializer. See also: <code>arrow::write_parquet()</code>
</p>
</li>
<li> <p><code>serializer_yaml()</code>: YAML serializer. See also: <code>yaml::as.yaml()</code>
</p>
</li>
<li> <p><code>serializer_text()</code>: Text serializer. See also: <code>as.character()</code>
</p>
</li>
<li> <p><code>serializer_format()</code>: Text serializer. See also: <code>format()</code>
</p>
</li>
<li> <p><code>serializer_print()</code>: Text serializer. Captures the output of <code>print()</code>
</p>
</li>
<li> <p><code>serializer_cat()</code>: Text serializer. Captures the output of <code>cat()</code>
</p>
</li>
<li> <p><code>serializer_write_file()</code>: Write output to a temp file whose contents are read back as a serialized response. <code>serializer_write_file()</code> creates (and cleans up) a temp file, calls the serializer (which should write to the temp file), and then reads the contents back as the serialized value.  If the content <code>type</code> starts with <code>"text"</code>, the return result will be read into a character string, otherwise the result will be returned as a raw vector.
</p>
</li>
<li> <p><code>serializer_htmlwidget()</code>: htmlwidget serializer. See also: <code>htmlwidgets::saveWidget()</code>
</p>
</li>
<li> <p><code>serializer_device()</code>: Helper method to create graphics device serializers, such as <code>serializer_png()</code>. See also: <code>endpoint_serializer()</code>
</p>
</li>
<li> <p><code>serializer_jpeg()</code>: JPEG image serializer. See also: <code>grDevices::jpeg()</code>
</p>
</li>
<li> <p><code>serializer_png()</code>: PNG image serializer. See also: <code>grDevices::png()</code>
</p>
</li>
<li> <p><code>serializer_svg()</code>: SVG image serializer. See also: <code>grDevices::svg()</code>
</p>
</li>
<li> <p><code>serializer_bmp()</code>: BMP image serializer. See also: <code>grDevices::bmp()</code>
</p>
</li>
<li> <p><code>serializer_tiff()</code>: TIFF image serializer. See also: <code>grDevices::tiff()</code>
</p>
</li>
<li> <p><code>serializer_pdf()</code>: PDF image serializer. See also: <code>grDevices::pdf()</code>
</p>
</li>
</ul>
</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>add_term</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Embeds the data set with the specified (relative) term contribution</h2>

<h3>Description</h3>

<p>Adds the contribution of a specific term to the
linear predictor to the data specified by <code>newdata</code>.
Essentially a wrapper to <code>predict.gam</code>, with <code>type="terms"</code>.
Thus most arguments and their documentation below is from <code>predict.gam</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_term(newdata, object, term, reference = NULL, ci = TRUE, se_mult = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p> A data frame or list containing the values of the model covariates at which predictions
are required. If this is not provided then predictions corresponding to the
original data are returned. If <code>newdata</code> is provided then
it should contain all the variables needed for prediction: a
warning is generated if not. See details for use with <code>link{linear.functional.terms}</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p> a fitted <code>gam</code> object as produced by <code>gam()</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>term</code></td>
<td>
<p>A character (vector) or regular expression indicating for
which term(s) information should be extracted and added to data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference</code></td>
<td>
<p>A data frame with number of rows equal to <code>nrow(newdata)</code> or
one, or a named list with (partial) covariate specifications. See examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p><code>logical</code>. Indicates if confidence intervals should be
calculated. Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se_mult</code></td>
<td>
<p>The factor by which standard errors are multiplied to form
confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to <code>predict.gam</code></p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)
ped &lt;- as_ped(tumor, Surv(days, status)~ age, cut = seq(0, 2000, by = 100))
pam &lt;- mgcv::gam(ped_status ~ s(tend) + s(age), family = poisson(),
  offset = offset, data = ped)
#term contribution for sequence of ages
s_age &lt;- ped %&gt;% make_newdata(age = seq_range(age, 50)) %&gt;%
  add_term(pam, term = "age")
ggplot(s_age, aes(x = age, y = fit)) + geom_line() +
  geom_ribbon(aes(ymin = ci_lower, ymax = ci_upper), alpha = .3)
# term contribution relative to mean age
s_age2 &lt;- ped %&gt;% make_newdata(age = seq_range(age, 50)) %&gt;%
  add_term(pam, term = "age", reference = list(age = mean(.$age)))
ggplot(s_age2, aes(x = age, y = fit)) + geom_line() +
  geom_ribbon(aes(ymin = ci_lower, ymax = ci_upper), alpha = .3)
</code></pre>


</div>
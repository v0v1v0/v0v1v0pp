<div class="container">

<table style="width: 100%;"><tr>
<td>addPolys</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Polygon PolySet to Existing Plot</h2>

<h3>Description</h3>

<p>Add a <code>PolySet</code> to an existing plot, where each unique (<code>PID</code>,
<code>SID</code>) describes a polygon.
</p>


<h3>Usage</h3>

<pre><code class="language-R">addPolys(polys, xlim = NULL, ylim = NULL, polyProps = NULL,
         border = NULL, lty = NULL, col = NULL, colHoles = NULL,
         density = NA, angle = NULL, ...)

.insertNAs(polys, idx)

.preparePolyProps(polysPID, polysSID, polyProps)

.rollupPolys(polys, rollupMode, exteriorCCW, closedPolys, addRetrace)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>polys</code></td>
<td>
<p><code>data.frame</code> – <code>PolySet</code> to add (<em>required</em>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p><code>numeric</code> – range of X-coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p><code>numeric</code> – range of Y-coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polyProps</code></td>
<td>
<p><code>data.frame</code> – <code>PolyData</code> specifying which polygons to plot and their
properties.  <code>par</code> parameters passed as direct arguments
supersede these data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p><code>character|numeric</code> – vector describing edge colours (cycled by <code>PID</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p><code>character|numeric</code> – vector describing line types (cycled by <code>PID</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p><code>character|numeric</code> – vector describing fill colours (cycled by <code>PID</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colHoles</code></td>
<td>
<p><code>character|numeric</code> – vector describing hole colours (cycled by <code>PID</code>).
The default, <code>NULL</code>, should be used in most cases as it renders holes 
transparent. <code>colHoles</code> is designed solely to eliminate retrace lines 
when images are converted to PDF format. If <code>colHoles</code> is specified, 
underlying information (i.e., previously plotted shapes) will be obliterated.
If <code>NA</code> is specified, only outer polygons are drawn, consequently filling holes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>
<p><code>numeric</code> – vector describing shading line densities (lines per
inch, cycled by <code>PID</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p><code>numeric</code> – vector describing shading line angles (degrees, cycled by
<code>PID</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><code>dots</code> – additional <code>par</code> parameters for the
<code>polygon</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idx</code></td>
<td>
<p><code>character|numeric</code> – index of <code>PID</code>s used to extract select 
polygons/polylines from a <code>PolySet</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polysPID</code></td>
<td>
<p><code>numeric</code> – vector of primary polygon identification numbers (<code>PID</code>s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polysSID</code></td>
<td>
<p><code>numeric</code> – vector of secondary polygon identification numbers (<code>SID</code>s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rollupMode</code></td>
<td>
<p><code>numeric</code> – method for rolling up a <code>PolySet</code>;
essentially controls when to introduce a new <code>PID</code> (or <code>PID,SID</code>). Options:<br><code>1</code> = roll-up to the <code>PID</code> level (only <code>PID</code>s in the result)<br><code>2</code> = roll-up to the outer contour level (only outer contours in the result)<br><code>3</code> = do not roll-up</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exteriorCCW</code></td>
<td>
<p><code>numeric</code> – modify orientation of vertices
(clockwise or counter-clockwise):<br><code>-1</code> = do not modify<br><code> 0</code>  = exterior should be clockwise<br><code>+1</code> = exterior should be counter-clockwise</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>closedPolys</code></td>
<td>
<p><code>numeric</code> – whether the last and first vertices should be the same:<br><code>-1</code> = do not modify<br><code> 0</code>  = ensure polygons do not close<br><code>+1</code> = close the polygons</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addRetrace</code></td>
<td>
<p><code>numeric</code> – determines whether to add retrace lines to 
the first vertex of the parent after outputting a child:<br><code>0</code> = do not add<br><code>1</code> = add</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The plotting routine connects the last vertex of each discrete polygon
to the first vertex of that polygon.  It supports both
borders (<code>border</code>, <code>lty</code>) and fills (<code>col</code>,
<code>density</code>, <code>angle</code>). It clips <code>polys</code> to <code>xlim</code>
and <code>ylim</code> before plotting.
</p>
<p>For additional help on the arguments <code>border</code>, <code>lty</code>,
<code>col</code>, <code>density</code>, and <code>angle</code>, please see
<code>polygon</code> and <code>par</code>.
</p>


<h3>Value</h3>

<p><code>PolyData</code> consisting of the <code>PolyProp</code>s used to create the plot.
</p>


<h3>Note</h3>

<p>Auxiliary dot function <code>'.insertNAs'</code> facilitates (hastens)
the plotting of polygons and polylines. It also reduces the incidence
of retrace lines.
</p>
<p>Auxiliary dot function <code>'.preparePolyProps'</code> performs
at least one of the following tasks:<br>
1) creates <code>'polyProps'</code> if it equals <code>NULL</code>;<br>
2) adds <code>'SID'</code> column to <code>'polyProps'</code> if one exists in <code>'polys'</code>;<br>
3) removes from <code>'polyProps'</code> any <code>PID</code>s that do not exist in <code>'polys'</code>.<br>
Returns a <code>polyProps</code> object.
</p>
<p>Auxiliary dot function <code>'.rollupPolys'</code> does not validate a <code>PolySet</code>;
returns a rolled-up <code>PolySet</code> or <code>NULL</code>.
</p>


<h3>Author(s)</h3>

<p><a href="https://github.com/boersn/">Nicholas M. Boers</a>,
Software Engineer, Jobber, Edmonton AB
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head – Offshore Rockfish<br>
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br><em>locus opus</em>: Remote office, Vancouver BC<br>
Last modified <code>Rd: 2024-09-03</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmapping</span>:<br><code>addLabels</code>,
<code>addLines</code> (also uses <code>'.preparePolyProps'</code> and <code>'.insertNAs'</code>),
<code>addPoints</code>,
<code>addStipples</code><br><code>'.rollupPolys'</code> is also called by:<br><code>calcArea</code>,
<code>calcCentroid</code>,
<code>calcLength</code>,
<code>calcSummary</code>,
<code>fixPOS</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">local(envir=.PBSmapEnv,expr={
  oldpar = par(no.readonly=TRUE)
  #--- create a PolySet to plot
  polys &lt;- data.frame(PID=rep(1,4),POS=1:4,X=c(0,1,1,0),Y=c(0,0,1,1))
  polys &lt;- as.PolySet(polys, projection=1)
  #--- plot the PolySet
  plotPolys(polys,xlim=c(-.5,1.5),ylim=c(-.5,1.5),density=0,projection=1)
  #--- add the PolySet to the plot (in a different style)
  addPolys(polys,col="green",border="blue",lwd=3)
  par(oldpar)
})
</code></pre>


</div>
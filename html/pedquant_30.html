<div class="container">

<table style="width: 100%;"><tr>
<td>pq_return</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>calculating returns by frequency</h2>

<h3>Description</h3>

<p><code>pq_return</code> calculates returns for daily series based on specified column, frequency and method type.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pq_return(dt, x, freq = "daily", n = 1, date_type = "eop",
  method = "arithmetic", cumreturns = FALSE, rcol_name = NULL,
  cols_keep = NULL, date_range = "max", from = NULL, to = Sys.Date(),
  ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dt</code></td>
<td>
<p>a list/dataframe of daily series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the column name of adjusted asset price.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>
<p>the frequency of returns. It supports 'daily', 'weekly', 'monthly', 'quarterly', 'yearly' and 'all'. Defaults to daily.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>the number of preceding periods used as the base value, defaults to 1, which means based on the previous period value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_type</code></td>
<td>
<p>the available date type are eop (end of period) and bop (beginning of period), defaults to the eop.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the method to calculate asset returns, the available methods including arithmetic and log, defaults to arithmetic.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cumreturns</code></td>
<td>
<p>logical, whether to return cumulative returns. Defaults to FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rcol_name</code></td>
<td>
<p>setting the column name of returns, defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols_keep</code></td>
<td>
<p>the columns keep in the return data. The columns of symbol, name and date will always kept if they are exist in the input data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_range</code></td>
<td>
<p>date range. Available value includes '1m'-'11m', 'ytd', 'max' and '1y'-'ny'. Default is max.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>the start date. Default is NULL. If it is NULL, then calculate using date_range and end date.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>the end date. Default is the current date.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
# load data and adjust
data(dt_banks)
datadj = md_stock_adjust(dt_banks)

# set freq
dts_returns1 = pq_return(datadj, x = 'close_adj', freq = 'all')

# set method
dts_returns2 = pq_return(datadj, x = 'close_adj', method = 'log')

# set cols_keep
dts_returns3 = pq_return(datadj, x = 'close_adj', cols_keep = 'cap_total')

# cumulative returns
dts_cumreturns = pq_return(datadj, x = 'close_adj', from = '2012-01-01', cumreturns = TRUE)
e1 = pq_plot(dts_cumreturns, y = 'cumreturns.daily', title='cumreturns', 
        arrange = list(rows=1, cols=1))
e1[[1]]


</code></pre>


</div>
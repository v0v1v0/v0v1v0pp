<div class="container">

<table style="width: 100%;"><tr>
<td>Validator</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R6 class representing a pattern-oriented validator.</h2>

<h3>Description</h3>

<p><code>R6</code> class for pattern-oriented validation and simulation
model ensemble selection. Pattern-oriented validation is a statistical
approach to compare patterns generated in simulations against observed
empirical patterns.
</p>
<p>The class wraps functionality for the validation approach,
typically utilizing an external library, the default being the approximate Bayesian
computation (ABC) <code>abc</code> library, and includes methods for
resolving non-finite metrics, centering and scaling the validator inputs, running
the validator analysis, and generating diagnostics (see <code>abc</code>).
</p>


<h3>Super classes</h3>

<p><code>poems::GenericClass</code> -&gt; <code>poems::GenericModel</code> -&gt; <code>Validator</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>attached</code></dt>
<dd>
<p>A list of dynamically attached attributes (name-value pairs).</p>
</dd>
</dl>
</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>model_attributes</code></dt>
<dd>
<p>A vector of model attribute names.</p>
</dd>
<dt><code>simulation_parameters</code></dt>
<dd>
<p>A data frame of sample model parameters for each simulation.</p>
</dd>
<dt><code>simulation_summary_metrics</code></dt>
<dd>
<p>A data frame of result summary metrics for each simulation.</p>
</dd>
<dt><code>observed_metric_targets</code></dt>
<dd>
<p>A vector of observed targets for each summary metric.</p>
</dd>
<dt><code>random_seed</code></dt>
<dd>
<p>A seed for randomizing the order of the simulation samples (no randomization is utilized when left NULL).</p>
</dd>
<dt><code>random_indices</code></dt>
<dd>
<p>Randomized simulation sample indices for the validator inputs and consequently the validator results when random seed is used.</p>
</dd>
<dt><code>non_finite_replacements</code></dt>
<dd>
<p>A list of numeric values or function names (character strings) or direct assignments (assigned or loaded via source paths) for replacing NAs in specified (list names) summary metrics.</p>
</dd>
<dt><code>input_center_scale_values</code></dt>
<dd>
<p>A nested list of center and scale values for validator input parameters/metrics.</p>
</dd>
<dt><code>output_dir</code></dt>
<dd>
<p>Directory path for validator (default: <code>abc</code>) regression diagnostic and other outputs.</p>
</dd>
<dt><code>validation_call_function</code></dt>
<dd>
<p>Dynamically assigned function: <code>function(observed_metric_targets, simulation_parameters, simulation_summary_metrics, tolerance, method, ...)</code> for calling the validation function (default calls <code>abc</code> library function).</p>
</dd>
<dt><code>validator_return_object</code></dt>
<dd>
<p>Object returned by the validator function (see <code>abc</code> documentation if using default).</p>
</dd>
<dt><code>selected_simulations</code></dt>
<dd>
<p>A data frame of simulation sample indices and weights selected/assigned by the validation function (<code>abc</code> by default).</p>
</dd>
<dt><code>attribute_aliases</code></dt>
<dd>
<p>A list of alternative alias names for model attributes (form: <code>alias = "attribute"</code>) to be used with the set and get attributes methods.</p>
</dd>
<dt><code>error_messages</code></dt>
<dd>
<p>A vector of error messages encountered when setting model attributes.</p>
</dd>
<dt><code>warning_messages</code></dt>
<dd>
<p>A vector of warning messages encountered when setting model attributes.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Validator-new"><code>Validator$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Validator-run"><code>Validator$run()</code></a>
</p>
</li>
<li> <p><a href="#method-Validator-resolve_nonfinite_metrics"><code>Validator$resolve_nonfinite_metrics()</code></a>
</p>
</li>
<li> <p><a href="#method-Validator-center_scale_inputs"><code>Validator$center_scale_inputs()</code></a>
</p>
</li>
<li> <p><a href="#method-Validator-generate_diagnostics"><code>Validator$generate_diagnostics()</code></a>
</p>
</li>
<li> <p><a href="#method-Validator-clone"><code>Validator$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attribute"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attribute"><code>poems::GenericModel$get_attribute()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attribute_aliases"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attribute_aliases"><code>poems::GenericModel$get_attribute_aliases()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attribute_names"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attribute_names"><code>poems::GenericModel$get_attribute_names()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attributes"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attributes"><code>poems::GenericModel$get_attributes()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="new_clone"><a href="../../poems/html/GenericModel.html#method-GenericModel-new_clone"><code>poems::GenericModel$new_clone()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="set_attributes"><a href="../../poems/html/GenericModel.html#method-GenericModel-set_attributes"><code>poems::GenericModel$set_attributes()</code></a></span></li>
</ul></details><hr>
<a id="method-Validator-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initialization method sets given attributes individually and/or from a list.
</p>


<h5>Usage</h5>

<div class="r"><pre>Validator$new(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt>
<dd>
<p>Parameters passed via a <em>params</em> list or individually.</p>
</dd>
<dt><code>template</code></dt>
<dd>
<p>Template population model containing fixed (non-sampled) attributes.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Validator-run"></a>



<h4>Method <code>run()</code>
</h4>

<p>Pre-processes inputs, runs validator function for input parameters, and stores the function (and optionally diagnostic) outputs (see <code>abc</code> documentation if using the default).
</p>


<h5>Usage</h5>

<div class="r"><pre>Validator$run(
  simulation_parameters = NULL,
  simulation_summary_metrics = NULL,
  observed_metric_targets = NULL,
  tolerance = 0.01,
  method = "neuralnet",
  output_diagnostics = FALSE,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>simulation_parameters</code></dt>
<dd>
<p>A data frame of sample model parameters for each simulation.</p>
</dd>
<dt><code>simulation_summary_metrics</code></dt>
<dd>
<p>A data frame of result summary metrics for each simulation.</p>
</dd>
<dt><code>observed_metric_targets</code></dt>
<dd>
<p>A vector of observed targets for each summary metric.</p>
</dd>
<dt><code>tolerance</code></dt>
<dd>
<p>Tolerance or proportion of models to select.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p>Validator algorithm to be applied (default is a neural network algorithm - see <code>abc</code> documentation) .</p>
</dd>
<dt><code>output_diagnostics</code></dt>
<dd>
<p>Boolean to indicate whether or not to output diagnostics (PDF file - default is FALSE).</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Additional validator parameters passed individually (see <code>abc</code> documentation if using default).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Validator-resolve_nonfinite_metrics"></a>



<h4>Method <code>resolve_nonfinite_metrics()</code>
</h4>

<p>Attempts to resolve any non-finite simulation summary metric values (and optionally changing them to NAs) via the non finite replacements parameter (a list of values/functions for replacing non-finite values).
</p>


<h5>Usage</h5>

<div class="r"><pre>Validator$resolve_nonfinite_metrics(use_nas = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>use_nas</code></dt>
<dd>
<p>Boolean to indicate whether or not to replace all non-finite values with NAs (default is TRUE).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Validator-center_scale_inputs"></a>



<h4>Method <code>center_scale_inputs()</code>
</h4>

<p>Centers and scales the model parameters, result summary metrics and observed targets.
</p>


<h5>Usage</h5>

<div class="r"><pre>Validator$center_scale_inputs()</pre></div>


<hr>
<a id="method-Validator-generate_diagnostics"></a>



<h4>Method <code>generate_diagnostics()</code>
</h4>

<p>Generates the validation diagnostics (see <code>abc</code> documentation if using default) as a PDF file in the output directory.
</p>


<h5>Usage</h5>

<div class="r"><pre>Validator$generate_diagnostics(output_dir = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>output_dir</code></dt>
<dd>
<p>Output directory path for the diagnostics PDF file (must be present if not already set within validator class object).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Validator-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Validator$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"># Example parameter sample data
sample_data &lt;- data.frame(
  growth_rate_max = round(log(seq(1.11, 1.30, 0.01)), 3),
  harvest_rate = seq(0.11, 0.30, 0.01),
  initial_n = seq(105, 200, 5),
  density_max = seq(132, 170, 2)
)
# Example simulation result summary metrics
summary_metric_data &lt;- data.frame(
  trend_n = seq(10, -9, -1),
  total_h = seq(70, 355, 15)
)
# Create a validator for selecting the 'best' example models
validator &lt;- Validator$new(
  simulation_parameters = sample_data,
  simulation_summary_metrics = summary_metric_data,
  observed_metric_targets = c(trend_n = 0, total_h = 250),
  output_dir = tempdir()
)
suppressWarnings(validator$run(tolerance = 0.25, output_diagnostics = TRUE))
dir(tempdir(), "*.pdf") # plus validation diagnostics (see abc library documentation)
validator$selected_simulations # top 5 models

</code></pre>


</div>
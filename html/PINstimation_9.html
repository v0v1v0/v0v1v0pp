<div class="container">

<table style="width: 100%;"><tr>
<td>detecting-layers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Layer detection in trade-data</h2>

<h3>Description</h3>

<p>Detects the number of information layers present in trade-data
using the algorithms in Ersan (2016),
Ersan and Ghachem (2022a),
and Ghachem and Ersan (2022a).
</p>


<h3>Usage</h3>

<pre><code class="language-R">detectlayers_e(data, confidence = 0.995, correction = TRUE)

detectlayers_eg(data, confidence = 0.995)

detectlayers_ecm(data, hyperparams = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataframe with 2 variables: the first
corresponds to buyer-initiated trades (buys), and the second corresponds
to seller-initiated trades (sells).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confidence</code></td>
<td>
<p>A number from <code style="white-space: pre;">⁠(0.5,1)⁠</code>, corresponding to the
range of the confidence interval used to determine whether a given cluster is
compact, and therefore can be considered an information layer.
If all values of absolute order imbalances (AOI) within a given cluster are
within the confidence interval of a Skellam distribution with level equal to
<code>'confidence'</code>, and centered on the mean of AOI, then the cluster is
considered compact, and, therefore, an information layer. If some
observations are outside the confidence interval, then the data is clustered
further. The default value is <code>0.995</code>. <code style="white-space: pre;">⁠[i]⁠</code> This is an argument of the
functions <code>detectlayers_e()</code>, and <code>detectlayers_eg()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correction</code></td>
<td>
<p>A binary variable that determines whether the
data will be adjusted prior to implementing the algorithm of
Ersan (2016). The default value is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hyperparams</code></td>
<td>
<p>A list containing the hyperparameters of the <code>ECM</code>
algorithm. When not empty, it contains one or more of the following
elements: <code>maxeval</code>, <code>tolerance</code>, <code>maxinit</code>, and <code>maxlayers</code>. More
about these elements are found in the Details section. <code style="white-space: pre;">⁠[i]⁠</code> This is
an argument of the function <code>detectlayers_ecm()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The argument 'data' should be a numeric dataframe, and contain
at least two variables. Only the first two variables will be considered:
The first variable is assumed to correspond to the total number of
buyer-initiated trades, while the second variable is assumed to
correspond to the total number of seller-initiated trades. Each row or
observation correspond to a trading day. <code>NA</code> values will be ignored.
</p>
<p>The argument <code>hyperparams</code>  contains the hyperparameters of the <code>ECM</code>
algorithm. It is either empty or contains one or more of the following
elements:
</p>

<ul>
<li> <p><code>maxeval</code>: (<code>integer</code>) It stands for maximum number of iterations
of the <code>ECM</code>  for each initial parameter set. When missing, <code>maxeval</code>
takes the default value of <code>100</code>.
</p>
</li>
<li> <p><code>tolerance</code> (<code>numeric</code>) The <code>ECM</code> algorithm is stopped when the
(relative) change of log-likelihood is smaller than tolerance. When
missing, <code>tolerance</code> takes the default value of <code>0.001</code>.
</p>
</li>
<li> <p><code>maxinit</code>: (<code>integer</code>) It is the maximum number of initial
parameter sets used for the <code>ECM</code> estimation per layer. When missing,
<code>maxinit</code> takes the default value of <code>20</code>.
</p>
</li>
<li> <p><code>maxlayers</code> (<code>integer</code>) It is the upper limit of number of layers
used in the ECM algorithm. To find the optimal number of layers, the ECM
algorithm will estimate a model for each value of the number of layers
between <code>1</code> and <code>maxlayers</code>, and then picks the model that has the lowest
Bayes information criterion (BIC). When missing, <code>maxlayers</code> takes the
default value of <code>8</code>.
</p>
</li>
</ul>
<h3>Value</h3>

<p>Returns an integer corresponding to the number of layers detected in
the data.
</p>


<h3>References</h3>

<p>Ersan O (2016).
“Multilayer Probability of Informed Trading.”
<em>Available at SSRN 2874420</em>.<br><br> Ersan O, Ghachem M (2022a).
“Identifying information types in probability of informed trading (PIN) models: An improved algorithm.”
<em>Available at SSRN 4117956</em>.<br><br> Ghachem M, Ersan O (2022a).
“Estimation of the probability of informed trading models via an expectation-conditional maximization algorithm.”
<em>Available at SSRN 4117952</em>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># There is a preloaded quarterly dataset called 'dailytrades' with 60
# observations. Each observation corresponds to a day and contains the
# total number of buyer-initiated trades ('B') and seller-initiated
# trades ('S') on that day. To know more, type ?dailytrades

xdata &lt;- dailytrades

# Detect the number of layers present in the dataset 'dailytrades' using the
# different algorithms and display the results

e.layers &lt;- detectlayers_e(xdata)
eg.layers &lt;- detectlayers_eg(xdata)
em.layers &lt;- detectlayers_ecm(xdata)

show(c(e = e.layers, eg = eg.layers, em = em.layers))

</code></pre>


</div>
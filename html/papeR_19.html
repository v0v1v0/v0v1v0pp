<div class="container">

<table style="width: 100%;"><tr>
<td>prettify</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make Pretty Summary and Anova Tables</h2>

<h3>Description</h3>

<p>Improve summary tables by replacing variable names with labels and
separating variable names and value labels of factor variables.
Additionally, confidence intervalls are added to summaries per default and
p-values are formated for pretty printing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## generic function called by all prettify.summary.xxx functions
## S3 method for class 'data.frame'
prettify(object, labels = NULL, sep = ": ", extra.column = FALSE,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"), ...)

## S3 method for class 'summary.lm'
prettify(object, labels = NULL, sep = ": ", extra.column = FALSE,
         confint = TRUE, level = 0.95,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"), ...)

## S3 method for class 'summary.glm'
prettify(object, labels = NULL, sep = ": ", extra.column = FALSE,
         confint = TRUE, level = 0.95, OR = TRUE,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"), ...)

## S3 method for class 'summary.coxph'
prettify(object, labels = NULL, sep = ": ", extra.column = FALSE,
         confint = TRUE, level = 0.95, HR = TRUE,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"),
         env = parent.frame(), ...)

## S3 method for class 'summary.lme'
prettify(object, labels = NULL, sep = ": ", extra.column = FALSE,
         confint = TRUE, level = 0.95,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"), ...)

## method for mixed models fitted with lme4 (vers. &lt; 1.0)
## S3 method for class 'summary.mer'
prettify(object, labels = NULL, sep = ": ", extra.column = FALSE,
         confint = TRUE, level = 0.95,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"),
         simulate = c("ifneeded", TRUE, FALSE), B = 1000, ...)

## method for mixed models fitted with lme4 (vers. &gt;= 1.0)
## S3 method for class 'summary.merMod'
prettify(object, labels = NULL, sep = ": ", extra.column = FALSE,
         confint = TRUE, level = 0.95,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"),
         method = c("profile", "Wald", "boot"), B = 1000, env = parent.frame(), ...)

## S3 method for class 'anova'
prettify(object, labels,
         smallest.pval = 0.001, digits = NULL, scientific = FALSE,
         signif.stars = getOption("show.signif.stars"), ...)

## helper function for pretty p-values
prettifyPValue(object, smallest.pval = 0.001, digits = NULL,
               scientific = FALSE,
               signif.stars = getOption("show.signif.stars"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>object of class <code>data.frame</code> resulting (most likely) from a
call to <code>summary</code> or directly the output from
<code>summary</code>, <code>anova</code> or <code>Anova</code>
(the latter from package <span class="pkg">car</span>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>

<p>specify labels here. For the format see <code>labels</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>

<p>separator between variable label and value label of a factor
variable (default: <code>": "</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra.column</code></td>
<td>

<p>logical: provide an extra column for the value labels of factors
(default: <code>FALSE</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confint</code></td>
<td>

<p>logical value indicating if confidence intervals sould be added or
the confidence intervals themself.
</p>
<p>Using <code>confint = TRUE</code> is experimental only and special care
needs to be taken that the data set used for fitting is neither
changed nor deleted. See ‘Details’ and ‘Examples’.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>

<p>confidence level; Per default 0.95% confidence
intervals are returned
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OR</code></td>
<td>

<p>logical. Should odds ratios be added? Only applicable if a logistic
regression model was fitted (i.e., with <code>family = "binomial"</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HR</code></td>
<td>

<p>logical. Should hazard ratios be added?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smallest.pval</code></td>
<td>

<p>determines the smallest p-value to be printed
exactly. Smaller values are given as “&lt; smallest.pval”.
This argument is passed to the <code>eps</code> argument of
<code>format.pval</code>. See there for details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>

<p>number of significant digits. The default, <code>NULL</code>, uses
<code>getOption("digits")</code> for formating p-values and leaves all
other columns unchanged. If <code>digits</code> are specified, all columns
use this number of significant digits (columnwise). See also
argument <code>digits</code> in <code>format</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scientific</code></td>
<td>
<p>specifies if numbers should be printed in scientific
format. For details and possible values see <code>format</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signif.stars</code></td>
<td>

<p>logical (default = TRUE). Should significance stars be added? Per
default system options are used. See <code> getOption("show.signif.stars")</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simulate</code></td>
<td>

<p>should the asysmptotic or simulated confidence intervals be used?
See <code>confint.mer</code> for details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>

<p>number of samples to take in <code>mcmcsamp</code>. See
<code>confint.mer</code> for details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>

<p>Determines the method for computing confidence intervals; One of
<code>"profile"</code> (default), <code>"Wald"</code>, <code>"boot"</code>. For
details see <code>confint.merMod</code> in package <span class="pkg">lme4</span>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>further options. Currently not applicable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>

<p>specify environment in which the model was fitted. Needed to find
the correct data for refitting the model in order to obtain
confidence intervals.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Specialized functions that prettify summary tables of various models
exist. For the <code>data.frame</code> method, <code>extra.column</code> and
<code>sep</code> can only be used if <code>labels</code> are specified as variable
names need to be known in order to split variable name and factor
level. For <code>summary</code> objects, variable names can be extracted
from the objects.
</p>
<p>To compute confidence intervalls, the model is refitted internally
extrating the call and environment from the model summary. All
functions then use <code>confint</code> on the refitted model. For
<code>mer</code> models special <code>confint</code> functions 
are defined in this package (for backward compatibility). For details see there. 
Note that is it highly important
<b>not</b> to modify or delete the data in the fitting environment if
one wants to obtain correct confidence intervals. See examples for what
might happen. We try ourt best to find changes of the data and to warn
the user (but without any warranty).
</p>
<p>Alternatively, one can directly specify the confidence intervals using
e.g. <code>confint = confint(model)</code>, where <code>model</code> is the fitted
model. This does not rely on refitting of the model and should always
work as expected. In this case, arguments <code>level</code>,
<code>simulate</code> and <code>B</code> are ignored. Note that in this case it is
adviced to also specify the labels by hand!
</p>
<p><code>prettifyPValue</code> is a helper function used within the prettify
functions but can also be used directly on a <code>data.frame</code> object.
The function tries to (cleverly) “guess” the column of p-values
(based on the column names) and formats them nicely. Additionally,
significance stars are added if requested.
</p>


<h3>Value</h3>

<p><code>data.frame</code> with prettier variable labels.
For summary functions additionally confidence
intervalls (if requested), odds ratio (for logistic regression models,
if requested), p-values formated for pretty printing and significance
stars (if requested) are attached.
</p>


<h3>Author(s)</h3>

<p>Benjamin Hofner
</p>


<h3>See Also</h3>

<p><code>summary</code>, <code>summary.lm</code>,
<code>summary.glm</code>, <code>summary.lme</code>,
<code>summary.merMod</code> (or <code>summary.mer-class</code> in lme4 &lt; 1.0)
and <code>summary.coxph</code> for summary functions.
</p>
<p><code>anova</code> and <code>Anova</code> for ANOVA functions.
</p>
<p><code>confint</code> and <code>ci</code> for confidence intervals.
Special functions are implemented for mixed models:
<code>confint.mer</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Example requires package nlme to be installed and loaded
if (require("nlme")) {
    ## Load data set Orthodont
    data(Orthodont, package = "nlme")

    ######################################################################
    # Linear model
    ######################################################################

    ## Fit a linear model
    linmod &lt;- lm(distance ~ age + Sex, data = Orthodont)
    ## Extract pretty summary
    prettify(summary(linmod))

    ## Extract anova (sequential tests)
    anova(linmod)
    ## now prettify it
    prettify(anova(linmod))

    ######################################################################
    # Random effects model (nlme)
    ######################################################################

    ### (fit a more suitable model with random effects)
    ## With package nlme:
    require("nlme")
    ## Fit a model for distance with random intercept for Subject
    mod &lt;- lme(distance ~ age + Sex, data = Orthodont, random = ~ 1 | Subject)
    summary(mod)
    ## Extract fixed effects table, add confidence interval and make it pretty
    prettify(summary(mod))
    ## Extract fixed effects table only and make it pretty
    prettify(summary(mod), confint = FALSE)

    ######################################################################
    # Random effects model (lme4)
    ######################################################################

    set.seed(130913)

    ## With package lme4:
    if (require("lme4") &amp;&amp; require("car")) {
        ## Fit a model for distance with random intercept for Subject
        mod4 &lt;- lmer(distance ~ age + Sex + (1|Subject), data = Orthodont)
        summary(mod4)
        ## Extract fixed effects table and make it pretty
        prettify(summary(mod4))

        ## Extract and prettify anova (sequential tests)
        prettify(anova(mod4))

        ## Better: extract Anova (partial instead of sequential tests)
        library("car")
        Anova(mod4)
        ## now prettify it
        prettify(Anova(mod4))
    }

    ######################################################################
    # Cox model
    ######################################################################

    ## survival models
    if (require("survival")) {
        ## Load data set ovarian (now part of cancer)
        data(cancer, package = "survival")

        ## fit a Cox model
        mod5 &lt;- coxph(Surv(futime, fustat) ~ age, data=ovarian)
        summary(mod5)
        ## Make pretty summary
        prettify(summary(mod5))

        ## Make pretty summary
        prettify(Anova(mod5))
    }


    ######################################################################
    # ATTENTION when confint = TRUE: Do not modify or delete data
    ######################################################################

    ## Fit a linear model (same as above)
    linmod &lt;- lm(distance ~ age + Sex, data = Orthodont)
    ## Extract pretty summary
    prettify(summary(linmod))

    ## Change the data (age in month instead of years)
    Orthodont$age &lt;- Orthodont$age * 12
    prettify(summary(linmod))  ## confidence intervals for age have changed
                               ## but coefficients stayed the same; a
                               ## warning is issued

    ## Remove data in fitting environment
    rm(Orthodont)
    prettify(summary(linmod))  ## confidence intervals are missing as no
                               ## data set was available to refit the model



    ######################################################################
    # Use confint to specify confidence interval without refitting
    ######################################################################

    ## make labels without using the data set
    labels &lt;- c("distance", "age", "Subject", "Sex")
    names(labels) &lt;- labels

    ## usually easier via: labels(Orthodont)

    prettify(summary(linmod), confint = confint(linmod),
             labels = labels)
}
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>waveform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract or replace a PTSample waveform</h2>

<h3>Description</h3>

<p>Extract or replace the waveform of a <code>PTSample</code> object. The
waveform is represented by a <code>vector</code> of numeric values ranging from
0 up to 255.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'PTSample'
waveform(sample, start.pos = 1, stop.pos = sampleLength(sample), loop = TRUE)

## S4 replacement method for signature 'PTSample'
waveform(sample) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sample</code></td>
<td>
<p>A <code>PTSample</code> object from which the waveform needs to
be extracted or replaced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start.pos</code></td>
<td>
<p>A <code>numeric</code> starting index, giving the starting
position for the waveform to be returned. Default value is <code>1</code>. This
index should be greater than zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop.pos</code></td>
<td>
<p>A <code>numeric</code> stopping index, giving the stopping
position for the waveform to be returned. Default value is
<code>sampleLength(sample)</code> This index should be greater than
<code>start.pos</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loop</code></td>
<td>
<p>A <code>logical</code> value indicating whether the waveform
should be modulated between the specified loop positions
(see <code>loopStart</code> and <code>loopLength</code>),
or the waveform should stop at the end of the sample (padded with <code>NA</code>
values beyond the sample length). Will do the first
when set to <code>TRUE</code> and the latter when set to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>A <code>vector</code> of numeric values ranging from 0 up to 255,
representing the waveform that should be used to replace that of object
<code>sample</code>. The length should be even and not exceed <code>2*0xffff</code> =
<code>131070</code>. <code>loopStart</code> and <code>loopLength</code> will
be adjusted automatically when they are out of range for the new waveform.
</p>
<p>Use <code>NA</code> to generate an empty/blank <code>PTSample</code> object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Sample waveforms are stored as 8 bit signed short integer values ranging
from -128 up to +127 in original ProTracker files. However, as the
<code>PTSample</code> class extends the <code>tuneR::Wave</code> class,
the waveforms are represented by integer values ranging from 0 up to 255
in the ProTrackR package. As per ProTracker specifications,
samples are of 8 bit mono quality and can only have an even length with
a maximum of <code>2*0xffff</code> = <code>131070</code>. This method can be used to
extract a waveform or replace it.
</p>


<h3>Value</h3>

<p>For <code>waveform</code>, the waveform of <code>sample</code> is returned
as a <code>vector</code> of <code>numeric</code> values ranging from 0 up to 255.
If <code>loop</code> is set to <code>FALSE</code>
and the starting position is beyond the sample length, <code>NA</code> values
are returned. If <code>loop</code> is set to <code>TRUE</code> and the starting
position is beyond the sample loop (if present, see
<code>loopState</code>), the waveform is modulated between the loop
positions.
</p>
<p>For <code style="white-space: pre;">⁠waveform&lt;-⁠</code>, a copy of object <code>sample</code> is returned in which
the waveform has been replaced with <code>value</code>.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>See Also</h3>

<p>Other integer.operations: 
<code>nybbleToSignedInt()</code>,
<code>nybble()</code>,
<code>rawToSignedInt()</code>,
<code>rawToUnsignedInt()</code>,
<code>signedIntToNybble()</code>,
<code>signedIntToRaw()</code>,
<code>unsignedIntToRaw()</code>
</p>
<p>Other sample.operations: 
<code>PTSample-class</code>,
<code>PTSample-method</code>,
<code>fineTune()</code>,
<code>loopLength()</code>,
<code>loopSample()</code>,
<code>loopStart()</code>,
<code>loopState()</code>,
<code>name</code>,
<code>playSample()</code>,
<code>read.sample()</code>,
<code>sampleLength()</code>,
<code>volume()</code>,
<code>write.sample()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("mod.intro")

## Loop sample #1 of mod.intro beyond it's
## length of 1040 samples:
wav1 &lt;- waveform(PTSample(mod.intro, 1),
                 1, 5000)

## get the waveform from sample #2
## of mod.intro:
wav2 &lt;- waveform(PTSample(mod.intro, 2))

## create an echo effect using
## the extracted waveform:
wav2 &lt;- c(wav2, rep(128, 1000)) +
        c(rep(128, 1000), wav2)*0.25 - 25

## assign this echoed sample to
## sample #2 in mod.intro:
waveform(PTSample(mod.intro, 2)) &lt;- wav2

## Blank out sample #1 in mod.intro:
waveform(PTSample(mod.intro, 1)) &lt;- NA

</code></pre>


</div>
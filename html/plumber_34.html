<div class="container">

<table style="width: 100%;"><tr>
<td>parser_form</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plumber Parsers</h2>

<h3>Description</h3>

<p>Parsers are used in Plumber to transform request body received
by the API. Extra parameters may be provided to parser
functions when enabling them on router. This will allow for
non-default behavior.
</p>


<h3>Usage</h3>

<pre><code class="language-R">parser_form()

parser_json(...)

parser_geojson(...)

parser_text(parse_fn = identity)

parser_yaml(...)

parser_csv(...)

parser_tsv(...)

parser_read_file(read_fn = readLines)

parser_rds(...)

parser_feather(...)

parser_parquet(...)

parser_octet()

parser_multi()

parser_none()
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>parameters supplied to the appropriate internal function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parse_fn</code></td>
<td>
<p>function to further decode a text string into an object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>read_fn</code></td>
<td>
<p>function used to read a the content of a file. Ex: <code>readRDS()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Parsers are optional. When unspecified, only default endpoint parsers are enabled.
You can use <code style="white-space: pre;">⁠@parser NAME⁠</code> tag to enable parser on endpoint.
Multiple parsers can be enabled on the same endpoint using multiple <code style="white-space: pre;">⁠@parser NAME⁠</code> tags.
</p>
<p>User should be aware that <code>rds</code> parsing should only be done from a
trusted source. Do not accept <code>rds</code> files blindly.
</p>
<p>See <code>registered_parsers()</code> for a list of registered parsers names.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>parser_form()</code>: Form query string parser
</p>
</li>
<li> <p><code>parser_json()</code>: JSON parser. See <code>jsonlite::parse_json()</code> for more details. (Defaults to using <code>simplifyVectors = TRUE</code>)
</p>
</li>
<li> <p><code>parser_geojson()</code>: GeoJSON parser. See <code>geojsonsf::geojson_sf()</code> for more details.
</p>
</li>
<li> <p><code>parser_text()</code>: Helper parser to parse plain text
</p>
</li>
<li> <p><code>parser_yaml()</code>: YAML parser. See <code>yaml::yaml.load()</code> for more details.
</p>
</li>
<li> <p><code>parser_csv()</code>: CSV parser. See <code>readr::read_csv()</code> for more details.
</p>
</li>
<li> <p><code>parser_tsv()</code>: TSV parser. See <code>readr::read_tsv()</code> for more details.
</p>
</li>
<li> <p><code>parser_read_file()</code>: Helper parser that writes the binary body to a file and reads it back again using <code>read_fn</code>.
This parser should be used when reading from a file is required.
</p>
</li>
<li> <p><code>parser_rds()</code>: RDS parser. See <code>readRDS()</code> for more details.
</p>
</li>
<li> <p><code>parser_feather()</code>: feather parser. See <code>arrow::read_feather()</code> for more details.
</p>
</li>
<li> <p><code>parser_parquet()</code>: parquet parser. See <code>arrow::read_parquet()</code> for more details.
</p>
</li>
<li> <p><code>parser_octet()</code>: Octet stream parser. Returns the raw content.
</p>
</li>
<li> <p><code>parser_multi()</code>: Multi part parser. This parser will then parse each individual body with its respective parser.  When this parser is used, <code>req$body</code> will contain the updated output from <code>webutils::parse_multipart()</code> by adding the <code>parsed</code> output to each part.  Each part may contain detailed information, such as <code>name</code> (required), <code>content_type</code>, <code>content_disposition</code>, <code>filename</code>, (raw, original) <code>value</code>, and <code>parsed</code> (parsed <code>value</code>).  When performing Plumber route argument matching, each multipart part will match its <code>name</code> to the <code>parsed</code> content.
</p>
</li>
<li> <p><code>parser_none()</code>: No parser. Will not process the postBody.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Overwrite `text/json` parsing behavior to not allow JSON vectors to be simplified
#* @parser json list(simplifyVector = FALSE)
# Activate `rds` parser in a multipart request
#* @parser multi
#* @parser rds
pr &lt;- Plumber$new()
pr$handle("GET", "/upload", function(rds) {rds}, parsers = c("multi", "rds"))

## End(Not run)
</code></pre>


</div>
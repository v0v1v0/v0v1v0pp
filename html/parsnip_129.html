<div class="container">

<table style="width: 100%;"><tr>
<td>details_poisson_reg_hurdle</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Poisson regression via pscl</h2>

<h3>Description</h3>

<p><code>pscl::hurdle()</code> uses maximum likelihood estimation to fit a model for
count data that has separate model terms for predicting the counts and for
predicting the probability of a zero count.
</p>


<h3>Details</h3>

<p>For this engine, there is a single mode: regression
</p>


<h4>Tuning Parameters</h4>

<p>This engine has no tuning parameters.
</p>



<h4>Translation from parsnip to the underlying model call (regression)</h4>

<p>The <strong>poissonreg</strong> extension package is required to fit this model.
</p>
<div class="sourceCode r"><pre>library(poissonreg)

poisson_reg() %&gt;%
  set_engine("hurdle") %&gt;%
  translate()
</pre></div>
<div class="sourceCode"><pre>## Poisson Regression Model Specification (regression)
## 
## Computational engine: hurdle 
## 
## Model fit template:
## pscl::hurdle(formula = missing_arg(), data = missing_arg(), weights = missing_arg())
</pre></div>



<h4>Preprocessing and special formulas for zero-inflated Poisson models</h4>

<p>Factor/categorical predictors need to be converted to numeric values
(e.g., dummy or indicator variables) for this engine. When using the
formula method via <code>fit()</code>, parsnip will
convert factor columns to indicators.
</p>



<h4>Specifying the statistical model details</h4>

<p>For this particular model, a special formula is used to specify which
columns affect the counts and which affect the model for the probability
of zero counts. These sets of terms are separated by a bar. For example,
<code>y ~ x | z</code>. This type of formula is not used by the base R
infrastructure (e.g.Â <code>model.matrix()</code>)
</p>
<p>When fitting a parsnip model with this engine directly, the formula
method is required and the formula is just passed through. For example:
</p>
<div class="sourceCode r"><pre>library(tidymodels)
tidymodels_prefer()

data("bioChemists", package = "pscl")
poisson_reg() %&gt;% 
  set_engine("hurdle") %&gt;% 
  fit(art ~ fem + mar | ment, data = bioChemists)
</pre></div>
<div class="sourceCode"><pre>## parsnip model object
## 
## 
## Call:
## pscl::hurdle(formula = art ~ fem + mar | ment, data = data)
## 
## Count model coefficients (truncated poisson with log link):
## (Intercept)     femWomen   marMarried  
##    0.847598    -0.237351     0.008846  
## 
## Zero hurdle model coefficients (binomial with logit link):
## (Intercept)         ment  
##     0.24871      0.08092
</pre></div>
<p>However, when using a workflow, the best approach is to avoid using
<code>workflows::add_formula()</code> and use
<code>workflows::add_variables()</code> in
conjunction with a model formula:
</p>
<div class="sourceCode r"><pre>data("bioChemists", package = "pscl")
spec &lt;- 
  poisson_reg() %&gt;% 
  set_engine("hurdle")

workflow() %&gt;% 
  add_variables(outcomes = c(art), predictors = c(fem, mar, ment)) %&gt;% 
  add_model(spec, formula = art ~ fem + mar | ment) %&gt;% 
  fit(data = bioChemists) %&gt;% 
  extract_fit_engine()
</pre></div>
<div class="sourceCode"><pre>## 
## Call:
## pscl::hurdle(formula = art ~ fem + mar | ment, data = data)
## 
## Count model coefficients (truncated poisson with log link):
## (Intercept)     femWomen   marMarried  
##    0.847598    -0.237351     0.008846  
## 
## Zero hurdle model coefficients (binomial with logit link):
## (Intercept)         ment  
##     0.24871      0.08092
</pre></div>
<p>The reason for this is that
<code>workflows::add_formula()</code> will try to
create the model matrix and either fail or create dummy variables
prematurely.
</p>



<h4>Case weights</h4>

<p>This model can utilize case weights during model fitting. To use them,
see the documentation in case_weights and the examples
on <code>tidymodels.org</code>.
</p>
<p>The <code>fit()</code> and <code>fit_xy()</code> arguments have arguments called
<code>case_weights</code> that expect vectors of case weights.
</p>



</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>panelfunctions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Panel-Generators for Visualization of Party Trees </h2>

<h3>Description</h3>

<p>The plot method for <code>party</code> and <code>constparty</code> objects are rather
flexible and can be extended by panel functions. Some pre-defined
panel-generating functions of class <code>grapcon_generator</code>
for the most important cases are documented here.
</p>


<h3>Usage</h3>

<pre><code class="language-R">node_inner(obj, id = TRUE, pval = TRUE, abbreviate = FALSE, fill = "white", 
  gp = gpar())

node_terminal(obj, digits = 3, abbreviate = FALSE,
  fill = c("lightgray", "white"), id = TRUE,
  just = c("center", "top"), top = 0.85,
  align = c("center", "left", "right"), gp = NULL, FUN = NULL,
  height = NULL, width = NULL)

edge_simple(obj, digits = 3, abbreviate = FALSE, justmin = Inf,
  just = c("alternate", "increasing", "decreasing", "equal"),
  fill = "white")

node_boxplot(obj, col = "black", fill = "lightgray", bg = "white", width = 0.5,
  yscale = NULL, ylines = 3, cex = 0.5, id = TRUE, mainlab = NULL, gp = gpar())

node_barplot(obj, col = "black", fill = NULL, bg = "white",
  beside = NULL, ymax = NULL, ylines = NULL, widths = 1, gap = NULL,
  reverse = NULL, rot = 0, just = c("center", "top"), id = TRUE,
  mainlab = NULL, text = c("none", "horizontal", "vertical"), gp = gpar())

node_surv(obj, col = "black", bg = "white", yscale = c(0, 1), ylines = 2,
  id = TRUE, mainlab = NULL, gp = gpar(), ...)

node_ecdf(obj, col = "black", bg = "white", ylines = 2,
  id = TRUE, mainlab = NULL, gp = gpar(), ...)

node_bivplot(mobobj, which = NULL, id = TRUE, pop = TRUE,
  pointcol = "black", pointcex = 0.5,
  boxcol = "black", boxwidth = 0.5, boxfill = "lightgray",
  bg = "white", fitmean = TRUE, linecol = "red",
  cdplot = FALSE, fivenum = TRUE, breaks = NULL,
  ylines = NULL, xlab = FALSE, ylab = FALSE, margins = rep(1.5, 4),
  mainlab = NULL, ...)

node_mvar(obj, which = NULL, id = TRUE, pop = TRUE, ylines = NULL,
  mainlab = NULL, varlab = TRUE, bg = "white", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p> an object of class <code>party</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p> integer, used for formating numbers. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abbreviate</code></td>
<td>
<p> logical indicating whether strings should be 
abbreviated. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col, pointcol, boxcol, linecol</code></td>
<td>
<p> a color for points and lines. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill, boxfill, bg</code></td>
<td>
<p> a color to filling rectangles and backgrounds. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p> logical. Should node IDs be plotted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval</code></td>
<td>
<p> logical. Should node p values be plotted (if they are
available)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>just</code></td>
<td>
<p>justification of terminal panel viewport (<code>node_terminal</code>),
or labels (<code>edge_simple</code>, <code>node_barplot</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>justmin</code></td>
<td>
<p>minimum average edge label length to employ justification
via <code>just</code> in <code>edge_panel</code>, otherwise <code>just = "equal"</code>
is used. Thus, by default <code>"equal"</code> justification is always used
but other justifications could be employed for finite <code>justmin</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>top</code></td>
<td>
<p>in case of top justification, the npc coordinate at which the
viewport is justified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>align</code></td>
<td>
<p>alignment of text within terminal panel viewport.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylines</code></td>
<td>
<p> number of lines for spaces in y-direction. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>widths</code></td>
<td>
<p> widths in barplots. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxwidth</code></td>
<td>
<p> width in boxplots (called <code>width</code> in <code>node_boxplot</code>). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gap</code></td>
<td>
<p> gap between bars in a barplot (<code>node_barplot</code>). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yscale</code></td>
<td>
<p> limits in y-direction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ymax</code></td>
<td>
<p> upper limit in y-direction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex, pointcex</code></td>
<td>
<p>character extension of points in scatter plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beside</code></td>
<td>
<p> logical indicating if barplots should be side by side or stacked. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>logical indicating whether the order of levels should be reversed
for barplots. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rot</code></td>
<td>
<p> arguments passed to <code>grid.text</code> for the
x-axis labeling. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gp</code></td>
<td>
<p>graphical parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>function for formatting the <code>info</code>, passed to <code>formatinfo_node</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height, width</code></td>
<td>
<p> numeric, number of lines/columns for printing text. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mobobj</code></td>
<td>
<p>an object of class <code>modelparty</code> as computed by <code>mob</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>numeric or character. Optional selection of subset of regressor
variables. By default one panel for each regressor variable is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pop</code></td>
<td>
<p>logical. Should the viewports in the individual nodes be popped after
drawing?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitmean</code></td>
<td>
<p>logical. Should the fitted mean function be visualized?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cdplot</code></td>
<td>
<p>logical. Should a CD plot (or a spineplot) be drawn when
the response variable is categorical?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fivenum</code></td>
<td>
<p>logical. Should the five-number summary be used for splitting
the x-axis in spineplots?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>numeric. Optional numeric vector with breaks for the x-axis in
splineplots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab, ylab</code></td>
<td>
<p>character. Optional annotation for x-axis and y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margins</code></td>
<td>
<p>numeric. Margins around drawing area in viewport.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainlab</code></td>
<td>
<p>character or function. An optional title for the plot. Either
a character or a <code>function(id, nobs)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varlab</code></td>
<td>
<p>logical. Should the individual variable labels be attached to
the <code>mainlab</code> for multivariate responses?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text</code></td>
<td>
<p>logical or character. Should percentage labels be drawn
for each bar? The default is <code>"none"</code> or equivalently <code>FALSE</code>.
Can be set to <code>TRUE</code> (or <code>"horizontal"</code>) or alternatively
<code>"vertical"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> additional arguments passed to callies 
(for example to <code>survfit</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>plot</code> methods for <code>party</code> and <code>constparty</code> objects provide an
extensible framework for the visualization of binary regression trees. The
user is allowed to specify panel functions for plotting terminal and inner
nodes as well as the corresponding edges. The panel functions to be used
should depend only on the node being visualized, however, for setting up
an appropriate panel function, information from the whole tree is typically
required. Hence, <span class="pkg">party</span> adopts the framework of <code>grapcon_generator</code>
(graphical appearance control) from the <span class="pkg">vcd</span> package (Meyer, Zeileis and
Hornik, 2005) and provides several panel-generating functions. For convenience,
the panel-generating functions <code>node_inner</code> and <code>edge_simple</code> 
return panel functions to draw inner nodes and left and right edges. 
For drawing terminal nodes, the functions returned by the other panel 
functions can be used. The panel generating function <code>node_terminal</code> 
is a terse text-based representation of terminal nodes.
</p>
<p>Graphical representations of terminal nodes are available and depend on
the kind of model and the measurement scale of the variables modeled.
</p>
<p>For univariate regressions (typically fitted by ),
<code>node_surv</code>
returns a functions that plots Kaplan-Meier curves in each 
terminal node; <code>node_barplot</code>, <code>node_boxplot</code>, <code>node_hist</code>, <code>node_ecdf</code> and
<code>node_density</code> can be used to plot bar plots, box plots, histograms, 
empirical cumulative distribution functions and 
estimated densities into the terminal nodes.
</p>
<p>For multivariate regressions (typically fitted by <code>mob</code>),
<code>node_bivplot</code> returns a panel function that creates bivariate plots
of the response against all regressors in the model. Depending on the scale
of the variables involved, scatter plots, box plots, spinograms (or CD plots)
and spine plots are created. For the latter two <code>spine</code> and
<code>cd_plot</code> from the <span class="pkg">vcd</span> package are re-used.
</p>
<p>For multivariate responses in <code>ctree</code>, the panel function <code>node_mvar</code>
generates one plot for each response.
</p>


<h3>References</h3>

<p>Meyer D, Zeileis A, Hornik K (2006).
The Strucplot Framework: Visualizing Multi-Way Contingency Tables with vcd.
<em>Journal of Statistical Software</em>, <b>17</b>(3), 1–48.
<a href="https://doi.org/10.18637/jss.v017.i03">doi:10.18637/jss.v017.i03</a>
</p>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>PrInDTreg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Regression tree resampling by the PrInDT method</h2>

<h3>Description</h3>

<p>Regression tree optimzation to identify the best interpretable tree; interpretability is checked (see 'ctestv').<br>
The relationship between the target variable 'regname' and all other factor and numerical variables
in the data frame 'datain' is optimally modeled by means of 'N' repetitions of subsampling.<br> 
The optimization criterion is the R2 of the model on the full sample.<br>
Multiple subsampling percentages of observations and predictors can be specified (in 'pobs' and 'ppre', correspondingly).<br>
The trees generated from undersampling can be restricted by
rejecting unacceptable trees which include split results specified in the character strings of the vector 'ctestv'.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">PrInDTreg(datain, regname, ctestv=NA, N, pobs, ppre, conf.level=0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>datain</code></td>
<td>
<p>Input data frame with class factor variable 'classname' and the<br>
influential variables, which need to be factors or numericals (transform logicals and character variables to factors)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regname</code></td>
<td>
<p>name of regressand variable (character)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctestv</code></td>
<td>
<p>Vector of character strings of forbidden split results;<br>
see function <code>PrInDT</code> for details.<br>
If no restrictions exist, the default = NA is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Number of repetitions (integer &gt; 0)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pobs</code></td>
<td>
<p>Vector of resampling percentages of observations (numerical, &gt; 0 and &lt;= 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ppre</code></td>
<td>
<p>Vector of resampling percentages of predictor variables (numerical, &gt; 0 and &lt;= 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>(1 - significance level) in function <code>ctree</code> (numerical, &gt; 0 and &lt;= 1);<br>
default = 0.95</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For the optimzation of the trees, we employ a method we call Sumping (Subsampling umbrella of 
model parameters), a variant of Bumping (Bootstrap umbrella of model parameters) (Tibshirani 
&amp; Knight, 1999) which use subsampling instead of bootstrapping. The aim of the 
optimization is to identify conditional inference trees with maximum predictive power
on the full sample under interpretability restrictions. 
</p>
<p><strong>Reference</strong><br> Tibshirani, R., Knight, K. 1999. Model Search and Inference By Bootstrap "bumping".
Journal of Computational and Graphical Statistics, Vol. 8, No. 4 (Dec., 1999), pp. 671-686 
</p>
<p>Standard output can be produced by means of <code>print(name)</code> or just <code> name </code> as well as <code>plot(name)</code> where 'name' is the output data 
frame of the function.<br>
The plot function will produce a series of more than one plot. If you use R, you might want to specify <code>windows(record=TRUE)</code> before 
<code>plot(name)</code> to save the whole series of plots. In R-Studio this functionality is provided automatically.
</p>


<h3>Value</h3>


<dl>
<dt>meanint</dt>
<dd>
<p>Mean number of interpretable trees over the combinations of individual percentages in 'pobs' and 'ppre'</p>
</dd>
<dt>R2mean</dt>
<dd>
<p>Mean R2 on test sets</p>
</dd>
<dt>ctmax</dt>
<dd>
<p>best resampled regression tree according to R2 on the full data set</p>
</dd>
<dt>percmax</dt>
<dd>
<p>Maximum R2 achieved for %observations</p>
</dd>
<dt>perfeamax</dt>
<dd>
<p>Maximum R2 achieved for %predictors</p>
</dd>
<dt>maxR2</dt>
<dd>
<p>best R2 on the full data set for resampled regression trees (for 'ctmax')</p>
</dd> 
<dt>interpmax</dt>
<dd>
<p>interpretability of best tree 'ctmax'</p>
</dd>
<dt>ctmax2</dt>
<dd>
<p>second best resampled regression tree according to R2 on the full data set</p>
</dd>
<dt>percmax2</dt>
<dd>
<p>second best R2 achieved for %observations</p>
</dd>
<dt>perfeamax2</dt>
<dd>
<p>second best R2 achieved for %features</p>
</dd>
<dt>max2R2</dt>
<dd>
<p>second best R2 on the full data set for resampled regression trees (for 'ctmax2')</p>
</dd>
<dt>interp2max</dt>
<dd>
<p>interpretability of second-best tree 'ctmax2'</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">data &lt;- PrInDT::data_vowel
data &lt;- na.omit(data)
ctestv &lt;- 'vowel_maximum_pitch &lt;= 320'
N &lt;- 30 # no. of repetitions
pobs &lt;- c(0.70,0.60) # percentages of observations
ppre &lt;- c(0.90,0.70) # percentages of predictors
outreg &lt;- PrInDTreg(data,"target",ctestv,N,pobs,ppre)
outreg
plot(outreg)

</code></pre>


</div>
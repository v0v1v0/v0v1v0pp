<div class="container">

<table style="width: 100%;"><tr>
<td>importance.pre</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate importances of baselearners and input variables in a prediction 
rule ensemble (pre)</h2>

<h3>Description</h3>

<p><code>importance.pre</code> calculates importances for rules, linear terms and input
variables in the prediction rule ensemble (pre), and creates a bar plot 
of variable importances.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'pre'
importance(
  x,
  standardize = FALSE,
  global = TRUE,
  penalty.par.val = "lambda.1se",
  gamma = NULL,
  quantprobs = c(0.75, 1),
  round = NA,
  plot = TRUE,
  ylab = "Importance",
  main = "Variable importances",
  abbreviate = 10L,
  diag.xlab = TRUE,
  diag.xlab.hor = 0,
  diag.xlab.vert = 2,
  cex.axis = 1,
  legend = "topright",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class <code>pre</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standardize</code></td>
<td>
<p>logical. Should baselearner importances be standardized 
with respect to the outcome variable? If <code>TRUE</code>, baselearner importances 
have a minimum of 0 and a maximum of 1. Only used for ensembles with 
numeric (non-count) response variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>global</code></td>
<td>
<p>logical. Should global importances be calculated? If 
<code>FALSE</code>, local importances will be calculated, given the quantiles 
of the predictions F(x) in <code>quantprobs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty.par.val</code></td>
<td>
<p>character or numeric. Value of the penalty parameter
<code class="reqn">\lambda</code> to be employed for selecting the final ensemble. The default
<code>"lambda.min"</code> employs the <code class="reqn">\lambda</code> value within 1 standard
error of the minimum cross-validated error. Alternatively, 
<code>"lambda.min"</code> may be specified, to employ the <code class="reqn">\lambda</code> value
with minimum cross-validated error, or a numeric value <code class="reqn">&gt;0</code> may be 
specified, with higher values yielding a sparser ensemble. To evaluate the 
trade-off between accuracy and sparsity of the final ensemble, inspect
<code>pre_object$glmnet.fit</code> and <code>plot(pre_object$glmnet.fit)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>Mixing parameter for relaxed fits. See
<code>coef.cv.glmnet</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantprobs</code></td>
<td>
<p>optional numeric vector of length two. Only used when
<code>global = FALSE</code>. Probabilities for calculating sample quantiles of the 
range of F(X), over which local importances are calculated. The default 
provides variable importances calculated over the 25% highest values of F(X).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>round</code></td>
<td>
<p>integer. Number of decimal places to round numeric results to.
If <code>NA</code> (default), no rounding is performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical. Should variable importances be plotted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>character string. Plotting label for y-axis. Only used when
<code>plot = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>character string. Main title of the plot. Only used when
<code>plot = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abbreviate</code></td>
<td>
<p>integer or logical. Number of characters to abbreviate 
x axis names to. If <code>FALSE</code>, no abbreviation is performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag.xlab</code></td>
<td>
<p>logical. Should variable names be printed diagonally (that
is, in a 45 degree angle)? Alternatively, variable names may be printed 
vertically by specifying <code>diag.xlab = FALSE</code> and <code>las = 2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag.xlab.hor</code></td>
<td>
<p>numeric. Horizontal adjustment for lining up variable
names with bars in the plot if variable names are printed diagonally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag.xlab.vert</code></td>
<td>
<p>positive integer. Vertical adjustment for position
of variable names, if printed diagonally. Corresponds to the number of 
character spaces added after variable names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.axis</code></td>
<td>
<p>numeric. The magnification to be used for axis annotation
relative to the current setting of <code>cex</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>logical or character. Should legend be plotted for multinomial
or multivariate responses and if so, where? Defaults to <code>"topright"</code>, 
which puts the legend in the top-right corner of the plot. Alternatively, 
<code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, 
<code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code>, 
<code>"center"</code> and <code>FALSE</code> (which omits the legend) can be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to be passed to <code>barplot</code> (only used
when <code>plot = TRUE</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See also sections 6 and 7 of Friedman &amp; Popecus (2008).
</p>


<h3>Value</h3>

<p>A list with two dataframes: <code>$baseimps</code>, giving the importances 
for baselearners in the ensemble, and <code>$varimps</code>, giving the importances 
for all predictor variables.
</p>


<h3>References</h3>

<p>Fokkema, M. (2020). Fitting prediction rule ensembles with R 
package pre. <em>Journal of Statistical Software, 92</em>(12), 1-30.
<a href="https://doi.org/10.18637/jss.v092.i12">doi:10.18637/jss.v092.i12</a>
</p>
<p>Fokkema, M. &amp; Strobl, C. (2020). Fitting prediction rule ensembles to psychological 
research data: An introduction and tutorial. <em>Psychological Methods 25</em>(5), 
636-652. <a href="https://doi.org/10.1037/met0000256">doi:10.1037/met0000256</a>, <a href="https://arxiv.org/abs/1907.05302">https://arxiv.org/abs/1907.05302</a>
</p>
<p>Friedman, J. H., &amp; Popescu, B. E. (2008). Predictive learning 
via rule ensembles. <em>The Annals of Applied Statistics, 2</em>(3), 916-954 
<a href="https://doi.org/10.1214/07-AOAS148">doi:10.1214/07-AOAS148</a>.
</p>


<h3>See Also</h3>

<p><code>pre</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(42)
airq.ens &lt;- pre(Ozone ~ ., data = airquality[complete.cases(airquality),])
# calculate global importances:
importance(airq.ens)
# calculate local importances (default: over 25% highest predicted values):
importance(airq.ens, global = FALSE)
# calculate local importances (custom: over 25% lowest predicted values):
importance(airq.ens, global = FALSE, quantprobs = c(0, .25))
</code></pre>


</div>
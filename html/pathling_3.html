<div class="container">

<table style="width: 100%;"><tr>
<td>ds_aggregate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Execute an aggregate query</h2>

<h3>Description</h3>

<p>Executes an aggregate query over FHIR data. The query calculates summary values based on 
aggregations and groupings of FHIR resources.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ds_aggregate(
  ds,
  subject_resource,
  aggregations,
  groupings = NULL,
  filters = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ds</code></td>
<td>
<p>The DataSource object containing the data to be queried.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subject_resource</code></td>
<td>
<p>A string representing the type of FHIR resource to aggregate data from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregations</code></td>
<td>
<p>A named list of FHIRPath expressions that calculate a summary value from each
grouping. The expressions must be singular.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupings</code></td>
<td>
<p>An optional named list of FHIRPath expressions that determine which groupings
the resources should be counted within.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filters</code></td>
<td>
<p>An optional sequence of FHIRPath expressions that can be evaluated against each resource
in the data set to determine whether it is included within the result. The expression must evaluate to a
Boolean value. Multiple filters are combined using logical AND operation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A Spark DataFrame containing the aggregated data.
</p>


<h3>See Also</h3>

<p><a href="https://pathling.csiro.au/docs/libraries/fhirpath-query#aggregate">Pathling documentation - Aggregate</a>
</p>
<p>Other FHIRPath queries: 
<code>ds_extract()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
pc &lt;- pathling_connect()
data_source &lt;- pc %&gt;% pathling_read_ndjson(pathling_examples('ndjson'))
data_source %&gt;% ds_aggregate('Patient',
     aggregations = c(patientCount='count()', 'id.count()'),
     groupings = c('gender', givenName='name.given'),
     filters = c('birthDate &gt; @1950-01-01')
)
pathling_disconnect(pc)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>par_lapply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run a Task in Parallel</h2>

<h3>Description</h3>

<p>This function can be used to run a task in parallel. The task is executed in
parallel on the specified backend, similar to <code>parallel::parLapply()</code>. If
<code>backend = NULL</code>, the task is executed sequentially using <code>base::lapply()</code>.
See the <strong>Details</strong> section for more information on how this function works.
</p>


<h3>Usage</h3>

<pre><code class="language-R">par_lapply(backend = NULL, x, fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>backend</code></td>
<td>
<p>An object of class <code>Backend</code> as returned by the
<code>start_backend()</code> function. It can also be <code>NULL</code> to run the task
sequentially via <code>base::lapply()</code>. The default value is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An atomic vector or list to pass to the <code>fun</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>A function to apply to each element of <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to pass to the <code>fun</code> function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function uses the <code>UserApiConsumer</code> class that acts like an
interface for the developer API of the <code>parabar</code> package.
</p>


<h3>Value</h3>

<p>A list of the same length as <code>x</code> containing the results of the <code>fun</code>. The
output format resembles that of <code>base::lapply()</code>.
</p>


<h3>See Also</h3>

<p><code>start_backend()</code>, <code>peek()</code>, <code>export()</code>,
<code>evaluate()</code>, <code>clear()</code>, <code>configure_bar()</code>,
<code>par_sapply()</code>, <code>par_apply()</code>, <code>stop_backend()</code>,
<code>set_option()</code>, <code>get_option()</code>, <code>Options</code>,
<code>UserApiConsumer</code>, and <code>Service</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Define a simple task.
task &lt;- function(x) {
    # Perform computations.
    Sys.sleep(0.01)

    # Return the result.
    return(x + 1)
}

# Start an asynchronous backend.
backend &lt;- start_backend(cores = 2, cluster_type = "psock", backend_type = "async")

# Run a task in parallel.
results &lt;- par_lapply(backend, x = 1:300, fun = task)

# Disable progress tracking.
set_option("progress_track", FALSE)

# Run a task in parallel.
results &lt;- par_lapply(backend, x = 1:300, fun = task)

# Enable progress tracking.
set_option("progress_track", TRUE)

# Change the progress bar options.
configure_bar(type = "modern", format = "[:bar] :percent")

# Run a task in parallel.
results &lt;- par_lapply(backend, x = 1:300, fun = task)

# Stop the backend.
stop_backend(backend)

# Start a synchronous backend.
backend &lt;- start_backend(cores = 2, cluster_type = "psock", backend_type = "sync")

# Run a task in parallel.
results &lt;- par_lapply(backend, x = 1:300, fun = task)

# Disable progress tracking to remove the warning that progress is not supported.
set_option("progress_track", FALSE)

# Run a task in parallel.
results &lt;- par_lapply(backend, x = 1:300, fun = task)

# Stop the backend.
stop_backend(backend)

# Run the task using the `base::lapply` (i.e., non-parallel).
results &lt;- par_lapply(NULL, x = 1:300, fun = task)



</code></pre>


</div>
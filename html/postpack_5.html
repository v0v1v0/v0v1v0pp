<div class="container">

<table style="width: 100%;"><tr>
<td>diag_plots</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create MCMC diagnostic plots for nodes of interest</h2>

<h3>Description</h3>

<p>Allows quick visualization of posterior density and trace plots,
<strong>both</strong> separated by chain, for the desired nodes of interest. Includes the
ability to plot in the RStudio graphics device, an external device,
or a PDF file. Further, with the auto settings, the dimensions of the
plotting device scales to the job needed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">diag_plots(
  post,
  params,
  ext_device = FALSE,
  show_diags = "if_poor_Rhat",
  layout = "auto",
  dims = "auto",
  keep_percent = 1,
  save = FALSE,
  file = NULL,
  auto_escape = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>post</code></td>
<td>
<p>A <code>mcmc.list</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>A vector of regular expressions specifying the nodes to match for plotting.
Accepts multi-element vectors to match more than one node at a time.
See <code>match_params()</code> and <code>vignette("pattern-matching")</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ext_device</code></td>
<td>
<p>Display plots in an external device rather than the active device?
<code>FALSE</code> (the default) will plot in the active device (including RStudio window).
<code>TRUE</code> will create a new graphics device.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_diags</code></td>
<td>
<p>Control when to display numerical diagnostic summaries on plots. Must be one of
<code>"always"</code>, <code>"never"</code>, or <code>"if_poor_Rhat"</code>. <code>"if_poor_Rhat"</code> (the default)
will display the Rhat and effective MCMC samples if the Rhat statistic
is greater than 1.1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layout</code></td>
<td>
<p>Control how parameter diagnostics are organized into <code>"ROWSxCOLUMNS"</code>.
For example, <code>layout = "4x1"</code> has 4 rows and 1 column of parameter diagnostics.
Defaults to <code>"auto"</code>, which selects between the only accepted options of
<code>"1x1"</code>, <code>"2x1"</code>, <code>"4x1"</code>, <code>"4x2"</code>, and <code>"5x3"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dims</code></td>
<td>
<p>Control the dimensions of the graphics device using <code>"HEIGHTxWIDTH"</code> in inches.
For example, <code>"5x7"</code> would create a 5 inch tall and 7 inch wide plotting device.
Defaults to <code>"auto"</code>, which selects the dimensions that look nice when <code>layout = "auto"</code>
as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_percent</code></td>
<td>
<p>Proportion (between 0 and 1) of samples to keep for trace plotting.
Passed to <code>post_thin()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save</code></td>
<td>
<p>Save the diagnostic plots in a PDF file? If so,
specify <code>file = "example.pdf"</code> as well. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>File name of a PDF file to save the plots to.
Must include the <code>".pdf"</code> extension. Saved to working directory by default,
but can receive an absolute or relative file path as part of this argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auto_escape</code></td>
<td>
<p>Automatically escape <code>"["</code> and <code>"]"</code> characters for pattern matching?
See <code>match_params()</code> for details.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A multi-panel figure showing the posterior density and trace plots for requested nodes.
The device in which it is placed depends on the argument values.
</p>


<h3>Note</h3>

<p>If saving as a pdf, these files can get very large with many samples and render slowly.
The <code>keep_percent</code> argument is intended to help with this by thinning the chains at quasi-evenly spaced intervals.
</p>


<h3>See Also</h3>

<p><code>match_params()</code>, <code>density_plot()</code>, <code>trace_plot()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
  #load example mcmc.list
  data(cjs)

  # use current device
  diag_plots(cjs, "B0")

  # use a new device
  diag_plots(cjs, "B0", ext_device = TRUE)

  # always show diagnostic summaries
  diag_plots(cjs, "B0", show_diags = "always")

  # use a different layout (leaving it as "auto" is usually best)
  diag_plots(cjs, c("sig", "b"), layout = "5x3")

  # save diagnostics for all nodes to a pdf file
  diag_plots(cjs, "", save = TRUE, file = "diags.pdf")
}
</code></pre>


</div>
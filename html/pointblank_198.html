<div class="container">

<table style="width: 100%;"><tr>
<td>yaml_read_agent</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read a <strong>pointblank</strong> YAML file to create an <em>agent</em> object</h2>

<h3>Description</h3>

<p>With <code>yaml_read_agent()</code> we can read a <strong>pointblank</strong> YAML file that
describes a validation plan to be carried out by an <em>agent</em> (typically
generated by the <code>yaml_write()</code> function. What's returned is a new <em>agent</em>
with that validation plan, ready to interrogate the target table at will
(using the table-prep formula that is set with the <code>tbl</code> argument of
<code>create_agent()</code>). The agent can be given more validation steps if needed
before using <code>interrogate()</code> or taking part in any other agent ops (e.g.,
writing to disk with outputs intact via <code>x_write_disk()</code> or again to
<strong>pointblank</strong> YAML with <code>yaml_write()</code>).
</p>
<p>To get a picture of how <code>yaml_read_agent()</code> is interpreting the validation
plan specified in the <strong>pointblank</strong> YAML, we can use the
<code>yaml_agent_show_exprs()</code> function. That function shows us (in the console)
the <strong>pointblank</strong> expressions for generating the described validation plan.
</p>


<h3>Usage</h3>

<pre><code class="language-R">yaml_read_agent(filename, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p><em>File name</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <strong>required</strong>
</p>
<p>The name of the YAML file that contains fields related to an <em>agent</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p><em>File path</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>An optional path to the YAML file (combined with <code>filename</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>ptblank_agent</code> object.
</p>


<h3>Examples</h3>

<p>There's a YAML file available in the <strong>pointblank</strong> package that's also
called <code>"agent-small_table.yml"</code>. The path for it can be accessed through
<code>system.file()</code>:
</p>
<div class="sourceCode r"><pre>yml_file_path &lt;- 
  system.file(
    "yaml", "agent-small_table.yml",
    package = "pointblank"
  )
</pre></div>
<p>The YAML file can be read as an agent with a pre-existing validation plan by
using the <code>yaml_read_agent()</code> function.
</p>
<div class="sourceCode r"><pre>agent &lt;- yaml_read_agent(filename = yml_file_path)

agent
</pre></div>


<img src="https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_yaml_write_1.png" alt="This image was generated from the first code example in the `yaml_write()` help file." style="width:100%;"><p>This particular agent is using <code>~ tbl_source("small_table", "tbl_store.yml")</code>
to source the table-prep from a YAML file that holds a table store (can be
seen using <code>yaml_agent_string(agent = agent)</code>). Let's put that file in the
working directory (the <strong>pointblank</strong> package has the corresponding YAML
file):
</p>
<div class="sourceCode r"><pre>yml_tbl_store_path &lt;-
  system.file(
    "yaml", "tbl_store.yml",
    package = "pointblank"
  )

file.copy(from = yml_tbl_store_path, to = ".")
</pre></div>
<p>As can be seen from the validation report, no interrogation was yet
performed. Saving an agent to YAML will remove any traces of interrogation
data and serve as a plan for a new interrogation on the same target table. We
can either follow this up with with <code>interrogate()</code> and get an agent with
intel, or, we can interrogate directly from the YAML file with
<code>yaml_agent_interrogate()</code>:
</p>
<div class="sourceCode r"><pre>agent &lt;- yaml_agent_interrogate(filename = yml_file_path)

agent
</pre></div>


<img src="https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_yaml_write_2.png" alt="This image was generated from the second code example in the `yaml_write()` help file." style="width:100%;"><h3>Function ID</h3>

<p>11-2
</p>


<h3>See Also</h3>

<p>Other pointblank YAML: 
<code>yaml_agent_interrogate()</code>,
<code>yaml_agent_show_exprs()</code>,
<code>yaml_agent_string()</code>,
<code>yaml_exec()</code>,
<code>yaml_informant_incorporate()</code>,
<code>yaml_read_informant()</code>,
<code>yaml_write()</code>
</p>


</div>
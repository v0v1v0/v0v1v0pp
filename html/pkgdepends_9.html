<div class="container">

<table style="width: 100%;"><tr>
<td>git-protocol</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>git protocol notes, for developers</h2>

<h3>Description</h3>

<p>Assumptions, they might be relaxed or checked for later:
</p>

<ul>
<li>
<p> The server must speak the smart protocol, version 1 or 2.
(Although I added some functions specifically for the dumb protocol,
but they are pretty limited.)
</p>
</li>
<li>
<p> We use HTTP transport, not SSH.
</p>
</li>
<li>
<p> The server should have the <code>shallow</code> capability.
</p>
</li>
<li>
<p> The server should have the <code>filter</code> capability if protocol version 2.
</p>
</li>
<li>
<p> Only SHA-1 hashing is supported.
</p>
</li>
</ul>
<h3>Details</h3>

<p>Improvements needed:
</p>

<ul>
<li>
<p> DONE Tests. (Can always have more.)
</p>
</li>
<li>
<p> DONE Use async HTTP.
</p>
</li>
<li>
<p> DONE Support packfiles with deltas. (<code>ofs-delta</code> objects are still
not supported.)
</p>
</li>
<li>
<p> DONE Optionally send authorization. Already possibly in the URL.
</p>
</li>
<li>
<p> DONE Better error messages.
</p>
</li>
<li>
<p> Better errors for non-existing user, repository, ref, PR, etc.
</p>
</li>
</ul>
<p>Optional improvements:
</p>

<ul>
<li>
<p> Support <code>ofs-delta</code> objects in packfiles. Not necessarily, unless we
send this capability, the server is not sending <code>ofs-delta</code> objects.
</p>
</li>
<li>
<p> Make unpacking faster. It is not fast currently, with all the bit
arithmetic in R. But it is already faster than a <code>tar.gz</code> + uncompress
download from GitHub, so not really needed.
</p>
</li>
</ul>
<h4>Docs and other helpful links:</h4>


<ul>
<li> <p><a href="https://github.com/git/git/blob/master/Documentation/gitprotocol-common.txt">https://github.com/git/git/blob/master/Documentation/gitprotocol-common.txt</a>
</p>
</li>
<li> <p><a href="https://github.com/git/git/blob/master/Documentation/gitprotocol-pack.txt">https://github.com/git/git/blob/master/Documentation/gitprotocol-pack.txt</a>
</p>
</li>
<li> <p><a href="https://github.com/git/git/blob/master/Documentation/gitprotocol-v2.txt">https://github.com/git/git/blob/master/Documentation/gitprotocol-v2.txt</a>
</p>
</li>
<li> <p><a href="https://github.com/calebsander/git-internals/blob/part2/src/main.rs">https://github.com/calebsander/git-internals/blob/part2/src/main.rs</a>
</p>
</li>
<li> <p><a href="https://dev.to/calebsander/git-internals-part-1-the-git-object-model-474m">https://dev.to/calebsander/git-internals-part-1-the-git-object-model-474m</a>
</p>
</li>
</ul>
</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>repo_get</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Query and set the list of CRAN-like repositories</h2>

<h3>Description</h3>

<p>pkgcache uses the <code>repos</code> option, see <code>options()</code>. It also automatically
uses the current Bioconductor repositories, see <code>bioc_version()</code>.
These functions help to query and manipulate the <code>repos</code> option.
</p>


<h3>Usage</h3>

<pre><code class="language-R">repo_get(
  r_version = getRversion(),
  bioc = TRUE,
  cran_mirror = default_cran_mirror()
)

repo_resolve(spec)

repo_add(..., .list = NULL)

with_repo(repos, expr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r_version</code></td>
<td>
<p>R version(s) to use for the Bioconductor repositories,
if <code>bioc</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bioc</code></td>
<td>
<p>Whether to add Bioconductor repositories, even if they
are not configured in the <code>repos</code> option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cran_mirror</code></td>
<td>
<p>The CRAN mirror to use, see
<code>default_cran_mirror()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p>A single repository specification, a possibly named
character scalar. See details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Repository specifications. See details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.list</code></td>
<td>
<p>List or character vector of repository specifications,
see details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repos</code></td>
<td>
<p>A list or character vector of repository specifications.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>R expression to evaluate.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>repo_get()</code> queries the repositories pkgcache uses. It uses the
<code>repos</code> option (see options), and also the default Bioconductor
repository.
</p>
<p><code>repo_resolve()</code> resolves a single repository specification to a
repository URL.
</p>
<p><code>repo_add()</code> adds a new repository to the <code>repos</code> option. (To remove
a repository, call <code>option()</code> directly, with the subset that you want
to keep.)
</p>
<p><code>with_repo()</code> temporarily adds the repositories in <code>repos</code>,
evaluates <code>expr</code>, and then resets the configured repositories.
</p>


<h3>Value</h3>

<p><code>repo_get()</code> returns a data frame with columns:
</p>

<ul>
<li> <p><code>name</code>: repository name. Names are informational only.
</p>
</li>
<li> <p><code>url</code>: repository URL.
</p>
</li>
<li> <p><code>type</code>: repository type. This is also informational, currently it
can be <code>cran</code> for CRAN, <code>bioc</code> for a Bioconductor repository, and
<code>cranlike</code>: for other repositories.
</p>
</li>
<li> <p><code>r_version</code>: R version that is supposed to be used with this
repository. This is only set for Bioconductor repositories. It is <code>*</code>
for others. This is also informational, and not used when retrieving
the package metadata.
</p>
</li>
<li> <p><code>bioc_version</code>: Bioconductor version. Only set for Bioconductor
repositories, and it is <code>NA</code> for others.
</p>
</li>
</ul>
<p><code>repo_resolve()</code> returns a named character vector, with the URL(s) of
the repository.
</p>
<p><code>repo_add()</code> returns the same data frame as <code>repo_get()</code>, invisibly.
</p>
<p><code>with_repo()</code> returns the value of <code>expr</code>.
</p>


<h3>Repository specifications</h3>

<p>The format of a repository specification is a named or unnamed
character scalar. If the name is missing, pkgcache adds a name
automatically. The repository named <code>CRAN</code> is the main CRAN repository,
but otherwise names are informational.
</p>
<p>Currently supported repository specifications:
</p>

<ul>
<li>
<p> URL pointing to the root of the CRAN-like repository. Example:
</p>
<div class="sourceCode"><pre>https://cloud.r-project.org
</pre></div>
</li>
<li> <p><code>PPM@latest</code>, PPM (Posit Package Manager, formerly RStudio Package
Manager), the latest snapshot.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠PPM@&lt;date&gt;⁠</code>, PPM (Posit Package Manager, formerly RStudio Package
Manager) snapshot, at the specified date.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠PPM@&lt;package&gt;-&lt;version&gt;⁠</code> PPM snapshot, for the day after the
release of <code style="white-space: pre;">⁠&lt;version&gt;⁠</code> of <code style="white-space: pre;">⁠&lt;package&gt;⁠</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠PPM@R-&lt;version&gt;⁠</code> PPM snapshot, for the day after R <code style="white-space: pre;">⁠&lt;version&gt;⁠</code>
was released.
</p>
</li>
</ul>
<p>Still works for dates starting from 2017-10-10, but now deprecated,
because MRAN is discontinued:
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠MRAN@&lt;date&gt;⁠</code>, MRAN (Microsoft R Application Network) snapshot, at
the specified date.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠MRAN@&lt;package&gt;-&lt;version&gt;⁠</code> MRAN snapshot, for the
day after the release of <code style="white-space: pre;">⁠&lt;version&gt;⁠</code> of <code style="white-space: pre;">⁠&lt;package&gt;⁠</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠MRAN@R-&lt;version&gt;⁠</code> MRAN snapshot, for the day
after R <code style="white-space: pre;">⁠&lt;version&gt;⁠</code> was released.
</p>
</li>
</ul>
<p>Notes:
</p>

<ul>
<li>
<p> See more about PPM at <a href="https://packagemanager.posit.co/client/#/">https://packagemanager.posit.co/client/#/</a>.
</p>
</li>
<li>
<p> The <code style="white-space: pre;">⁠RSPM@⁠</code> prefix is still supported and treated the same way as
<code style="white-space: pre;">⁠PPM@⁠</code>.
</p>
</li>
<li>
<p> The MRAN service is now retired, see
<a href="https://techcommunity.microsoft.com/t5/azure-sql-blog/microsoft-r-application-network-retirement/ba-p/3707161">https://techcommunity.microsoft.com/t5/azure-sql-blog/microsoft-r-application-network-retirement/ba-p/3707161</a>
for details.
</p>
</li>
<li> <p><code>MRAN@...</code> repository specifications now resolve to PPM, but note that
PPM snapshots are only available from 2017-10-10. See more about this
at <a href="https://posit.co/blog/migrating-from-mran-to-posit-package-manager/">https://posit.co/blog/migrating-from-mran-to-posit-package-manager/</a>.
</p>
</li>
<li>
<p> All dates (or times) can be specified in the ISO 8601 format.
</p>
</li>
<li>
<p> If PPM does not have a snapshot available for a date, the next
available date is used.
</p>
</li>
<li>
<p> Dates that are before the first, or after the last PPM snapshot
will trigger an error.
</p>
</li>
<li>
<p> Unknown R or package versions will trigger an error.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other repository functions: 
<code>repo_status()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">repo_get()

repo_resolve("PPM@2021-01-21")
#' repo_resolve("PPM@dplyr-1.0.0")
#' repo_resolve("PPM@R-4.0.0")


with_repo(c(CRAN = "PPM@dplyr-1.0.0"), repo_get())
with_repo(c(CRAN = "PPM@dplyr-1.0.0"), meta_cache_list(package = "dplyr"))

with_repo(c(CRAN = "MRAN@2018-06-30"), summary(repo_status()))

</code></pre>


</div>
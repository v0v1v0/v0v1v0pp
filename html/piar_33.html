<div class="container">

<table style="width: 100%;"><tr>
<td>contrib</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract percent-change contributions</h2>

<h3>Description</h3>

<p>Extract a matrix or data frame of percent-change contributions from a price
index.
</p>


<h3>Usage</h3>

<pre><code class="language-R">contrib(x, ...)

## S3 method for class 'piar_index'
contrib(x, level = levels(x)[1L], period = time(x), ..., pad = 0)

contrib2DF(x, ...)

## S3 method for class 'piar_index'
contrib2DF(x, level = levels(x)[1L], period = time(x), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A price index, as made by, e.g., <code>elemental_index()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to or used by methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>The level of an index for which percent-change contributions
are desired, defaulting to the first level (usually the top-level for an
aggregate index). <code>contrib2DF()</code> can accept multiple levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>The time periods for which percent-change contributions are
desired, defaulting to all time periods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pad</code></td>
<td>
<p>A numeric value to pad contributions so that they fit into a
rectangular array when products differ over time. The default is 0.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>contrib()</code> returns a matrix of percent-change contributions with a column
for each <code>period</code> and a row for each product (sorted) for which there are
contributions in <code>level</code>. Contributions are padded with <code>pad</code> to fit into a
rectangular array when products differ over time.
</p>
<p><code>contrib2DF()</code> returns a data frame of contributions with four
columns: <code>period</code>, <code>level</code>, <code>product</code>, and <code>value</code>.
</p>


<h3>See Also</h3>

<p>Other index methods: 
<code>[.piar_index()</code>,
<code>aggregate.piar_index</code>,
<code>as.data.frame.piar_index()</code>,
<code>chain()</code>,
<code>head.piar_index()</code>,
<code>is.na.piar_index()</code>,
<code>levels.piar_index()</code>,
<code>mean.piar_index</code>,
<code>merge.piar_index()</code>,
<code>split.piar_index()</code>,
<code>stack.piar_index()</code>,
<code>time.piar_index()</code>,
<code>window.piar_index()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">prices &lt;- data.frame(
  rel = 1:8,
  period = rep(1:2, each = 4),
  ea = rep(letters[1:2], 4)
)

index &lt;- elemental_index(prices, rel ~ period + ea, contrib = TRUE)

pias &lt;- aggregation_structure(
  list(c("top", "top", "top"), c("a", "b", "c")), weights = 1:3
)

index &lt;- aggregate(index, pias, na.rm = TRUE)

# Percent-change contributions for the top-level index

contrib(index)

contrib2DF(index)

# Calculate EA contributions for the chained index

library(gpindex)

arithmetic_contributions(
  as.matrix(chain(index))[c("a", "b", "c"), 2],
  weights(pias)
)

</code></pre>


</div>
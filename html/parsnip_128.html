<div class="container">

<table style="width: 100%;"><tr>
<td>details_poisson_reg_h2o</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Poisson regression via h2o</h2>

<h3>Description</h3>

<p><code>h2o::h2o.glm()</code> uses penalized maximum likelihood to fit a model for
count data.
</p>


<h3>Details</h3>

<p>For this engine, there is a single mode: regression
</p>


<h4>Tuning Parameters</h4>

<p>This model has 2 tuning parameters:
</p>

<ul>
<li> <p><code>mixture</code>: Proportion of Lasso Penalty (type: double, default: see
below)
</p>
</li>
<li> <p><code>penalty</code>: Amount of Regularization (type: double, default: see below)
</p>
</li>
</ul>
<p>By default, when not given a fixed <code>penalty</code>,
<code>h2o::h2o.glm()</code> uses a heuristic approach to select
the optimal value of <code>penalty</code> based on training data. Setting the
engine parameter <code>lambda_search</code> to <code>TRUE</code> enables an efficient version
of the grid search, see more details at
<a href="https://docs.h2o.ai/h2o/latest-stable/h2o-docs/data-science/algo-params/lambda_search.html">https://docs.h2o.ai/h2o/latest-stable/h2o-docs/data-science/algo-params/lambda_search.html</a>.
</p>
<p>The choice of <code>mixture</code> depends on the engine parameter <code>solver</code>, which
is automatically chosen given training data and the specification of
other model parameters. When <code>solver</code> is set to <code>'L-BFGS'</code>, <code>mixture</code>
defaults to 0 (ridge regression) and 0.5 otherwise.
</p>



<h4>Translation from parsnip to the original package</h4>

<p><code>agua::h2o_train_glm()</code> for <code>poisson_reg()</code> is
a wrapper around <code>h2o::h2o.glm()</code> with
<code>family = 'poisson'</code>.
</p>
<p>The <strong>agua</strong> extension package is required to fit this model.
</p>
<div class="sourceCode r"><pre>library(poissonreg)

poisson_reg(penalty = double(1), mixture = double(1)) %&gt;% 
  set_engine("h2o") %&gt;% 
  translate()
</pre></div>
<div class="sourceCode"><pre>## Poisson Regression Model Specification (regression)
## 
## Main Arguments:
##   penalty = double(1)
##   mixture = double(1)
## 
## Computational engine: h2o 
## 
## Model fit template:
## agua::h2o_train_glm(x = missing_arg(), y = missing_arg(), weights = missing_arg(), 
##     validation_frame = missing_arg(), lambda = double(1), alpha = double(1), 
##     family = "poisson")
</pre></div>



<h4>Preprocessing requirements</h4>

<p>Factor/categorical predictors need to be converted to numeric values
(e.g., dummy or indicator variables) for this engine. When using the
formula method via <code>fit()</code>, parsnip will
convert factor columns to indicators.
</p>
<p>Predictors should have the same scale. One way to achieve this is to
center and scale each so that each predictor has mean zero and a
variance of one.
</p>
<p>By default, <code>h2o::h2o.glm()</code> uses the argument <code>standardize = TRUE</code> to
center and scale all numerical columns.
</p>



<h4>Initializing h2o</h4>

<p>To use the h2o engine with tidymodels, please run <code>h2o::h2o.init()</code>
first. By default, This connects R to the local h2o server. This needs
to be done in every new R session. You can also connect to a remote h2o
server with an IP address, for more details see
<code>h2o::h2o.init()</code>.
</p>
<p>You can control the number of threads in the thread pool used by h2o
with the <code>nthreads</code> argument. By default, it uses all CPUs on the host.
This is different from the usual parallel processing mechanism in
tidymodels for tuning, while tidymodels parallelizes over resamples, h2o
parallelizes over hyperparameter combinations for a given resample.
</p>
<p>h2o will automatically shut down the local h2o instance started by R
when R is terminated. To manually stop the h2o server, run
<code>h2o::h2o.shutdown()</code>.
</p>



<h4>Saving fitted model objects</h4>

<p>Models fitted with this engine may require native serialization methods
to be properly saved and/or passed between R sessions. To learn more
about preparing fitted models for serialization, see the bundle package.
</p>



</div>
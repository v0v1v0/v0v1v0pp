<div class="container">

<table style="width: 100%;"><tr>
<td>da</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Disproportionality Analysis</h2>

<h3>Description</h3>

<p>The function <code>da</code> executes disproportionality analyses,
i.e. compares the proportion of reports with a specific adverse event for a drug,
against an event proportion from a comparator based on the passed data frame.
See the vignette for a brief introduction to disproportionality analysis.
Furthermore, <code>da</code> supports three estimators: Information Component (IC),
Proportional Reporting Rate (PRR) and the Reporting Odds Ratio (ROR).
</p>


<h3>Usage</h3>

<pre><code class="language-R">da(
  df = NULL,
  df_colnames = list(report_id = "report_id", drug = "drug", event = "event", group_by =
    NULL),
  da_estimators = c("ic", "prr", "ror"),
  sort_by = "ic",
  number_of_digits = 2,
  rule_of_N = 3,
  conf_lvl = 0.95,
  excel_path = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>An object possible to convert to a data table, e.g.
a tibble or data.frame, containing patient level reported drug-event-pairs.
See header 'The df object' below for further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df_colnames</code></td>
<td>
<p>A list of column names to use in <code>df</code>. That is,
point <code>da</code> to the 'report id'-column (<code>report_id</code>), the
'drug name'-column (<code>drug</code>), the 'adverse event'-column (<code>event</code>)
and optionally a grouping column <code>group_by</code> to calculate disproportionality
across. See the vignette for further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>da_estimators</code></td>
<td>
<p>Character vector specifying which disproportionality
estimators to use, in case you don't need all implemented options. Defaults
to c("ic", "prr", "ror").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_by</code></td>
<td>
<p>The output is sorted in descending order of the lower bound of
the confidence/credibility interval for a passed da estimator. Any of the passed strings
in "da_estimators" is accepted, the default is "ic".
If a grouping variable is passed, sorting is made by the sample average across each drug-event-combination (ignoring NAs).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>number_of_digits</code></td>
<td>
<p>Round decimal columns to specified precision, default is two decimals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rule_of_N</code></td>
<td>
<p>Numeric value. Sets estimates for ROR and PRR to NA when observed
counts are strictly less than the passed value of <code>rule_of_N</code>. Default value
is 3, 5 is sometimes used as a more liberal alternative. Set to NULL if you
don't want to apply any such rule.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>excel_path</code></td>
<td>
<p>Intended for users who prefer to work in excel with minimal work in R.
To write the output of <code>da</code> to an excel file, provide a path
to a folder. For instance, to write to your current working directory, pass <code>getwd()</code>.
The excel file will by default be named <code>da.xlsx</code>. To control the excel file name,
pass a path ending with the desired filename suffixed with <code>.xlsx</code>. If you
do not want to export the output to an excel file, pass NULL (the default).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>da</code> returns a data frame (invisibly) containing counts and
estimates related to supported disproportionality estimators. Each row
corresponds to a drug-event pair.
</p>


<h3>The df object</h3>

<p>The passed <code>df</code> should be (convertible to) a data table and at least contain three
columns: <code>report_id</code>, <code>drug</code> and <code>event</code>. The data table should contain one row
per reported drug-event-combination, i.e. receiving a single additional report
for drug X and event Y would add one row to the table. If the single report
contained drug X for event Y and event Z, two rows would be added, with the
same <code>report_id</code> and <code>drug</code> on both rows. Column <code>report_id</code> must be of type
numeric or character. Columns <code>drug</code> and <code>event</code> must be of type character.
If column <code>group_by</code> is provided, it can be either numeric or character.
You can use a <code>df</code> with column names of your choosing, as long as you
connect role and name in the <code>df_colnames</code>-parameter.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Run a disproportionality analysis

da_1 &lt;-
  tiny_dataset |&gt;
  da()

### Run a disproportionality across subgroups
list_of_colnames &lt;-
  list(
    report_id = "report_id",
    drug = "drug",
    event = "event",
    group_by = "group"
  )

 da_2 &lt;-
  tiny_dataset |&gt;
  da(df_colnames = list_of_colnames)

# If columns in your df have different names than the default ones,
# you can specify the column names in the df_colnames parameter list:

renamed_df &lt;-
  tiny_dataset |&gt;
  dplyr::rename(ReportID = report_id)

list_of_colnames$report_id &lt;- "ReportID"

da_3 &lt;-
  renamed_df |&gt;
  da(df_colnames = list_of_colnames)


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>screen_simulation_inputs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Screen many simulation inputs: a parent function to <code>do_nmb_sim()</code>
</h2>

<h3>Description</h3>

<p>Runs <code>do_nmb_sim()</code> with a range of inputs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">screen_simulation_inputs(
  sample_size,
  n_sims,
  n_valid,
  sim_auc,
  event_rate,
  cutpoint_methods = get_inbuilt_cutpoint_methods(),
  fx_nmb_training,
  fx_nmb_evaluation,
  pair_nmb_train_and_evaluation_functions = FALSE,
  meet_min_events = TRUE,
  min_events = NA,
  show_progress = FALSE,
  cl = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sample_size</code></td>
<td>
<p>A value (or vector of values): Sample size of training
set. If missing, a sample size calculation will be performed and the
calculated size will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sims</code></td>
<td>
<p>A value (or vector of values): Number of simulations to run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_valid</code></td>
<td>
<p>A value (or vector of values): Sample size for evaluation set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sim_auc</code></td>
<td>
<p>A value (or vector of values): Simulated model discrimination
(AUC).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_rate</code></td>
<td>
<p>A value (or vector of values): simulated event rate of the
binary outcome being predicted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutpoint_methods</code></td>
<td>
<p>cutpoint methods to include. Defaults to use the
inbuilt methods. This doesn't change across calls to <code>do_nmb_sim()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fx_nmb_training</code></td>
<td>
<p>A function or <code>NMBsampler</code> (or list of) that returns named
vector of NMB assigned to classifications use for obtaining cutpoint on
training set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fx_nmb_evaluation</code></td>
<td>
<p>A function or <code>NMBsampler</code> (or list of) that returns
named vector of NMB assigned to classifications use for obtaining cutpoint
on evaluation set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pair_nmb_train_and_evaluation_functions</code></td>
<td>
<p><code>logical</code>.
Whether or not to pair the lists of functions passed for
<code>fx_nmb_training</code> and <code>fx_nmb_evaluation</code>. If two treatment
strategies are being used, it may make more sense to pair these because
selecting a value-optimising or cost-minimising threshold using one strategy
but evaluating another is likely unwanted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meet_min_events</code></td>
<td>
<p>Whether or not to incrementally add samples until the
expected number of events (<code>sample_size * event_rate</code>) is met.
(Applies to sampling of training data only.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_events</code></td>
<td>
<p>A value: the minimum number of events to include in the
training sample. If less than this number are included in sample of size
<code>sample_size</code>, additional samples are added until the min_events is met.
The default (<code>NA</code>) will use the expected value given the
<code>event_rate</code> and the <code>sample_size</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_progress</code></td>
<td>
<p>Logical. Whether to display a progress bar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl</code></td>
<td>
<p>A cluster made using <code>parallel::makeCluster()</code>. If a cluster
is provided, the simulation will be done in parallel.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <code>predictNMBscreen</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Screen for optimal cutpoints given increasing values of
# model discrimination (sim_auc)

get_nmb &lt;- function() c("TP" = -3, "TN" = 0, "FP" = -1, "FN" = -4)
sim_screen_obj &lt;- screen_simulation_inputs(
  n_sims = 50, n_valid = 10000, sim_auc = seq(0.7, 0.9, 0.1),
  event_rate = 0.1, fx_nmb_training = get_nmb, fx_nmb_evaluation = get_nmb
)

</code></pre>


</div>
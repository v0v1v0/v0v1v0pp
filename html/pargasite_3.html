<div class="container">

<table style="width: 100%;"><tr>
<td>create_raster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Raster creation function</h2>

<h3>Description</h3>

<p>This function is used internally by create_pargasite_data, allowing users
to specify a longitude/latitude bounding box. It is exported for package
development, not for direct user calls.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_raster(
  parameter_code,
  pollutant_standard = NULL,
  data_field = c("NAAQS_statistic", "arithmetic_mean"),
  event_filter = c("Events Included", "Events Excluded", "Concurred Events Excluded"),
  year,
  by_month = FALSE,
  minlat = 24,
  maxlat = 50,
  minlon = -124,
  maxlon = -66,
  crs = 6350,
  cell_size = 10000,
  aqs_email = get_aqs_email(),
  aqs_key = get_aqs_key(),
  nmax = Inf,
  download_chunk_size = c("2-week", "month")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>parameter_code</code></td>
<td>
<p>A numeric value specifying a AQS parameter code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pollutant_standard</code></td>
<td>
<p>A vector of strings specifying unique pollutant
standards in AQS (e.g., PM25 Annual 2012).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_field</code></td>
<td>
<p>A vector of strings specifying whether which data fields
are used to summarize the data. Must be either 'NAAQS statistic',
'arithmetic_mean', or both. 'NAAQS_statistic' try to chooses an
appropriate field based on National Ambient Air Quality Standards (NAAQS)
in the AQS yearly data (e.g, for CO 1-hour average, 'second_max_value'
would be chosen). 'arithmetic_mean' represents the measure of central
tendency in the yearly data. Ignored when <code>by_month = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_filter</code></td>
<td>
<p>A vector of strings indicating whether data measured
during exceptional events are included in the summary. 'Events Included'
means that events occurred and the data from theme is included in the
summary. 'Events Excluded' means that events occurred but data from them
is excluded from the summary. 'Concurred Events Excluded' means that
events occurred but only EPA concurred exclusions are removed from the
summary. If multiple values are specified, pollutant levels for each
filter are stored in <code>event</code> dimension in the resulting output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>A vector of 4-digit numeric values specifying years to retrieve
pollutant levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by_month</code></td>
<td>
<p>A logical value indicating whether data summarized at
monthly level instead of yearly level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minlat, maxlat, minlon, maxlon</code></td>
<td>
<p>A numeric value specifying a bounding box
defined by two latitudes and two longitudes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crs</code></td>
<td>
<p>A target coordinate reference system.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cell_size</code></td>
<td>
<p>A numeric value specifying a cell size of grid cells in
meters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aqs_email</code></td>
<td>
<p>A string specifying the registered email for AQS API
service.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aqs_key</code></td>
<td>
<p>A string specifying the registered key for AQS API service.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmax</code></td>
<td>
<p>An integer value specifying the number of nearest observations
that should be used for spatial interpolation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>download_chunk_size</code></td>
<td>
<p>A string specifying a chunk size for AQS API
daily data download to prevent an unexpected server timeout error. Ignored
when <code>by_month = FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A stars object containing the interpolated pollutant levels covering
the user-specified bounding box.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Set your AQS API key first using [raqs::set_aqs_user] to run the example.

## SO2 through 2021 to 2022
so2 &lt;- create_raster(42401, event_filter = "Events Included",
                     year = 2021:2022)

## End(Not run)

</code></pre>


</div>
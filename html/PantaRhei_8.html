<div class="container">

<table style="width: 100%;"><tr>
<td>sankey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plots a Sankey diagram</h2>

<h3>Description</h3>

<p>Plots a Sankey diagram
</p>


<h3>Usage</h3>

<pre><code class="language-R">sankey(
  nodes,
  flows,
  palette,
  node_style = list(),
  title = NULL,
  legend = FALSE,
  page_margin = 0.1,
  max_width = 0.2,
  rmin = 0.2,
  copyright = NULL,
  grill = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nodes</code></td>
<td>
<p>data.frame, containing the nodes definition</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flows</code></td>
<td>
<p>data.frame, containing the nodes definition</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palette</code></td>
<td>
<p>data.frame, containing the nodes definition</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node_style</code></td>
<td>
<p>list: containing node style specifiers:
</p>

<dl>
<dt>type</dt>
<dd>
<p>Character: Node type; possible values are <code>"box"</code>, <code>"bar"</code> and <code>"arrow"</code>.</p>
</dd>
<dt>length</dt>
<dd>
<p>numeric: node length, as fraction plot size (default: 0.1).</p>
</dd>
<dt>gp</dt>
<dd>
<p>an object of class <code>gpar</code>, typically the output from a call to
the function <code>gpar()</code>.
This is basically a list of graphical parameter settings,
describing the colors etc of the node.</p>
</dd>
<dt>label_pos</dt>
<dd>
<p>character: label position. values: auto, above, below, left, right, none.</p>
</dd>
<dt>label_anchor</dt>
<dd>
<p>character: label position (overrides <code>label_pos</code>). Values are NW, N, NE, W, E, SW, S, SE.</p>
</dd>
<dt>label_align</dt>
<dd>
<p>character: label alignment with respect to <code>label_anchor</code>. Values are NW, N, etc.</p>
</dd>
<dt>label_gp</dt>
<dd>
<p>an object of class <code>gpar</code>, describing the font and color of the label text.</p>
</dd>
<dt>mag_pos</dt>
<dd>
<p>similar to <code>label_pos</code>, but controls location of the node magnitude.
Value <code>inside</code> plots the node magnitude inside the node.
Value <code>label</code> plots the node magnitude beneath the node label.</p>
</dd>
<dt>mag_anchor</dt>
<dd>
<p>similar to <code>label_anchor</code>.</p>
</dd>
<dt>mag_align</dt>
<dd>
<p>similar to <code>label_align</code>.</p>
</dd>
<dt>mag_gp</dt>
<dd>
<p>similar to <code>label_gp</code>.</p>
</dd>
<dt>mag_fmt</dt>
<dd>
<p>character: format string for the node magnitude. default: <code>"%.1f"</code>.
see <code>?sprintf</code> for more information.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>character: plot title. use <code>strformat()</code> to specify formatting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>logical or gpar: Specifies the plotting of a legend.
valid values are NULL (default; no legend),
TRUE (plot a legend using standard text size and color),
or the output of a call to gpar(), to control legend text size and color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_margin</code></td>
<td>
<p>numeric: Page margin. Either a scalar, an (x,y) vector or an (left,bot,rt,top) vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_width</code></td>
<td>
<p>numeric: Maximum width of the flow bundles, in fraction of the plot size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmin</code></td>
<td>
<p>numeric: Minimum radius for flow path bends (as fraction of the diagram's units)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copyright</code></td>
<td>
<p>character: optional copyright statement?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grill</code></td>
<td>
<p>logical: Plot a coordinate grill?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical: print some diagnostic messages?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The modified nodes data.frame
</p>


<h3>Examples</h3>

<pre><code class="language-R">nodes &lt;- data.frame(ID=c("A","B"), x=1:2, y=0)
flows &lt;- data.frame(from="A", to="B", quantity=10, substance="stuff")
sankey(nodes, flows)

colors &lt;- data.frame(substance="stuff", color="blue")
sankey(nodes, flows, colors)

sankey(nodes, flows, legend=TRUE)                       # Plots default legend
sankey(nodes, flows, legend=grid::gpar(fontsize=18, ncols=2)) # Large fonts; 2 columns
</code></pre>


</div>
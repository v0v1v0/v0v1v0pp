<div class="container">

<table style="width: 100%;"><tr>
<td>eval_ferrier_importance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Evaluate solution importance using Ferrier scores</h2>

<h3>Description</h3>

<p>Calculate importance scores for planning units selected in
a solution following Ferrier <em>et al.</em> (2000).
</p>


<h3>Usage</h3>

<pre><code class="language-R">eval_ferrier_importance(x, solution)

## S4 method for signature 'ConservationProblem,numeric'
eval_ferrier_importance(x, solution)

## S4 method for signature 'ConservationProblem,matrix'
eval_ferrier_importance(x, solution)

## S4 method for signature 'ConservationProblem,data.frame'
eval_ferrier_importance(x, solution)

## S4 method for signature 'ConservationProblem,Spatial'
eval_ferrier_importance(x, solution)

## S4 method for signature 'ConservationProblem,sf'
eval_ferrier_importance(x, solution)

## S4 method for signature 'ConservationProblem,Raster'
eval_ferrier_importance(x, solution)

## S4 method for signature 'ConservationProblem,SpatRaster'
eval_ferrier_importance(x, solution)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>problem()</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solution</code></td>
<td>
<p><code>numeric</code>, <code>matrix</code>, <code>data.frame</code>,
<code>terra::rast()</code>, or <code>sf::sf()</code> object.
The argument should be in the same format as the planning unit cost
data in the argument to <code>x</code>.
See the Solution format section for more information.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Importance scores are reported separately for each feature within
each planning unit. Additionally, a total importance score is also
calculated as the sum of the scores for each feature.
Note that this function only works for problems
that use targets and a single zone.
It will throw an error for problems that do not meet these criteria.
</p>


<h3>Value</h3>

<p>A <code>matrix</code>, <code>tibble::tibble()</code>,
<code>terra::rast()</code>, or <code>sf::st_sf()</code> object containing the scores for each
planning unit selected in the solution.
Specifically, the returned object is in the
same format (except if the planning units are a <code>numeric</code> vector) as the
planning unit data in the argument to <code>x</code>.
</p>


<h3>Notes</h3>

<p>In previous versions, the documentation for this function had a warning
indicating that the mathematical formulation for this function required
verification. The mathematical formulation for this function has since
been corrected and verified, so now this function is recommended
for general use.
</p>


<h3>Solution format</h3>

<p>Broadly speaking, the argument to <code>solution</code> must be in the same format as
the planning unit data in the argument to <code>x</code>.
Further details on the correct format are listed separately
for each of the different planning unit data formats:
</p>

<dl>
<dt>
<code>x</code> has <code>numeric</code> planning units</dt>
<dd>
<p>The argument to <code>solution</code> must be a
<code>numeric</code> vector with each element corresponding to a different planning
unit. It should have the same number of planning units as those
in the argument to <code>x</code>. Additionally, any planning units missing
cost (<code>NA</code>) values should also have missing (<code>NA</code>) values in the
argument to <code>solution</code>.
</p>
</dd>
<dt>
<code>x</code> has <code>matrix</code> planning units</dt>
<dd>
<p>The argument to <code>solution</code> must be a
<code>matrix</code> vector with each row corresponding to a different planning
unit, and each column correspond to a different management zone.
It should have the same number of planning units and zones
as those in the argument to <code>x</code>. Additionally, any planning units
missing cost (<code>NA</code>) values for a particular zone should also have a
missing (<code>NA</code>) values in the argument to <code>solution</code>.
</p>
</dd>
<dt>
<code>x</code> has <code>terra::rast()</code> planning units</dt>
<dd>
<p>The argument to <code>solution</code>
be a <code>terra::rast()</code> object where different grid cells (pixels) correspond
to different planning units and layers correspond to
a different management zones. It should have the same dimensionality
(rows, columns, layers), resolution, extent, and coordinate reference
system as the planning units in the argument to <code>x</code>. Additionally,
any planning units missing cost (<code>NA</code>) values for a particular zone
should also have missing (<code>NA</code>)  values in the argument to <code>solution</code>.
</p>
</dd>
<dt>
<code>x</code> has <code>data.frame</code> planning units</dt>
<dd>
<p>The argument to <code>solution</code> must
be a <code>data.frame</code> with each column corresponding to a different zone,
each row corresponding to a different planning unit, and cell values
corresponding to the solution value. This means that if a <code>data.frame</code>
object containing the solution also contains additional columns, then
these columns will need to be subsetted prior to using this function
(see below for example with <code>sf::sf()</code> data).
Additionally, any planning units missing cost
(<code>NA</code>) values for a particular zone should also have missing (<code>NA</code>)
values in the argument to <code>solution</code>.
</p>
</dd>
<dt>
<code>x</code> has <code>sf::sf()</code> planning units</dt>
<dd>
<p>The argument to <code>solution</code> must be
a <code>sf::sf()</code> object with each column corresponding to a different
zone, each row corresponding to a different planning unit, and cell values
corresponding to the solution value. This means that if the
<code>sf::sf()</code> object containing the solution also contains additional
columns, then these columns will need to be subsetted prior to using this
function (see below for example).
Additionally, the argument to <code>solution</code> must also have the same
coordinate reference system as the planning unit data.
Furthermore, any planning units missing cost
(<code>NA</code>) values for a particular zone should also have missing (<code>NA</code>)
values in the argument to <code>solution</code>.
</p>
</dd>
</dl>
<h3>References</h3>

<p>Ferrier S, Pressey RL, and Barrett TW (2000) A new predictor of the
irreplaceability of areas for achieving a conservation goal, its application
to real-world planning, and a research agenda for further refinement.
<em>Biological Conservation</em>, 93: 303â€“325.
</p>


<h3>See Also</h3>

<p>See importance for an overview of all functions for evaluating
the importance of planning units selected in a solution.
</p>
<p>Other importances: 
<code>eval_rare_richness_importance()</code>,
<code>eval_replacement_importance()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# seed seed for reproducibility
set.seed(600)

# load data
sim_pu_raster &lt;- get_sim_pu_raster()
sim_pu_polygons &lt;- get_sim_pu_polygons()
sim_features &lt;- get_sim_features()

# create minimal problem with binary decisions
p1 &lt;-
  problem(sim_pu_raster, sim_features) %&gt;%
  add_min_set_objective() %&gt;%
  add_relative_targets(0.1) %&gt;%
  add_binary_decisions() %&gt;%
  add_default_solver(gap = 0, verbose = FALSE)

# solve problem
s1 &lt;- solve(p1)

# print solution
print(s1)

# plot solution
plot(s1, main = "solution", axes = FALSE)

# calculate importance scores using Ferrier et al. 2000 method
fs1 &lt;- eval_ferrier_importance(p1, s1)

# print importance scores,
# each planning unit has an importance score for each feature
# (as indicated by the column names) and each planning unit also
# has an overall total importance score (in the "total" column)
print(fs1)

# plot total importance scores
plot(fs1, main = names(fs1), axes = FALSE)

# create minimal problem with polygon planning units
p2 &lt;-
  problem(sim_pu_polygons, sim_features, cost_column = "cost") %&gt;%
  add_min_set_objective() %&gt;%
  add_relative_targets(0.05) %&gt;%
  add_binary_decisions() %&gt;%
  add_default_solver(gap = 0, verbose = FALSE)

# solve problem
s2 &lt;- solve(p2)

# print solution
print(s2)

# plot solution
plot(s2[, "solution_1"], main = "solution")

# calculate importance scores
fs2 &lt;- eval_ferrier_importance(p2, s2[, "solution_1"])

# plot importance scores
plot(fs2)


## End(Not run)

</code></pre>


</div>
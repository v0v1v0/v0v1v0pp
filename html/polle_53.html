<div class="container">

<table style="width: 100%;"><tr>
<td>policy_def</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Define Policy</h2>

<h3>Description</h3>

<p><code>policy_def</code> returns a function of class policy.
The function input is a policy_data object and it returns a data.table::data.table
with keys <code>id</code> and <code>stage</code> and action variable <code>d</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">policy_def(policy_functions, full_history = FALSE, reuse = FALSE, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>policy_functions</code></td>
<td>
<p>A single function/character string or a list of
functions/character strings. The list must have the same length as the number
of stages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full_history</code></td>
<td>
<p>If TRUE, the full history at each stage is used as
input to the policy functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reuse</code></td>
<td>
<p>If TRUE, the policy function is reused at every stage.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Character string.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Function of class <code>"policy"</code>. The function takes a
policy_data object as input and returns a data.table::data.table
with keys <code>id</code> and <code>stage</code> and action variable <code>d</code>.
</p>


<h3>See Also</h3>

<p><code>get_history_names()</code>, <code>get_history()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("polle")
### Single stage"
d1 &lt;- sim_single_stage(5e2, seed=1)
pd1 &lt;- policy_data(d1, action="A", covariates=list("Z", "B", "L"), utility="U")
pd1

# defining a static policy (A=1):
p1_static &lt;- policy_def(1)

# applying the policy:
p1_static(pd1)

# defining a dynamic policy:
p1_dynamic &lt;- policy_def(
  function(Z, L) ((3*Z + 1*L -2.5)&gt;0)*1
)
p1_dynamic(pd1)

### Two stages:
d2 &lt;- sim_two_stage(5e2, seed = 1)
pd2 &lt;- policy_data(d2,
                  action = c("A_1", "A_2"),
                  covariates = list(L = c("L_1", "L_2"),
                                    C = c("C_1", "C_2")),
                  utility = c("U_1", "U_2", "U_3"))

# defining a static policy (A=0):
p2_static &lt;- policy_def(0,
                        reuse = TRUE)
p2_static(pd2)

# defining a reused dynamic policy:
p2_dynamic_reuse &lt;- policy_def(
  function(L) (L &gt; 0)*1,
  reuse = TRUE
)
p2_dynamic_reuse(pd2)

# defining a dynamic policy for each stage based on the full history:
# available variable names at each stage:
get_history_names(pd2, stage = 1)
get_history_names(pd2, stage = 2)

p2_dynamic &lt;- policy_def(
  policy_functions = list(
    function(L_1) (L_1 &gt; 0)*1,
    function(L_1, L_2) (L_1 + L_2 &gt; 0)*1
  ),
  full_history = TRUE
)
p2_dynamic(pd2)
</code></pre>


</div>
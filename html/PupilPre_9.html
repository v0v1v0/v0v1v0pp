<div class="container">

<table style="width: 100%;"><tr>
<td>clean_artifact</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatically clean artifacts.</h2>

<h3>Description</h3>

<p><code>clean_artifact</code> performs two stage and distributional automated
clean-up of artifacts in the pupil and gaze coordinate data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">clean_artifact(data = data, MADWindow = 100, MADConstant = 2,
  MADPadding = c(200, 200), MahaConstant = 2, Method = "Robust",
  XandY = TRUE, Second = TRUE, MaxValueRun = 5, NAsAroundRun = c(2,
  2), LogFile = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame object created from <code>ppl_select_recorded_eye</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MADWindow</code></td>
<td>
<p>A numeric value specifying the window size (in msec) to use
for the MAD calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MADConstant</code></td>
<td>
<p>A numeric value specifying the constant (a multiplier for
the third quartile) when determining MAD outlier status.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MADPadding</code></td>
<td>
<p>A numeric vector of length two containing values (in
msec) to pad the identified artifact creating a window within which to
operate the cleanup.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MahaConstant</code></td>
<td>
<p>A numeric value specifying the constant (a multiplier
for the third quartile) when determining Mahalanobis outlier status.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Method</code></td>
<td>
<p>A character string ("Basic" or "Robust") indicating
which method to use for the distance calculation. Basic is a standard
Mahalanobis distance calculation based on covariance. Robust is also a
Mahalanobis distance, however, it is based on Minimum Covariance
Determinant (Rousseeuw and van Driessen, 1999) with reweighted covariance
(Pison et al., 2002). For more details, see <code>covMcd</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XandY</code></td>
<td>
<p>A logical value specifying whether to also use horizontal
velocity and acceleration in outlier detection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Second</code></td>
<td>
<p>A logical value specifying whether secondary cleaning should
be applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MaxValueRun</code></td>
<td>
<p>A numeric value specifying the maximal run of existing
values flanked by NAs that could be targeted for removal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NAsAroundRun</code></td>
<td>
<p>A numeric vector of length two containing values (in
number of subsequent NA) to be used to identify straggler runs of data
that could be removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LogFile</code></td>
<td>
<p>A character string indicating the file name (with extension)
of the log file to be created/written. The file keeps track of which events
have been cleaned. We suggest "ArtifactCleanupLog.rds".</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of type data table as described in tibble.
</p>


<h3>References</h3>

<p>Rousseeuw, P. J. and van Driessen, K. (1999) A fast algorithm
for the minimum covariance determinant estimator. Technometrics 41, 212–223.
</p>
<p>Pison, G., Van Aelst, S., and Willems, G. (2002) Small Sample
Corrections for LTS and MCD, Metrika 55, 111–123.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load example data
data("Pupilex4")

# Writing log file to temporary folder for the example
dat &lt;- clean_artifact(Pupilex4, MADWindow = 100, MADConstant = 2,
                      MADPadding = c(200, 200), MahaConstant = 2,
                      Method = "Robust", XandY = TRUE, Second = TRUE,
                      MaxValueRun = 5, NAsAroundRun = c(2,2),
                      LogFile = paste0(tempdir(),"/ArtifactCleanupLog.rds"))

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Cleanup", package="PupilPre")

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>labels</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Extract labels from and set labels for data frames
</h2>

<h3>Description</h3>

<p>Labels can be stored as an attribute <code>"variable.label"</code> for each
variable in a data set using the assignment function. With the
extractor function one can assess these labels.
</p>


<h3>Usage</h3>

<pre><code class="language-R">
## S3 method for class 'data.frame'
labels(object, which = NULL, abbreviate = FALSE, ...)

## assign labels
labels(data, which = NULL) &lt;- value

## check if data.frame is a special labeled data.frame ('ldf')
is.ldf(object)

## convert object to labeled data.frame ('ldf')
convert.labels(object)
as.ldf(object, ...)

## special plotting function for labeled data.frames ('ldf')
## S3 method for class 'ldf'
plot(x, variables = names(x),
     labels = TRUE, by = NULL, with = NULL,
     regression.line = TRUE, line.col = "red", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>a <code>data.frame</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>a <code>data.frame</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>

<p>either a number indicating the label to extract or a character
string with the <em>variable name</em> for which the label should be
extracted. One can also use a vector of numerics or character
strings to extract mutiple labels. If <code>which</code> is <code>NULL</code>
(default), all labels are returned.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>

<p>a vector containing the labels (in the order of the variables). If
which is given, only the corresponding subset is labeled. Note that
all other labels contain the variable name as label afterwards.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abbreviate</code></td>
<td>

<p>logical (default: <code>FALSE</code>). If <code>TRUE</code> variable labels are
abbreviated such that they remain unique. See
<code>abbreviate</code> for details. Further arguments to
<code>abbreviate</code> can be specified (see below).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>further options passed to function <code>abbreviate</code> if argument
<code>abbreviate = TRUE</code>.
</p>
<p>In <code>x[...]</code>, ... can be used to specify indices for
extraction. See <code>[</code> for details.
</p>
<p>In <code>plot</code>, <code>...</code> can be used to specify further graphial
parameters.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a labeled <code>data.frame</code> with class <code>'ldf'</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>

<p>character vector or numeric vector defining (continuous) variables
that should be included in the table. Per default, all numeric and
factor variables of <code>data</code> are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>

<p>labels for the variables. If <code>labels = TRUE</code> (the default),
<code>labels(data, which = variables)</code> is used as labels. If
<code>labels = NULL</code> <code>variables</code> is used as label.
<code>labels</code> can also be specified as character vector.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>

<p>a character or numeric value specifying a variable in the data set.
This variable can be either a grouping <code>factor</code> or is used as
numeric y-variable (see <code>with</code> for details). Per default no
grouping is applied. See also ‘Details’ and ‘Examples’.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>with</code></td>
<td>

<p>a character or numeric value specifying a numeric variable
<code>with</code> which to “correlate” all variables specified in
<code>variables</code>. For numeric <code>variables</code> a scatterplot is
plotted, for factor <code>variables</code> one gets a grouped boxplot.
Per default no variable is given here. Instead of <code>with</code> one
can also specify a numeric variable in <code>by</code> with the same
results. See also ‘Details’ and ‘Examples’.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regression.line</code></td>
<td>

<p>a logical argument specifying if a regression line should be added
to scatter plots (which are plotted if both <code>variables</code> and
<code>by</code> are numeric values).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line.col</code></td>
<td>

<p>the color of the regression line.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>All labels are stored as attributes of the columns of the data frame,
i.e., each variable has (up to) one attribute which contains the
variable lable.
</p>
<p>One can set or extract labels from <code>data.frame</code> objects.
If no labels are specified <code>labels(data)</code> returns the column
names of the data frame.
</p>
<p>Using <code>abbreviate = TRUE</code>, all labels are abbreviated to (at
least) 4 characters such that they are unique. Other minimal lengths
can specified by setting <code>minlength</code> (see examples below).
</p>
<p>Univariate plots can be easily obtained for all numeric and factor
variables in a data set <code>data</code> by using <code>plot(data)</code>.
</p>
<p>Bivariate plots can be obtained by specifying <code>by</code>. In case of a
factor variable, grouped <code>boxplot</code>s or <code>spineplot</code>s are
plotted depending on the class of the variable specified in
<code>variables</code>. In case of a numeric variable, grouped
<code>boxplot</code>s or scatter plots are plotted depending on the
class of the variable specified in <code>variables</code>. Note that one
cannot specify <code>by</code> and <code>with</code> at the same time (as they are
internally identical). Note that missings are excluded plot wise (also
for bivariate plots).
</p>


<h3>Value</h3>

<p><code>labels(data)</code> returns a named vector of variable labels, where
the names match the variable names and the values represent the labels.
</p>


<h3>Note</h3>

<p>If a data set is generated by <code>read.spss</code> in package
<span class="pkg">foreign</span>, labels are stored in a single attribute of the data
set. Assigning new labels, e.g. via <code>labels(data) &lt;-
  labels(data)</code> removes this attribute and stores all labels as
attributes of the variables. Alternatively one can use
<code>data &lt;- convert.labels(data)</code>.
</p>


<h3>Author(s)</h3>

<p>Benjamin Hofner
</p>


<h3>See Also</h3>

<p><code>read.spss</code> in package <span class="pkg">foreign</span>
</p>


<h3>Examples</h3>

<pre><code class="language-R">############################################################
### Basic labels manipulations

data &lt;- data.frame(a = 1:10, b = 10:1, c = rep(1:2, 5))
labels(data)  ## only the variable names
is.ldf(data) ## not yet

## now set labels
labels(data) &lt;- c("my_a", "my_b", "my_c")
## one gets a named character vector of labels
labels(data)
## data is now a ldf:
is.ldf(data)

## Altervatively one could use as.ldf(data) or convert.labels(data);
## This would keep the default labels but set the class
## correctly.

## set labels for a and b only
## Note that which represents the variable names!
labels(data, which = c("a", "b")) &lt;- c("x", "y")
labels(data)

## reset labels (to variable names):
labels(data) &lt;- NULL
labels(data)

## set label for a only and use default for other labels:
labels(data, which = "a") &lt;- "x"
labels(data)

## attach label for new variable:
data2 &lt;- data
data2$z &lt;- as.factor(rep(2:3, each = 5))
labels(data2)  ## no real label for z, only variable name
labels(data2, which = "z") &lt;- "new_label"
labels(data2)


############################################################
### Abbreviate labels

## attach long labels to data
labels(data) &lt;- c("This is a long label", "This is another long label",
                  "This also")
labels(data)
labels(data, abbreviate = TRUE, minlength = 10)


############################################################
### Data manipulations

## reorder dataset:
tmp &lt;- data2[, c(1, 4, 3, 2)]
labels(tmp)
## labels are kept and order is updated

## subsetting to single variables:
labels(tmp[, 2])  ## not working as tmp[, 2] drops to vector
## note that the label still exists but cannot be extracted
## using labels.default()
str(tmp[, 2])

labels(tmp[, 2, drop = FALSE]) ## prevent dropping

## one can also cbind labeled data.frame objects:
labels(cbind(data, tmp[, 2]))
## or better:
labels(cbind(data, tmp[, 2, drop = FALSE]))
## or rbind labeled.data.set objects:
labels(rbind(data, tmp[, -2]))


############################################################
### Plotting data sets

## plot the data auto"magically"; numerics as boxplot, factors as barplots
par(mfrow = c(2,2))
plot(data2)

## a single plot
plot(data2, variables = "a")
## grouped plot
plot(data2, variables = "a", by = "z")
## make "c" a factor and plot "c" vs. "z"
data2$c &lt;- as.factor(data2$c)
plot(data2, variables = "c", by = "z")
## the same
plot(data2, variables = 3, by = 4)

## plot everithing against "b"
## (grouped boxplots, stacked barplots or scatterplots)
plot(data2, with = "b")
</code></pre>


</div>
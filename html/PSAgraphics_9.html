<div class="container">

<table style="width: 100%;"><tr>
<td>cstrata.psa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Supports Multiple Methods for Defining and Visualizing (PS) Strata</h2>

<h3>Description</h3>

<p>Given propensity scores, allows strata to be directly user defined, possibly
to: equalize sizes of strata, equalize the ranges of propensity scores, or
to specify cut points on the unit interval. Once strata are created, a
simple graphic is generated to visualize or judge strata for overlap and
appropriateness. If a regression tree has been used, propensity scores are
defined for each leaf of the tree.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cstrata.psa(
  treatment,
  propensity,
  strata = NULL,
  int = NULL,
  tree = FALSE,
  minsize = 2,
  graphic = TRUE,
  colors = c("dark blue", "dark green"),
  xlab = "Estimated Propensity Scores with Random Heights",
  pch = c(16, 16)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>Binary vector or factor defining the two treatments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>propensity</code></td>
<td>
<p>Vector of same length as <code>treatment</code> containing
estimated propensity scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>Either a vector of same length as <code>treatment</code> of
predefined stratum number, or one integer <code>n</code> used to assign rows to
<code>n</code> strata <code>propensity</code> scores, each of approximately the same
number of cases.  If relatively few unique propensity scores have been
defined (as from a classification tree) then the logical <code>tree</code> should
be set equal to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int</code></td>
<td>
<p>Either a number <code>m</code> used to divide <code>[0,1]</code> into
<code>m</code> equal length subintervals, or a vector containing cut points
between 0 and 1 that define subintervals (perhaps as suggested by
loess.psa).  In either case the subintervals define strata, for which sizes
can differ.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tree</code></td>
<td>
<p>Logical, default <code>FALSE</code>.  If there are few unique
propensity scores, say from a recursively partitioned tree, then <code>TRUE</code>
forces strata to be defined by the unique propensity scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minsize</code></td>
<td>
<p>Smallest allowable stratum-treatment size.  If violated, rows
in the stratum are removed.  User may wish to redefine strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>graphic</code></td>
<td>
<p>Logical, default <code>TRUE</code>.  If set to <code>FALSE</code> the
graphic is not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colors</code></td>
<td>
<p>2-ary color vector.  Sets the colors of the points in the
graphic.  Default = <code>c("blue", "orange")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>Label for the x axis; default = <code>"Estimated Propensity
Scores with Random Heights"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>
<p>2-ary vector; determines the shape of points in the graphic.
Default = <code>c(16, 16)</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Original.Strata</code></td>
<td>
<p>Table of strata-treatment sizes before
<code>minsize</code> evaluation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Used.Strata</code></td>
<td>
<p>Table of strata-treatment
sizes after <code>minsize</code> evaluation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>Vector of the same
length as <code>treatment</code>, indicating either the strata input by user or
those created by the function.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>James E. Helmreich <a href="mailto:James.Helmreich@Marist.edu">James.Helmreich@Marist.edu</a>
</p>
<p>Robert M. Pruzek <a href="mailto:RMPruzek@yahoo.com">RMPruzek@yahoo.com</a>
</p>
<p>KuangNan Xiong <a href="mailto:harryxkn@yahoo.com">harryxkn@yahoo.com</a>
</p>


<h3>See Also</h3>

<p><code>cv.bal.psa</code>, <code>loess.psa</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(lindner)
attach(lindner)
lindner.ps &lt;- glm(abcix ~ stent + height + female +
      diabetic + acutemi + ejecfrac + ves1proc,
      data = lindner, family = binomial)
ps &lt;- lindner.ps$fitted
cstrata.psa(abcix, ps, strata = 5)
cstrata.psa(abcix, ps, strata = 10)
cstrata.psa(abcix, ps, int = c(.37, .56, .87, 1))

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>convert_rfv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Searches columns for given reason for visit defined by ERFV codes.</h2>

<h3>Description</h3>

<p>Analyzes reason for visit data loaded using <em>load_rfv</em>.
If requested, the data.table is returned with new columns corresponding to boolean values, whether given group of ERFV are present in the given columns.
If <em>collapse</em> is given, then the information is aggregated based-on the <em>collapse</em> column and the earliest of latest time of the given reason for visit is provided.
</p>


<h3>Usage</h3>

<pre><code class="language-R">convert_rfv(
  d,
  code = "rfv_concept_id",
  codes_to_find = NULL,
  collapse = NULL,
  code_time = "time_rfv_start",
  aggr_type = "earliest",
  nThread = parallel::detectCores() - 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>data.table, database containing reason for visit information data loaded using the <em>load_rfv</em> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>
<p>string vector, an array of column names to search.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>codes_to_find</code></td>
<td>
<p>list, a list of arrays corresponding to sets of ERFV codes. The function searches the columns in code and the name of each list element will be created.
These columns are indicators whether the given disease is present in the set of ERFV codes or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>string, a column name on which to collapse the data.table.
Used in case we wish to assess whether multiple ERFV are present within  the same instances of <em>collapse</em>. See vignette for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code_time</code></td>
<td>
<p>string, column name of the time column. Defaults to <em>time_rfv_start</em>. Used in case collapse is present to provide the earliest or latest instance of reason for visit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggr_type</code></td>
<td>
<p>string, if multiple reason for visits are present within the same case of <em>collapse</em>, which timepoint to return. Supported are: "earliest" or "latest". Defaults to <em>earliest</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nThread</code></td>
<td>
<p>integer, number of threads to use for parallelization. If it is set to 1, then no parallel backends are created and the function is executed sequentially.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data.table, with indicator columns if provided.
If <em>collapse</em> is present, then only unique ID and the summary columns are returned.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#Parse reason for visit columns
#and create indicator variables for the following reasons and summarize per patient,
#whether there are any encounters where the given reasons were registered
reasons &lt;- list(Pain = c("ERFV:160357", "ERFV:140012"), Visit = c("ERFV:501"))
data_rfv_disease &lt;-  convert_rfv(d = data_rfv, keep = FALSE,
codes_to_find = reasons, nThread = 2, collapse = "ID_MERGE")

## End(Not run)
</code></pre>


</div>
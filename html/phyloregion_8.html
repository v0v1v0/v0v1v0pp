<div class="container">

<table style="width: 100%;"><tr>
<td>collapse_range</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collapse nodes and ranges based on divergence times</h2>

<h3>Description</h3>

<p>This function collapses nodes and geographic ranges based on species'
divergence times at various time depths.
</p>


<h3>Usage</h3>

<pre><code class="language-R">collapse_range(
  x,
  tree,
  n,
  species = "species",
  grids = "grids",
  format = "wide"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A community matrix or data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tree</code></td>
<td>
<p>A phylogenetic tree.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Time depth to slice the phylogenetic tree (often in millions of
years for dated trees).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species</code></td>
<td>
<p>If <code>format =</code> “long” (the default),
the column with the species name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grids</code></td>
<td>
<p>The column with the sites or grids if <code>format =</code>
“long”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>Format of the community composition data:
“long” or “wide” with species as columns and sites as rows.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Two community data frames: the <code>collapsed community data</code> and
<code>original community data</code>
</p>


<h3>References</h3>

<p>Daru, B.H., Farooq, H., Antonelli, A. &amp; Faurby, S. (2020) Endemism
patterns are scale dependent. <em>Nature Communications</em>
<strong>11</strong>: 2115.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ape)
tr1 &lt;- read.tree(text ="(((a:2,(b:1,c:1):1):1,d:3):1,e:4);")
com &lt;- matrix(c(1,0,1,1,0,0,
                1,0,0,1,1,0,
                1,1,1,1,1,1,
                1,0,1,1,0,1,
                0,0,0,1,1,0), 6, 5,
              dimnames=list(paste0("g",1:6), tr1$tip.label))

collapse_range(com, tr1, n=1)
</code></pre>


</div>
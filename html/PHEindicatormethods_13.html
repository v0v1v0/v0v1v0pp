<div class="container">

<table style="width: 100%;"><tr>
<td>phe_proportion</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate Proportions using phe_proportion</h2>

<h3>Description</h3>

<p>Calculates proportions with confidence limits using Wilson Score method (1,2).
</p>


<h3>Usage</h3>

<pre><code class="language-R">phe_proportion(data, x, n, type = "full", confidence = 0.95, multiplier = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data.frame containing the data to calculate proportions for, pre-grouped if proportions required for
group aggregates; unquoted string; no default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>field name from data containing the observed numbers of cases in the sample meeting the required condition
(the numerator for the proportion); unquoted string; no default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>field name from data containing the number of cases in the sample (the denominator for the proportion);
unquoted string; no default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>defines the data and metadata columns to be included in output;
can be "value", "lower", "upper", "standard" (for all data) or "full" (for
all data and metadata); quoted string; default = "full"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confidence</code></td>
<td>
<p>the required level of confidence expressed as a number
between 0.9 and 1 or a number between 90 and 100. The vector c(0.95, 0.998)
can also be passed to output both 95 percent and 99.8 percent CIs, or an NA
value can be passed if no confidence intervals are required.; numeric; default 0.95</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multiplier</code></td>
<td>
<p>the multiplier used to express the final values (eg 100 = percentage); numeric; default 1</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>When type = "full", returns the original data.frame with the following appended:
proportion, lower confidence limit, upper confidence limit, confidence level, statistic and method
</p>


<h3>Notes</h3>

<p>Wilson Score method (2) is applied using the internal wilson_lower
and wilson_upper functions. <br><br>
The percentage argument was deprecated in v1_1_0, please use multiplier argument instead
</p>


<h3>References</h3>

<p>(1) Wilson EB. Probable inference, the law of succession, and statistical
inference. J Am Stat Assoc; 1927; 22. Pg 209 to 212. <br>
(2) Newcombe RG, Altman DG. Proportions and their differences. In Altman
DG et al. (eds). Statistics with confidence (2nd edn). London: BMJ Books;
2000. Pg 46 to 48.
</p>


<h3>See Also</h3>

<p>Other PHEindicatormethods package functions: 
<code>assign_funnel_significance()</code>,
<code>calculate_ISRate()</code>,
<code>calculate_ISRatio()</code>,
<code>calculate_funnel_limits()</code>,
<code>calculate_funnel_points()</code>,
<code>phe_dsr()</code>,
<code>phe_life_expectancy()</code>,
<code>phe_mean()</code>,
<code>phe_quantile()</code>,
<code>phe_rate()</code>,
<code>phe_sii()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# ungrouped data frame
df &lt;- data.frame(area = rep(c("Area1","Area2","Area3","Area4"), each=3),
                 numerator = c(NA,82,9,48, 6500,8200,10000,10000,8,7,750,900),
                 denominator = rep(c(100,10000,10000,10000), each=3))

phe_proportion(df, numerator, denominator)
phe_proportion(df, numerator, denominator, confidence=99.8)
phe_proportion(df, numerator, denominator, type="standard")
phe_proportion(df, numerator, denominator, confidence = c(0.95, 0.998))

# grouped data frame
library(dplyr)
dfg &lt;- df |&gt; group_by(area)
phe_proportion(dfg, numerator, denominator, multiplier=100)


</code></pre>


</div>
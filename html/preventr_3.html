<div class="container">

<table style="width: 100%;"><tr>
<td>estimate_risk</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate risk of cardiovascular events using the American Heart Association (AHA) Predicting Risk of
cardiovascular disease EVENTs (PREVENT) equations.</h2>

<h3>Description</h3>

<p><code>estimate_risk()</code> and <code>est_risk()</code> are the same function, with the latter
being a literal copy of the former just for those who favor syntactical brevity
(i.e., a function synonym).
</p>
<p>Estimation includes both 10- and 30-year risk of 5 events:
</p>

<ul>
<li>
<p> Total cardiovascular disease (CVD)
</p>

<ul><li>
<p> This outcome includes atherosclerotic CVD (ASCVD) and heart failure as
defined below
</p>
</li></ul>
</li>
<li>
<p> ASCVD
</p>

<ul><li>
<p> This outcome includes coronary heart disease (CHD) and stroke as defined below
</p>
</li></ul>
</li>
<li>
<p> Heart failure (often abbreviated HF, but not herein)
</p>
</li>
<li>
<p> CHD
</p>

<ul><li>
<p> This outcome includes nonfatal myocardial infarction (MI) and fatal CHD
</p>
</li></ul>
</li>
<li>
<p> Stroke
</p>
</li>
</ul>
<p>See also the README for this package, which goes into additional detail about
the PREVENT equations (<a href="https://martingmayer.com/preventr">site</a>,
<a href="https://github.com/martingmayer/preventr">GitHub</a>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">estimate_risk(
  age,
  sex,
  sbp,
  bp_tx,
  total_c,
  hdl_c,
  statin,
  dm,
  smoking,
  egfr,
  bmi,
  hba1c = NULL,
  uacr = NULL,
  zip = NULL,
  model = NULL,
  time = "both",
  chol_unit = "mg/dL",
  optional_strict = FALSE,
  quiet = FALSE
)

est_risk(
  age,
  sex,
  sbp,
  bp_tx,
  total_c,
  hdl_c,
  statin,
  dm,
  smoking,
  egfr,
  bmi,
  hba1c = NULL,
  uacr = NULL,
  zip = NULL,
  model = NULL,
  time = "both",
  chol_unit = "mg/dL",
  optional_strict = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>Numeric (required predictor variable): Age in years, from 30-79</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sex</code></td>
<td>
<p>Character (required predictor variable): Either <code>"female"</code> or
<code>"male"</code> (<code>"f"</code> and <code>"m"</code> are accepted abbreviations)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sbp</code></td>
<td>
<p>Numeric (required predictor variable): Systolic blood pressure
(SBP) in mmHg, from 90-180; see the "Details" section for more information
about the upper bound of the range</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bp_tx</code></td>
<td>
<p>Logical or numeric equivalent (required predictor variable):
Whether the person is on blood pressure treatment, either <code>TRUE</code> or <code>FALSE</code>
(1 or 0 are accepted as alternative input)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_c</code></td>
<td>
<p>Numeric (required predictor variable): Total cholesterol in
mg/dL or mmol/L (see <code>chol_unit</code> argument), from 130-320 (for <code>chol_unit = "mg/dL"</code>) or 3.36-8.28 (for <code>chol_unit = "mmol/L"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hdl_c</code></td>
<td>
<p>Numeric (required predictor variable): High-density lipoprotein
cholesterol (HDL-C) in mg/dL or mmol/L (see <code>chol_unit</code> argument), from
20-100 (for <code>chol_unit = "mg/dL"</code>) or 0.52-2.59 (for <code>chol_unit = "mmol/L"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statin</code></td>
<td>
<p>Logical or numeric equivalent (required predictor variable):
Whether the person is taking a statin, either <code>TRUE</code> or <code>FALSE</code> (1 or 0 are
accepted as alternative input)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dm</code></td>
<td>
<p>Logical or numeric equivalent (required predictor variable):
Whether the person has diabetes mellitus (DM), either <code>TRUE</code> or <code>FALSE</code> (1
or 0 are accepted as alternative input)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoking</code></td>
<td>
<p>Logical or numeric equivalent (required predictor variable):
Whether the person is currently smoking (which PREVENT defines as cigarette
use within the last 30 days), either <code>TRUE</code> or <code>FALSE</code> (1 or 0 are accepted
as alternative input)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>egfr</code></td>
<td>
<p>Numeric or call (required predictor variable): Estimated glomerular
filtration rate (eGFR) in mL/min/1.73m<sup>2</sup>, entered either as a
numeric from 15-140 or as a call to <code>calc_egfr()</code> or synonyms, as described
in the "Details" section</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bmi</code></td>
<td>
<p>Numeric or call (required predictor variable): Body mass index (BMI) in
kg/m<sup>2</sup>, entered either as a numeric from 18.5-39.9 or as a call to
<code>calc_bmi()</code> or synonyms, as described in the "Details" section</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hba1c</code></td>
<td>
<p>Numeric (optional predictor variable): Glycated hemoglobin
(HbA1c) in %, from 4.5-15; see the "Details" section for more information
about the lower bound of the range</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uacr</code></td>
<td>
<p>Numeric (optional predictor variable): Urine
albumin-to-creatinine ratio (UACR) in mg/g, from 0.1-25000</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zip</code></td>
<td>
<p>Character (optional predictor variable): ZIP code of the person's
residence, used to estimate the Social Deprivation Index (SDI); see the
"Details" section for more information</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>Character (required, but has default): The PREVENT model to use,
one of <code>NULL</code> (the default), <code>"base"</code> (the base model), <code>"hba1c"</code> (the base
model adding HbA1c), <code>"uacr"</code> (the base model adding UACR), <code>"sdi"</code> (the
base model adding SDI), or <code>"full"</code> (the base model adding HbA1c, UACR, and
SDI). If <code>NULL</code>, the model will be determined by algorithm specified in the
"Details" section, and this is the intended argument for most users. The
ability to specify mainly exists for specific use cases (e.g., research
purposes).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>Character or numeric (required, but has default): Whether to
estimate risk over 10 or 30 years, one of <code>"both"</code> (character; the default);
<code>10</code> (numeric), <code>"10"</code> (character), or <code>"10yr"</code> (character); or <code>30</code>
(numeric), <code>"30"</code> (character), or <code>"30yr"</code> (character); if estimating over
30 years and age &gt; 59, a warning will accompany the results regarding the
reliability of the estimation (see the "Value" section for more information)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chol_unit</code></td>
<td>
<p>Character (required, but has default): The unit of
measurement for <code>total_c</code> and <code>hdl_c</code>, either <code>"mg/dL"</code> (the default) or
<code>"mmol/L"</code> (<code>"mg"</code> and <code>"mmol"</code> are accepted abbreviations)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optional_strict</code></td>
<td>
<p>Logical (required, but has default): Whether to
enforce strictness on optional predictor variables, either <code>TRUE</code> or
<code>FALSE</code> (the default). The argument itself is strict, so 1 or 0 are <em>not</em>
accepted (in contrast with some of the other logical inputs considered by
this function), and moreover, anything other than <code>TRUE</code> will be treated as
<code>FALSE</code>. If <code>FALSE</code>, the function will discard invalid optional predictor
variables but still allow the model to run. If <code>TRUE</code>, optional predictor
variables entered (if any) must be valid for the function to return
risk estimates. See the "Value" section for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical (required, but has default): Whether to suppress
messages and warnings in the console, either <code>TRUE</code> or <code>FALSE</code> (the
default); this argument is strict, so 1 or 0 are <em>not</em> accepted (in
contrast with some of the other logical inputs considered by this
function), and moreover, anything other than <code>TRUE</code> will be treated as
<code>FALSE</code></p>
</td>
</tr>
</table>
<h3>Details</h3>



<h4>Why is the upper limit of the SBP range 180 mmHg?</h4>

<p>Some may notice the upper limit is set to 180 mmHg here, whereas the PREVENT
equations technically permit up to 200 mmHg. The Pooled Cohort Equations (PCEs)
do this as well. I have restricted to 180 mmHg, as SBP beyond 180 mmHg constitutes
hypertensive urgency (per <a href="https://pubmed.ncbi.nlm.nih.gov/29133354/">AHA's own definitions</a>),
and irrespective of the debate surrounding labels like hypertensive urgency
and emergency, it would seem clinically unreasonable to engage with the
PREVENT equations when someone has more pressing matters to address
(better blood pressure control <em>per se</em>).
</p>



<h4>Why is the lower limit of the HbA1c 4.5%?</h4>

<p>Some may notice the lower limit is set to 4.5% here, whereas the PREVENT
equations technically permit down to 3%. I have restricted to 4.5%, as
HbA1c of 3% is neither realistic nor safe for a person. For example,
using <a href="https://professional.diabetes.org/glucose_calc">the HbA1c to estimated average glucose (eAG) converter from the American Diabetes Association</a> (https://professional.diabetes.org/glucose_calc),
a HbA1c of 3% corresponds to an eAG of 39 mg/dL (2.2 mmol/L).
</p>



<h4>Entering eGFR and BMI as a call rather than a numeric value</h4>

<p>The <code>eGFR</code> and <code>bmi</code> arguments can be entered as numeric values or as calls to
<code>calc_egfr()</code> and <code>calc_bmi()</code>, respectively. They both have synonyms as well:
</p>

<ul>
<li>
<p> Synonyms for <code>calc_egfr()</code> are <code>calculate_egfr()</code>, <code>calc_ckd_epi()</code>, and
<code>calculate_ckd_epi()</code>, with the latter two synonyms reflecting the
calculation is from the CKD-EPI equations (the reparameterized version
without race, which is also what the PREVENT equations use).
</p>
</li>
<li>
<p> The synonym for <code>calc_bmi()</code> is <code>calculate_bmi()</code>.
</p>
</li>
</ul>
<p>These convenience functions add value where a person might have the necessary
components to calculate the respective parameter but do not have handy the
parameter itself.
</p>
<p>Although these convenience functions were, of course, tested for accuracy,
they were written and tested within the context of supporting the PREVENT
equations as implemented within this package. As such, they are not exported,
and users will be warned to proceed with caution if they try to use these
functions outside of <code>estimate_risk()</code> or its synonym <code>est_risk()</code>.
</p>
<p>The syntax for these convenience functions is as follows:
</p>

<ul>
<li> <p><code>calc_egfr(cr, units = "mg/dL", age, sex, quiet = FALSE)</code>
</p>

<ul>
<li> <p><code>cr</code> is the creatinine in whatever units are specified by <code>units</code>
</p>
</li>
<li> <p><code>units</code> is the unit of measurement for <code>cr</code>, either <code>"mg/dL"</code> or <code>"umol/L"</code>,
with <code>"mg"</code> and <code>"umol"</code> being accepted abbreviations
</p>
</li>
<li> <p><code>age</code> is the age of the person, but there is no need to enter this, as
the function will extract this from the <code>age</code> argument of <code>estimate_risk()</code>;
in fact, any argument entered here will be ignored in favor of the <code>age</code>
argument of <code>estimate_risk()</code>
</p>
</li>
<li> <p><code>sex</code> is the sex of the person, but there is no need to enter this, as
the function will extract this from the <code>sex</code> argument of <code>estimate_risk()</code>;
in fact, any argument entered here will be ignored in favor of the <code>sex</code>
argument of <code>estimate_risk()</code>
</p>
</li>
<li> <p><code>quiet</code> is a logical indicating whether to suppress the warning about
use outside of <code>estimate_risk()</code>
</p>
</li>
<li>
<p> An example call would be <code>calc_egfr(1.2)</code> (because <code>units</code> defaults
to <code>"mg/dL"</code>) or <code>calc_egfr(88, "umol")</code>
</p>
</li>
</ul>
</li>
<li> <p><code>calc_bmi(weight, height, units = "nonmetric", quiet = FALSE)</code>
</p>

<ul>
<li> <p><code>weight</code> is the weight in pounds if <code>units = "nonmetric"</code> or kilograms
if <code>units = "metric"</code>
</p>
</li>
<li> <p><code>height</code> is the height in inches if <code>units = "nonmetric"</code> or centimeters
if <code>units = "metric"</code>
</p>
</li>
<li> <p><code>units</code> is the unit of measurement for <code>weight</code> and <code>height</code>, either
<code>"nonmetric"</code> or <code>"metric"</code>
</p>
</li>
<li> <p><code>quiet</code> is a logical indicating whether to suppress the warning about
use outside of <code>estimate_risk()</code>
</p>
</li>
<li>
<p> An example call would be <code>calc_bmi(150, 70)</code> (because <code>units</code> defaults
to <code>"nonmetric"</code>) or <code>calc_bmi(68, 178, "metric")</code>
</p>
</li>
</ul>
</li>
</ul>
<h4>What is the Social Deprivation Index (SDI)?</h4>

<p>Read more from the <a href="https://www.graham-center.org/maps-data-tools/social-deprivation-index.html">Robert Graham Center's page on the SDI</a>
(https://www.graham-center.org/maps-data-tools/social-deprivation-index.html)
</p>



<h4>Model selection when <code>model = NULL</code>
</h4>

<p>If <code>model = NULL</code>, the model will be determined by the following algorithm:
</p>

<ul>
<li>
<p> If no optional predictor variables (HbA1c, UACR, zip code) are
entered, or only invalid optional variables are entered and
<code>optional_strict = FALSE</code>: The base model
</p>
</li>
<li>
<p> If one of the optional predictor variables is entered, or two or
more optional predictor variables are entered but only one is valid and
<code>optional_strict = FALSE</code>: The base model adding that variable (e.g., if
HbA1c is entered and no other optional predictor variables are entered, the
base model adding HbA1c; if HbA1c and UACR are entered, but HbA1c is
invalid and <code>optional_strict = FALSE</code>, the base model adding UACR)
</p>
</li>
<li>
<p> If two or more of the optional predictor variables are entered, or
all three optional variables are entered but one is invalid and
<code>optional_strict = FALSE</code>: The full model (the PREVENT equations include
a term for optional predictor variables being missing, so if one of the
optional predictor variables is missing in this scenario, it is treated as
such within the full model)
</p>
</li>
</ul>
<h4>What if SDI is not available for a zip code?</h4>

<p>Some zip codes do not have SDI data available, and the PREVENT equations
include a term for SDI being missing. As such, if a user enters a valid zip
code but no SDI data are available, the user will be notified, and the tool
will then implement the missing term as part of predicting risk whenever
the full model is used, but SDI will otherwise be removed from prediction.
Specifically, the following models will predict risk in the situation where
the user enters a valid zip code, but no SDI data are available:
</p>

<ul>
<li>
<p> If the user does not enter a valid HbA1c or UACR: The base model
</p>
</li>
<li>
<p> If the user enters valid HbA1c and UACR: The full model (treating SDI as missing)
</p>
</li>
<li>
<p> If the user enters a valid HbA1c: The base model adding HbA1c
</p>
</li>
<li>
<p> If the user enters a valid UACR: The base model adding UACR
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>estimate_risk()</code> will always return a data frame as a tibble, and
all references herein to a data frame being returned are for a data frame
as a tibble (see the <a href="https://tibble.tidyverse.org/">tibble</a> package for more detail).
However, the manner in which the data frame is returned will come in one of two ways,
depending on the <code>time</code> argument:
</p>

<ul>
<li>
<p> When <code>time = "both"</code>: A list of length 2, with each item in the list
being a data frame containing the 10-year and 30-year estimates, in that
order
</p>
</li>
<li>
<p> Otherwise: A single data frame containing the risk estimate for the
specified time horizon
</p>
</li>
</ul>
<p>The data frame will have the following columns:
</p>

<ul>
<li> <p><code>total_cvd</code>: The estimated risk of a total CVD event (column type: double)
</p>
</li>
<li> <p><code>ascvd</code>: The estimated risk of an ASCVD event (column type: double)
</p>
</li>
<li> <p><code>heart_failure</code>: The estimated risk of a HF event (column type: double)
</p>
</li>
<li> <p><code>chd</code>: The estimated risk of a CHD event (column type: double)
</p>
</li>
<li> <p><code>stroke</code>: The estimated risk of a stroke event (column type: double)
</p>
</li>
<li> <p><code>model</code>: The PREVENT model used (column type: character)
</p>
</li>
<li> <p><code>over_years</code>: The time horizon for the risk estimate (column type: integer)
</p>
</li>
<li> <p><code>input_problems</code>: Semicolon-separated vector of length one delineating
input problems, if any exist; otherwise, <code>NA_character_</code> (column type:
character)
</p>
</li>
</ul>
<h4>When valid input parameters exist for all required predictor variables</h4>

<p>The risk estimate columns are all of type double, and they are presented as
a proportion rounded to 3 decimal places. Halves are rounded up to align
with what many people likely expect, but this is in contrast to base R's
default rounding behavior (it is a perfectly reasonable default, but
perhaps somewhat unexpected for people who are not familiar with different
standards/conventions for rounding; see <code>round()</code> for further detail).
</p>
<p>The <code>model</code> column will be of type character, taking one of the following
values: <code>"base"</code>, <code>"hba1c"</code>, <code>"uacr"</code>, <code>"sdi"</code>, or <code>"full"</code>.
</p>
<p>The <code>over_years</code> column will be of type integer, either 10 or 30.
</p>
<p>If <code>optional_strict = TRUE</code>, the above will only hold if the optional
predictor variables that are entered (if any) are valid; if any
optional variables are entered but are invalid, the function will behave in
the same manner as when invalid input parameters exist for one or more
required variables.
</p>



<h4>When invalid input parameters exist for one or more required predictor variable(s)</h4>

<p>The function will issue a warning about the problematic variables, unless
<code>quiet = FALSE</code>. A data frame will be returned with the following
characteristics:
</p>

<ul>
<li>
<p> All risk estimates will be set to <code>NA_real_</code>
</p>
</li>
<li>
<p> The <code>model</code> column will state "none"
</p>
</li>
<li>
<p> The <code>over_years</code> column will be set to <code>NA_integer_</code>
</p>
</li>
<li>
<p> The <code>input_problems</code> column will contain a character vector of length 1
delineating the problematic variable(s); if multiple problematic variables
exist, they will be separated by semicolons
</p>
</li>
</ul>
<h4>When invalid input parameters exist for one or more optional predictor variable(s)</h4>



<h5>When <code>optional_strict = TRUE</code>
</h5>

<p>The function will behave similarly to when invalid input parameters exist
for one or more required variables, with the <code>input_problems</code> column
delineating the problematic variables
</p>



<h5>When <code>optional_strict = FALSE</code>
</h5>

<p>The function will issue a warning about the problematic variables, unless
<code>quiet = FALSE</code>. The problematic optional variables will then be
functionally discarded and the PREVENT equations still run, in accordance
with the specifications detailed in the "Details" section regarding model
selection. A data frame will be returned with the following
characteristics:
</p>

<ul>
<li>
<p> All estimates will be returned as specified in the valid input parameters
section, as will the <code>model</code> and <code>over_years</code> columns
</p>
</li>
<li>
<p> The <code>input_problems</code> column will contain a character vector of length 1
delineating the problematic variables (because optional predictor variables
are allowed to be empty, any input that is functionally empty or missing
(such as <code>NULL</code>, <code>numeric(0)</code>, <code>NA</code>, etc.) will not be considered
problematic and thus not populate in the <code>input_problems</code> column)
</p>
</li>
</ul>
<h4>When estimating 30-year risk and age &gt; 59</h4>

<p>The function advises 30-year risk prediction for people &gt; 59 years is
questionable via two warnings:
</p>

<ul>
<li>
<p> in the console (that can be suppressed by setting <code>quiet = TRUE</code>)
</p>
</li>
<li>
<p> in the column <code>input_problems</code> of the return tibble (<code>quiet</code> has no
impact here)
</p>
</li>
</ul>
<h4>The special case of the <code>zip</code> argument</h4>

<p>The above rule for optional predictor variables applies to the <code>zip</code>
argument as well, but with the additional reminder that there are valid zip
codes that do not have an SDI score. This is importantly different from an
invalid input for zip. See the "Details" section for more information about
how this is handled, but users should <em>not</em> expect anything to populate in
the <code>input_problems</code> column if the zip is valid, regardless of whether that
zip has an SDI score. As will be clear from the "Details" section, users will
be able to determine when a zip code does not have an SDI score based on
the model that was used.
</p>



<h4>Combining output into a single data frame</h4>

<p>The output when <code>time = "both"</code> is a list of data frames, one for each
time horizon, but if desired, it is easy to combine these into a single
data frame, e.g.:
</p>
<pre> 
  res_base_r &lt;- do.call(rbind, res)        # Combine in base R
  res_dplyr &lt;- dplyr::bind_rows(res)       # Combine in dplyr
  res_dt &lt;- data.table::rbindlist(res)     # Combine in data.table
  
  # These all yield the same tabular output, but the attributes vary
  # (e.g., base R adds row names)
  
  all.equal(res_base_r, res_dplyr, check.attributes = FALSE)   # TRUE 
  all.equal(res_dplyr, res_dt, check.attributes = FALSE)       # TRUE
  </pre>



<h3>Examples</h3>

<pre><code class="language-R"># Example with all required predictor variables (example from Table S25
# in the supplemental PDF appendix of the PREVENT equations article)
#
# Optional predictor variables are all omitted (and thus take their default)
# `model` is also omitted (and thus takes its default, with the function selecting
# the model based on the algorithm specified in the "Details" section)
# `time` is also omitted (and thus takes its default, with the function returning
# estimates for both 10- and 30-year risk as specified in the "Value" section)
#
# Expect the base model to run given absence of optional predictor variables.
res &lt;- estimate_risk(
  age = 50, 
  sex = "female",    # or "f"
  sbp = 160, 
  bp_tx = TRUE,      # or 1
  total_c = 200,     # default unit is "mg/dL"
  hdl_c = 45,        # default unit is "mg/dL"
  statin = FALSE,    # or 0
  dm = TRUE,         # or 1
  smoking = FALSE,   # or 0
  egfr = 90,
  bmi = 35
)

# Based on Table S25, expect the 10-year risk for `total_cvd` to be 0.147.
# Based on the supplemental Excel file, also expect:
# 10-year risks: `ascvd`, 0.092; `heart_failure`, 0.081; 
# `chd`, 0.044; `stroke`, 0.054
# 30-year risks: `total_cvd`, 0.53; `ascvd`, 0.354; `heart_failure`, 0.39;
# `chd`, 0.198; `stroke`, 0.221
res
 
# Example with HbA1c 
# (also changing required predictor variables &amp; limiting to 10-year results)
estimate_risk(
  age = 66, 
  sex = "male",      # or "m"
  sbp = 148, 
  bp_tx = FALSE,     
  total_c = 188,     
  hdl_c = 52,        
  statin = TRUE,    
  dm = TRUE,         
  smoking = TRUE,   
  egfr = 67,
  bmi = 30,
  hba1c = 7.5,
  time = "10yr"      # only 10-year results will show
)

# Example with UACR (limited to 30-year results)
estimate_risk(
  age = 66, 
  sex = "female",   
  sbp = 148, 
  bp_tx = FALSE,     
  total_c = 188,     
  hdl_c = 52,        
  statin = TRUE,    
  dm = TRUE,         
  smoking = TRUE,   
  egfr = 67,
  bmi = 30,
  uacr = 750,
  time = "30yr"      # only 30-year results will show    
)
 
# The remaining examples will all be limited to 10-year results  
 
# Example with SDI with valid zip code with SDI data available
estimate_risk(
  age = 66, 
  sex = "female",     
  sbp = 148, 
  bp_tx = FALSE,     
  total_c = 188,     
  hdl_c = 52,        
  statin = TRUE,    
  dm = TRUE,         
  smoking = TRUE,   
  egfr = 67,
  bmi = 30,
  zip = "59043",   # Lame Deer, MT (selected randomly)
  time = 10        # Note use of numeric 10 here (not "10yr")
)

# Example with SDI with valid zip code without SDI data available
# (base model will be used)
estimate_risk(
  age = 66, 
  sex = "male",     
  sbp = 148, 
  bp_tx = FALSE,     
  total_c = 188,     
  hdl_c = 52,        
  statin = TRUE,    
  dm = TRUE,         
  smoking = TRUE,   
  egfr = 67,
  bmi = 30,
  zip = "00738",   # Fajardo, PR
  time = 10
)

# Example with full model (even though zip does not have available SDI, full 
# model used given availability of HbA1c and UACR; because zip is valid,
# column `input_problems` will be `NA`)
estimate_risk(
  age = 66, 
  sex = "female",     
  sbp = 148, 
  bp_tx = FALSE,     
  total_c = 188,     
  hdl_c = 52,        
  statin = TRUE,    
  dm = TRUE,         
  smoking = TRUE,   
  egfr = 67,
  bmi = 30,
  hba1c = 9,
  uacr = 75,
  zip = "00738",   
  time = "10yr"
)

# Example with full model (zip has SDI data available, UACR is valid, but
# HbA1c is not; column `input_problems` will specify problem with `hba1c`,
# but full model will still run given availability of the other two optional
# predictor variables)
estimate_risk(
  age = 66, 
  sex = "male",     
  sbp = 148, 
  bp_tx = FALSE,     
  total_c = 188,     
  hdl_c = 52,        
  statin = TRUE,    
  dm = TRUE,         
  smoking = TRUE,   
  egfr = 67,
  bmi = 30,
  hba1c = 20,
  uacr = 75,
  zip = "59043",   
  time = "10yr"
)

# Expect table of `NA`s due to invalid input for `age` and `sbp`, and column
# `input_problems` to contain explanations about problems with `age` and `sbp`
res &lt;- estimate_risk(
  age = 8675309, 
  sex = "female",    
  sbp = 112358, 
  bp_tx = TRUE,      
  total_c = 200,     
  hdl_c = 45,        
  statin = FALSE,    
  dm = TRUE,         
  smoking = FALSE,   
  egfr = 90,
  bmi = 35,
  time = "10yr"     
)

res

# Quiet version of the above example
res &lt;- estimate_risk(
  age = 8675309, 
  sex = "female",    
  sbp = 112358, 
  bp_tx = TRUE,      
  total_c = 200,     
  hdl_c = 45,        
  statin = FALSE,    
  dm = TRUE,         
  smoking = FALSE,   
  egfr = 90,
  bmi = 35,
  time = "10yr",     
  quiet = TRUE       # Suppresses messages, but not column `input_problems`
)

res

# Note `input_problems` column is semicolon-separated, but it is easy to
# print as separate lines with `gsub()` and `cat()`, e.g.:
cat(gsub("; ", "\n", res$input_problems))

res$input_problems |&gt; gsub(pattern = "; ", replacement = "\n", x = _) |&gt; cat()
# ... and could, of course, also do with the {magrittr} pipe `%&gt;%` if desired

</code></pre>


</div>
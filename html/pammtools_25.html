<div class="container">

<table style="width: 100%;"><tr>
<td>cumulative</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Formula specials for defining  time-dependent covariates</h2>

<h3>Description</h3>

<p>So far, two specials are implemented. <code>concurrent</code> is used when
the goal is to estimate a concurrent effect of the TDC. <code>cumulative</code>
is used when the goal is to estimate a cumulative effect of the TDC. These
should usually not be called directly but rather as part of the <code>formula</code>
argument to <code>as_ped</code>.
See the <a href="https://adibender.github.io/pammtools//articles/data-transformation.html">vignette on data transformation</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cumulative(..., tz_var, ll_fun = function(t, tz) t &gt;= tz, suffix = NULL)

concurrent(..., tz_var, lag = 0, suffix = NULL)

has_special(formula, special = "cumulative")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For <code>concurrent</code> variables that will be transformed to
covariate matrices. The number of columns of each covariate depends on <code>tz</code>.
Usually, elements that will be specified here are <code>time</code> (which should be
the name of the time-variable used on the LHS of the formula argument to
<code>as_ped</code>), <code>tz</code> which is the variable containing information on
the times at which the TDC was observed (can be wrapped in <code>latency</code>) and
the TDCs that share the same <code>tz</code> and Lag-lead window (<code>ll_fun</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz_var</code></td>
<td>
<p>The name of the variable that stores information on the
times at which the TDCs specified in this term where observed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ll_fun</code></td>
<td>
<p>Function that specifies how the lag-lead matrix
should be constructed. First argument is the follow up time
second argument is the time of exposure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>a single positive number giving the time lag between for
a concurrent effect to occur (i.e., the TDC at time of exposure <code>t-lag</code>
affects the hazard in the interval containing follow-up time <code>t</code>).
Defaults to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A two sided formula with a <code>Surv</code> object
on the left-hand-side and covariate specification on the right-hand-side (RHS).
The RHS can be an extended formula, which specifies how TDCs should be transformed
using specials <code>concurrent</code> and <code>cumulative</code>. The left hand-side can
be in start-stop-notation. This, however, is only used to create left-truncated
data and does not support the full functionality.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>special</code></td>
<td>
<p>The name of the special whose existence in the
<code>formula</code> should be checked</p>
</td>
</tr>
</table>
</div>
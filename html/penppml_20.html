<div class="container">

<table style="width: 100%;"><tr>
<td>iceberg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Iceberg Lasso Implementation (in development)</h2>

<h3>Description</h3>

<p>A function performs standard plugin lasso PPML estimation (without fixed effects) for several
dependent variables in a single step. This is still IN DEVELOPMENT: at the current stage, only
coefficient estimates are are provided and there is no support for clustered errors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">iceberg(data, dep, indep = NULL, selectobs = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing all relevant variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dep</code></td>
<td>
<p>A string with the names of the independent variables or their column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indep</code></td>
<td>
<p>A vector with the names or column numbers of the regressors. If left unspecified,
all remaining variables (excluding fixed effects) are included in the regressor matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectobs</code></td>
<td>
<p>Optional. A vector indicating which observations to use (either a logical vector
or a numeric vector with row numbers, as usual when subsetting in R).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments, including:
</p>

<ul>
<li> <p><code>tol</code>: Tolerance parameter for convergence of the IRLS algorithm.
</p>
</li>
<li> <p><code>glmnettol</code>: Tolerance parameter to be passed on to <code>glmnet::glmnet</code>.
</p>
</li>
<li> <p><code>penweights</code>: Optional: a vector of coefficient-specific penalties to use in plugin lasso.
</p>
</li>
<li> <p><code>colcheck</code>: Logical. If <code>TRUE</code>, checks for perfect multicollinearity in <code>x</code>.
</p>
</li>
<li> <p><code>K</code>: Maximum number of iterations.
</p>
</li>
<li> <p><code>verbose</code>: Logical. If <code>TRUE</code>, prints information to the screen while evaluating.
</p>
</li>
<li> <p><code>lambda</code>: Penalty parameter (a number).
</p>
</li>
<li> <p><code>icepost</code>: Logical. If <code>TRUE</code>, it carries out a post-lasso estimation with just the
selected variables and reports the coefficients from this regression.
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This functions enables users to implement the "iceberg" step in the two-step procedure described in
Breinlich, Corradi, Rocha, Ruta, Santos Silva and Zylkin (2020). To do this after using the plugin
method in <code>mlfitppml</code>, just select all the variables with non-zero coefficients in
<code>dep</code> and the remaining regressors in <code>indep</code>. The function will then perform separate
lasso estimation on each of the selected dependent variables and report the coefficients.
</p>


<h3>Value</h3>

<p>A matrix with coefficient estimates for all dependent variables.
</p>


<h3>References</h3>

<p>Breinlich, H., Corradi, V., Rocha, N., Ruta, M., Santos Silva, J.M.C. and T. Zylkin (2021).
"Machine Learning in International Trade Research: Evaluating the Impact of Trade Agreements",
Policy Research Working Paper; No. 9629. World Bank, Washington, DC.
</p>
<p>Correia, S., P. Guimaraes and T. Zylkin (2020). "Fast Poisson estimation with high dimensional
fixed effects", <em>STATA Journal</em>, 20, 90-115.
</p>
<p>Gaure, S (2013). "OLS with multiple high dimensional category variables",
<em>Computational Statistics &amp; Data Analysis</em>, 66, 8-18.
</p>
<p>Friedman, J., T. Hastie, and R. Tibshirani (2010). "Regularization paths for generalized linear
models via coordinate descent", <em>Journal of Statistical Software</em>, 33, 1-22.
</p>
<p>Belloni, A., V. Chernozhukov, C. Hansen and D. Kozbur (2016). "Inference in high dimensional panel
models with an application to gun control", <em>Journal of Business &amp; Economic Statistics</em>, 34, 590-605.
</p>


<h3>Examples</h3>

<pre><code class="language-R">iceberg_results &lt;- iceberg(data = trade[, -(1:6)],
                                    dep = c("ad_prov_14", "cp_prov_23", "tbt_prov_07",
                                            "tbt_prov_33", "tf_prov_41", "tf_prov_45"),
                                    selectobs = (trade$time == "2016"))

</code></pre>


</div>
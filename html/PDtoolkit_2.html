<div class="container">

<table style="width: 100%;"><tr>
<td>bivariate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bivariate analysis</h2>

<h3>Description</h3>

<p><code>bivariate</code> returns the bivariate statistics for risk factors supplied in data frame <code>db</code>. <br>
Implemented procedure expects all risk factors to be categorical, thus numeric risk factors should be first
categorized. Additionally, maximum number of groups per risk factor is set to 10, so risk factors with more than
10 categories will not be processed automatically, but manual inspection can be still done using <code>woe.tbl</code>
and <code>auc.model</code> functions in order to produce the same statistics. Results of both checks (risk factor class and
number of categories), if identified, will be reported in second element of function output - <code>info</code> data frame. <br>
Bivariate report (first element of function output - <code>results</code> data frame) includes:
</p>

<ul>
<li>
<p> rf: Risk factor name.
</p>
</li>
<li>
<p> bin: Risk factor group (bin).
</p>
</li>
<li>
<p> no: Number of observations per bin.
</p>
</li>
<li>
<p> ng: Number of good cases (where target is equal to 0) per bin.
</p>
</li>
<li>
<p> nb: Number of bad cases (where target is equal to 1) per bin.
</p>
</li>
<li>
<p> pct.o: Percentage of observations per bin.
</p>
</li>
<li>
<p> pct.g: Percentage of good cases (where target is equal to 0) per bin.
</p>
</li>
<li>
<p> pct.b: Percentage of bad cases (where target is equal to 1) per bin.
</p>
</li>
<li>
<p> dr: Default rate per bin.
</p>
</li>
<li>
<p> so: Number of all observations.
</p>
</li>
<li>
<p> sg: Number of all good cases.
</p>
</li>
<li>
<p> sb: Number of all bad cases.
</p>
</li>
<li>
<p> dist.g: Distribution of good cases per bin.
</p>
</li>
<li>
<p> dist.b: Distribution of bad cases per bin.
</p>
</li>
<li>
<p> woe: WoE value.
</p>
</li>
<li>
<p> iv.b: Information value per bin.
</p>
</li>
<li>
<p> iv.s: Information value of risk factor (sum of individual bins' information values).
</p>
</li>
<li>
<p> auc: Area under curve of simple logistic regression model estimated as <code>y ~ x</code>,
where <code>y</code> is selected target variable and <code>x</code> is categorical risk factor.
</p>
</li>
</ul>
<p>Additional info report (second element of function output - <code>info</code> data frame), if produced, includes:
</p>

<ul>
<li>
<p> rf: Risk factor name.
</p>
</li>
<li>
<p> reason.code: Reason code takes value 1 if inappropriate class of risk factor is identified, while
for check of maximum number of categories it takes value 2.
</p>
</li>
<li>
<p> comment: Reason description.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">bivariate(db, target)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>Data frame of risk factors and target variable supplied for bivariate analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>Name of target variable within <code>db</code> argument.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The command <code>bivariate</code> returns the list of two data frames. The first one contains bivariate metrics
while the second data frame reports results of above explained validations
(class of the risk factors and number of categories).
</p>


<h3>See Also</h3>

<p><code>woe.tbl</code> and <code>auc.model</code> for manual bivariate analysis.
</p>


<h3>Examples</h3>

<pre><code class="language-R">suppressMessages(library(PDtoolkit))
data(gcd)
#categorize numeric risk factors
gcd$age.bin &lt;- ndr.bin(x = gcd$age, y = gcd$qual)[[2]]
gcd$age.bin.1 &lt;- cut(x = gcd$age, breaks = 20)
gcd$maturity.bin &lt;- ndr.bin(x = gcd$maturity, y = gcd$qual, y.type = "bina")[[2]]
gcd$amount.bin &lt;- ndr.bin(x = gcd$amount, y = gcd$qual)[[2]]
str(gcd)
#select target variable and categorized risk factors
gcd.bin &lt;- gcd[, c("qual", "age.bin", "maturity.bin", "amount.bin")]
#run bivariate analysis on data frame with only categorical risk factors
bivariate(db = gcd.bin, target = "qual")
#run bivariate analysis on data frame with mixed risk factors (categorical and numeric). 
#for this example info table is produced
bivariate(db = gcd, target = "qual")
#run woe table for risk factor with more than 10 modalities
woe.tbl(tbl = gcd, x = "age.bin.1", y = "qual")
#calculate auc for risk factor with more than 10 modalities
lr &lt;- glm(qual ~ age.bin.1, family = "binomial", data = gcd)
auc.model(predictions = predict(lr, type = "response", newdata = gcd),
    observed = gcd$qual)
</code></pre>


</div>
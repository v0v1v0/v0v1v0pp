<div class="container">

<table style="width: 100%;"><tr>
<td>rstree</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rating Scale Trees</h2>

<h3>Description</h3>

<p>Recursive partitioning (also known as trees) based on rating scale models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rstree(formula, data, na.action, reltol = 1e-10,
  deriv = c("sum", "diff"), maxit = 100L, ...)

## S3 method for class 'rstree'
predict(object, newdata = NULL,
  type = c("probability", "cumprobability", "mode", "median", "mean",
    "category-information", "item-information", "test-information", "node"),
  personpar = 0, ...)

## S3 method for class 'rstree'
plot(x, type = c("regions", "profile"), terminal_panel = NULL,
  tp_args = list(...), tnex = 2L, drop_terminal = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A symbolic description of the model to be fit. This
should be of type <code>y ~ x1 + x2</code> where <code>y</code> should be a
matrix with items in the columns and observations in the rows and
<code>x1</code> and <code>x2</code> are used as partitioning
variables. Additionally each item (column) should have the same
maximum value (see <code>pctree</code> for a way to handle
variable maximum values).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>a function which indicates what should happen when the data
contain missing values (<code>NA</code>s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deriv</code></td>
<td>
<p>character. If "sum" (the default), the first derivatives
of the elementary symmetric functions are calculated with the sum
algorithm. Otherwise ("diff") the difference algorithm (faster but
numerically unstable) is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reltol, maxit</code></td>
<td>
<p>arguments passed via <code>rsmodel</code>
to <code>optim</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to the underlying functions, i.e., to
<code>mob_control</code> for <code>rstree</code>, and to the
underlying <code>predict</code> and <code>plot</code> methods, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object, x</code></td>
<td>
<p>an object of class <code>"raschtree"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>optional data frame with partitioning variables for
which predictions should be computed. By default the learning data set
is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character specifying the type of predictions or plot. For the
<code>predict</code> method, either just the ID of the terminal <code>"node"</code>
can be predicted or some property of the model at a given person parameter
(specified by <code>personpar</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>personpar</code></td>
<td>
<p>numeric person parameter (of length 1) at which the
predictions are evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>terminal_panel, tp_args, tnex, drop_terminal</code></td>
<td>
<p>arguments passed to
<code>plot.modelparty</code>/<code>plot.party</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Rating scale trees are an application of model-based recursive partitioning
(implemented in <code>mob</code>) to rating scale models
(implemented in <code>rsmodel</code>).
</p>
<p>Various methods are provided for <code>"rstree"</code> objects, most of them
inherit their behavior from <code>"mob"</code> objects (e.g., <code>print</code>,
<code>summary</code>, etc.). For the rating scale models in the nodes of a
tree, <code>coef</code> extracts all item parameters. The <code>plot</code> method
employs the <code>node_regionplot</code> panel-generating function by
default.
</p>
<p>Various methods are provided for <code>"rstree"</code> objects, most of them
inherit their behavior from <code>"modelparty"</code> objects (e.g., <code>print</code>, <code>summary</code>,
etc.). For the RSMs in the nodes of a tree, <code>coef</code> extracts all item and threshold
parameters except those restricted to be zero. <code>itempar</code> and <code>threshpar</code>
extract all item and threshold parameters (including the restricted ones).
The <code>plot</code> method by default employs the <code>node_regionplot</code>
panel-generating function and the <code>node_profileplot</code> panel-generating
function is provided as an alternative.
</p>


<h3>Value</h3>

<p>An object of S3 class <code>"rstree"</code> inheriting from class <code>"modelparty"</code>.
</p>


<h3>References</h3>

<p>Komboz B, Zeileis A, Strobl C (2018).
Tree-Based Global Model Tests for Polytomous Rasch Models.
<em>Educational and Psychological Measurement</em>, <b>78</b>(1), 128â€“166.
<a href="https://doi.org/10.1177/0013164416664394">doi:10.1177/0013164416664394</a>
</p>


<h3>See Also</h3>

<p><code>mob</code>, <code>rsmodel</code>,
<code>pctree</code>, <code>raschtree</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## IGNORE_RDIFF_BEGIN
o &lt;- options(digits = 4)

## verbal aggression data from package psychotools
data("VerbalAggression", package = "psychotools")

## responses to the first other-to-blame situation (bus)
VerbalAggression$s1 &lt;- VerbalAggression$resp[, 1:6]

## exclude subjects who only scored in the highest or the lowest categories
VerbalAggression &lt;- subset(VerbalAggression, rowSums(s1) &gt; 0 &amp; rowSums(s1) &lt; 12)

## fit rating scale tree model for the first other-to-blame situation
rst &lt;- rstree(s1 ~ anger + gender, data = VerbalAggression)

## print tree (with and without parameters)
print(rst)
print(rst, FUN = function(x) " *")

## show summary for terminal panel nodes
summary(rst)

## visualization
plot(rst, type = "regions")
plot(rst, type = "profile")

## extract item and threshold parameters
coef(rst)
itempar(rst)
threshpar(rst)

## inspect parameter stability tests in all splitting nodes
if(require("strucchange")) {
sctest(rst, node = 1)
sctest(rst, node = 2)
}

options(digits = o$digits)
## IGNORE_RDIFF_END
</code></pre>


</div>
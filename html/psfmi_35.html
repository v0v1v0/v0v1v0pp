<div class="container">

<table style="width: 100%;"><tr>
<td>mivalext_lr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>External Validation of logistic prediction models in 
multiply imputed datasets</h2>

<h3>Description</h3>

<p><code>mivalext_lr</code> External validation of logistic prediction models
</p>


<h3>Usage</h3>

<pre><code class="language-R">mivalext_lr(
  data.val = NULL,
  data.orig = NULL,
  nimp = 5,
  impvar = NULL,
  formula = NULL,
  lp.orig = NULL,
  cal.plot = FALSE,
  plot.indiv,
  val.check = FALSE,
  g = 10,
  groups_cal = 10,
  plot.method = "mean"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data.val</code></td>
<td>
<p>Data frame with stacked multiply imputed validation datasets.
The original dataset that contains missing values must be excluded from the
dataset. The imputed datasets must be distinguished by an imputation variable,
specified under impvar, and starting by 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.orig</code></td>
<td>
<p>A single data frame containing the original dataset
that was used to develop the model. Used to estimate the original regression
coefficients in case lp.orig is not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nimp</code></td>
<td>
<p>A numerical scalar. Number of imputed datasets. Default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>impvar</code></td>
<td>
<p>A character vector. Name of the variable that distinguishes the
imputed datasets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A formula object to specify the model as normally used by glm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lp.orig</code></td>
<td>
<p>Numeric vector of the original coefficient values that are
externally validated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cal.plot</code></td>
<td>
<p>If TRUE a calibration plot is generated. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.indiv</code></td>
<td>
<p>This argument is deprecated; please use plot.method instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>val.check</code></td>
<td>
<p>logical vector. If TRUE the names of the predictors of the LP
are provided and can be used as information for the order of the coefficient
values as input for lp.orig. If FALSE (default) validation procedure is executed
with coefficient values fitted in the order as used under lp.orig.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>A numerical scalar. Number of groups for the Hosmer and
Lemeshow test. Default is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups_cal</code></td>
<td>
<p>A numerical scalar. Number of groups used on the calibration plot. 
Default is 10. If the range of predicted probabilities is low, less than 10 groups 
can be chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.method</code></td>
<td>
<p>If "mean" one calibration plot is generated, first taking the 
mean of the linear predictor values across the multiply imputed datasets (default), if 
"individual" the calibration plot in each imputed dataset is plotted, 
if "overlay" calibration plots from each imputed datasets are plotted in one figure.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The following information of the externally validated model is provided:
<code>calibrate</code> with information of <code>pooled_int</code> and <code>pooled_slope</code> that is
the pooled linear predictor (LP), after the LP is freely estimated in each external imputed 
dataset <code>Outcome ~ a + LP</code> (provides information about miscalibration in intercept 
and slope), <code>pooled_offset_int</code> as <code>Outcome ~ a + offset(LP)</code> and 
<code>pooled_offset_slope</code> as <code>Outcome ~ a + LP + offset(LP)</code> with information 
about miscalibration in intercept and slope separately by using an offset procedure 
(see Steyerberg, p. 300), <code>coef_pooled</code> with the pooled coefficients when the model 
is freely estimated in imputed datasets, <code>ROC</code> pooled ROC curve (back transformed 
after pooling log transformed ROC curves), <code>R2</code> pooled Nagelkerke R-Square value 
(back transformed after pooling Fisher transformed values), <code>HLtest</code> pooled Hosmer 
and Lemeshow Test (using function <code>pool_D2</code>). In addition information is provided about 
<code>nimp</code>, <code>impvar</code>, <code>formula</code>, <code>val_ckeck</code>, <code>g</code> and <code>coef_check</code>. 
When the external validation is very poor, the R2 can become negative due to the poor fit of 
the model in the external dataset (in that case you may report a R2 of zero).
</p>


<h3>Value</h3>

<p>A <code>mivalext_lr</code> object from which the following objects 
can be extracted: <code>calibrate</code> with information about 
mis-calibration in intercept and slope with and without offset procedure, 
<code>coef_pooled</code>, coefficients pooled, ROC results as <code>ROC</code>, 
R squared results as <code>R2</code>, Hosmer and Lemeshow test as <code>HL_test</code>, 
<code>nimp</code>, <code>formula</code>, <code>impvar</code>, <code>val.check</code>, <code>g</code>, 
<code>coef.check</code> and <code>groups_cal</code>.
</p>


<h3>References</h3>

<p>F. Harrell. Regression Modeling Strategies. With Applications to
Linear Models, Logistic and Ordinal Regression, and Survival Analysis. 2nd Edition.
Springer, New York, NY, 2015.
</p>
<p>EW. Steyerberg (2019). Clinical Prediction MOdels. A Practical Approach
to Development, Validation, and Updating (2nd edition). Springer Nature Switzerland AG.
</p>
<p>Van Buuren S. (2018). Flexible Imputation of Missing Data. 2nd Edition. Chapman &amp;
Hall/CRC Interdisciplinary Statistics. Boca Raton.
</p>
<p>http://missingdatasolutions.rbind.io/
</p>


<h3>Examples</h3>

<pre><code class="language-R">
mivalext_lr(data.val=lbpmilr, nimp=5, impvar="Impnr", 
  formula = Chronic ~ Gender + factor(Carrying)  + Function + 
  Tampascale + Age, lp.orig=c(-10, -0.35, 1.00, 1.00, -0.04, 0.26, -0.01),
  cal.plot=TRUE, val.check = FALSE)

</code></pre>


</div>
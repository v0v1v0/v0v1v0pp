<div class="container">

<table style="width: 100%;"><tr>
<td>parseInteractionTerms</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Parse interaction terms</h2>

<h3>Description</h3>

<p>Parse interaction terms for regression tables
</p>


<h3>Usage</h3>

<pre><code class="language-R">parseInteractionTerms(
  terms,
  xlevels,
  units,
  format.factor,
  format.contrast,
  format.scale,
  format.scale.unit,
  sep = ": ",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>terms</code></td>
<td>
<p>Terms of a formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlevels</code></td>
<td>
<p>Factor levels corresponding to the variables in
<code>terms</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>named list with unit labels. names should match variable names in formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format.factor</code></td>
<td>
<p>For categorical variables. A string which specifies the print format for factor labels.
The string has to contain the keywords <code>"var"</code> and <code>"level"</code> which will be
replaced by the name of the variable and the current level, respectively.
Default is <code>"var(level)"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format.contrast</code></td>
<td>
<p>For categorical variables. A string which specifies the print format for constrast statements.
The string has to contain the keywords <code>"var"</code>, <code>"level"</code> and <code>"ref"</code> which will be
replaced by the name of the variable, the current level and the reference level, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format.scale</code></td>
<td>
<p>A string which specifies the print format for continuous variables without units. 
The string has to contain the keyword <code>"var"</code> which will be
replaced by the name of the variable and the unit, respectively.
Default is <code>"var"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format.scale.unit</code></td>
<td>
<p>A string which specifies the print format for continuous variables with units. 
The string has to contain the keywords <code>"var"</code> and <code>"unit"</code> which will be
replaced by the name of the variable and the unit, respectively.
Default is <code>"var(unit)"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>a character string to separate the terms. Default is <code>": "</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not yet used</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Prepare a list of contrasts which combines regression coefficients
to describe statistical interactions.
</p>


<h3>Value</h3>

<p>List of contrasts which can be passed to
<code>lava::estimate</code>.
</p>


<h3>Author(s)</h3>

<p>Thomas A. Gerds &lt;tag@biostat.ku.dk&gt;
</p>


<h3>See Also</h3>

<p>lava::estimate
</p>


<h3>Examples</h3>

<pre><code class="language-R">
tt &lt;- terms(formula(SBP~age+sex*BMI))
xlev &lt;- list(sex=c("male","female"),BMI=c("normal","overweight","obese"))
parseInteractionTerms(terms=tt,xlevels=xlev)
parseInteractionTerms(terms=tt,xlevels=xlev,format.factor="var level")
parseInteractionTerms(terms=tt,xlevels=xlev,format.contrast="var(level:ref)")

tt2 &lt;- terms(formula(SBP~age*factor(sex)+BMI))
xlev2 &lt;- list("factor(sex)"=c("male","female"))
parseInteractionTerms(terms=tt2,xlevels=xlev2)
parseInteractionTerms(terms=tt2,xlevels=xlev2,units=list(age="yrs"))


data(Diabetes)
fit &lt;- glm(bp.2s~age*factor(gender)+BMI,data=Diabetes)
parseInteractionTerms(terms=terms(fit$formula),xlevels=fit$xlevels,
                      format.scale="var -- level:ref",units=list("age"='years'))
parseInteractionTerms(terms=terms(fit$formula),xlevels=fit$xlevels,
                      format.scale.unit="var [unit]",units=list("age"='years'))
it &lt;- parseInteractionTerms(terms=terms(fit$formula),xlevels=fit$xlevels)
ivars &lt;- unlist(lapply(it,function(x)attr(x,"variables")))
lava::estimate(fit,function(p)lapply(unlist(it),eval,envir=sys.parent(-1)))


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>setupPerryPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set up a plot of resampling-based prediction error results</h2>

<h3>Description</h3>

<p>Extract and prepare the relevant information for a plot of results of
resampling-based prediction error measures.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setupPerryPlot(object, ...)

## S3 method for class 'perry'
setupPerryPlot(
  object,
  which = c("box", "density", "dot"),
  select = NULL,
  seFactor = NA,
  ...
)

## S3 method for class 'perrySelect'
setupPerryPlot(
  object,
  which = c("box", "density", "dot", "line"),
  subset = NULL,
  select = NULL,
  seFactor = object$seFactor,
  ...
)

## S3 method for class 'perryTuning'
setupPerryPlot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object inheriting from class <code>"perry"</code> or
<code>"perrySelect"</code> that contains prediction error results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>for the <code>"perryTuning"</code> method, additional arguments to
be passed down to the <code>"perrySelect"</code> method.  For the other methods,
additional arguments are currently ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>a character string specifying the type of plot to
prepare.  Possible values are <code>"box"</code> to prepare a box plot,
<code>"density"</code> to prepare a smooth density plot, <code>"dot"</code> to prepare
a dot plot, or <code>"line"</code> to prepare a plot of the (average) results for
each model as a connected line (for objects inheriting from class
<code>"perrySelect"</code>).  Note that the first two plots are only meaningful
in case of repeated resampling.  The default is to use <code>"box"</code> in case
of repeated resampling and <code>"dot"</code> otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>a character, integer or logical vector indicating the columns
of prediction error results to be prepared for plotting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seFactor</code></td>
<td>
<p>a numeric value giving the multiplication factor of the
standard error for displaying error bars in dot plots or line plots.  Error
bars in those plots can be suppressed by setting this to <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>a character, integer or logical vector indicating the subset
of models to be prepared for plotting.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>"setupPerryPlot"</code> with the following
components:
</p>

<dl>
<dt><code>data</code></dt>
<dd>
<p>a data frame containing the following columns:
</p>

<dl>
<dt><code>Fit</code></dt>
<dd>
<p>a vector or factor containing the identifiers of the
models.</p>
</dd>
<dt><code>Name</code></dt>
<dd>
<p>a factor containing the names of the predictor error
results (not returned in case of only one column of prediction error
results with the default name).</p>
</dd>
<dt><code>PE</code></dt>
<dd>
<p>the estimated prediction errors.</p>
</dd>
<dt><code>Lower</code></dt>
<dd>
<p>the lower end points of the error bars (only
returned if possible to compute).</p>
</dd>
<dt><code>Upper</code></dt>
<dd>
<p>the upper end points of the error bars (only
returned if possible to compute).</p>
</dd>
</dl>
</dd>
<dt><code>which</code></dt>
<dd>
<p>a character string specifying the type of plot.</p>
</dd>
<dt><code>grouped</code></dt>
<dd>
<p>a logical indicating whether density plots should
be grouped due to multiple model fits (only returned in case of density
plots for the <code>"perrySelect"</code> and <code>"perryTuning"</code> methods).</p>
</dd>
<dt><code>includeSE</code></dt>
<dd>
<p>a logical indicating whether error bars based on
standard errors are available (only returned in case of dot plots or line
plots).</p>
</dd>
<dt><code>mapping</code></dt>
<dd>
<p>default aesthetic mapping for the plots.</p>
</dd>
<dt><code>facets</code></dt>
<dd>
<p>default faceting formula for the plots (not returned
in case of only one column of prediction error results with the default
name).</p>
</dd>
<dt><code>tuning</code></dt>
<dd>
<p>a data frame containing the grid of tuning parameter
values for which the prediction error was estimated (only returned for the
<code>"perryTuning"</code> method).</p>
</dd>
</dl>
<h3>Note</h3>

<p>Duplicate indices in <code>subset</code> or <code>select</code> are removed such
that all models and prediction error results are unique.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code>perryPlot</code>,
</p>
<p><code>perryFit</code>, <code>perrySelect</code>,
<code>perryTuning</code>,
</p>
<p><code>ggplot</code>, <code>autoplot</code>,
<code>plot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("perryExamples")
data("coleman")
set.seed(1234)  # set seed for reproducibility

## set up folds for cross-validation
folds &lt;- cvFolds(nrow(coleman), K = 5, R = 10)

## compare LS, MM and LTS regression

# perform cross-validation for an LS regression model
fitLm &lt;- lm(Y ~ ., data = coleman)
cvLm &lt;- perry(fitLm, splits = folds,
              cost = rtmspe, trim = 0.1)

# perform cross-validation for an MM regression model
fitLmrob &lt;- lmrob(Y ~ ., data = coleman, maxit.scale = 500)
cvLmrob &lt;- perry(fitLmrob, splits = folds,
                 cost = rtmspe, trim = 0.1)

# perform cross-validation for an LTS regression model
fitLts &lt;- ltsReg(Y ~ ., data = coleman)
cvLts &lt;- perry(fitLts, splits = folds,
               cost = rtmspe, trim = 0.1)

# combine results into one object
cv &lt;- perrySelect(LS = cvLm, MM = cvLmrob, LTS = cvLts,
                  .selectBest = "min")
cv

## convert MM regression results to data frame for plotting
# all replications for box plot
cvLmrobBox &lt;- setupPerryPlot(cvLmrob, which = "box")
perryPlot(cvLmrobBox)
# aggregated results for dot plot
cvLmrobDot &lt;- setupPerryPlot(cvLmrob, which = "dot", seFactor = 2)
perryPlot(cvLmrobDot)

## convert combined results to data frame for plotting
# all replications for box plot
cvBox &lt;- setupPerryPlot(cv, which = "box")
perryPlot(cvBox)
# aggregated results for dot plot
cvDot &lt;- setupPerryPlot(cv, which = "dot", seFactor = 2)
perryPlot(cvDot)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>double_robust_scores.causal_forest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Matrix <code class="reqn">\Gamma</code> of scores for each treatment <code class="reqn">a</code>
</h2>

<h3>Description</h3>

<p>Computes a matrix of double robust scores
<code class="reqn">\Gamma_{ia} = \mu_a(x) + \frac{1}{e_a(x)} (Y_i - \mu_a(x)) 1(A_i=a)</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'causal_forest'
double_robust_scores(object, ...)

## S3 method for class 'causal_survival_forest'
double_robust_scores(object, ...)

## S3 method for class 'instrumental_forest'
double_robust_scores(object, compliance.score = NULL, ...)

## S3 method for class 'multi_arm_causal_forest'
double_robust_scores(object, outcome = 1, ...)

double_robust_scores(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An appropriate causal forest type object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compliance.score</code></td>
<td>
<p>An estimate of the causal effect of Z on W.
i.e., Delta(X) = E(W | X, Z = 1) - E(W | X, Z = 0), for each sample i = 1, ..., n. If NULL (default)
then this is estimated with a causal forest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>Only used with multi arm causal forets. In the event the forest is trained
with multiple outcomes Y, a column number/name specifying the outcome of interest.
Default is 1.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is the matrix used for CAIPWL (Cross-fitted Augmented Inverse Propensity Weighted Learning)
</p>


<h3>Value</h3>

<p>A matrix of scores for each treatment
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>double_robust_scores(causal_forest)</code>: Scores <code class="reqn">(\Gamma_0, \Gamma_1)</code>
</p>
</li>
<li> <p><code>double_robust_scores(causal_survival_forest)</code>: Scores <code class="reqn">(\Gamma_0, \Gamma_1)</code>
</p>
</li>
<li> <p><code>double_robust_scores(instrumental_forest)</code>: Scores <code class="reqn">(-\Gamma, \Gamma)</code>
</p>
</li>
<li> <p><code>double_robust_scores(multi_arm_causal_forest)</code>: Matrix <code class="reqn">\Gamma</code> of scores for each treatment <code class="reqn">a</code>
</p>
</li>
</ul>
<h3>Note</h3>

<p>For instrumental_forest this method returns <code class="reqn">(-\Gamma_i, \Gamma_i)</code> where <code class="reqn">\Gamma_i</code>
is the double robust estimator of the treatment effect as in eqn. (44) in Athey and Wager (2021).
</p>


<h3>References</h3>

<p>Athey, Susan, and Stefan Wager. "Policy Learning With Observational Data." Econometrica 89.1 (2021): 133-161.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Compute double robust scores for a multi-arm causal forest
n &lt;- 500
p &lt;- 10
X &lt;- matrix(rnorm(n * p), n, p)
W &lt;- as.factor(sample(c("A", "B", "C"), n, replace = TRUE))
Y &lt;- X[, 1] + X[, 2] * (W == "B") + X[, 3] * (W == "C") + runif(n)
forest &lt;- grf::multi_arm_causal_forest(X, Y, W)
scores &lt;- double_robust_scores(forest)
head(scores)

# Compute double robust scores for a causal forest
n &lt;- 500
p &lt;- 10
X &lt;- matrix(rnorm(n * p), n, p)
W &lt;- rbinom(n, 1, 0.5)
Y &lt;- pmax(X[, 1], 0) * W + X[, 2] + pmin(X[, 3], 0) + rnorm(n)
c.forest &lt;- grf::causal_forest(X, Y, W)
scores &lt;- double_robust_scores(c.forest)

</code></pre>


</div>
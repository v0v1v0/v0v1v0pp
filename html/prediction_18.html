<div class="container">

<table style="width: 100%;"><tr>
<td>margex</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Artificial data for margins, copied from Stata</h2>

<h3>Description</h3>

<p>The dataset is identical to the one provided by Stata and available from <code>webuse::webuse("margex")</code> with categorical variables explicitly encoded as factors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">data("margex")
</code></pre>


<h3>Format</h3>

<p>A data frame with 3000 observations on the following 11 variables.
</p>

<dl>
<dt>‘<span class="samp">⁠y⁠</span>’</dt>
<dd>
<p>A numeric vector</p>
</dd>
<dt>‘<span class="samp">⁠outcome⁠</span>’</dt>
<dd>
<p>A binary numeric vector with values (0,1)</p>
</dd>
<dt>‘<span class="samp">⁠sex⁠</span>’</dt>
<dd>
<p>A factor with two levels</p>
</dd>
<dt>‘<span class="samp">⁠group⁠</span>’</dt>
<dd>
<p>A factor with three levels</p>
</dd>
<dt>‘<span class="samp">⁠age⁠</span>’</dt>
<dd>
<p>A numeric vector</p>
</dd>
<dt>‘<span class="samp">⁠distance⁠</span>’</dt>
<dd>
<p>A numeric vector</p>
</dd>
<dt>‘<span class="samp">⁠ycn⁠</span>’</dt>
<dd>
<p>A numeric vector</p>
</dd>
<dt>‘<span class="samp">⁠yc⁠</span>’</dt>
<dd>
<p>A numeric vector</p>
</dd>
<dt>‘<span class="samp">⁠treatment⁠</span>’</dt>
<dd>
<p>A factor with two levels</p>
</dd>
<dt>‘<span class="samp">⁠agegroup⁠</span>’</dt>
<dd>
<p>A factor with three levels</p>
</dd>
<dt>‘<span class="samp">⁠arm⁠</span>’</dt>
<dd>
<p>A factor with three levels</p>
</dd>
</dl>
<h3>Source</h3>

<p><a href="https://www.stata-press.com/data/r14/margex.dta">https://www.stata-press.com/data/r14/margex.dta</a>
</p>


<h3>See Also</h3>

<p><code>prediction</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Examples from Stata's help files
# Also available from: webuse::webuse("margex")
data("margex")

# A simple case after regress
# . regress y i.sex i.group
# . margins sex
m1 &lt;- lm(y ~ factor(sex) + factor(group), data = margex)
prediction(m1, at = list(sex = c("male", "female")))

# A simple case after logistic
# . logistic outcome i.sex i.group
# . margins sex
m2 &lt;- glm(outcome ~ sex + group, binomial(), data = margex)
prediction(m2, at = list(sex = c("male", "female")))

# Average response versus response at average
# . margins sex
prediction(m2, at = list(sex = c("male", "female")))
# . margins sex, atmeans
## TODO

# Multiple margins from one margins command
# . margins sex group
prediction(m2, at = list(sex = c("male", "female")))
prediction(m2, at = list(group = c("1", "2", "3")))

# Margins with interaction terms
# . logistic outcome i.sex i.group sex#group
# . margins sex group
m3 &lt;- glm(outcome ~ sex * group, binomial(), data = margex)
prediction(m3, at = list(sex = c("male", "female")))
prediction(m3, at = list(group = c("1", "2", "3")))

# Margins with continuous variables
# . logistic outcome i.sex i.group sex#group age
# . margins sex group
m4 &lt;- glm(outcome ~ sex * group + age, binomial(), data = margex)
prediction(m4, at = list(sex = c("male", "female")))
prediction(m4, at = list(group = c("1", "2", "3")))

# Margins of continuous variables
# . margins, at(age=40)
prediction(m4, at = list(age = 40))
# . margins, at(age=(30 35 40 45 50))
prediction(m4, at = list(age = c(30, 35, 40, 45, 50)))

# Margins of interactions
# . margins sex#group
prediction(m4, at = list(sex = c("male", "female"), group = c("1", "2", "3")))


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>create_data_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Data Matrix</h2>

<h3>Description</h3>

<p>Creates a matrix suitable for <code>create_analysis_obj()</code>. Creates dummy variables for factors and
allows transformations of covariates specified with a formula.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_data_matrix(
  data,
  outcome,
  trt_flag_col,
  ext_flag_col,
  covariates = NULL,
  weight_var = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame. Data containing all variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>character. The outcome variable for binary outcomes or the time and censoring variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trt_flag_col</code></td>
<td>
<p>character. The treatment indicator variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ext_flag_col</code></td>
<td>
<p>character. The external cohort indicator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>character or formula. The covariates for model adjustment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight_var</code></td>
<td>
<p>character. An optional weight variable.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisibly returns a <code>matrix</code> containing all variables to pass to <code>create_analysis_obj()</code>.
Prints names of covariates columns to use with <code>add_covariates()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">dat &lt;- survival::diabetic
dat$ext &lt;- dat$trt == 0 &amp; dat$id &gt; 1000
data_mat &lt;- create_data_matrix(
  dat,
  outcome = c("time", "status"),
  trt_flag_col = "trt",
  ext_flag_col = "ext",
  covariates = ~ age + laser + log(risk)
)
data_mat
</code></pre>


</div>
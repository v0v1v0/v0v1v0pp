<div class="container">

<table style="width: 100%;"><tr>
<td>generic.metrics</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate any metric(s) (and compare with null distributions)</h2>

<h3>Description</h3>

<p>Allow the calculation of any metric within <code>pez</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generic.null(
  data,
  metrics,
  null.model = c("taxa.labels", "richness", "frequency", "sample.pool",
    "phylogeny.pool", "independentswap", "trialswap", "trait.asm"),
  permute = 1000,
  comp.fun = .ses,
  ...
)

.ses(observed, null)

.metric.null(
  data,
  metrics,
  null.model = c("taxa.labels", "richness", "frequency", "sample.pool",
    "phylogeny.pool", "independentswap", "trialswap", "trait.asm"),
  permute = 1000,
  trait = -1,
  ...
)

generic.metrics(data, metrics, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data <code>comparative.comm</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>vector of functions to be calculated on <code>data</code>;
see pez.metrics for a list of them.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>null.model</code></td>
<td>
<p>one of "taxa.labels", "richness", "frequency",
"sample.pool", "phylogeny.pool", "independentswap", or
"independentswap". These correspond to the null models available in
<code>picante</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>permute</code></td>
<td>
<p>number of null permutations to perform (default
1000)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comp.fun</code></td>
<td>
<p>comparison function to compare observed values with
null values. Default is <code>.ses</code>; this is a Standard
Effect Size (obs - mean)/SEmean. You may supply your own function;
it should take the observed site-metric matrix as its first
argument, and a site-metric-permutation array as its second. See
the internals of <code>generic.null</code> for an example of its
use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments (e.g, <code>dist</code>,
<code>abundance.weighted</code>) to be passed to any metric functions
(see <code>generic.metrics</code> for possible arguments)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observed</code></td>
<td>
<p>observed metric values in site-metric matrix
(<em>e.g.</em>, from <code>generic.metrics</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>null</code></td>
<td>
<p>null distributions (<em>e.g.</em>, from
<code>.metric.null</code>) in a site-metric-permutation array</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trait</code></td>
<td>
<p>if using <code>trait.asm</code> <code>null.model</code>, which
trait to use (as in <code>trait.asm</code>)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>generic.null</code> Calculate metrics and compare with null
distributions. Very light wrapper around the utility functions
<code>generic.null</code> and <code>generic.metrics</code> (which
is, itself, a very simple function!).
</p>


<h3>Value</h3>

<p><code>generic.null</code> Output from <code>comp.fun</code>, by default
an array (site-metric-type), where type is the observed value, the
mean of the null permutations, the Standard Error of that mean, the
Standard Effect Size of the metric (obs-null.mean)/SE, and then the
rank of the observed value in the permutations. The rank can be
considered a bootstrapped p-value of significance, but remember
that this is a rank: at the 95
would be significant.
</p>
<p><code>.ses</code> Vector of standard effect sizes
</p>
<p><code>.metric.null</code> site-metric-permutation array
</p>
<p><code>generic.metrics</code> site-metric matrix
</p>


<h3>Note</h3>

<p><code>comp.fun</code> can be <em>anything</em>; much ink has been
written about the use of standard effect sizes in eco-phylogenetic
analyses (<em>e.g.</em>, Kembel 2009). That this function makes it
easy for you to compute Standard Effect Sizes does not necessarily
mean that you should (see Pearse et al. 2013).
</p>
<p>Calculating null permutations on a dispersion metric makes little
sense, since (by definition; see Pearse et al. 2014) a dispersion
metric <em>require</em> the use of a null distribution to be
calculated. There is nothing to stop you doing so, however! The
code makes no attempt to stop you calculating null dissimilarity
metrics, but I am not certain that doing so is a good idea using
this code as I don't know what to do with such null models!
</p>
<p>The <code>pez.shape</code>, <code>pez.evenness</code>,
<code>pez.dispersion</code>, and <code>pez.dissimilarity</code>
wrapper functions go to some trouble to stop you calculating
metrics using inappropriate data (see their notes). These functions
give you access to the underlying code within <code>pez</code>; there is
nothing I can do to stop you calculating a metric that, in my
opinion, doesn't make any sense. You have been warned :D
</p>


<h3>Author(s)</h3>

<p>Will Pearse
</p>


<h3>References</h3>

<p>Kembel S.W. (2009) Disentangling niche and neutral
influences on community assembly: assessing the performance of
community phylogenetic structure tests. Ecology letters, 12(9),
949-960.
</p>
<p>Pearse W.D., Jones F.A. &amp; Purvis A. (2013) Barro
Colorado Island's phylogenetic assemblage structure across fine
spatial scales and among clades of different ages. Ecology, 94(12),
2861-2872.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Setup data
data(laja)
data &lt;- comparative.comm(invert.tree, river.sites, invert.traits)
#Calculate some metrics
generic.metrics(data, c(.mpd, .pse))
#Compare with a trait-based null model (trait.asm)
generic.null(data, c(.mpd, .pse), "trait.asm", permute=10, trait="fish.pref")
#...be patient when running large (e.g., 1000) sets of null simulations
#You can also do this in pieces, giving even more flexibility
observed &lt;- generic.metrics(data, c(.mpd, .pse))
#null &lt;- .metric.null(data, c(.mpd, .pse))
#ses &lt;- .ses(observed, null)
#...this is how everything works within generic.null
#...and, as with everything in pez, all internal functions start with a "."
</code></pre>


</div>
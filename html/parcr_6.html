<div class="container">

<table style="width: 100%;"><tr>
<td>%xthen%</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Keeping only first or second result from a <code style="white-space: pre;">⁠%then%⁠</code> sequence</h2>

<h3>Description</h3>

<p>Two parsers composed in sequence produce a pair of results. Sometimes we are
only interested in one component of the pair. For example in the case of
reserved words such as 'begin' and 'end'. In such cases, two special
versions of the <code style="white-space: pre;">⁠%then%⁠</code> combinator are useful, which keep either the
first or second result, as reflected by the position of the letter 'x' in
their names.
</p>


<h3>Usage</h3>

<pre><code class="language-R">p1 %xthen% p2

p1 %thenx% p2
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>p1, p2</code></td>
<td>
<p>two parsers.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A parser.
</p>


<h3>Pseudocode</h3>

<pre>
(p1 %xthen% p2)(x):
  if p1(x)==[] or x==null then fail()(x)
  else
    if p2(x[-1])==[] then fail()(x)
    else succeed(p1(x)$L)(x[-2])

(p1 %thenx% p2)(x):
  if p1(x)==[] or x==null then fail()(x)
  else
    if p2(x[-1])==[] then fail()(x)
    else succeed(p2(x[-1])$L)(x[-2])
</pre>
<p>where <code>null</code> is the empty vector, <code>x[-1]</code> and <code>x[-2]</code> are the vector <code>x</code>
without the first element and without the first two elements, respectively.
</p>


<h3>See Also</h3>

<p>%then%
</p>


<h3>Examples</h3>

<pre><code class="language-R">is_number &lt;- function(x) grepl("\\d+",x[1])
# Numbers are preceded by "&gt;" symbols, but we only want the number
(literal("&gt;") %thenx% satisfy(is_number)) (c("&gt;", "12"))
# Temperatures are followed by the unit 'C', but we only want the number
(satisfy(is_number) %xthen% literal("C")) (c("21", "C"))

</code></pre>


</div>
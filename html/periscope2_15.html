<div class="container">

<table style="width: 100%;"><tr>
<td>downloadableTable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>downloadableTable module server function</h2>

<h3>Description</h3>

<p>Server-side function for the downloadableTableUI.  This is a custom
high-functionality table paired with a linked downloadFile
button.
</p>


<h3>Usage</h3>

<pre><code class="language-R">downloadableTable(
  id,
  logger = NULL,
  filenameroot = "download",
  downloaddatafxns = NULL,
  tabledata,
  selection = NULL,
  table_options = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>the ID of the Module's UI element</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logger</code></td>
<td>
<p>logger to use</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filenameroot</code></td>
<td>
<p>the text used for user-downloaded file - can be
either a character string, a reactive expression or a function returning a character
string</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>downloaddatafxns</code></td>
<td>
<p>a <strong>named</strong> list of functions providing the data as
return values.  The names for the list should be the same names that were used
when the table UI was created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tabledata</code></td>
<td>
<p>function or reactive expression providing the table display
data as a return value. This function should require no input parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selection</code></td>
<td>
<p>function or reactive expression providing the row_ids of the
rows that should be selected</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_options</code></td>
<td>
<p>optional table formatting parameters check <code>?DT::datatable</code> for options full list.
Also see example below to see how to pass options</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>downloadFile button will be hidden if <code>downloadableTable</code> parameter <code>downloaddatafxn</code> or
<code>downloadableTableUI</code> parameter <code>downloadtypes</code> is empty
</p>
<p>Generated table can highly customized using function <code>?DT::datatable</code> same arguments
except for <code>options</code> and <code>selection</code> parameters.
</p>
<p>For <code>options</code> user can pass the same <code>?DT::datatable</code> options using the same names and
values one by one separated by comma.
</p>
<p>For <code>selection</code> parameter it can be either a function or reactive expression providing the row_ids of the
rows that should be selected.
</p>
<p>Also, user can apply the same provided <code>?DT::formatCurrency</code> columns formats on passed
dataset using format functions names as keys and their options as a list.
</p>


<h3>Value</h3>

<p>Reactive expression containing the currently selected rows in the
display table
</p>


<h3>Notes</h3>


<ul>
<li>
<p> When there are no rows to download in any of the linked downloaddatafxns
the button will be hidden as there is nothing to download.
</p>
</li>
<li> <p><code>selection</code> parameter has different usage than DT::datatable <code>selection</code> option.
See parameters usage section.
</p>
</li>
<li>
<p> DT::datatable options <code>editable</code>, <code>width</code> and <code>height</code> are not supported
</p>
</li>
</ul>
<h3>Shiny Usage</h3>

<p>This function is not called directly by consumers - it is accessed in
server.R using the same id provided in <code>downloadableTableUI</code>:
</p>
<p><strong><code>downloadableTable(id, logger, filenameroot,
downloaddatafxns, tabledata, rownames, caption, selection)</code></strong>
</p>
<p><em>Note</em>: calling module server returns the reactive expression containing the
currently selected rows in the display table.
</p>


<h3>See Also</h3>

<p>downloadableTableUI
</p>
<p>downloadFileButton
</p>
<p>logViewerOutput
</p>
<p>downloadFile
</p>
<p>downloadFile_ValidateTypes
</p>
<p>downloadFile_AvailableTypes
</p>
<p>downloadablePlot
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
 library(shiny)
 library(periscope2)
 shinyApp(ui = fluidPage(fluidRow(column(width = 12,
   downloadableTableUI("object_id1",
                       downloadtypes = c("csv", "tsv"),
                       hovertext     = "Download the data here!",
                       contentHeight = "300px",
                       singleSelect  = FALSE)))),
   server = function(input, output) {
     mydataRowIds &lt;- function(){
       rownames(head(mtcars))[c(2, 5)]
     }
     selectedrows &lt;- downloadableTable(
       id               = "object_id1",
       logger           = "",
       filenameroot     = "mydownload1",
       downloaddatafxns = list(csv = reactiveVal(mtcars), tsv = reactiveVal(mtcars)),
       tabledata        = reactiveVal(mtcars),
       selection        = mydataRowIds,
       table_options    = list(rownames = TRUE,
                            caption  = "This is a great table!"))
     observeEvent(selectedrows(), {
       print(selectedrows())
     })})
}

</code></pre>


</div>
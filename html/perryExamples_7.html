<div class="container">

<table style="width: 100%;"><tr>
<td>perry-methods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Resampling-based prediction error for fitted models</h2>

<h3>Description</h3>

<p>Estimate the prediction error of a fitted model via (repeated) <code class="reqn">K</code>-fold
cross-validation, (repeated) random splitting (also known as random
subsampling or Monte Carlo cross-validation), or the bootstrap.  Methods are
available for least squares fits computed with <code>lm</code> as
well as for the following robust alternatives: MM-type models computed with
<code>lmrob</code> and least trimmed squares fits computed with
<code>ltsReg</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'lm'
perry(
  object,
  splits = foldControl(),
  cost = rmspe,
  ncores = 1,
  cl = NULL,
  seed = NULL,
  ...
)

## S3 method for class 'lmrob'
perry(
  object,
  splits = foldControl(),
  cost = rtmspe,
  ncores = 1,
  cl = NULL,
  seed = NULL,
  ...
)

## S3 method for class 'lts'
perry(
  object,
  splits = foldControl(),
  fit = c("reweighted", "raw", "both"),
  cost = rtmspe,
  ncores = 1,
  cl = NULL,
  seed = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>the fitted model for which to estimate the prediction error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>splits</code></td>
<td>
<p>an object of class <code>"cvFolds"</code> (as returned by
<code>cvFolds</code>) or a control object of class
<code>"foldControl"</code> (see <code>foldControl</code>) defining the
folds of the data for (repeated) <code class="reqn">K</code>-fold cross-validation, an object of
class <code>"randomSplits"</code> (as returned by
<code>randomSplits</code>) or a control object of class
<code>"splitControl"</code> (see <code>splitControl</code>) defining
random data splits, or an object of class <code>"bootSamples"</code> (as returned
by <code>bootSamples</code>) or a control object of class
<code>"bootControl"</code> (see <code>bootControl</code>) defining
bootstrap samples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cost</code></td>
<td>
<p>a cost function measuring prediction loss.  It should expect
the observed values of the response to be passed as the first argument and
the predicted values as the second argument, and must return either a
non-negative scalar value, or a list with the first component containing
the prediction error and the second component containing the standard
error.  The default is to use the root mean squared prediction error
for the <code>"lm"</code> method and the root trimmed mean squared prediction
error for the <code>"lmrob"</code> and <code>"lts"</code> methods (see
<code>cost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>a positive integer giving the number of processor cores to be
used for parallel computing (the default is 1 for no parallelization).  If
this is set to <code>NA</code>, all available processor cores are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl</code></td>
<td>
<p>a <span class="pkg">parallel</span> cluster for parallel computing as generated by
<code>makeCluster</code>.  If supplied, this is preferred over
<code>ncores</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>optional initial seed for the random number generator (see
<code>.Random.seed</code>).  Note that also in case of parallel computing,
resampling is performed on the manager process rather than the worker
processes. On the parallel worker processes, random number streams are
used and the seed is set via <code>clusterSetRNGStream</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed to the prediction loss
function <code>cost</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>a character string specifying for which fit to estimate the
prediction error.  Possible values are <code>"reweighted"</code> (the default) for
the prediction error of the reweighted fit, <code>"raw"</code> for the prediction
error of the raw fit, or <code>"both"</code> for the prediction error of both
fits.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>"perry"</code> with the following components:
</p>

<dl>
<dt><code>pe</code></dt>
<dd>
<p>a numeric vector containing the estimated prediction
errors.  For the <code>"lm"</code> and <code>"lmrob"</code> methods, this is a single
numeric value.  For the <code>"lts"</code> method, this contains one value for
each of the requested fits.  In case of more than one replication, those
are average values over all replications.</p>
</dd>
<dt><code>se</code></dt>
<dd>
<p>a numeric vector containing the estimated standard
errors of the prediction loss.  For the <code>"lm"</code> and <code>"lmrob"</code>
methods, this is a single numeric value.  For the <code>"lts"</code> method,
this contains one value for each of the requested fits.</p>
</dd>
<dt><code>reps</code></dt>
<dd>
<p>a numeric matrix containing the estimated prediction
errors from all replications.  For the <code>"lm"</code> and <code>"lmrob"</code>
methods, this is a matrix with one column.  For the <code>"lts"</code> method,
this contains one column for each of the requested fits.  However, this
is only returned in case of more than one replication.</p>
</dd>
<dt><code>splits</code></dt>
<dd>
<p>an object giving the data splits used to estimate the
prediction error.</p>
</dd>
<dt><code>y</code></dt>
<dd>
<p>the response.</p>
</dd>
<dt><code>yHat</code></dt>
<dd>
<p>a list containing the predicted values from all
replications.</p>
</dd>
<dt><code>call</code></dt>
<dd>
<p>the matched function call.</p>
</dd>
</dl>
<h3>Note</h3>

<p>The <code>perry</code> methods extract the data from the fitted model and
call <code>perryFit</code> to perform resampling-based prediction
error estimation.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code>perryFit</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## load data
data("Bundesliga")
n &lt;- nrow(Bundesliga)

## fit linear model
Bundesliga$logMarketValue &lt;- log(Bundesliga$MarketValue)
fit &lt;- lm(logMarketValue ~ Contract + Matches + Goals + Assists, 
          data=Bundesliga)

## perform K-fold cross-validation
perry(fit, foldControl(K = 5, R = 10), seed = 1234)

## perform random splitting
perry(fit, splitControl(m = n/3, R = 10), seed = 1234)

## perform bootstrap prediction error estimation
# 0.632 estimator
perry(fit, bootControl(R = 10, type = "0.632"), seed = 1234)
# out-of-bag estimator
perry(fit, bootControl(R = 10, type = "out-of-bag"), seed = 1234)
</code></pre>


</div>
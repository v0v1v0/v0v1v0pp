<div class="container">

<table style="width: 100%;"><tr>
<td>prepareComposite</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare distance scores on data in preparation for composite scoring</h2>

<h3>Description</h3>

<p>Prepare distance scores on data in preparation for composite scoring
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepareComposite(
  object,
  winsorize = 0,
  values,
  better = TRUE,
  covmat,
  standardize = TRUE,
  use.prethreshold = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class ‘CompositeData’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>winsorize</code></td>
<td>
<p>Whether to winsorize the data or not.  Defaults to <code>FALSE</code>.
If not <code>FALSE</code>, the percentile to winsorize at.  For example, .01 would be
the .01 and the 1 - .01 percentiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>The values to use for winsorization.  Optional.  If specified, preempts
the percentiles given by winsorize.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>better</code></td>
<td>
<p>Logical indicating whether “better” values than the threshold
are allowed. Defaults to <code>TRUE</code>.
#' @param object An DistanceScores class object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covmat</code></td>
<td>
<p>The covariance matrix to use.  If missing,
austomatically calculated from the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standardize</code></td>
<td>
<p>A logical value whether to standardize the data or not.
Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.prethreshold</code></td>
<td>
<p>A logical value whether to calculate covariance matrix
based on the data after winsorizing, but before applying the threshold.
Defaults to <code>FALSE</code>, so that covariances are calculated after thresholds
(if any) are applied.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An S4 object of class “CompositeReady”.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># this example creates distances for the built in mtcars data
# see ?mtcars for more details
# The distances are calculated from the "best" in the dataset
# First we create an appropriate CompositeData class object
# higher mpg &amp; hp are better and lower wt &amp; qsec are better
d &lt;- CompositeData(mtcars[, c("mpg", "hp", "wt", "qsec")],
  thresholds = list(one = with(mtcars, c(
    mpg = max(mpg),
    hp = max(hp),
    wt = min(wt),
    qsec = min(qsec)))
  ),
  higherisbetter = c(TRUE, TRUE, FALSE, FALSE),
  rawtrans = list(
    mpg = function(x) x,
    hp = function(x) x,
    wt = function(x) x,
    qsec = sqrt))


# create the distance scores
dres &lt;- prepareComposite(d)

# see a density plot of the distance scores
dres@distanceDensity
# regular summary of distance scores
summary(dres@distances)

# examine covariance matrix
round(dres@covmat,2)
# cleanup
rm(d, dres)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>autoplot.partial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting Partial Dependence Functions</h2>

<h3>Description</h3>

<p>Plots partial dependence functions (i.e., marginal effects) using
<code>ggplot2</code> graphics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'partial'
autoplot(
  object,
  center = FALSE,
  plot.pdp = TRUE,
  pdp.color = "red",
  pdp.size = 1,
  pdp.linetype = 1,
  rug = FALSE,
  smooth = FALSE,
  smooth.method = "auto",
  smooth.formula = y ~ x,
  smooth.span = 0.75,
  smooth.method.args = list(),
  contour = FALSE,
  contour.color = "white",
  train = NULL,
  xlab = NULL,
  ylab = NULL,
  main = NULL,
  legend.title = "yhat",
  ...
)

## S3 method for class 'ice'
autoplot(
  object,
  center = FALSE,
  plot.pdp = TRUE,
  pdp.color = "red",
  pdp.size = 1,
  pdp.linetype = 1,
  rug = FALSE,
  train = NULL,
  xlab = NULL,
  ylab = NULL,
  main = NULL,
  ...
)

## S3 method for class 'cice'
autoplot(
  object,
  plot.pdp = TRUE,
  pdp.color = "red",
  pdp.size = 1,
  pdp.linetype = 1,
  rug = FALSE,
  train = NULL,
  xlab = NULL,
  ylab = NULL,
  main = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object that inherits from the <code>"partial"</code> class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>Logical indicating whether or not to produce centered ICE
curves (c-ICE curves). Only useful when <code>object</code> represents a set of ICE
curves; see <code>partial</code> for details. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.pdp</code></td>
<td>
<p>Logical indicating whether or not to plot the partial
dependence function on top of the ICE curves. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdp.color</code></td>
<td>
<p>Character string specifying the color to use for the partial
dependence function when <code>plot.pdp = TRUE</code>. Default is <code>"red"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdp.size</code></td>
<td>
<p>Positive number specifying the line width to use for the
partial dependence function when <code>plot.pdp = TRUE</code>. Default is <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdp.linetype</code></td>
<td>
<p>Positive number specifying the line type to use for the
partial dependence function when <code>plot.pdp = TRUE</code>. Default is <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug</code></td>
<td>
<p>Logical indicating whether or not to include rug marks on the
predictor axes. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>
<p>Logical indicating whether or not to overlay a LOESS smooth.
Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth.method</code></td>
<td>
<p>Character string specifying the smoothing method
(function) to use (e.g., <code>"auto"</code>, <code>"lm"</code>, <code>"glm"</code>,
<code>"gam"</code>, <code>"loess"</code>, or <code>"rlm"</code>). Default is <code>"auto"</code>.
See <code>geom_smooth</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth.formula</code></td>
<td>
<p>Formula to use in smoothing function (e.g.,
<code>y ~ x</code>, <code>y ~ poly(x, 2)</code>, or <code>y ~ log(x)</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth.span</code></td>
<td>
<p>Controls the amount of smoothing for the default loess
smoother. Smaller numbers produce wigglier lines, larger numbers produce
smoother lines. Default is <code>0.75</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth.method.args</code></td>
<td>
<p>List containing additional arguments to be passed
on to the modeling function defined by <code>smooth.method</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contour</code></td>
<td>
<p>Logical indicating whether or not to add contour lines to the
level plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contour.color</code></td>
<td>
<p>Character string specifying the color to use for the
contour lines when <code>contour = TRUE</code>. Default is <code>"white"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train</code></td>
<td>
<p>Data frame containing the original training data. Only required
if <code>rug = TRUE</code> or <code>chull = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>Character string specifying the text for the x-axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Character string specifying the text for the y-axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Character string specifying the text for the main title of the
plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.title</code></td>
<td>
<p>Character string specifying the text for the legend title.
Default is <code>"yhat"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional (optional) arguments to be passed onto
<code>geom_line</code>, <code>geom_point</code>, or
<code>scale_fill_viridis_c</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>"ggplot"</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#
# Regression example (requires randomForest package to run)
#

# Load required packages
library(ggplot2)  # for autoplot() generic
library(gridExtra)  # for `grid.arrange()`
library(magrittr)  # for forward pipe operator `%&gt;%`
library(randomForest)

# Fit a random forest to the Boston housing data
data (boston)  # load the boston housing data
set.seed(101)  # for reproducibility
boston.rf &lt;- randomForest(cmedv ~ ., data = boston)

# Partial dependence of cmedv on lstat
boston.rf %&gt;%
  partial(pred.var = "lstat") %&gt;%
  autoplot(rug = TRUE, train = boston) + theme_bw()

# Partial dependence of cmedv on lstat and rm
boston.rf %&gt;%
  partial(pred.var = c("lstat", "rm"), chull = TRUE, progress = TRUE) %&gt;%
  autoplot(contour = TRUE, legend.title = "cmedv",
           option = "B", direction = -1) + theme_bw()

# ICE curves and c-ICE curves
age.ice &lt;- partial(boston.rf, pred.var = "lstat", ice = TRUE)
grid.arrange(
  autoplot(age.ice, alpha = 0.1),                 # ICE curves
  autoplot(age.ice, center = TRUE, alpha = 0.1),  # c-ICE curves
  ncol = 2
)

## End(Not run)
</code></pre>


</div>
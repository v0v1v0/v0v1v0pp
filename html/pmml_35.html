<div class="container">

<table style="width: 100%;"><tr>
<td>pmml.xgb.Booster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate PMML for a xgb.Booster object from the package <span class="pkg">xgboost</span>.</h2>

<h3>Description</h3>

<p>Generate PMML for a xgb.Booster object from the package <span class="pkg">xgboost</span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'xgb.Booster'
pmml(
  model,
  model_name = "xboost_Model",
  app_name = "SoftwareAG PMML Generator",
  description = "Extreme Gradient Boosting Model",
  copyright = NULL,
  model_version = NULL,
  transforms = NULL,
  missing_value_replacement = NULL,
  input_feature_names = NULL,
  output_label_name = NULL,
  output_categories = NULL,
  xgb_dump_file = NULL,
  parent_invalid_value_treatment = "returnInvalid",
  child_invalid_value_treatment = "asIs",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An object created by the 'xgboost' function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_name</code></td>
<td>
<p>A name to be given to the PMML model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>app_name</code></td>
<td>
<p>The name of the application that generated the PMML.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>A descriptive text for the Header element of the PMML.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copyright</code></td>
<td>
<p>The copyright notice for the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_version</code></td>
<td>
<p>A string specifying the model version.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transforms</code></td>
<td>
<p>Data transformations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_value_replacement</code></td>
<td>
<p>Value to be used as the 'missingValueReplacement'
attribute for all MiningFields.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_feature_names</code></td>
<td>
<p>Input variable names used in training the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_label_name</code></td>
<td>
<p>Name of the predicted field.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_categories</code></td>
<td>
<p>Possible values of the predicted field, for classification models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xgb_dump_file</code></td>
<td>
<p>Name of file saved using 'xgb.dump' function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parent_invalid_value_treatment</code></td>
<td>
<p>Invalid value treatment at the top MiningField level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>child_invalid_value_treatment</code></td>
<td>
<p>Invalid value treatment at the model segment MiningField level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>xgboost</code> function takes as its input either an <code>xgb.DMatrix</code> object or
a numeric matrix. The input field information is not stored in the R model object,
hence the field information must be passed on as inputs. This enables the PMML
to specify field names in its model representation. The R model object does not store
information about the fitted tree structure either. However, this information can
be extracted from the <code>xgb.model.dt.tree</code> function and the file saved using the
<code>xgb.dump</code> function. The xgboost library is therefore needed in the environment and this
saved file is needed as an input as well.
</p>
<p>The following objectives are currently supported: <code>multi:softprob</code>,
<code>multi:softmax</code>, <code>binary:logistic</code>.
</p>
<p>The pmml exporter will throw an error if the xgboost model model only has one tree.
</p>
<p>The exporter only works with numeric matrices. Sparse matrices must be converted to
<code>matrix</code> objects before training an xgboost model for the export to work correctly.
</p>


<h3>Value</h3>

<p>PMML representation of the xgb.Booster object.
</p>


<h3>Author(s)</h3>

<p>Tridivesh Jena
</p>


<h3>References</h3>

<p><a href="https://CRAN.R-project.org/package=xgboost">xgboost: Extreme Gradient Boosting</a>
</p>


<h3>See Also</h3>

<p><code>pmml</code>,
<a href="http://dmg.org/pmml/v4-4-1/GeneralStructure.html">PMML schema</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Example using the xgboost package example model.

library(xgboost)
data(agaricus.train, package = "xgboost")
data(agaricus.test, package = "xgboost")

train &lt;- agaricus.train
test &lt;- agaricus.test

model1 &lt;- xgboost(
  data = train$data, label = train$label,
  max_depth = 2, eta = 1, nthread = 2,
  nrounds = 2, objective = "binary:logistic"
)

# Save the tree information in an external file:
xgb.dump(model1, "model1.dumped.trees")

# Convert to PMML:
model1_pmml &lt;- pmml(model1,
  input_feature_names = colnames(train$data),
  output_label_name = "prediction1",
  output_categories = c("0", "1"),
  xgb_dump_file = "model1.dumped.trees"
)

# Multinomial model using iris data:
model2 &lt;- xgboost(
  data = as.matrix(iris[, 1:4]),
  label = as.numeric(iris[, 5]) - 1,
  max_depth = 2, eta = 1, nthread = 2, nrounds = 2,
  objective = "multi:softprob", num_class = 3
)

# Save the tree information in an external file:
xgb.dump(model2, "model2.dumped.trees")

# Convert to PMML:
model2_pmml &lt;- pmml(model2,
  input_feature_names = colnames(as.matrix(iris[, 1:4])),
  output_label_name = "Species",
  output_categories = c(1, 2, 3), xgb_dump_file = "model2.dumped.trees"
)

## End(Not run)

</code></pre>


</div>
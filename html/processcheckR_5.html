<div class="container">

<table style="width: 100%;"><tr>
<td>check_rule</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check Declarative Rule(s)</h2>

<h3>Description</h3>

<p>This function can be used to check rules or constraint templates on event data.
It needs a <code>log</code> (object of class <code>log</code> or derivatives, e.g. <code>grouped_log</code>,
<code>eventlog</code>, <code>activitylog</code>, etc.). and (a) <code>rule</code>(s).
Rules can be made with the following templates:
</p>

<ul>
<li> <p><em>Cardinality</em>:
</p>

<ul>
<li> <p><code>absent</code>: Check if the specified activity is absent from a case,
</p>
</li>
<li> <p><code>contains</code>: Check if the specified activity is present (contained) in a case,
</p>
</li>
<li> <p><code>contains_between</code>: Check if the specified activity is present (contained) in a case between the minimum and maximum number of times,
</p>
</li>
<li> <p><code>contains_exactly</code>: Check if the specified activity is present (contained) in a case for exactly <code>n</code> times.
</p>
</li>
</ul>
</li>
<li> <p><em>Relation</em>:
</p>

<ul>
<li> <p><code>ends</code>: Check if cases end with the specified activity,
</p>
</li>
<li> <p><code>starts</code>: Check if cases start with the specified activity.
</p>
</li>
<li> <p><code>precedence</code>: Check for precedence between two activities,
</p>
</li>
<li> <p><code>response</code>: Check for response between two activities,
</p>
</li>
<li> <p><code>responded_existence</code>: Check for responded existence between two activities,
</p>
</li>
<li> <p><code>succession</code>: Check for succession between two activities.
</p>
</li>
</ul>
</li>
<li> <p><em>Exclusiveness</em>:
</p>

<ul>
<li> <p><code>and</code>: Check for co-existence of two activities,
</p>
</li>
<li> <p><code>xor</code>: Check for exclusiveness of two activities.
</p>
</li>
</ul>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">check_rule(log, rule, label = NULL, eventlog = deprecated())

## S3 method for class 'log'
check_rule(log, rule, label = NULL, eventlog = deprecated())

check_rules(log, ..., eventlog = deprecated())

## S3 method for class 'log'
check_rules(log, ..., eventlog = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>
<p><code>log</code>: Object of class <code>log</code> or derivatives (<code>grouped_log</code>, <code>eventlog</code>, <code>activitylog</code>, etc.).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rule</code></td>
<td>
<p>A rule created by a rule function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p><code>character</code> (default <code>NULL</code>): Optionally, the column name under which the result of the rule should be stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eventlog</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a>; please use <code>log</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Name-rule pairs created by rule functions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The rules or constraint templates in this package are (partially) based on <em>DecSerFlow</em> (<em>Declarative Service Flow Language</em>).
For more information, see the <strong>References</strong> below.
</p>


<h4>Grouped Logs</h4>

<p>When applied to a <code>grouped_log</code>, the grouping variables are ignored but retained in the returned log.
</p>



<h3>Value</h3>

<p>An annotated log (of same type as input), where – for every rule – a new column indicates whether the rule holds or not.
The name of the new column can optionally be set using the <code>label</code> argument, or by the name of each rule in the name-rule pairs.
</p>


<h3>Methods (by class)</h3>


<ul><li> <p><code>check_rule(log)</code>: Check rule on a <code>log</code>.
</p>
</li></ul>
<h3>Functions</h3>


<ul><li> <p><code>check_rules(log)</code>: Check rules on a <code>log</code>.
</p>
</li></ul>
<h3>References</h3>

<p>van der Aalst, W. M. P., &amp; Pesic, M. (2006). DecSerFlow: Towards a Truly Declarative Service Flow Language.
In M. Bravetti, M. Núñez, &amp; G. Zavattaro (Eds.), Proceedings of the 3rd International Workshop on Web Services and Formal Methods (Vol. 4184, pp. 1–23).
Springer. <a href="https://doi.org/10.1007/11841197_1">doi:10.1007/11841197_1</a>
</p>


<h3>See Also</h3>

<p><code>filter_rules</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(bupaR)
library(eventdataR)

# Check whether MRI Scan is preceded by Blood test.
patients %&gt;%
 check_rule(precedence("Blood test","MRI SCAN"))

# Check whether MRI Scan is preceded by Blood test, and the case starts with Registration.
patients %&gt;%
 check_rules(rule1 = precedence("Blood test","MRI SCAN"),
             rule2 = starts("Registration"))

</code></pre>


</div>
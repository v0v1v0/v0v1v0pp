<div class="container">

<table style="width: 100%;"><tr>
<td>shrinkflation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Detecting and summarising downsized and upsized products.</h2>

<h3>Description</h3>

<p>This function detects and summarises downsized and upsized products.
</p>


<h3>Usage</h3>

<pre><code class="language-R">shrinkflation(
  data,
  start,
  end,
  type = "shrinkflation",
  min_p_change = 0,
  max_p_change = Inf,
  min_s_change = 0,
  max_s_change = Inf,
  prec = 3,
  interval = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The user's data frame with information about sold products. It must contain columns: <code>time</code> (as Date in format: year-month-day,e.g. '2020-12-01') and <code>prodID</code> (as numeric, factor or character), <code>prices</code> (with standardised prices!) and <code>quantities</code> (as numeric), <code>grammage</code> (as numeric), <code>unit</code> (as character) and <code>description</code> (as character). Important: prices must be standardized beforehand, that is, they must refer to the sales unit (the <code>data_norm</code> function can be used for this).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>The base period (as character) limited to the year and month, e.g. "2024-01".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>The research period (as character) limited to the year and month, e.g. "2024-02".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A parameter specifying what phenomenon is to be included in the resulting elements of the returned list (i.e. in returned <code>products_detected</code>, <code>df_detected</code> and <code>df_reduced</code>). The available values are: <code>shrinkflation</code>, <code>shrinkdeflation</code>, <code>sharkflation</code>, <code>unshrinkdeflation</code>, <code>unshrinkflation</code> and <code>sharkdeflation</code> (default value is: <code>shrinkflation</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_p_change</code></td>
<td>
<p>Lower limit for unit price change, i.e.: a product is considered if the percentage change in its unit price is greater than the value of this parameter. The default value is zero, possibly positive values can be considered (in percentage).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_p_change</code></td>
<td>
<p>Upper limit for unit price change, i.e.: a product is considered if the percentage change in its unit price is less than the value of this parameter. The default value is Inf, possibly positive values can be considered (in percentage).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_s_change</code></td>
<td>
<p>Lower limit for size change, i.e.: a product is considered if the percentage change in its size is greater than the value of this parameter. The default value is zero, possibly positive values can be considered (in percentage).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_s_change</code></td>
<td>
<p>Upper limit for size change, i.e.: a product is considered if the percentage change in its size is less than the value of this parameter. The default value is Inf, possibly positive values can be considered (in percentage).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prec</code></td>
<td>
<p>Number of decimal places for the presented summary results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval</code></td>
<td>
<p>A parameter that specifies whether the search for downsized products should consider the entire time interval, or only the compared months specified by the <code>start</code> and <code>end</code> parameters.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This function detects and summarises downsized and upsized products. The function detects phenomena such as: <code>shrinkflation</code>, <code>shrinkdeflation</code>, <code>sharkflation</code>, <code>unshrinkdeflation</code>, <code>unshrinkflation</code>, <code>sharkdeflation</code> (see the <code>type</code> parameter). It returns a list containing the following objects: <code>df_changes</code> - data frame with detailed information on downsized and upsized products with the whole history of size changes, <code>df_type</code> - data frame with recognized type of products, <code>df_overview</code> - a table with basic summary of all detected products grouped by the <code>type</code> parameter, <code>products_detected</code> with prodIDs of products indicated by the 'type' parameter, <code>df_detected</code> being a subset of the data frame with only detected products, <code>df_reduced</code> which is the difference of the input data frame and the data frame containing the detected products, 
and <code>df_summary</code> which provides basic statistics for all detected downsized and upsized products (including their share in the total number of products and mean price and size changes).
</p>


<h3>References</h3>

<p>Białek, J., Bobel, A., Oprych-Franków D. (2004). <em>Immeasurability of shrinkflation in the CPI? Automatic downsizing detection using scanner data</em>. 18th Meeting of the Ottawa Group, Ottawa.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Data matching over time
df&lt;-data_matching(data=data_DOWN_UP_SIZED, start="2024-01", end="2024-02", 
codeIN=TRUE,codeOUT=TRUE,description=TRUE, 
onlydescription=FALSE,precision=0.9,interval=FALSE)
# Extraction of information about grammage (if needed)
df&lt;-data_unit(df,units=c("g|ml|kg|l"),multiplication="x")
# Price standardization
df&lt;-data_norm(df, rules=list(c("ml","l",1000),c("g","kg",1000)))
# Downsized and upsized products detection
result&lt;-shrinkflation(data=df, start="2024-01","2024-02", 
prec=3, interval=FALSE, type="shrinkflation")
result$df_changes
result$df_type
result$df_overview
result$products_detected
result$df_detected
result$df_reduced
result$df_summary

</code></pre>


</div>
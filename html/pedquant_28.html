<div class="container">

<table style="width: 100%;"><tr>
<td>pq_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>creating charts for time series</h2>

<h3>Description</h3>

<p><code>pq_plot</code> provides an easy way to create interactive charts for time series dataset based on predefined formats.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pq_plot(dt, chart_type = "line", x = "date", y = "close", yb = NULL,
  date_range = "max", yaxis_log = FALSE, title = NULL, addti = NULL,
  nsd_lm = NULL, markline = TRUE, orders = NULL, arrange = list(rows =
  NULL, cols = NULL), theme = "default", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dt</code></td>
<td>
<p>a list/dataframe of time series dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chart_type</code></td>
<td>
<p>chart type, including line, step, candle.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>column name for x axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>column name for y axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yb</code></td>
<td>
<p>column name for baseline</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_range</code></td>
<td>
<p>date range of x axis to display. Available value includes '1m'-'11m', 'ytd', 'max' and '1y'-'ny'. Default is max.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yaxis_log</code></td>
<td>
<p>whether to display y axis values in log. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>chart title. It will added to the front of chart title if it is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addti</code></td>
<td>
<p>list of technical indicators or numerical columns in dt. For technical indicator, it is calculated via <code>pq_addti</code>, which including overlays and indicators.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsd_lm</code></td>
<td>
<p>number of standard deviation from linear regression fitting values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>markline</code></td>
<td>
<p>whether to display markline. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>orders</code></td>
<td>
<p>a data frame of trade orders, which including columns of symbol, date, side, prices, and quantity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrange</code></td>
<td>
<p>a list. Number of rows and columns charts to connect. Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theme</code></td>
<td>
<p>name of echarts theme, see details in <code>e_theme</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
# single serie
library(data.table)
library(pedquant)
data(dt_ssec)

# line chart (default)
e1 = pq_plot(dt_ssec, chart_type = 'line') # line chart (default)
e1[[1]]

# add technical indicators
e2 = pq_plot(dt_ssec, addti = list(
        sma = list(n = 200), 
        sma = list(n = 50), 
        volume = list(),
        macd = list()
))
e2[[1]]

# linear trend with yaxis in log
e3 = pq_plot(dt_ssec, nsd_lm = c(-0.8, 0, 0.8), markline=FALSE)
e3[[1]]

# multiple series
data(dt_banks)
setDT(dt_banks)
dt_banksadj = md_stock_adjust(dt_banks)

# linear trend
elist = pq_plot(dt_banksadj)
e4 = pq_plot(dt_banksadj, arrange = list(rows=1, cols=1))
e4[[1]]

# orders 
b2 = dt_banks[symbol %in% c('601988.SH', '601398.SH')]
b2orders = b2[sample(.N, 10), .(symbol, date, prices=close, 
              side=sample(c(-1, 1), 10, replace=TRUE))]
                
e5 = pq_plot(b2, orders=b2orders)
e5[[1]]

e6 = pq_plot(b2, orders=b2orders, arrange = list(rows=1, cols=1))
e6[[1]]


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>r2_bayes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bayesian R2</h2>

<h3>Description</h3>

<p>Compute R2 for Bayesian models. For mixed models (including a random part),
it additionally computes the R2 related to the fixed effects only (marginal
R2). While <code>r2_bayes()</code> returns a single R2 value, <code>r2_posterior()</code> returns a
posterior sample of Bayesian R2 values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">r2_bayes(model, robust = TRUE, ci = 0.95, verbose = TRUE, ...)

r2_posterior(model, ...)

## S3 method for class 'brmsfit'
r2_posterior(model, verbose = TRUE, ...)

## S3 method for class 'stanreg'
r2_posterior(model, verbose = TRUE, ...)

## S3 method for class 'BFBayesFactor'
r2_posterior(model, average = FALSE, prior_odds = NULL, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A Bayesian regression model (from <strong>brms</strong>,
<strong>rstanarm</strong>, <strong>BayesFactor</strong>, etc).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robust</code></td>
<td>
<p>Logical, if <code>TRUE</code>, the median instead of mean is used to
calculate the central tendency of the variances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>Value or vector of probability of the CI (between 0 and 1) to be
estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Toggle off warnings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>r2_posterior()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>average</code></td>
<td>
<p>Compute model-averaged index? See <code>bayestestR::weighted_posteriors()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior_odds</code></td>
<td>
<p>Optional vector of prior odds for the models compared to
the first model (or the denominator, for <code>BFBayesFactor</code> objects). For
<code>data.frame</code>s, this will be used as the basis of weighting.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>r2_bayes()</code> returns an "unadjusted" R2 value. See <code>r2_loo()</code> to calculate a
LOO-adjusted R2, which comes conceptually closer to an adjusted R2 measure.
</p>
<p>For mixed models, the conditional and marginal R2 are returned. The marginal
R2 considers only the variance of the fixed effects, while the conditional R2
takes both the fixed and random effects into account. Technically, since
<code>r2_bayes()</code> relies on <code>rstantools::bayes_R2()</code>, the "marginal" R2 calls
<code>bayes_R2(re.form = NA)</code>, while the "conditional" R2 calls
<code>bayes_R2(re.form = NULL)</code>. The <code>re.form</code> argument is passed to
<code>rstantools::posterior_epred()</code>, which is internally called in <code>bayes_R2()</code>.
</p>
<p>Note that for "marginal" and "conditional", we refer to the wording suggested
by <em>Nakagawa et al. 2017</em>. Thus, we don't use the term "marginal" in the sense
that the random effects are integrated out, but are "ignored".
</p>
<p><code>r2_posterior()</code> is the actual workhorse for <code>r2_bayes()</code> and returns a
posterior sample of Bayesian R2 values.
</p>


<h3>Value</h3>

<p>A list with the Bayesian R2 value. For mixed models, a list with the
Bayesian R2 value and the marginal Bayesian R2 value. The standard errors and
credible intervals for the R2 values are saved as attributes.
</p>


<h3>References</h3>


<ul>
<li>
<p> Gelman, A., Goodrich, B., Gabry, J., and Vehtari, A. (2018). R-squared for
Bayesian regression models. The American Statistician, 1â€“6.
<a href="https://doi.org/10.1080/00031305.2018.1549100">doi:10.1080/00031305.2018.1549100</a>
</p>
</li>
<li>
<p> Nakagawa, S., Johnson, P. C. D., and Schielzeth, H. (2017). The
coefficient of determination R2 and intra-class correlation coefficient from
generalized linear mixed-effects models revisited and expanded. Journal of
The Royal Society Interface, 14(134), 20170213.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
library(performance)

model &lt;- suppressWarnings(rstanarm::stan_glm(
  mpg ~ wt + cyl,
  data = mtcars,
  chains = 1,
  iter = 500,
  refresh = 0,
  show_messages = FALSE
))
r2_bayes(model)

model &lt;- suppressWarnings(rstanarm::stan_lmer(
  Petal.Length ~ Petal.Width + (1 | Species),
  data = iris,
  chains = 1,
  iter = 500,
  refresh = 0
))
r2_bayes(model)



model &lt;- suppressWarnings(brms::brm(
  mpg ~ wt + cyl,
  data = mtcars,
  silent = 2,
  refresh = 0
))
r2_bayes(model)

model &lt;- suppressWarnings(brms::brm(
  Petal.Length ~ Petal.Width + (1 | Species),
  data = iris,
  silent = 2,
  refresh = 0
))
r2_bayes(model)


</code></pre>


</div>
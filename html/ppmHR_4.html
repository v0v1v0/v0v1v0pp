<div class="container">

<table style="width: 100%;"><tr>
<td>createRisksetTable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creation of summary-level riskset tables from individual-level data</h2>

<h3>Description</h3>

<p>This function creates summary-level riskset tables from individual-level data at each data-contributing site, under both the conventional inverse probability weights and the stabilized weights. A logistic regression model is used to estimate the propensity scores with an option to do weight truncation. This is a function for data-contributing sites.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createRisksetTable(
  data,
  indA,
  indX,
  indStatus,
  indTime,
  truncP = 1,
  shareEventTime = "no"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An individual-level dataset in the form of R data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indA</code></td>
<td>
<p>A column name indicating the exposure/treatment variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indX</code></td>
<td>
<p>A vector of column names indicating the baseline covariates to be included in the propensity score model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indStatus</code></td>
<td>
<p>A column name indicating the non-censoring status (1 if observed and 0 if censored).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indTime</code></td>
<td>
<p>A column name indicating the outcome variable, i.e., min(true event time, censoring time).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncP</code></td>
<td>
<p>A value between 0 and 1 indicating the percentile used for weight truncation. The default is 1, corresponding to no weight truncation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shareEventTime</code></td>
<td>
<p>If the data-contributing site would like to share a column of event times, then set <code>shareEventTime="yes"</code>. If not, then set <code>shareEventTime="no"</code>. By default,  <code>shareEventTime="no"</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of two summary-level riskset tables to be shared with the analysis center, under both the conventional inverse probability weights (i.e., $ipwTable) and the stabilized weights (i.e., $stabTable). If <code>shareEventTime="no"</code>, then a riskset table has 8 columns: total weights of exposed cases or events, total weights of cases or events, total weights of exposed individuals, total weights of unexposed individuals, total squared weights of exposed cases or events, total squared weights of unexposed cases or events, total squared weights of exposed individuals, total squared weights of unexposed individuals. If <code>shareEventTime="yes"</code>, then a riskset table further has a column of event times.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#load an example dataset site1.RData in the package
#site1 contains individual-level data of data-contributing site 1
data(site1)
#data-contributing site 1 creates its two summary-level riskset tables
#with logistic propensity score model A~X1+X2+X3+X4+X5
#no weight truncation
#agree to share a column of event times
rsTb1=createRisksetTable(data=site1,indA="A",indX=c("X1","X2","X3","X4","X5"),
                        indStatus="status",indTime="time",truncP=1,shareEventTime="yes")
#print the first six rows of riskset table using conventional weights
head(rsTb1$ipwTable)
#print the first six rows of riskset table using stabilized weights
head(rsTb1$stabTable)

</code></pre>


</div>
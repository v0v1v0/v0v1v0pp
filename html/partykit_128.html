<div class="container">

<table style="width: 100%;"><tr>
<td>varimp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Variable Importance </h2>

<h3>Description</h3>

<p>Standard and conditional variable importance for ‘cforest’, following the permutation
principle of the ‘mean decrease in accuracy’ importance in ‘randomForest’.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'constparty'
varimp(object, nperm = 1L, 
       risk = c("loglik", "misclassification"), conditions = NULL,
       mincriterion = 0, ...)
## S3 method for class 'cforest'
varimp(object, nperm = 1L, 
       OOB = TRUE, risk = c("loglik", "misclassification"),
       conditional = FALSE, threshold = .2, applyfun = NULL, 
       cores = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p> an object as returned by <code>cforest</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mincriterion</code></td>
<td>
<p> the value of the test statistic or 1 - p-value that
must be exceeded in order to include a split in the 
computation of the importance. The default <code>mincriterion = 0</code>
guarantees that all splits are included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditional</code></td>
<td>
<p> a logical determining whether unconditional or conditional 
computation of the importance is performed. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p> the value of the test statistic or 1 - p-value of the association 
between the variable of interest and a covariate that must be 
exceeded inorder to include the covariate in the conditioning 
scheme for the variable of interest (only relevant if 
<code>conditional = TRUE</code>). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nperm</code></td>
<td>
<p> the number of permutations performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OOB</code></td>
<td>
<p> a logical determining whether the importance is computed from the out-of-bag 
sample or the learning sample (not suggested).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>risk</code></td>
<td>
<p> a character determining the risk to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditions</code></td>
<td>
<p> a list of conditions. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>applyfun</code></td>
<td>
<p>an optional <code>lapply</code>-style function with arguments
<code>function(X, FUN, ...)</code>. It is used for computing the variable importances for each tree. 
The default is to use the basic <code>lapply</code>
function unless the <code>cores</code> argument is specified (see below).
Extra care is needed to ensure correct seeds are used in
the parallel runs (<code>RNGkind("L'Ecuyer-CMRG")</code> for
example).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>numeric. If set to an integer the <code>applyfun</code> is set to
<code>mclapply</code> with the desired number of <code>cores</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments, not used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>NEEDS UPDATE
</p>
<p>Function <code>varimp</code> can be used to compute variable importance measures
similar to those computed by <code>importance</code>. Besides the
standard version, a conditional version is available, that adjusts for correlations between
predictor variables. 
</p>
<p>If <code>conditional = TRUE</code>, the importance of each variable is computed by permuting 
within a grid defined by the covariates that are associated  (with 1 - p-value 
greater than <code>threshold</code>) to the variable of interest.
The resulting variable importance score is conditional in the sense of beta coefficients in   
regression models, but represents the effect of a variable in both main effects and interactions.
See Strobl et al. (2008) for details.
</p>
<p>Note, however, that all random forest results are subject to random variation. Thus, before
interpreting the importance ranking, check whether the same ranking is achieved with a
different random seed – or otherwise increase the number of trees <code>ntree</code> in 
<code>ctree_control</code>.
</p>
<p>Note that in the presence of missings in the predictor variables the procedure
described in Hapfelmeier et al. (2012) is performed.
</p>


<h3>Value</h3>

<p>A vector of ‘mean decrease in accuracy’ importance scores.
</p>


<h3>References</h3>

 
<p>Leo Breiman (2001). Random Forests. <em>Machine Learning</em>, 45(1), 5–32.
</p>
<p>Alexander Hapfelmeier, Torsten Hothorn, Kurt Ulm, and Carolin Strobl (2014).
A New Variable Importance Measure for Random Forests with Missing Data.
<em>Statistics and Computing</em>, <b>24</b>(1), 21-34. 
<a href="https://doi.org/10.1007/s11222-012-9349-1">doi:10.1007/s11222-012-9349-1</a>
</p>
<p>Torsten Hothorn, Kurt Hornik, and Achim Zeileis (2006b). Unbiased
Recursive Partitioning: A Conditional Inference Framework.
<em>Journal of Computational and Graphical Statistics</em>, <b>15</b>(3),
651-674. <a href="https://doi.org/10.1198/106186006X133933">doi:10.1198/106186006X133933</a>
</p>
<p>Carolin Strobl, Anne-Laure Boulesteix, Thomas Kneib, Thomas Augustin, and Achim Zeileis (2008).
Conditional Variable Importance for Random Forests. <em>BMC Bioinformatics</em>, <b>9</b>, 307. 
<a href="https://doi.org/10.1186/1471-2105-8-25">doi:10.1186/1471-2105-8-25</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">    
   set.seed(290875)
   data("readingSkills", package = "party")
   readingSkills.cf &lt;- cforest(score ~ ., data = readingSkills, 
                               mtry = 2, ntree = 50)

   # standard importance
   varimp(readingSkills.cf)

   # conditional importance, may take a while...
   varimp(readingSkills.cf, conditional = TRUE)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>importGSHHS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Import Data from a GSHHS Database</h2>

<h3>Description</h3>

<p>Import data from a GSHHS database and convert data into a <code>PolySet</code>
with a <code>PolyData</code> attribute. 
The database was originally called ‘Global Self-consistent, Hierarchical, High-resolution Shoreline’
(GSHHS, Wessel and Smith 1996), but ‘Shoreline’ was subsequently expanded to include more ‘Geography’ (GSHHG).
</p>


<h3>Usage</h3>

<pre><code class="language-R">importGSHHS(gshhsDB, xlim, ylim, maxLevel=4, n=0, useWest=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gshhsDB</code></td>
<td>
<p><code>character</code> – path name to binary GSHHS database. If unspecified,
looks for <code>gshhs_f.b</code> in the root of the <span class="pkg">PBSmapping</span> library
directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p><code>numeric</code> – range of X-coordinates (for clipping).
The range should be between 0 and 360, starting at the Greenwich meridian and wrapping eastward around the globe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p><code>numeric</code> – range of Y-coordinates (for clipping).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxLevel</code></td>
<td>
<p><code>numeric</code> – maximum level of polygons to import:
1 (land), 2 (lakes on land), 3 (islands in lakes), or 4 (ponds on
islands); ignored when importing lines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p><code>numeric</code> – minimum number of vertices that must exist in a line/polygon
in order for it to be imported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useWest</code></td>
<td>
<p><code>logical</code> – if <code>TRUE</code>, convert the X-coordinates (longitude)
to <code class="reqn">^\circ</code>W (western hemisphere -180 to 0, i.e., west of the Greenwich meridian).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This routine requires a binary GSHHG (Global Self-consistent, Hierarchical,
High-resolution Geography) database file. 
The GSHHG database has been released in the public domain.<br>
(www.soest.hawaii.edu/pwessel/gshhg)<br>
At the time of writing, the most recent binary database was the archive
file called <code>gshhg-bin-2.3.7.zip</code>.
</p>
<p>The archive contains multiple binary files that contain geographical
coordinates for shorelines (<code>gshhs</code>), rivers (<code>wdb_rivers</code>), and
borders (<code>wdb_borders</code>).
The latter two come from <a href="https://meta.wikimedia.org/wiki/Geographical_data#CIA_World_DataBank_II_and_derivates">World DataBank II</a> (WDBII).
The five resolutions available are:
full (<code>f</code>), high (<code>h</code>), intermediate (<code>i</code>), low (<code>l</code>), and coarse (<code>c</code>).
</p>
<p>This routine returns a <code>PolySet</code> object with an associated
<code>PolyData</code> attribute. The attribute contains four fields: (a) <code>PID</code>,
(b) <code>SID</code>, (c) <code>Level</code>, and (d) <code>Source</code>.
Each record corresponds to a line/polygon in the <code>PolySet</code>.  The
<code>Level</code> indicates the line's/polygon's level (1=land, 2=lake,
3=island, 4=pond). The <code>Source</code> identifies the data source
(1=WVS, 0=CIA (WDBII)).
</p>


<h3>Value</h3>

<p>A <code>PolySet</code> with a <code>PolyData</code> attribute.
</p>


<h3>Note</h3>

<p>The function calls a C routine, also called <code>importGSHHS</code>, which returns
a set of map coordinates that is not always predictably laid out. 
This issue stems from how the world is divided at the Greenwich meridian and
at the International Date Line. 
The unpredictability occurs when user-specified X-limits span either of the 
longitudinal meridians – (0<code class="reqn">^\circ</code>, 360<code class="reqn">^\circ</code>) or 
(-180<code class="reqn">^\circ</code>, 180<code class="reqn">^\circ</code>).
</p>
<p>This version of the R function attempts to stitch together the overlapping 
edges of <code>gshhs</code> that run from -20<code class="reqn">^\circ</code> to 
360<code class="reqn">^\circ</code> (see example map 5 below). 
At present, no attempt has been made to deal with the overlap 
at the International Date Line where Russia overlaps the Aleutian Islands of
Alaska. To some extent, the C-code can deal with this, but not in all cases.
</p>
<p>Therefore, the user will likely experience some limitations when using 
<code>importGSHHS</code>.
The solution is to import the whole dataset with this function using
<code>xlim=c(0,360)</code>, and then apply the function <code>refocusWorld</code>
with user-desired X-limits. 
The Y-limits are generally not problematic unless the user wants to focus on
either pole.
</p>


<h3>Author(s)</h3>

<p><a href="https://github.com/boersn/">Nicholas M. Boers</a>, Senior Software Engineer<br>
Jobber, Edmonton AB
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head – Offshore Rockfish<br>
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br><em>locus opus</em>: Offsite, Vancouver BC<br>
Last modified <code>Rd: 2024-09-25</code>
</p>


<h3>References</h3>

<p>Wessel, P., and Smith, W.H.F. (1996)
A Global Self-consistent, Hierarchical, High-resolution Shoreline Database.
<em>J. Geophys. Res.</em> <b>101</b> 8741-8743.<br>
(www.soest.hawaii.edu/pwessel/gshhg/Wessel+Smith_1996_JGR.pdf)
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmapping</span>:<br><code>importEvents</code>,
<code>importLocs</code>, 
<code>importPolys</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
useWest=FALSE
useVers=c("2.2.0","2.2.3","2.3.0","2.3.4") # GSHHG versions
mapswitch = 5
for (i in c("land","rivers","borders"))
  if (exists(i)) eval(parse(text=paste0("rm(",i,")")))
switch( mapswitch,
 # 1. Canada------------------------------------------------
      {vN=4; useWest=T; xlim=c(-150,-50)+360;ylim=c(40,75)},
 # 2. NW Canada &amp; America-----------------------------------
      {vN=4; useWest=T;xlim=c(-136,-100)+360;ylim=c(40,75)},
 # 3. Black Sea (user Ivailo)-------------------------------
      {vN=4; xlim=c(27.5, 34.3); ylim=c(40.9, 46.7)},
 # 4. W Europe, NW Africa (user Uli)------------------------
      {vN=4; xlim=c(-20,10); ylim=c(20,50)},
 # 5. W Europe + Iceland------------------------------------
      {vN=4; xlim=c(-25, 20); ylim=c(40, 68)},
 # 6. New Zealand-------------------------------------------
      {vN=4; xlim=c(163, 182); ylim=c(-48,-34)},
 # 7. Australia---------------------------------------------
      {vN=4; xlim=c(112,155); ylim=c(-44,-10)},
 # 8. Japan-------------------------------------------------
      {vN=4; xlim=c(127,148); ylim=c(30,47)},
 # 9. Central America---------------------------------------
      {vN=4; useWest=T; xlim=c(-95,-60)+360;ylim=c(-10,25)},
 #10. North Pacific-----------------------------------------
      {vN=4; useWest=T; xlim=c(150,220); ylim=c(45,80)},
 #11. Pacific Ocean-----------------------------------------
      {vN=4; xlim=c(112,240); ylim=c(-48,80)},
 #12. North Atlantic (world coordinates)--------------------
      {vN=4; xlim=c(285,360); ylim=c(40,68)},
 #13. North Atlantic (western hemisphere coordinates)-------
      {vN=4; xlim=c(-75,0); ylim=c(40,68)},
 #14. Atlantic Ocean----------------------------------------
      {vN=4; xlim=c(285,380); ylim=c(-50,68)},
 #15. Northern hemisphere-----------------------------------
      {vN=4; xlim=c(-180,180); ylim=c(0,85)},
 #16. Asia--------------------------------------------------
      {vN=4; xlim=c(0,180); ylim=c(0,80)},
 #17. North America-----------------------------------------
      {vN=4; xlim=c(-180,0); ylim=c(0,80)},
 #18. International date line-------------------------------
      {vN=4; xlim=c(45,315); ylim=c(0,80)},
 #19. Indian Ocean------------------------------------------
      {vN=4; xlim=c(20,130); ylim=c(-40,40)},
 #20. Moose County ("400 miles north of everywhere")--------
      {vN=4; xlim=c(272.5,280.5); ylim=c(43,47.5)}
)
db=paste0("gshhg-bin-",useVers[vN])        # database version folder
gshhg   = paste0("C:/Ruser/GSHHG/",db,"/") # directory with binary files
land    = importGSHHS(paste0(gshhg,"gshhs_i.b"),
          xlim=xlim,ylim=ylim,maxLevel=4,useWest=useWest)
rivers  = importGSHHS(paste0(gshhg,"wdb_rivers_i.b"),
          xlim=xlim,ylim=ylim,useWest=useWest)
borders = importGSHHS(paste0(gshhg,"wdb_borders_i.b"),
          xlim=xlim,ylim=ylim,useWest=useWest,maxLevel=1)
if(exists("land")){
  plotMap(land,xlim=xlim-ifelse(useWest,360,0),ylim=ylim,
    col="lemonchiffon",bg="aliceblue")
  if(!is.null(rivers)) addLines(rivers,col="blue")
  if(!is.null(borders)) addLines(borders,col="red",lwd=2)
}

## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>GeomCalendar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Specialised tile geometry for calendar plots</h2>

<h3>Description</h3>

<p>This geom behaves mostly the same as <code>ggplot2::geom_tile()</code> with a few
additions. Firstly, the <code>label</code> aesthetic is supported to draw text on top of
the tiles. Secondly, out of bounds values can be drawn as arrows at the edge
of the scale (see details below).
</p>


<h3>Usage</h3>

<pre><code class="language-R">geom_calendar(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  ...,
  linejoin = "mitre",
  label_params = list(colour = "grey30"),
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mapping, data, stat, position, linejoin, na.rm, show.legend, inherit.aes, ...</code></td>
<td>
<p>see <code>ggplot2::geom_tile()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_params</code></td>
<td>
<p>additional parameters for text labels if present
(see <code>ggplot2::geom_text()</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Any <code>x</code> values that are infinite (i.e. <code>-Inf</code> or <code>Inf</code>) would normally be
dropped by ggplot's layers. If any such values survive the stat processing,
they will be drawn by <code>geom_calendar()</code> as triangles at the respective edges
of the scale. This is intended to work with a scale configured to use
<code>oob_infinite()</code> for out of bounds handling.
The triangles are drawn with their base (vertical edge) sitting on the scale
limit, and their width equal to half of the median bin width.
</p>
<p>Note that the <code>label</code> aesthetic will be dropped if the data are not grouped
in the expected way. In general this means that all rows contributing to a
given bin must have the same value for the <code>label</code> aesthetic.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)

set.seed(1)
events &lt;- rep(as.Date("2024-01-31") - 0:30, rpois(31, 6))
values &lt;- round(rgamma(length(events), 1, 0.01))
df &lt;- data.frame(date = events, value = values)

ggplot(df) +
    geom_calendar(
        aes(date, value, label = after_stat(count)),
        colour = "white",
        stat = "week_2d",
        week_start = "Monday",
        bins.y = 10
    ) +
    scale_x_week(
        limits = as.Date(c("2024-01-08", NA)),
        expand = expansion(add = 3.5)
    )
</code></pre>


</div>
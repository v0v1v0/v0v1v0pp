<div class="container">

<table style="width: 100%;"><tr>
<td>gpe</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Derive a General Prediction Ensemble (gpe)</h2>

<h3>Description</h3>

<p>Provides an interface for deriving sparse prediction ensembles where basis functions are selected through L1 penalization.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gpe(
  formula,
  data,
  base_learners = list(gpe_trees(), gpe_linear()),
  weights = rep(1, times = nrow(data)),
  sample_func = gpe_sample(),
  verbose = FALSE,
  penalized_trainer = gpe_cv.glmnet(),
  model = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Symbolic description of the model to be fit of the form 
<code>y ~ x1 + x2 + ...+ xn</code>. If the output variable (left-hand side of the 
formula) is a factor, an ensemble for binary classification is created. 
Otherwise, an ensemble for prediction of a continuous variable is created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><code>data.frame</code> containing the variables in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_learners</code></td>
<td>
<p>List of functions which has formal arguments 
<code>formula</code>, <code>data</code>, <code>weights</code>, <code>sample_func</code>, <code>verbose</code>,
and <code>family</code> and returns a vector of characters with terms for the 
final formula passed to <code>cv.glmnet</code>. See <code>gpe_linear</code>, 
<code>gpe_trees</code>, and <code>gpe_earth</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Case weights with length equal to number of rows in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_func</code></td>
<td>
<p>Function used to sample when learning with base learners. 
The function should have formal argument <code>n</code> and <code>weights</code> and 
return a vector of indices. See <code>gpe_sample</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>TRUE</code> if comments should be posted throughout the 
computations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalized_trainer</code></td>
<td>
<p>Function with formal arguments <code>x</code>, <code>y</code>, 
<code>weights</code>, <code>family</code> which returns a fit object. This can be changed 
to test other "penalized trainers" (like other function that perform an L1 
penalty or L2 penalty and elastic net penalty). Not using 
<code>cv.glmnet</code> may cause other function for <code>gpe</code> objects to 
fail. See <code>gpe_cv.glmnet</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p><code>TRUE</code> if the <code>data</code> should added to the returned object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Provides a more general framework for making a sparse prediction ensemble than 
<code>pre</code>. 
</p>
<p>By default, a similar fit to <code>pre</code> is obtained. In addition, 
multivariate adaptive regression splines (Friedman, 1991) can be included
with <code>gpe_earth</code>. See examples. 
</p>
<p>Other customs base learners can be implemented. See <code>gpe_trees</code>, 
<code>gpe_linear</code> or <code>gpe_earth</code> for details of the setup. 
The sampling function given by <code>sample_func</code> can also be replaced by a 
custom sampling function. See <code>gpe_sample</code> for details of the setup.
</p>


<h3>Value</h3>

<p>An object of class <code>gpe</code>.
</p>


<h3>References</h3>

<p>Friedman, J. H., &amp; Popescu, B. E. (2008). Predictive learning via rule 
ensembles. <em>The Annals of Applied Statistics, 2</em>(3), 916-954.
Friedman, J. H. (1991). Multivariate adaptive regression splines. 
<em>The Annals of Statistics, 19</em>(1), 1-67.
</p>


<h3>See Also</h3>

<p><code>pre</code>, <code>gpe_trees</code>, 
<code>gpe_linear</code>, <code>gpe_earth</code>, 
<code>gpe_sample</code>, <code>gpe_cv.glmnet</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## Obtain similar fit to function pre:
gpe.rules &lt;- gpe(Ozone ~ ., data = airquality[complete.cases(airquality),], 
  base_learners = list(gpe_linear(), gpe_trees()))
gpe.rules
  
## Also include products of hinge functions using MARS:
gpe.hinge &lt;- gpe(Ozone ~ ., data = airquality[complete.cases(airquality),], 
  base_learners = list(gpe_linear(), gpe_trees(), gpe_earth()))

## End(Not run)
</code></pre>


</div>
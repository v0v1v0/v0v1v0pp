<div class="container">

<table style="width: 100%;"><tr>
<td>setPackageExtraHandler</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Install/Run Extra Things After Standard Package Installation</h2>

<h3>Description</h3>

<p>These functions define a framework to register actions for which default sets of arguments
can be defined when (lazy-)loading a package, and run later on, e.g., after the package
is installed using dedicated commands.
</p>
<p><code>setPackageExtraHandler</code> defines main action handler functions, for which
actions are defined as a set of arguments and registered using <code>setPackageExtra</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setPackageExtraHandler(handler, fun, ...)

packageExtraHandler(handler = NULL, ...)

setPackageExtra(handler, extra, ...)

packageExtra(handler = NULL, extra = NULL, package = NULL, .wrap = FALSE)

packageExtraRunner(handler)

install.extras(
  package,
  extra = NULL,
  handler = NULL,
  ...,
  .verbose = getOption("verbose")
)

install.extrapackages(
  package,
  extra = NULL,
  handler = NULL,
  ...,
  .verbose = getOption("verbose")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>handler</code></td>
<td>
<p>name of a handler, e.g, <code>'install'</code>.
It must be unique across all handlers registered by any other packages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>handler function that will be called with the arguments registered
with <code>packageExtra(name, ...)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments passed to internal function calls.
In <code>packageExtraHandler</code>, these are passed to <code>pkgreg_fetch</code>.
</p>
<p>In <code>setPackageExtra</code>, these define default arguments for the handler function.
These are overwritten by arguments in the call to runner function if any.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra</code></td>
<td>
<p>name of the extra action.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>package name where to store/look for the internal registries.
End users should not need to use this argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.wrap</code></td>
<td>
<p>logical that indicates if a function that runs the extra action should
be returned or only the default arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.verbose</code></td>
<td>
<p>logical that indicates if verbose messages about the extra actions being
run should be displayed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>the runner function associated with the newly registered handler,
as built by <code>packageExtraRunner</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>packageExtraHandler()</code>: retrieves a given handler from the registry.
</p>
</li>
<li> <p><code>setPackageExtra()</code>: registers extra actions for a given handler.
</p>
<p>For example, calling <code>setPackageExtra('install', pkgs='non_CRAN_pkg', repos='http://non-standard-repo')</code>
in a source file of package 'myPkg' registers the call
<code>install.packages('non_CRAN_pkg', repos='http://non-standard-repo', ...)</code>
in a registry internal to the package.
All calls to <code>setPackageExtra('install', ...)</code> can then be run by the user, as
a post installation step via <code>install.extrapackages('myPkg', ..)</code>.
</p>
</li>
<li> <p><code>packageExtra()</code>: retrieve a given extra action, either as its registry entry,
or as a function that would perform the given action.
</p>
</li>
<li> <p><code>packageExtraRunner()</code>: defines a function to run all or some of the actions registered
for a given handler in a given package.
For example, the function <code>install.extrapackages</code> is the runner defined for the extra handler <code>'install'</code>
via <code>packageExtraRunner('install')</code>.
</p>
</li>
<li> <p><code>install.extras()</code>: runs all extra actions registered for a given package.
</p>
</li>
<li> <p><code>install.extrapackages()</code>: install sets of packages that can enhance a
package, but may not be available from CRAN.
</p>
<p>It is defined as the extra handler for
the extra action handler <code>'install.packages'</code>.
All arguments in <code>...</code> are passed to <code>install.packages</code>.
By default, packages that are already installed are not re-installed.
An extra argument <code>force</code> allows to force their installation.
The packages are loaded if their installation is successful.
</p>
</li>
</ul>
</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>rast2comm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert raw input distribution data to community</h2>

<h3>Description</h3>

<p>The functions <code>points2comm</code>, <code>polys2comm</code>, <code>rast2comm</code>
provide convenient interfaces to convert raw distribution data often
available as point records, polygons and raster layers,
respectively, to a community composition data frame at varying spatial grains
and extents for downstream analyses.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rast2comm(files)

polys2comm(dat, res = 0.25, pol.grids = NULL, ...)

points2comm(dat, res = 0.25, pol.grids = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>files</code></td>
<td>
<p>list of SpatRaster layer objects with the same spatial
extent and resolution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>layers of merged maps corresponding to species polygons for
<code>polys2comm</code>; or point occurrence data frame for <code>points2comm</code>,
with at least three columns:
</p>

<ul>
<li>
<p> Column 1: <code>species</code> (listing the taxon names)
</p>
</li>
<li>
<p> Column 2: <code>decimallongitude</code> (corresponding to decimal longitude)
</p>
</li>
<li>
<p> Column 3: <code>decimallatitude</code> (corresponding to decimal latitude)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>the grain size of the grid cells in decimal degrees (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pol.grids</code></td>
<td>
<p>if specified, the vector polygon of grid cells
with a column labeled “grids”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Each of these functions generate a list of two objects as follows:
</p>

<ul>
<li>
<p> comm_dat: (sparse) community matrix
</p>
</li>
<li>
<p> map: vector or raster of grid cells with the values per cell for
mapping.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>mapproject</code> for conversion of
latitude and longitude into projected coordinates system.
<code>long2sparse</code> for conversion of community data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
fdir &lt;- system.file("NGAplants", package="phyloregion")
files &lt;- file.path(fdir, dir(fdir))
ras &lt;- rast2comm(files) # Note, this function generates
     # a list of two objects
head(ras[[1]])



require(terra)
s &lt;- vect(system.file("ex/nigeria.json", package="phyloregion"))
sp &lt;- random_species(100, species=5, pol=s)
pol &lt;- polys2comm(dat = sp)
head(pol[[1]])


library(terra)
s &lt;- vect(system.file("ex/nigeria.json", package="phyloregion"))
set.seed(1)
m &lt;- as.data.frame(spatSample(s, 1000, method = "random"),
                   geom = "XY")[-1]
names(m) &lt;- c("lon", "lat")
species &lt;- paste0("sp", sample(1:100))
m$taxon &lt;- sample(species, size = nrow(m), replace = TRUE)

pt &lt;- points2comm(dat = m, res = 0.5) # This generates a list of two objects
head(pt[[1]])
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>rep_n_stack</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Replicate and stack columns of a data frame
</h2>

<h3>Description</h3>

<p>Reshape a data frame by stacking two or more columns into one and adding a
factor, while replicating the remaining columns and stacking them to match
the number of rows
</p>


<h3>Usage</h3>

<pre><code class="language-R"> rep_n_stack(data,to.stack,stack.names=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to.stack</code></td>
<td>
<p>Which columns are to be stacked together (see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stack.names</code></td>
<td>
<p>Names for the new factor and stacked column.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>‘<span class="samp">⁠rep_n_stack⁠</span>’ takes two or more specified columns in a data frame and
"stacks" them into a single column. It also creates a new factor composed of
the replicated names of the columns that identifies from which column each
value came. The remaining columns in the data frame are replicated to match
the new number of rows.
</p>
<p>If ‘<span class="samp">⁠to.stack⁠</span>’ is a matrix of names or column numbers, ‘<span class="samp">⁠rep_n_stack⁠</span>’
will stack each row into two new columns, allowing multiple related sets of
values to be stacked in one operation. 
</p>
<p>A matrix or data frame of values can now be stacked so that the values can be
displayed by a function like ‘<span class="samp">⁠barNest⁠</span>’ in the <span class="pkg">plotrix</span> package.
</p>


<h3>Value</h3>

<p>The reshaped data frame.</p>


<h3>Note</h3>

<p>‘<span class="samp">⁠rep_n_stack⁠</span>’ only does what other reshaping functions can do, but may
be more easy to understand.
</p>


<h3>Author(s)</h3>

<p>Jim Lemon</p>


<h3>See Also</h3>

<p>reshape</p>


<h3>Examples</h3>

<pre><code class="language-R"> wide.data&lt;-data.frame(ID=1:10,Glup=sample(c("Montic","Subtic"),10,TRUE),
  Flimit1=runif(10,1,2),Flimit2=runif(10,1.5,2.5),Flimit3=runif(10,1.2,3),
  Glimit1=rnorm(10,mean=5),Glimit2=rnorm(10,mean=4),Glimit3=rnorm(10,mean=4.5))
 # first just stack one set of related measures
 rep_n_stack(wide.data[,1:5],to.stack=c("Flimit1","Flimit2","Flimit3"))
 # now stack two sets of related measures and pass names for the stacks
 rep_n_stack(wide.data,to.stack=matrix(3:8,nrow=2,byrow=TRUE),
  stack.names=c("Limit_F","Value_F","Limit_G","Value_G"))
 # finally stack a matrix of means into a single column with the
 # row and column names becoming "factor" variables
 meanmat&lt;-matrix(runif(16,10,20),nrow=4)
 rownames(meanmat)&lt;-c("Plunderers","Storers","Refusers","Jokers")
 colnames(meanmat)&lt;-c("Week1","Week2","Week3","Week4")
 rep_n_stack(meanmat,to.stack=1:4,
  stack.names=c("Returns","Occasion","Strategy"))
</code></pre>


</div>
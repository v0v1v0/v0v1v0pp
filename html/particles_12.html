<div class="container">

<table style="width: 100%;"><tr>
<td>evolve</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Move the simulation forward one or more steps</h2>

<h3>Description</h3>

<p>This is the function that move the simulation forward in time. It is possible
to either specify the number of steps that should be simulated or let the
simulation terminate as <code>alpha_min</code> is reached. Note that some values of
<code>alpha</code> and <code>alpha_target</code> does not allow alpha to converge to <code>alpha_min</code> so
letting the simulation self-terminate can result in an infinite loop. The
default settings will result in <code>alpha_min</code> being reached in 300 generations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">evolve(simulation, steps = NULL, on_generation = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>simulation</code></td>
<td>
<p>A simulation object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>steps</code></td>
<td>
<p>The number of generations to progress or a function getting the
simulation object and returns <code>TRUE</code> if the simulation should proceed and
<code>FALSE</code> if it should stop. If <code>NULL</code> the simulation will run until
<code>alpha_min</code> has been reached.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>on_generation</code></td>
<td>
<p>A function to be called after each generation has been
progressed. The function will get the current state of the simulation as the
first argument. If the function returns a simulation object it will replace
the current simulation from the next generation. In the case of any other
return type the return will be discarded and the function will have no effect
outside its side-effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to <code>on_generation</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Each generation in the simulation progress in the following manner:
</p>

<ol>
<li>
<p> Check whether the specified number of generations has been reached
</p>
</li>
<li>
<p> Check whether <code>alpha_min</code> has been reached
</p>
</li>
<li>
<p> If either 1. or 2. is true, terminate the simulation
</p>
</li>
<li>
<p> Apply the forces on the current particle positions and velocities in the
order they have been added
</p>
</li>
<li>
<p> Reduce the velocity according to the given <code>velocity_decay</code>
</p>
</li>
<li>
<p> Update the position and velocity based on any provided constraints
</p>
</li>
<li>
<p> Calculate the new particle positions based on the new velocity
</p>
</li>
<li>
<p> If given, call the <code>on_generation</code> function.
</p>
</li>
</ol>
<h3>Value</h3>

<p>A simulation object with updated positions and velocities
</p>


<h3>Examples</h3>

<pre><code class="language-R">graph &lt;- tidygraph::create_notable('folkman')
sim &lt;- graph |&gt;
  simulate() |&gt;
  wield(link_force) |&gt;
  wield(manybody_force)

# Take 5 steps and tell about it
sim |&gt; evolve(5, function(sim) {
  cat('Generation: ', evolutions(sim), '\n', sep = '')
})

# Run evolution until alpha_min is reached
sim |&gt; evolve(NULL)

</code></pre>


</div>
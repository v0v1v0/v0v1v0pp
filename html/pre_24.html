<div class="container">

<table style="width: 100%;"><tr>
<td>pairplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create partial dependence plot for a pair of predictor variables in a prediction 
rule ensemble (pre)</h2>

<h3>Description</h3>

<p><code>pairplot</code> creates a partial dependence plot to assess the effects of a
pair of predictor variables on the predictions of the ensemble. Note that plotting 
partial dependence is computationally intensive. Computation time will increase 
fast with increasing numbers of observations and variables. For large 
datasets, package 'plotmo' (Milborrow, 2019) provides more efficient functions 
for plotting partial dependence and also supports 'pre' models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pairplot(
  object,
  varnames,
  type = "both",
  gamma = NULL,
  penalty.par.val = "lambda.1se",
  response = NULL,
  nvals = c(20L, 20L),
  pred.type = "response",
  newdata = NULL,
  xlab = NULL,
  ylab = NULL,
  main = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class <code>pre</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varnames</code></td>
<td>
<p>character vector of length two. Currently, pairplots can only
be requested for non-nominal variables. If varnames specifies the name(s) of
variables of class <code>"factor"</code>, an error will be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character string. Type of plot to be generated. 
<code>type = "heatmap"</code> yields a heatmap plot, <code>type = "contour"</code> yields 
a contour plot, <code>type = "both"</code> yields a heatmap plot with added contours,
<code>type = "perspective"</code> yields a three dimensional plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>Mixing parameter for relaxed fits. See
<code>coef.cv.glmnet</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty.par.val</code></td>
<td>
<p>character or numeric. Value of the penalty parameter
<code class="reqn">\lambda</code> to be employed for selecting the final ensemble. The default
<code>"lambda.min"</code> employs the <code class="reqn">\lambda</code> value within 1 standard
error of the minimum cross-validated error. Alternatively, 
<code>"lambda.min"</code> may be specified, to employ the <code class="reqn">\lambda</code> value
with minimum cross-validated error, or a numeric value <code class="reqn">&gt;0</code> may be 
specified, with higher values yielding a sparser ensemble. To evaluate the 
trade-off between accuracy and sparsity of the final ensemble, inspect
<code>pre_object$glmnet.fit</code> and <code>plot(pre_object$glmnet.fit)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>numeric vector of length 1. Only relevant for multivariate gaussian 
and multinomial responses. If <code>NULL</code> (default), PDPs for all response 
variables or categories will be produced. A single integer can be specified, 
indicating for which response variable or category PDPs should be produced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nvals</code></td>
<td>
<p>optional numeric vector of length 2. For how many values of
x1 and x2 should partial dependence be plotted? If <code>NULL</code>, a grid of all possible
combinations of the observed values of the two predictor variables specified will be used 
(see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred.type</code></td>
<td>
<p>character string. Type of prediction to be plotted on z-axis.
<code>pred.type = "response"</code> gives fitted values for continuous outputs and
fitted probabilities for nominal outputs. <code>pred.type = "link"</code> gives fitted
values for continuous outputs and linear predictor values for nominal outputs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>Optional <code>data.frame</code> in which to look for variables 
with which to predict. If <code>NULL</code>, the <code>data.frame</code> used to fit the 
original ensemble will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>character. Label to be printed on the x-axis. If <code>NULL</code>,
the first elements of the supplied <code>varnames</code> will be printed on the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>character. Label to be printed on the y-axis. If <code>NULL</code>,
the second element of the supplied <code>varnames</code> will be printed on the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Title for the plot. If <code>NULL</code>, the name of the response
will be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to <code>image</code>, 
<code>contour</code> or <code>persp</code> (depending on
whether <code>type</code> is specified to be <code>"heatmap"</code>, <code>"contour"</code>, <code>"both"</code> 
or <code>"perspective"</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Partial dependence functions are described in section 8.1 of Friedman &amp; 
Popescu (2008).
</p>
<p>By default, partial dependence will be plotted for each combination
of 20 values of the specified predictor variables. When <code>nvals = NULL</code> is
specified, a dependence plot will be created for every combination of the unique
observed values of the two specified predictor variables. If <code>NA</code> instead of
a numeric value is specified for one of the predictor variables, all observed
values for that variables will be used. Specifying <code>nvals = NULL</code> and 
<code>nvals = c(NA, NA)</code> will yield the exact same result.
</p>
<p>High values, <code>NA</code> or <code>NULL</code> for <code>nvals</code> result in long 
computation times and possibly memory problems. Also, <code>pre</code> 
ensembles derived from training datasets that are very wide or long may 
result in long computation times and/or memory allocation errors. 
In such cases, reducing
the values supplied to <code>nvals</code> will reduce computation time and/or
memory allocation errors. 
</p>
<p>When numeric value(s) are specified for <code>nvals</code>, values for the
minimum, maximum, and nvals - 2 intermediate values of the predictor variable
will be plotted. 
</p>
<p>Alternatively, <code>newdata</code> can be specified to provide a different (smaller) 
set of observations to compute partial dependence over.
If <code>mi_pre</code> was used to derive the original rule ensemble, 
<code>newdata = "mean.mi"</code> can be specified. This 
will result in an average dataset being computed over the imputed datasets, 
which are then used to compute partial dependence functions. This greatly 
reduces the number of observations and thereby computation time.
</p>
<p>If none of the variables specified with argument <code>varnames</code> was
selected for the final prediction rule ensemble, an error will be returned.
</p>


<h3>References</h3>

<p>Friedman, J. H., &amp; Popescu, B. E. (2008). Predictive learning 
via rule ensembles. <em>The Annals of Applied Statistics, 2</em>(3), 916-954.
</p>
<p>Milborrow, S. (2019). plotmo: Plot a model's residuals, response, and partial 
dependence plots. <a href="https://CRAN.R-project.org/package=plotmo">https://CRAN.R-project.org/package=plotmo</a>
</p>


<h3>See Also</h3>

<p><code>pre</code>, <code>singleplot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">airq &lt;- airquality[complete.cases(airquality),]
set.seed(42)
airq.ens &lt;- pre(Ozone ~ ., data = airq)
pairplot(airq.ens, c("Temp", "Wind"))

## For multinomial and mgaussian families, one PDP is created per category or outcome
set.seed(42)
airq.ens3 &lt;- pre(Ozone + Wind ~ ., data = airq, family = "mgaussian")
pairplot(airq.ens3, varnames = c("Day", "Month"))

set.seed(42)
iris.ens &lt;- pre(Species ~ ., data = iris, family = "multinomial")
pairplot(iris.ens, varname = c("Petal.Width", "Petal.Length"))
</code></pre>


</div>
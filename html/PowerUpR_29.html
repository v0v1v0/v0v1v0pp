<div class="container">

<table style="width: 100%;"><tr>
<td>bcra3r2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Three-Level Blocked Cluster-level Random Assignment Design, Treatment at Level 2</h2>

<h3>Description</h3>

<p>For three-level cluster-randomized block designs (treatment at level 2, with random effects across level 3 blocks), use <code>mdes.bcra3r2()</code> to calculate the minimum detectable effect size, <code>power.bcra3r2()</code> to calculate the statistical power, and <code>mrss.bcra3r2()</code> to calculate the minimum required sample size.
</p>
<p>For partially nested blocked cluster randomized trials (interventions clusters in treatment groups) use <code>mdes.bcra3r2_pn()</code> to calculate the minimum detectable effect size, <code>power.bcra3r2_pn()</code> to calculate the statistical power, and <code>mrss.bcra3r2_pn()</code> to calculate the minimum required sample size (number of blocks).
</p>


<h3>Usage</h3>

<pre><code class="language-R">mdes.bcra3r2(power=.80, alpha=.05, two.tailed=TRUE,
             rho2, rho3, esv3=NULL, omega3=esv3/rho3,
             p=.50, g3=0, r21=0, r22=0, r2t3=0,
             n, J, K)

power.bcra3r2(es=.25, alpha=.05, two.tailed=TRUE,
              rho2, rho3, esv3=NULL, omega3=esv3/rho3,
              p=.50, g3=0, r21=0, r22=0, r2t3=0,
              n, J, K)

mrss.bcra3r2(es=.25, power=.80, alpha=.05, two.tailed=TRUE,
             n, J, K0=10, tol=.10,
             rho2, rho3, esv3=NULL, omega3=esv3/rho3,
             p=.50, g3=0, r21=0, r22=0, r2t3=0)

mdes.bcra3r2_pn(power=.80, alpha=.05, two.tailed=TRUE, df=NULL,
                rho3_trt=.10, omega3=.50, rho2_trt=.20, rho_ic=0,
                p=.50, r21=0, g3=0, n, J, K, ic_size=1)

power.bcra3r2_pn(es=.25,alpha=.05, two.tailed=TRUE, df=NULL,
                 rho3_trt=.10, omega3=.50, rho2_trt=.20, rho_ic=0,
                 p=.50, r21=0, g3=0, n, J, K, ic_size=1)

mrss.bcra3r2_pn(es=.25, power=.80, alpha=.05, two.tailed=TRUE, z.test=FALSE,
                rho3_trt=.10, omega3 = .50, rho2_trt=.20, rho_ic=0,
                p=.50, r21=0, g3=0, n, J, ic_size=1, K0=10, tol=.10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>statistical power <code class="reqn">(1-\beta)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>es</code></td>
<td>
<p>effect size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>probability of type I error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>two.tailed</code></td>
<td>
<p>logical; <code>TRUE</code> for two-tailed hypothesis testing, <code>FALSE</code> for one-tailed hypothesis testing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>degrees of freedom.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho_ic</code></td>
<td>
<p>proportion of variance in the outcome that is between intervention clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho2_trt</code></td>
<td>
<p>proportion of variance in the outcome (for treatment group) that is between level 2 units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho3_trt</code></td>
<td>
<p>proportion of variance in the outcome (for treatment group) that is between level 3 units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho2</code></td>
<td>
<p>proportion of variance in the outcome between level 2 units (unconditional ICC2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho3</code></td>
<td>
<p>proportion of variance in the outcome between level 3 units (unconditional ICC3).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>esv3</code></td>
<td>
<p>effect size variability as the ratio of the treatment effect variance between level 3 units to the total variance in the outcome (level 1 + level 2 + level 3). <code>esv</code> also works. Ignored when <code>omega3</code> is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omega3</code></td>
<td>
<p>treatment effect heterogeneity as ratio of treatment effect variance among level 3 units to the residual variance at level 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>average proportion of level 2 units randomly assigned to treatment within level 3 units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g3</code></td>
<td>
<p>number of covariates at level 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r21</code></td>
<td>
<p>proportion of level 1 variance in the outcome explained by level 1 covariates (applies to all levels in partially nested designs).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r22</code></td>
<td>
<p>proportion of level 2 variance in the outcome explained by level 2 covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r2t3</code></td>
<td>
<p>proportion of treatment effect variance among level 3 units explained by level 3 covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ic_size</code></td>
<td>
<p>sample size for each intervention cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>harmonic mean of level 1 units across level 2 units (or simple average).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>J</code></td>
<td>
<p>harmonic mean of level 2 units across level 3 units (or simple average).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>number of level 3 units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K0</code></td>
<td>
<p>starting value for <code>K</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>tolerance to end iterative process for finding <code>K</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z.test</code></td>
<td>
<p>logical; <code>TRUE</code> for z-test.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>function name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parms</code></td>
<td>
<p>list of parameters used in power calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>degrees of freedom.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncp</code></td>
<td>
<p>noncentrality parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>statistical power <code class="reqn">(1-\beta)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mdes</code></td>
<td>
<p>minimum detectable effect size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>number of level 3 units.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Dong, N., &amp; Maynard, R. (2013). PowerUp!: A tool for calculating minimum detectable effect sizes and minimum required sample sizes for experimental and quasi-experimental design studies. <em>Journal of Research on Educational Effectiveness</em>, <em>6</em>(1), 24-67. doi: <a href="https://doi.org/10.1080/19345747.2012.673143">10.1080/19345747.2012.673143</a>
</p>
<p>Lohr, S., Schochet, P. Z., &amp; Sanders, E. (2014). Partially Nested Randomized Controlled Trials in Education Research: A Guide to Design and Analysis. NCER 2014-2000. National Center for Education Research. <a href="https://ies.ed.gov/ncer/pubs/20142000/pdf/20142000.pdf">https://ies.ed.gov/ncer/pubs/20142000/pdf/20142000.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># cross-checks
mdes.bcra3r2(rho3=.13, rho2=.10, omega3=.4,
             n=10, J=6, K=24)
power.bcra3r2(es = .246, rho3=.13, rho2=.10, omega3=.4,
              n=10, J=6, K=24)
mrss.bcra3r2(es = .246, rho3=.13, rho2=.10, omega3=.4,
             n=10, J=6)

# cross-checks
mdes.bcra3r2_pn(rho3_trt=.10, omega3=.50,
                rho2_trt=.15, rho_ic=.20,
                n=40, J=60, K=6, ic_size=10)
power.bcra3r2_pn(es=.399, rho3_trt=.10, omega3=.50,
                rho2_trt=.15, rho_ic=.20,
                n=40, J=60, K=6, ic_size=10)
mrss.bcra3r2_pn(es=.399, rho3_trt=.10, omega3=.50,
                 rho2_trt=.15, rho_ic=.20,
                 n=40, J=60, ic_size=10)
</code></pre>


</div>
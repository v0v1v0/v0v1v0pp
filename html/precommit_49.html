<div class="container">

<table style="width: 100%;"><tr>
<td>use_precommit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get started with pre-commit</h2>

<h3>Description</h3>

<p>This function sets up pre-commit for your git repo.
</p>


<h3>Usage</h3>

<pre><code class="language-R">use_precommit(
  config_source = getOption("precommit.config_source"),
  force = FALSE,
  legacy_hooks = "forbid",
  open = rstudioapi::isAvailable(),
  install_hooks = TRUE,
  ci = getOption("precommit.ci", "native"),
  autoupdate = install_hooks,
  root = here::here()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>config_source</code></td>
<td>
<p>Path or URL to a <code>.pre-commit-config.yaml</code>. This
config file will be hard-copied into <code>root</code>. If <code>NULL</code>, we check if
<code>root</code> is a package or project directory using
<code>rprojroot::find_package_root_file()</code>, and resort to an appropriate default
config. See section 'Copying an existing config file'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>Whether or not to overwrite an existing ci config file (only
relevant for <code>ci = "gha"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legacy_hooks</code></td>
<td>
<p>How to treat hooks already in the repo which are not
managed by pre-commit. "forbid", the default, will cause  <code>use_precommit()</code>
to fail if there are such hooks. "allow" will run these along with
pre-commit. "remove" will delete them.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>open</code></td>
<td>
<p>Whether or not to open <code>.pre-commit-config.yaml</code> after
it's been placed in your repo as well as
<a href="https://pre-commit.ci">pre-commit.ci</a> (if <code>ci = "native"</code>). The default is
<code>TRUE</code> when working in RStudio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>install_hooks</code></td>
<td>
<p>Whether to install environments for all available hooks.
If <code>FALSE</code>, environments are installed with first commit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>Specifies which continuous integration service to use. See
<code>vignette("ci", package = "precommit")</code> for details. Defaults to
<code>getOption("precommit.ci", "native")</code>, which is set to
<code>"native"</code> on package loading (if unset). <code>"native"</code> sets up
<a href="https://pre-commit.ci">pre-commit.ci</a>. Alternatively, <code>"gha"</code> can be used
to set up <a href="https://github.com/features/actions">GitHub Actions</a>. Set value
to <code>NA</code> if you don't want to use a continuous integration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autoupdate</code></td>
<td>
<p>Whether or not to run <code>autoupdate()</code> as part of this
function call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>root</code></td>
<td>
<p>The path to the root directory of your project.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>NULL</code> (invisibly). The function is called for its side effects.
</p>


<h3>When to call this function?</h3>


<ul>
<li>
<p> You want to add pre-commit support to a git repo which does not have a
<code>.pre-commit-config.yaml</code>. This involves adding
a pre-commit config file and making sure git will call the hooks before
the next commit.
</p>
</li>
<li>
<p> You cloned a repo that has a <code>.pre-commit-config.yaml</code> already. You need
to make sure git calls the hooks before the next commit.
</p>
</li>
</ul>
<h3>What does the function do?</h3>


<ul>
<li>
<p> Sets up a template <code>.pre-commit-config.yaml</code>.
</p>
</li>
<li>
<p> Autoupdates the template to make sure you get the latest versions of the
hooks.
</p>
</li>
<li>
<p> Installs the pre-commit script along with the hook environments with
<code style="white-space: pre;">⁠$ pre-commit install --install-hooks⁠</code>.
</p>
</li>
<li>
<p> Opens the config file if RStudio is running.
</p>
</li>
</ul>
<h3>Copying an existing config file</h3>

<p>You can use an existing <code>.pre-commit-config.yaml</code> file when initializing
pre-commit with <code>use_precommit()</code> using the argument <code>config_source</code> to
copy an existing config file into your repo. This argument defaults to the R
option <code>precommit.config_source</code>, so you may want to set this option in
your <code>.Rprofile</code> for convenience. Note that this is <strong>not</strong> equivalent to the
<code>--config</code> option in the CLI command <code style="white-space: pre;">⁠pre-commit install⁠</code> and similar,
which do <em>not</em> copy a config file into a project root (and allow to put it
under version control), but rather link it in some more or less transparent
way.
</p>


<h3>See Also</h3>

<p>Other helpers: 
<code>open_config()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
use_precommit()

## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>PiecewisePareto_Match_Layer_Losses</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Match a Tower of Expected Layers Losses</h2>

<h3>Description</h3>

<p>Matches the expected losses of a tower of reinsurance layers using a piecewise Pareto severity
</p>


<h3>Usage</h3>

<pre><code class="language-R">PiecewisePareto_Match_Layer_Losses(
  Attachment_Points,
  Expected_Layer_Losses,
  Unlimited_Layers = FALSE,
  Frequencies = NULL,
  FQ_at_lowest_AttPt = NULL,
  FQ_at_highest_AttPt = NULL,
  TotalLoss_Frequencies = NULL,
  minimize_ratios = TRUE,
  Use_unlimited_Layer_for_FQ = TRUE,
  truncation = NULL,
  truncation_type = "lp",
  dispersion = 1,
  tolerance = 1e-10,
  alpha_max = 100,
  merge_tolerance = 1e-06,
  RoL_tolerance = 1e-06
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Attachment_Points</code></td>
<td>
<p>Numeric vector. Vector containing the attachment points of consecutive layers in increasing order</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Expected_Layer_Losses</code></td>
<td>
<p>Numeric vector. Vector containing the expected losses of layers xs the attachment points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Unlimited_Layers</code></td>
<td>
<p>Logical. If <code>TRUE</code>, then <code>Expected_Layer_Losses[i]</code> contains the expected loss of <code>Inf</code> xs <code>Attachment_Points[i]</code>. If <code>FALSE</code> then <code>Expected_Layer_Losses[i]</code> contains the expected loss of the layer <code>Attachment_Points[i+1]</code> xs <code>Attachment_Points[i]</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Frequencies</code></td>
<td>
<p>Numeric vector. Expected frequencies excess the attachment points. The vector may contain NAs. If <code>NULL</code> then the function calculates frequencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FQ_at_lowest_AttPt</code></td>
<td>
<p>Numerical. Expected frequency excess <code>Attachment_Points[1]</code>. Overrules first entry in Frequencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FQ_at_highest_AttPt</code></td>
<td>
<p>Numerical. Expected frequency excess <code>Attachment_Points[k]</code>. Overrules last entry in Frequencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TotalLoss_Frequencies</code></td>
<td>
<p>Numeric vector. <code>TotalLoss_Frequencies[i]</code> is the frequency of total losses to layer <code>i</code> (i.e. <code>Attachment_Points[i+1] - Attachment_Points[i]</code> xs <code>Attachment_Points[i]</code>).    <code>TotalLoss_Frequencies[i]</code> is the frequency for losses larger than or equal to <code>Attachment_Points[i+1]</code>, whereas <code>Frequencies[i]</code> is the frequency of losses larger than <code>Attachment_Points[i]</code>.    <code>TotalLoss_Frequencies[i] &gt; Frequencies[i+1]</code> means that there is a point mass of the severity at <code>Attachment_Points[i+1]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minimize_ratios</code></td>
<td>
<p>Logical. If <code>TRUE</code> then ratios between alphas are minimized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Use_unlimited_Layer_for_FQ</code></td>
<td>
<p>Logical. Only relevant if no frequency is provided for the highest attachment point by the user. If <code>TRUE</code> then the frequency is calculated using the Pareto alpha between the last two layers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncation</code></td>
<td>
<p>Numeric. If <code>truncation</code> is not <code>NULL</code>, then the distribution is truncated at <code>truncation</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncation_type</code></td>
<td>
<p>Character. If <code>truncation_type = "wd"</code> then the whole distribution is truncated. If <code>truncation_type = "lp"</code> then a truncated Pareto is used for the last piece.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dispersion</code></td>
<td>
<p>Numerical. Dispersion of the claim count distribution in the resulting PPP_Model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tolerance</code></td>
<td>
<p>Numeric. Numerical tolerance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_max</code></td>
<td>
<p>Numerical. Maximum alpha to be used for the matching.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge_tolerance</code></td>
<td>
<p>Numerical. Consecutive Pareto pieces are merged if the alphas deviate by less than merge_tolerance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RoL_tolerance</code></td>
<td>
<p>Numerical. Consecutive layers are merged if RoL decreases less than factor <code>1 - RoL_tolerance</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A PPP_Model object that contains the information about a collective model with a Panjer distributed claim count and a Piecewise Pareto distributed severity. The object contains the following elements: </p>

<ul>
<li> <p><code>FQ</code> Numerical. Frequency in excess of the lowest threshold of the piecewise Pareto distribution
</p>
</li>
<li> <p><code>t</code> Numeric vector. Vector containing the thresholds for the piecewise Pareto distribution
</p>
</li>
<li> <p><code>alpha</code> Numeric vector. Vector containing the Pareto alphas of the piecewise Pareto distribution
</p>
</li>
<li> <p><code>truncation</code> Numerical. If <code>truncation</code> is not <code>NULL</code> and <code>truncation &gt; max(t)</code>, then the distribution is truncated at <code>truncation</code>.
</p>
</li>
<li> <p><code>truncation_type</code> Character. If <code>truncation_type = "wd"</code> then the whole distribution is truncated. If <code>truncation_type = "lp"</code> then a truncated Pareto is used for the last piece.
</p>
</li>
<li> <p><code>dispersion</code> Numerical. Dispersion of the Panjer distribution (i.e. variance to mean ratio).
</p>
</li>
<li> <p><code>Status</code> Numerical indicator: 0 = success, 1 = some information has been ignored, 2 = no solution found
</p>
</li>
<li> <p><code>Comment</code> Character. Information on whether the fit was successful
</p>
</li>
</ul>
<h3>References</h3>

<p>Riegel, U. (2018) Matching tower information with piecewise Pareto. European Actuarial Journal 8(2): 437â€“460
</p>


<h3>Examples</h3>

<pre><code class="language-R">AP &lt;- Example1_AP
EL &lt;- Example1_EL
PiecewisePareto_Match_Layer_Losses(AP, EL)
EL_unlimited &lt;- rev(cumsum(rev(Example1_EL)))
PiecewisePareto_Match_Layer_Losses(AP, EL_unlimited, Unlimited_Layers = TRUE)
PiecewisePareto_Match_Layer_Losses(AP, EL, FQ_at_lowest_AttPt = 0.5)
Example1_FQ &lt;- c(0.3, 0.15, 0.08, 0.02, 0.005)
PiecewisePareto_Match_Layer_Losses(AP, EL, Frequencies = Example1_FQ)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>autoaxis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Auto Axis Tool</h2>

<h3>Description</h3>

<p>Overlay base plot with a new axis and optional gridlines. The axis spacing can
be manually specified or automatically generated, including for date and time
axis. A default grid is drawn if called with just the <code>side</code> specified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">autoaxis(
  side,
  major = NA,
  major_grid = FALSE,
  minor = NA,
  minor_grid = FALSE,
  format = "auto",
  spacing = TRUE,
  tck = -0.03,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>side</code></td>
<td>
<p>Side to add axis, 1 = bottom, 2 = left, 3 = top, 4 = right. If
only this argument is given, a default dense grid is drawn. If
this argument is given as a character, a date-time grid will be
attempted, for example <code>side='1'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>major</code></td>
<td>
<p>Spacing of major axis ticks and labels (or approx. number of
intervals if <code>spacing = FALSE</code>). If the axis is date or time,
use a interval specified in <code>?seq.POSIXt</code>, such as 'sec' or
'week', or character value for spacing such as <code style="white-space: pre;">⁠='20'⁠</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>major_grid</code></td>
<td>
<p>Add grid lines corresponding to major axis ticks, <code>TRUE</code>
to get default translucent black, otherwise colour (name or hex)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minor</code></td>
<td>
<p>Spacing (or number) of minor ticks (note, no label for minor).
If given as a character string, it will pass to <code>seq.POSIXt</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minor_grid</code></td>
<td>
<p>Add gridlines for minor ticks, <code>TRUE</code> uses transparent
black, otherwise colour string</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>Date or time format for major axis for example <code>'%Y %b'</code>. If left
as the default <code>'auto'</code> an appropriate choice between seconds
and years will be used. Note, <code>major</code> or <code>side</code> must be given as a
character string to trigger datetime labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spacing</code></td>
<td>
<p>Should <code>major</code> and <code>minor</code> be interpreted as tick spacing
(default) or approximate number of ticks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tck</code></td>
<td>
<p>Size of axis tick: minor axis will always take half this value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>axis()</code>, for example <code>las=2</code>
for perpendicular labels</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Major and minor tick marks can be specified in a number of ways:
</p>

<ul>
<li>
<p> As a character string if the axis is datetime, such as 'year' or 'hour'
which are passed as <code>by</code> to <code>seq()</code>. These can be prefixed with an integer multiplier,
for example '6 hour' or '10 year', as per <code>seq.POSIXt</code>
</p>
</li>
<li>
<p> As a tick interval using the default <code>spacing = TRUE</code>
</p>
</li>
<li>
<p> As an approximate number of tick marks to include, using <code>pretty()</code> to find
the best interval, using <code>spacing = FALSE</code>. Use a character number if this
is a Date or Time axis, such as <code>major = '100'</code> and <code>spacing</code> will be set
FALSE automatically.
</p>
</li>
</ul>
<p>Major adds labels and ticks, minor is just half-sized ticks marks. Both
tick sizes can be changed (or direction changed) using <code>tck</code>.
</p>
<p>Three different datetime axis are possible: year, day-offset, seconds-offset. Use
<code>format</code> to specify how the label should appear, such as '%b %Y' (see <code>?strptime</code>)
</p>

<ul>
<li>
<p> Year should be treated as a conventional numeric axis, use <code>major=1/12</code> not <code>major='month'</code>
</p>
</li>
<li>
<p> day-offset is an axis of <code>class(x)=='Date'</code> and is identified if the axis range exists
within +/-9e4, meaning within dates 1723 - 2216, and minimum interval is 'day'
</p>
</li>
<li>
<p> second-offset is an axis of <code>class(x)=='POSIXct'</code> and is identified by a range outside
of +/-9e4. This will give very strange results if your entire POSIXct axis is within
24 hours of 1970-01-01
</p>
</li>
</ul>
<p>A grid can be added at the same time by setting <code>major_grid</code> or <code>minor_grid</code> to <code>TRUE</code>
or a colour string. If <code>TRUE</code>, a transparent black is used by default.
</p>
<p>Any other options can be passed through to <code>axis()</code> directly (see <code>?axis</code>), most
notably <code>las = 2</code> to rotate the labels, and <code>cex.axis</code> for label size.
</p>
<p>The function will exit with a warning if more than 1000 ticks or gridlines were
generated, as this is most likely a mistake with autogenerated date / time intervals
and can lead to very slow behaviour.
</p>
<p>This does NOT work well for <code>barplot()</code> categorical axis, for this continue to use
the basic <code>axis()</code> function with custom labels, see examples.
</p>


<h3>Value</h3>

<p>No return value (<code>NULL</code>)
</p>


<h3>Examples</h3>

<pre><code class="language-R">plot(sunspots) # This time series is actually given in decimal years
  autoaxis(side=3, major=50, major_grid='coral', minor=10, minor_grid=TRUE, spacing=TRUE)
  autoaxis(side=4, major=11, minor=25, spacing=FALSE, las=2, cex.axis=0.5, tck=0.02)

plot(seq(as.POSIXct('2020-01-01'),as.POSIXct('2020-01-03'),length.out=1e3),
    rnorm(1e3), xlab='POSIXct', xaxt='n')
  autoaxis(side=1, major='day', minor='3 hour', format='%x')
  # Shortcut method to make a default dense grid
  autoaxis(side='3')
  autoaxis(side=2)
  # You can always request a datetime axis (side='4' not 4L) but it will be nonsense
  autoaxis(side='4', col='red')

plot(seq(as.Date('2013-02-01'),as.Date('2020-01-03'),length.out=1e3),
    rnorm(1e3), xlab='Date', xaxt='n')
  autoaxis(side=1, major='10', minor='50', format='%Y')
  autoaxis(side=3, minor='3 month', minor_grid=TRUE)

# Guessing is ambiguous with small values, depends on smallest interval
plot(1:500,runif(500), type='l', xaxt='n', xlab='Time or Date?', main=
  'For small values (&lt;1e5), use interval to guess format\n')
autoaxis(1, major='min', minor='10 sec', format='%M:%S')
autoaxis(3, major='quarter', minor='month', format='%b %Y')

# For barplot() use base functions - remember to set width=1, space=0
# otherwise bars will not be plotted on integer x-coordinates
barplot(mtcars$mpg, width=1, space=0, ylab='mpg')
  # Adjust the x-axis down by 0.5 so that the tick is in centre of each bar
  axis(side=1, at=-0.5+1:length(mtcars$mpg), labels=rownames(mtcars), las=2 )
  # Often prettier, label each bar inside the bar itself using text()
  text(x=-1+1:length(mtcars$mpg), y=1, pos=4,
    labels=rownames(mtcars), srt=90, cex=0.7)
  # autoaxis can still be used for adjusting the numeric scale
  autoaxis(side=2, major=5, major_grid=TRUE, minor=1, minor_grid=TRUE)

</code></pre>


</div>
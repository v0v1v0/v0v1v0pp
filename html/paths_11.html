<div class="container">

<table style="width: 100%;"><tr>
<td>paths</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Causal Paths Analysis</h2>

<h3>Description</h3>

<p><code>paths</code> estimates path-specific causal effects in the presence of <code class="reqn">K(\geq 1)</code> causally
ordered mediators. It implements the pure imputation estimator and the imputation-based weighting
estimator (when a propensity score model is provided) as detailed in Zhou and Yamamoto (2020).
The user supplies the names of the treatment, outcome, mediator variables, <code class="reqn">K+1</code> fitted models
characterizing the conditional mean of the outcome given treatment, pretreatment confounders, and
varying sets of mediators, and a data frame containing all the variables. The function returns
<code class="reqn">K+1</code> path-specific causal effects that together constitute the total treatment effect.
When <code class="reqn">K=1</code>, the path-specific causal effects are identical to the natural direct and indirect
effects in standard causal mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">paths(
  a,
  y,
  m,
  models,
  ps_model = NULL,
  data,
  nboot = 500,
  conf_level = 0.95,
  ...
)

## S3 method for class 'paths'
print(x, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>a character string indicating the name of the treatment variable. The treatment
should be a binary variable taking either 0 or 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a character string indicating the name of the outcome variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>a list of <code class="reqn">K</code> character vectors indicating the names of <code class="reqn">K</code> causally ordered mediators
<code class="reqn">M_1,\ldots, M_K</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>models</code></td>
<td>
<p>a list of <code class="reqn">K+1</code> fitted model objects describing how the outcome depends on treatment,
pretreatment confounders, and varying sets of mediators, where <code class="reqn">K</code> is the number of mediators.
</p>

<ul>
<li>
<p> the first element is a baseline model of the outcome conditional on treatment and pretreatment
confounders.
</p>
</li>
<li>
<p> the <code class="reqn">k</code>th element is an outcome model conditional on treatment, pretreatment confounders,
and mediators <code class="reqn">M_1,\ldots, M_{k-1}</code>.
</p>
</li>
<li>
<p> the last element is an outcome model conditional on treatment, pretreatment confounders,
and all of the mediators, i.e., <code class="reqn">M_1,\ldots, M_K</code>.
</p>
</li>
</ul>
<p>The fitted model objects can be of type <code>lm</code>, <code>glm</code>, <code>gbm</code>,
<code>wbart</code>, or <code>pbart</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ps_model</code></td>
<td>
<p>an optional propensity score model for treatment. It can be of type <code>glm</code>,
<code>gbm</code>, <code>ps</code>, or <code>pbart</code>. When it is provided,
the imputation-based weighting estimator is also used to compute path-specific causal effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame containing all variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nboot</code></td>
<td>
<p>number of bootstrap iterations for estimating confidence intervals. Default is 500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf_level</code></td>
<td>
<p>the confidence level of the returned two-sided confidence
intervals. Default is <code>0.95</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed to <code>boot::boot</code>, e.g.
<code>parallel</code> and <code>ncpus</code>. For the <code>print</code> method, additional arguments to be passed to
<code>print.default</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a fitted model object returned by the <code>paths</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>minimal number of significant digits printed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>paths</code>, which is a list containing the
following elements </p>

<dl>
<dt>pure</dt>
<dd>
<p>estimates of direct and path-specific effects via <code class="reqn">M_1, \ldots, M_K</code>
based on the pure imputation estimator.</p>
</dd>
<dt>hybrid</dt>
<dd>
<p>estimates of direct and path-specific effects via <code class="reqn">M_1, \ldots, M_K</code>
based on the imputation-based weighting estimator.</p>
</dd>
<dt>varnames</dt>
<dd>
<p>a list of character strings indicating the names of the pretreatment confounders (<code class="reqn">X</code>),
treatment(<code class="reqn">A</code>), mediators (<code class="reqn">M_1, \ldots, M_K</code>), and outcome (<code class="reqn">Y</code>).</p>
</dd>
<dt>formulas</dt>
<dd>
<p>formulas for the outcome models.</p>
</dd>
<dt>classes</dt>
<dd>
<p>classes of the outcome models.</p>
</dd>
<dt>families</dt>
<dd>
<p>model families of the outcome models.</p>
</dd>
<dt>args</dt>
<dd>
<p>a list containing arguments of the outcome models.</p>
</dd>
<dt>ps_formula</dt>
<dd>
<p>formula for the propensity score model.</p>
</dd>
<dt>ps_class</dt>
<dd>
<p>class of the propensity score model.</p>
</dd>
<dt>ps_family</dt>
<dd>
<p>model family of the propensity score model.</p>
</dd>
<dt>ps_args</dt>
<dd>
<p>arguments of the propensity score model.</p>
</dd>
<dt>data</dt>
<dd>
<p>the original data.</p>
</dd>
<dt>nboot</dt>
<dd>
<p>number of bootstrap iterations.</p>
</dd>
<dt>conf_level</dt>
<dd>
<p>confidence level for confidence intervals.</p>
</dd>
<dt>boot_out</dt>
<dd>
<p>output matrix from the bootstrap iterations.</p>
</dd>
<dt>call</dt>
<dd>
<p>the matched call to the <code>paths</code> function.</p>
</dd>
</dl>
<h3>References</h3>

<p>Zhou, Xiang and Teppei Yamamoto. 2020. "<a href="https://osf.io/2rx6p">Tracing Causal Paths from Experimental and Observational Data</a>".
</p>


<h3>See Also</h3>

<p><code>summary.paths</code>, <code>plot.paths</code>, <code>sens</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(tatar)

m1 &lt;- c("trust_g1", "victim_g1", "fear_g1")
m2 &lt;- c("trust_g2", "victim_g2", "fear_g2")
m3 &lt;- c("trust_g3", "victim_g3", "fear_g3")
mediators &lt;- list(m1, m2, m3)

formula_m0 &lt;- annex ~ kulak + prosoviet_pre + religiosity_pre + land_pre +
  orchard_pre + animals_pre + carriage_pre + otherprop_pre + violence
formula_m1 &lt;- update(formula_m0,    ~ . + trust_g1 + victim_g1 + fear_g1)
formula_m2 &lt;- update(formula_m1,    ~ . + trust_g2 + victim_g2 + fear_g2)
formula_m3 &lt;- update(formula_m2,    ~ . + trust_g3 + victim_g3 + fear_g3)
formula_ps &lt;- violence ~ kulak + prosoviet_pre + religiosity_pre +
  land_pre + orchard_pre + animals_pre + carriage_pre + otherprop_pre

####################################################
# Causal Paths Analysis using GLM
####################################################

# outcome models
glm_m0 &lt;- glm(formula_m0, family = binomial("logit"), data = tatar)
glm_m1 &lt;- glm(formula_m1, family = binomial("logit"), data = tatar)
glm_m2 &lt;- glm(formula_m2, family = binomial("logit"), data = tatar)
glm_m3 &lt;- glm(formula_m3, family = binomial("logit"), data = tatar)
glm_ymodels &lt;- list(glm_m0, glm_m1, glm_m2, glm_m3)

# propensity score model
glm_ps &lt;- glm(formula_ps, family = binomial("logit"), data = tatar)

# causal paths analysis using glm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_glm &lt;- paths(a = "violence", y = "annex", m = mediators,
  glm_ymodels, ps_model = glm_ps, data = tatar, nboot = 3)


####################################################
# Causal Paths Analysis using GBM
####################################################

require(gbm)

# outcome models
gbm_m0 &lt;- gbm(formula_m0, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_m1 &lt;- gbm(formula_m1, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_m2 &lt;- gbm(formula_m2, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_m3 &lt;- gbm(formula_m3, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_ymodels &lt;- list(gbm_m0, gbm_m1, gbm_m2, gbm_m3)

# propensity score model via gbm
gbm_ps &lt;- gbm(formula_ps, data = tatar, distribution = "bernoulli", interaction.depth = 3)

# causal paths analysis using gbm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_gbm &lt;- paths(a = "violence", y = "annex", m = mediators,
  gbm_ymodels, ps_model = gbm_ps, data = tatar, nboot = 3)

</code></pre>


</div>
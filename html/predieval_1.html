<div class="container">

<table style="width: 100%;"><tr>
<td>bencalibr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting calibration for benefit of a prediction model</h2>

<h3>Description</h3>

<p>This function produces a plot to illustrate the calibration for benefit
for a prediction model. The samples are split into a number of groups according
to their predicted benefit, and within each group the function estimates
the observed treatment benefit and compares it with the predicted one
</p>


<h3>Usage</h3>

<pre><code class="language-R">bencalibr(
  data = NULL,
  Ngroups = 5,
  y.observed,
  treat,
  predicted.treat.0,
  predicted.treat.1,
  type = "continuous",
  smoothing.function = "lm",
  axis.limits = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An optional data frame containing the required information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ngroups</code></td>
<td>
<p>The number of groups to split the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.observed</code></td>
<td>
<p>The observed outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>A vector with the treatment assignment. This must be 0 (for control treatment)
or 1 (for active treatment).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predicted.treat.0</code></td>
<td>
<p>A vector with the model predictions for each patient, under the control treatment.
For the case of a binary outcome this should be probabilities of an event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predicted.treat.1</code></td>
<td>
<p>A vector with the model predictions for each patient, under the active treatment.
For the case of a binary outcome this should be probabilities of an event.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The type of the outcome, "binary" or "continuous".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothing.function</code></td>
<td>
<p>The method used to smooth the calibration line. Can
be "lm", "glm", "gam", "loess", "rlm". More details can be found in https://ggplot2.tidyverse.org/reference/geom_smooth.html.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.limits</code></td>
<td>
<p>Sets the limits of the graph. It can be a vector of two values, i.e. the lower and upper limits for x and y axis. It can be omitted.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The calibration plot
</p>


<h3>Examples</h3>

<pre><code class="language-R"># continuous outcome
dat1=simcont(200)$dat
head(dat1)
lm1=lm(y.observed~(x1+x2+x3)*t, data=dat1)
dat.t0=dat1; dat.t0$t=0
dat.t1=dat1; dat.t1$t=1
dat1$predict.treat.1=predict(lm1, newdata = dat.t1) # predictions in treatment
dat1$predict.treat.0=predict(lm1, newdata = dat.t0) # predicions in control
bencalibr(data=dat1, Ngroups=10, y.observed, predicted.treat.1=predict.treat.1,
          predicted.treat.0=predict.treat.0, type="continuous", treat=t,
          smoothing.function = "lm", axis.limits = c(-1, 1.3))
# binary outcome
dat2=simbinary(500)$dat
head(dat2)
glm1=glm(y.observed~(x1+x2+x3)*t, data=dat2, family = binomial(link = "logit"))
dat2.t0=dat2; dat2.t0$t=0
dat2.t1=dat2; dat2.t1$t=1
dat2$predict.treat.1=predict(glm1, newdata = dat2.t1) # predictions in treatment
dat2$predict.treat.0=predict(glm1, newdata = dat2.t0) # predicions in control
bencalibr(data=dat2, Ngroups=6, y.observed, predicted.treat.1=expit(predict.treat.1),
          predicted.treat.0=expit(predict.treat.0), type="binary", treat=t,
          smoothing.function = "lm")
</code></pre>


</div>
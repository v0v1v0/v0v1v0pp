<div class="container">

<table style="width: 100%;"><tr>
<td>add_attr2tb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Copy attributes from members of a generic_mspct</h2>

<h3>Description</h3>

<p>Copy metadata attributes from members of a generic_mspct object into a tibble
or data.frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_attr2tb(
  tb = NULL,
  mspct,
  col.names = NULL,
  idx = "spct.idx",
  unnest = FALSE
)

when_measured2tb(mspct, tb = NULL, col.names = "when.measured", idx = NULL)

geocode2tb(mspct, tb = NULL, col.names = "geocode", idx = "spct.idx")

lonlat2tb(mspct, tb = NULL, col.names = c("lon", "lat"), idx = "spct.idx")

lon2tb(mspct, tb = NULL, col.names = "lon", idx = "spct.idx")

lat2tb(mspct, tb = NULL, col.names = "lat", idx = "spct.idx")

address2tb(mspct, tb = NULL, col.names = "address", idx = "spct.idx")

what_measured2tb(
  mspct,
  tb = NULL,
  col.names = "what.measured",
  idx = "spct.idx"
)

how_measured2tb(mspct, tb = NULL, col.names = "how.measured", idx = "spct.idx")

normalized2tb(mspct, tb = NULL, col.names = "normalized", idx = "spct.idx")

scaled2tb(mspct, tb = NULL, col.names = "scaled", idx = "spct.idx")

instr_desc2tb(mspct, tb = NULL, col.names = "instr.desc", idx = "spct.idx")

instr_settings2tb(
  mspct,
  tb = NULL,
  col.names = "instr.settings",
  idx = "spct.idx"
)

BSWF_used2tb(mspct, tb = NULL, col.names = "BSWF.used", idx = "spct.idx")

filter_properties2tb(
  mspct,
  tb = NULL,
  col.names = "filter.properties",
  idx = "spct.idx"
)

solute_properties2tb(
  mspct,
  tb = NULL,
  col.names = "solute.properties",
  idx = "spct.idx"
)

Tfr_type2tb(mspct, tb = NULL, col.names = "Tfr.type", idx = "spct.idx")

Rfr_type2tb(mspct, tb = NULL, col.names = "Rfr.type", idx = "spct.idx")

time_unit2tb(mspct, tb = NULL, col.names = "time.unit", idx = "spct.idx")

comment2tb(mspct, tb = NULL, col.names = "comment", idx = "spct.idx")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tb</code></td>
<td>
<p>tibble or data.frame to which to add the data (optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mspct</code></td>
<td>
<p>generic_mspct Any collection of spectra.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.names</code></td>
<td>
<p>named character vector Name(s) of metadata attributes
to copy, while if named, the names provide the name for the column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idx</code></td>
<td>
<p>character Name of the column with the names of the members of the
collection of spectra.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unnest</code></td>
<td>
<p>logical Flag controlling if metadata attributes that are lists
of values should be returned in a list column or in separate columns.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The attributes are copied to a column in a tibble or data frame. If
the <code>tb</code> formal parameter receives <code>NULL</code> as argument, a new
<code>tibble</code> will be created. If an existing <code>data.frame</code> or
<code>tibble</code> is passed as argument, new columns are added to it. However,
the number of rows in the argument passed to <code>tb</code> must match the
number of spectra in the argument passed to <code>mspct</code>. Only in the case
of method <code>add_attr2tb()</code> if the argument
to <code>col.names</code> is a named vector, the names of members are used as names for the columns
created. This permits setting any valid name for the new columns. If the
vector passed to <code>col.names</code> has no names the names of the attributes
are used for the new columns. If the fields of the attributes are unnested
their names are used as names for the columns.
</p>
<p>Valid accepted as argument to <code>col.names</code> are <code>NULL</code>,
<code>"lon"</code>, <code>"lat"</code>, <code>"address"</code>, <code>"geocode"</code>,
<code>"where.measured"</code>, <code>"when.measured"</code>, <code>"what.measured"</code>,
<code>"how.measured"</code>, <code>"comment"</code>, <code>"normalised"</code>,
<code>"normalized"</code>, <code>"scaled"</code>, <code>"bswf.used"</code>,
<code>"instr.desc"</code>, <code>"instr.settings"</code>,
<code>solute.properties</code>, <code>"filter.properties"</code>,
<code>"Tfr.type"</code>, <code>"Rfr.type"</code>, <code>"time.unit"</code>.
</p>


<h3>Value</h3>

<p>A tibble With the metadata attributes in separate new variables.
</p>


<h3>Note</h3>

<p>The order of the first two arguments
is reversed in <code>add_attr2tb()</code> compared to the other functions. This
is to allow its use in 'pipes', while the functions for single attributes
are expected to be used mostly to create new tibbles.
</p>


<h3>See Also</h3>

<p>Other measurement metadata functions: 
<code>getFilterProperties()</code>,
<code>getHowMeasured()</code>,
<code>getInstrDesc()</code>,
<code>getInstrSettings()</code>,
<code>getSoluteProperties()</code>,
<code>getWhatMeasured()</code>,
<code>getWhenMeasured()</code>,
<code>getWhereMeasured()</code>,
<code>get_attributes()</code>,
<code>isValidInstrDesc()</code>,
<code>isValidInstrSettings()</code>,
<code>select_spct_attributes()</code>,
<code>setFilterProperties()</code>,
<code>setHowMeasured()</code>,
<code>setInstrDesc()</code>,
<code>setInstrSettings()</code>,
<code>setSoluteProperties()</code>,
<code>setWhatMeasured()</code>,
<code>setWhenMeasured()</code>,
<code>setWhereMeasured()</code>,
<code>spct_attr2tb()</code>,
<code>spct_metadata()</code>,
<code>subset_attributes()</code>,
<code>trimInstrDesc()</code>,
<code>trimInstrSettings()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)

my.mspct &lt;- source_mspct(list(sun1 = sun.spct, sun2 = sun.spct * 2))
q_irrad(my.mspct) %&gt;%
  add_attr2tb(my.mspct, c(lat = "latitude",
                          lon = "longitude",
                          when.measured = "time"))

when_measured2tb(my.mspct)

</code></pre>


</div>
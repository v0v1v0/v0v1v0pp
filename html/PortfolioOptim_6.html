<div class="container">

<table style="width: 100%;"><tr>
<td>PortfolioOptimProjection</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Portfolio optimization which finds an optimal portfolio with the smallest distance to a benchmark.</h2>

<h3>Description</h3>

<p>PortfolioOptimProjection is a linear program for financial portfolio optimization. The function finds an optimal portfolio 
which has the smallest distance to a benchmark portfolio given by <code>bvec</code>.
Solution is by the algorithm due to Zhao and Li modified to account for the fact that the benchmark portfolio <code>bvec</code> has the dimension of portfolio weights 
and the solved linear program  has a much higher dimension since the solution vector to the LP problem consists of a set of primal variables: financial portfolio weights, 
auxiliary variables coming from the reduction of the mean-risk problem to a linear program and also a set of dual variables  depending  
on the number of constrains in the primal problem (see Palczewski).
</p>


<h3>Usage</h3>

<pre><code class="language-R">PortfolioOptimProjection (dat, portfolio_return,
risk=c("CVAR","DCVAR","LSAD","MAD"), alpha=0.95, bvec,
Aconstr=NULL, bconstr=NULL, LB=NULL, UB=NULL, maxiter=500, tol=1e-7)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>Time series of returns data; dat = cbind(rr, pk), where <code class="reqn">rr</code> is an array (time series) of asset returns,
for <code class="reqn">n</code> returns and <code class="reqn">k</code> assets it is an array with <code class="reqn">\dim(rr) = (n, k)</code>,    
<code class="reqn">pk</code> is a vector of length <code class="reqn">n</code> containing probabilities of returns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>portfolio_return</code></td>
<td>
<p>Target portfolio return.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>risk</code></td>
<td>
<p>Risk measure chosen for optimization; one of "CVAR", "DCVAR", "LSAD", "MAD", where
"CVAR" – denotes Conditional Value-at-Risk (CVaR),
"DCVAR" – denotes deviation CVaR,
"LSAD" – denotes Lower Semi Absolute Deviation,
"MAD" – denotes Mean Absolute Deviation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Value of alpha quantile used to compute portfolio VaR and CVaR; used also as quantile value for risk measures CVAR and DCVAR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bvec</code></td>
<td>
<p>Benchmark portfolio, a vector of length k; function <code>PortfolioOptimProjection</code> finds an optimal portfolio with the smallest distance to <code>bvec</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Aconstr</code></td>
<td>
<p>Matrix defining additional constraints,   <code class="reqn">\dim (Aconstr) = (m,k)</code>, where
<code class="reqn">k</code> – number of assets, <code class="reqn">m</code> – number of constraints.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bconstr</code></td>
<td>
<p>Vector defining additional constraints, length (<code class="reqn">bconstr</code>) <code class="reqn"> = m</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LB</code></td>
<td>
<p>Vector of length k, lower bounds of portfolio weights <code class="reqn">\theta</code>; warning: condition LB = NULL is equivalent to LB = rep(0, k) (lower bound zero).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UB</code></td>
<td>
<p>Vector of length k, upper bounds for portfolio weights <code class="reqn">\theta</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxiter</code></td>
<td>
<p>Maximal number of iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>Accuracy of computations, stopping rule.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>PortfolioOptimProjection returns a list with items:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>return_mean</code> </td>
<td style="text-align: left;"> vector of asset returns  mean values. </td>
</tr>
<tr>
<td style="text-align: left;">

<code>mu</code> </td>
<td style="text-align: left;">  realized portfolio return.</td>
</tr>
<tr>
<td style="text-align: left;">

<code>theta</code> </td>
<td style="text-align: left;">  portfolio weights.</td>
</tr>
<tr>
<td style="text-align: left;">

<code>CVaR</code> </td>
<td style="text-align: left;">  portfolio CVaR.</td>
</tr>
<tr>
<td style="text-align: left;">

<code>VaR</code> </td>
<td style="text-align: left;">  portfolio VaR.</td>
</tr>
<tr>
<td style="text-align: left;">

<code>MAD</code> </td>
<td style="text-align: left;">  portfolio MAD.</td>
</tr>
<tr>
<td style="text-align: left;">

<code>risk</code> </td>
<td style="text-align: left;">  portfolio risk measured by the risk measure chosen for optimization.</td>
</tr>
<tr>
<td style="text-align: left;">

<code>new_portfolio_return</code> </td>
<td style="text-align: left;">  modified target portfolio return; when the original target portfolio return </td>
</tr>
<tr>
<td style="text-align: left;">

 </td>
<td style="text-align: left;"> is to high for the problem, the optimization problem is solved for </td>
</tr>
<tr>
<td style="text-align: left;">

 </td>
<td style="text-align: left;"> new_portfolio_return as the target return. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>References</h3>

<p>Palczewski, A., LP Algorithms for Portfolio Optimization: The PortfolioOptim Package, R Journal, 10(1) (2018), 308–327. DOI:10.32614/RJ-2018-028.
</p>
<p>Zhao, Y-B., Li, D., Locating the least 2-norm solution of linear programs via a path-following method, SIAM Journal on Optimization, 12 (2002), 893–912. DOI:10.1137/S1052623401386368.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(mvtnorm)
k = 3 
num =100
dat &lt;-  cbind(rmvnorm (n=num, mean = rep(0,k), sigma=diag(k)), matrix(1/num,num,1)) 
# a data sample with num rows and (k+1) columns for k assets;  
w_m &lt;- rep(1/k,k) # benchmark portfolio, a vector of length k, 
port_ret = 0.05 # portfolio target return
alpha_optim = 0.95

# minimal constraints set: \sum theta_i = 1
# has to be in two inequalities: 1 - \epsilon &lt;= \sum theta_i &lt;= 1 +\epsilon
a0 &lt;- rep(1,k)
Aconstr &lt;- rbind(a0,-a0)
bconstr &lt;- c(1+1e-8, -1+1e-8)

LB &lt;- rep(0,k) 
UB &lt;- rep(1,k)  

res &lt;- PortfolioOptimProjection(dat, port_ret, risk="MAD",  
alpha=alpha_optim, w_m, Aconstr, bconstr, LB, UB, maxiter=200, tol=1e-7)

cat ( c("Projection optimal portfolio:\n\n"))
cat(c("weights \n"))
print(res$theta)


cat (c ("\n mean = ", res$mu, " risk  = ", res$risk,    "\n CVaR = ", res$CVaR, " VaR = ",
res$VaR, "\n MAD = ", res$MAD,  "\n\n"))


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>nContOpt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>      
Compute the sample size required to estimate the mean of a continuous variable by optimizing the numbers of take-alls and non-take-all units selected by probability sampling
</h2>

<h3>Description</h3>

<p>Compute a sample size required to achieve a precision target for an estimated mean, <code class="reqn">\hat{\bar{y}}_s</code>, based on splitting the sample between take-alls and non-take-alls. The sample design for non-take-alls can be either simple random sampling or probability proportional to size sampling.
</p>


<h3>Usage</h3>

<pre><code class="language-R">nContOpt(X, Y = NULL, CV0 = NULL, V0 = NULL, design = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>

<p>population variable used for determining take-all cutoff and for selecting a probability proportional to size sample if <code>design = "PPS"</code>. <code>X</code> is a vector that contains a value for every unit in the population.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>

<p>variable used for computing a population variance; required if <code>design = "PPS"</code>. <code>Y</code> is ignored if  <code>design = "SRS"</code>. <code>X</code> is a vector that contains a value for every unit in the population and is the same length as <code>Y</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CV0</code></td>
<td>

<p>target value of coefficient of variation of <code class="reqn">\hat{\bar{y}}_s</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V0</code></td>
<td>

<p>target value of variance of <code class="reqn">\hat{\bar{y}}_s</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>

<p>Sample design to be used for non-take-alls; must be either <code>"SRS"</code> or <code>"PPS"</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Compute a sample size based on splitting the sample between take-alls and non-take-alls in a way that achieves either a target coefficient of variation or a target variance for an estimated mean. The function sorts the file in descending order by <code>X</code> and then systematically designates units as  take-alls (certainty selections) starting from largest to smallest, and computes the sample size of non-take-alls needed to achieve the precision target. Initially, no unit in the ordered list is a certainty, and if <code>design = "SRS"</code>, the first value in <code>nContOpt.curve</code> is the same as <code>nCont</code> produces under identical inputs. In each pass, the algorithm increases the number of certainties. In the second pass, the first value is taken as a certainty and the non-take-all sample size is based on units 2:N, where N is the population size. On the third pass, the first two values are taken as certainties and the non-take-all sample size is based on units 3:N. The function cycles through units 1:(N-1) with take-alls increasing by 1 each cycle, and determines the minimum total sample size needed to achieve the specified precision target. The optimum sample size <code>nContOpt.n</code> combines certainties and non-certainties for its value.
</p>
<p>The sample design can be either simple random sampling or probability proportional to size sampling. When <code>design = "SRS"</code>, calculations are based only on <code>X</code>. The SRS variance formula is for without replacement sampling so that a finite population correction factor (<em>fpc</em>) is included. When <code>design = "PPS"</code>, <code>X</code> is used for the measure of size and <code>Y</code> is the variable for computing the variance used to determine the sample size. The PPS variance is computed for a with-replacement design, but an ad hoc <em>fpc</em> is included. Either <code>CV0</code> or <code>V0</code> must be provided but not both.
</p>


<h3>Value</h3>

<p>A list with five components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>nContOpt.Curve</code></td>
<td>
<p>The sample size for the given inputs based on the number of take-alls incrementing from 1 to N-1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Take.alls</code></td>
<td>
<p>A TRUE/FALSE vector for whether the element in the <code>X</code> vector is a take-all</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nContOpt.n</code></td>
<td>
<p>The minimum sample size (take-alls + non-take-alls) required for the given inputs, rounded to 4 decimal places</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Min.Takeall.Val</code></td>
<td>
<p>The minimum value of <code>X</code> for the take-alls</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.Take.all</code></td>
<td>
<p>The number of take-all units in the optimal sample</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>George Zipf, Richard Valliant</p>


<h3>See Also</h3>

<p><code>nCont</code>, <code>nContMoe</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">nContOpt(X = TPV$Total.Pot.Value, CV0 = 0.05, design = "SRS")
nContOpt(X = TPV$Total.Pot.Value, V0  = 5e+14, design = "SRS")
g &lt;- nContOpt(X = TPV$Total.Pot.Value, CV0 = 0.05, design = "SRS")
plot(g$nContOpt.Curve,
     type = "o",
     main = "Sample Size Curve",
     xlab = "Take-all / Sample Split Starting Value",
     ylab = "Total sample size (take-alls + non-tale-alls)" )
nContOpt(X = TPV$Total.Pot.Value, Y = TPV$Y, CV0 = 0.05, design = "PPS")
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>makeDerivs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Utility functions for creating Gradient- and Hessian-like matrices with symbolic derivatives and evaluating them in an environment</h2>

<h3>Description</h3>

<p>These are three different utility functions that create matrices containing the symbolic partial derivatives of first (<code>makeGrad</code>) and second (<code>makeHess</code>) order and a function for evaluating these matrices in an environment. The evaluations of the symbolic derivatives are used within the <code>propagate</code> function to calculate the propagated uncertainty, but these functions may also be useful for other applications. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">makeGrad(expr, order = NULL)
makeHess(expr, order = NULL)
evalDerivs(deriv, envir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>an expression, such as <code>expression(x/y)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>order of creating partial derivatives, i.e. <code>c(2, 1)</code>. See 'Examples'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deriv</code></td>
<td>
<p>a matrix returned from <code>makeGrad</code> or <code>makeHess</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>an environment to evaluate in. By default the workspace.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Given a function <code class="reqn">f(x_1, x_2, \ldots, x_n)</code>, the following matrices containing symbolic derivatives of <code class="reqn">f</code> are returned:<br></p>
<p><b>makeGrad:</b><br></p>
<p style="text-align: center;"><code class="reqn">\nabla(f) = \left[\frac{\partial f}{\partial x_1}, \ldots, \frac{\partial f}{\partial x_n}\right]</code>
</p>
 
<p><b>makeHess:</b><br></p>
<p style="text-align: center;"><code class="reqn">H(f) = \left[ \begin{array}{cccc} \frac{\partial^2 f}{\partial x_1^2} &amp; \frac{\partial^2 f}{\partial x_1\,\partial x_2} &amp; \cdots &amp; \frac{\partial^2 f}{\partial x_1\,\partial x_n} \\ \frac{\partial^2 f}{\partial x_2\,\partial x_1} &amp; \frac{\partial^2 f}{\partial x_2^2} &amp; \cdots &amp; \frac{\partial^2 f}{\partial x_2\,\partial x_n} \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ \frac{\partial^2 f}{\partial x_n\,\partial x_1} &amp; \frac{\partial^2 f}{\partial x_n\,\partial x_2} &amp; \cdots &amp; \frac{\partial^2 f}{\partial x_n^2} \end{array} \right]
</code>
</p>



<h3>Value</h3>

<p>The symbolic or evaluated Gradient/Hessian matrices.</p>


<h3>Author(s)</h3>

<p>Andrej-Nikolai Spiess
</p>


<h3>References</h3>

<p>The Matrix Cookbook (Version November 2012).<br>
Petersen KB &amp; Pedersen MS.<br><a href="http://ais.informatik.uni-freiburg.de/teaching/ws12/mapping/pdf/imm3274.pdf">http://ais.informatik.uni-freiburg.de/teaching/ws12/mapping/pdf/imm3274.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">EXPR &lt;- expression(a^b + sin(c))
ENVIR &lt;- list(a = 2, b = 3, c = 4)

## First-order partial derivatives: Gradient.
GRAD &lt;- makeGrad(EXPR) 

## This will evaluate the Gradient.
evalDerivs(GRAD, ENVIR)

## Second-order partial derivatives: Hessian.
HESS &lt;- makeHess(EXPR) 

## This will evaluate the Hessian.
evalDerivs(HESS, ENVIR)

## Change derivatives order.
GRAD &lt;- makeGrad(EXPR, order = c(2,1,3)) 
evalDerivs(GRAD, ENVIR)
</code></pre>


</div>
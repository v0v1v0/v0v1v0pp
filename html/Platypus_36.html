<div class="container">

<table style="width: 100%;"><tr>
<td>VDJ_diversity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates and plots common diversity and overlap measures for repertoires and alike. Requires the vegan package</h2>

<h3>Description</h3>

<p>Calculates and plots common diversity and overlap measures for repertoires and alike. Requires the vegan package
</p>


<h3>Usage</h3>

<pre><code class="language-R">VDJ_diversity(
  VDJ,
  feature.columns,
  grouping.column,
  metric,
  VDJ.VJ.1chain,
  subsample.to.same.n
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>VDJ</code></td>
<td>
<p>VDJ dataframe output from the VDJ_GEX_matrix function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feature.columns</code></td>
<td>
<p>Character vector. One or more column names from the VDJ of which diversity or overlap metrics are calculated. if more than one column is provided (e.g. c("VDJ_cdr3s_aa","VJ_cdr3s_aa")) these columns will be pasted together before metric calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouping.column</code></td>
<td>
<p>Character. Column name of a column to group metrics by. This could be "sample_id" to calculate the metric for each sample. This column is required if metric = "simpson". If so, the simpson overlap index will be calculated pairwise for all combinations of elements in the grouping.column. Defaults to "none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>Character. Diversity or overlap metric to calculate. Can be c("richness", "bergerparker", "simpson", "ginisimpson", "shannon", "shannonevenness", "jaccard"). Defaults to "shannon". If jaccard is selected, a heatmap with the pairwise comparisons between all groups is returned. If any of the others is selected, a dotplot is returned</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>VDJ.VJ.1chain</code></td>
<td>
<p>Boolean defaults to TRUE. Whether to filter out aberrant cells (more than 1 VDJ or VJ chain).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subsample.to.same.n</code></td>
<td>
<p>Boolean defaults to TRUE. Whether to subsample larger groups down to the size of the smallest group</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a ggplot with the calculated metric for each group (if provided).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
plot &lt;- VDJ_diversity(VDJ = Platypus::small_vgm[[1]],
,feature.columns = c("VDJ_cdr3s_aa"), grouping.column = "sample_id"
,metric = "shannon")

VDJ_diversity(VDJ = Platypus::small_vgm[[1]],
,feature.columns = c("VDJ_cdr3s_aa","VJ_cdr3s_aa"), grouping.column = "sample_id"
,metric = "ginisimpson")

VDJ_diversity(VDJ = Platypus::small_vgm[[1]],
,feature.columns = c("VDJ_jgene"), grouping.column = "sample_id"
,metric = "jaccard")

</code></pre>


</div>
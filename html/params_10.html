<div class="container">

<table style="width: 100%;"><tr>
<td>load_opts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Setting/loading and extracting various options into the environment</h2>

<h3>Description</h3>


<ul>
<li>
<p> set_opts(): set options into a custom envir
</p>
</li>
<li>
<p> get_opts(): extract options
</p>
</li>
<li>
<p> load_opts(): Read a tab delimited file using read_sheet or toml file and load them as options using set_opts
</p>
</li>
<li>
<p> new_opts(): create a options manager to be included in a pacakge
</p>
</li>
<li>
<p> print.opts(): print pkg options as a pretty table
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">load_opts(x, check = TRUE, envir = opts, verbose = TRUE, .parse = TRUE, ...)

load_toml(toml, .remove_period = T, envir = envir, verbose = T)

new_opts(envir = new.env())

get_opts(x, envir = opts, .use.names = FALSE)

set_opts(..., .dots, .parse = TRUE, envir = opts)

## S3 method for class 'opts'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<ul>
<li>
<p> get_opts: a character vector of names of options to extract.
</p>
</li>
<li>
<p> load_opts: path to a configuration file
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>load_opts(): in case of a configuration file, whether to check if files defined in parameters exists. [TRUE]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>environ used to store objects. Default is a environ object called opts [params:::opts]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>load_opts(): Logical variable indicate level of verboseness [TRUE]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.parse</code></td>
<td>
<p>set_opts(), load_opts(): logical, whether to auto-complete <code>{{myvar}}</code> using previously defined options. [TRUE]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>set_opts(): a named set of variable/value pairs separated by comma</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>toml</code></td>
<td>
<p>load_toml(): instead of a tsv, use toml to load options</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.remove_period</code></td>
<td>
<p>load_opts(): remove \. period from option names (and replace with _)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.use.names</code></td>
<td>
<p>get_opts(): The resulting vector should be have names (esp. if length(x) is 1). If length(x)&gt;1, this returns a list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.dots</code></td>
<td>
<p>set_opts(): A named list, as a alternative to ...</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Integrating params in a package:</strong>
</p>
<p><em>create a options manager</em>:
</p>
<p><code>
opts_mypkg = new_opts()
</code>
</p>
<p>The object <code>opts_mypkg</code> is a list of a few functions, which set, fetch and load
options (using a isolated environment). Here are a few examples:
</p>
<p><em>Set some options</em>:
</p>
<p><code>opts_mypkg$set(version = '0.1', name = 'mypkg')</code>
</p>
<p><em>Fetch ALL options</em>:
</p>
<p><code>opts_mypkg$get()</code>
OR
<code>opts_mypkg$get("version")</code> to fetch a specific option.
</p>
<p><strong>Loading configuration files</strong>:
</p>
<p><code>load_opts()</code> OR <code>opts_pkg$load()</code>:
</p>
<p>There are cases when options and params are actually paths to scripts or other apps or folders etc.
In such cases it might be useful to quickly check if these paths exists on the system.
As such, load_opts() automatically checks params ending with <code>path|dir|exe</code> (if check=TRUE).
</p>
<p>For example, values for variables like <code>mypath</code>, <code>my_path</code>, <code>tool_exe</code>, etc would be check if they exists
and a warning would be shown if they don't exist.
</p>
<p>Below is a list example options, retrieved via
</p>
<p><code>get_opts()</code>:
</p>
<pre>
|name          |value            |
|default_regex |(.*)             |
|my_conf_path  |~/flowr/conf     |
|my_dir        |path/to/a/folder |
|my_path       |~/flowr          |
|my_tool_exe   |/usr/bin/ls      |
</pre>


<h3>See Also</h3>

<p>read_sheet
</p>
<p>read_sheet
</p>
<p>read_sheet load_opts
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Set options
opts = set_opts(flow_run_path = "~/mypath")
#OR
opts = set_opts(.dots = list(flow_run_path = "~/mypath"))

## printing options, this is internally called by get_opts()
print(opts)

## Fetch options
get_opts()
get_opts("flow_run_path")

## Load options from a file
fl = system.file("conf/params.conf", package = "params")
load_opts(fl)


## Create a options manager:
opts_mypkg = new_opts()
## this provides three functions
opts_mypkg$set(version = '0.1', name = 'mypkg')
opts_mypkg$load(fl)
opts_mypkg$get()

## Additionally, one has the options of using braces ({{}})
## do define nested options:

set_opts(first = "John", last = "Doe", full = "{{first}} {{last}}")

</code></pre>


</div>
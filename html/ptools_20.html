<div class="container">

<table style="width: 100%;"><tr>
<td>pai_summary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summary Table for Multiple PAI Stats</h2>

<h3>Description</h3>

<p>Takes a list of multiple PAI summary tables (for different predictions) and returns summaries at fixed area thresholds
</p>


<h3>Usage</h3>

<pre><code class="language-R">pai_summary(pai_list, thresh, labs, wide = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pai_list, </code></td>
<td>
<p>list of data frames that have the PAI stats from the <code>pai</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresh, </code></td>
<td>
<p>vector of area numbers to select, e.g. 10 would select the top 10 areas, c(10,100) would select the top 10 and the top 100 areas</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labs</code></td>
<td>
<p>vector of characters that specifies the labels for each PAI dataframe, should be the same length as <code>pai_list</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wide</code></td>
<td>
<p>boolean, if TRUE (default), returns data frame in wide format. Else returns summaries in long format</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Given predictions over an entire sample, this returns a dataframe with the sorted best PAI (sorted by density of predicted counts per area).
PAI is defined as:
</p>
<p style="text-align: center;"><code class="reqn">PAI = \frac{c_t/C}{a_t/A}</code>
</p>

<p>Where the numerator is the percent of crimes in cumulative t areas, and the denominator is the percent of the area encompassed.
PEI is the observed PAI divided by the best possible PAI if you were a perfect oracle, so is scaled between 0 and 1.
RRI is <code>predicted/observed</code>, so if you have very bad predictions can return Inf or undefined!
See Wheeler &amp; Steenbeek (2019) for the definitions of the different metrics.
User note, PEI may behave funny with different sized areas.
</p>


<h3>Value</h3>

<p>A dataframe with the PAI/PEI/RRI, and cumulative crime/predicted counts, for each original table
</p>


<h3>References</h3>

<p>Drawve, G., &amp; Wooditch, A. (2019). A research note on the methodological and theoretical considerations for assessing crime forecasting accuracy with the predictive accuracy index. <em>Journal of Criminal Justice</em>, 64, 101625.
</p>
<p>Wheeler, A. P., &amp; Steenbeek, W. (2021). Mapping the risk terrain for crime using machine learning. <em>Journal of Quantitative Criminology</em>, 37(2), 445-480.
</p>


<h3>See Also</h3>

<p><code>pai()</code> for a summary table of metrics for multiple pai tables given fixed N thresholds
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Making some very simple fake data
crime_dat &lt;- data.frame(id=1:6,
                        obs=c(6,7,3,2,1,0),
                        pred=c(8,4,4,2,1,0))
crime_dat$const &lt;- 1
p1 &lt;- pai(crime_dat,'obs','pred','const')
print(p1)

# Combining multiple predictions, making
# A nice table
crime_dat$rand &lt;- sample(crime_dat$obs,nrow(crime_dat),FALSE)
p2 &lt;- pai(crime_dat,'obs','rand','const')
pai_summary(list(p1,p2),c(1,3,5),c('one','two'))

</code></pre>


</div>
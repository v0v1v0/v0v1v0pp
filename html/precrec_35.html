<div class="container">

<table style="width: 100%;"><tr>
<td>fortify</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert a curves and points object to a data frame for ggplot2</h2>

<h3>Description</h3>

<p>The <code>fortify</code> function converts an <code>S3</code> object generated by
<code>evalmod</code> to a data frame for <span class="pkg">ggplot2</span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'sscurves'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)

## S3 method for class 'mscurves'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)

## S3 method for class 'smcurves'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)

## S3 method for class 'mmcurves'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)

## S3 method for class 'sspoints'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)

## S3 method for class 'mspoints'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)

## S3 method for class 'smpoints'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)

## S3 method for class 'mmpoints'
fortify(model, data, raw_curves = NULL, reduce_points = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An <code>S3</code> object generated by <code>evalmod</code>.
The <code>fortify</code> function takes one of the following <code>S3</code> objects.
</p>

<ol>
<li>
<p> ROC and Precision-Recall curves (mode = "rocprc")
</p>

<table>
<tr>
<td style="text-align: left;">
    <strong><code>S3</code> object</strong>
    </td>
<td style="text-align: left;"> <strong># of models</strong>
    </td>
<td style="text-align: left;"> <strong># of test datasets</strong> </td>
</tr>
<tr>
<td style="text-align: left;">

    sscurves </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    mscurves </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    smcurves </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> multiple </td>
</tr>
<tr>
<td style="text-align: left;">
    mmcurves </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> multiple
  </td>
</tr>
</table>
</li>
<li>
<p> Basic evaluation measures (mode = "basic")
</p>

<table>
<tr>
<td style="text-align: left;">
    <strong><code>S3</code> object</strong>
    </td>
<td style="text-align: left;"> <strong># of models</strong>
    </td>
<td style="text-align: left;"> <strong># of test datasets</strong> </td>
</tr>
<tr>
<td style="text-align: left;">

    sspoints </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    mspoints </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    smpoints </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> multiple </td>
</tr>
<tr>
<td style="text-align: left;">
    mmpoints </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> multiple
  </td>
</tr>
</table>
</li>
</ol>
<p>See the <strong>Value</strong> section of <code>evalmod</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Not used by this method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw_curves</code></td>
<td>
<p>A Boolean value to specify whether raw curves are
shown instead of the average curve. It is effective only
when <code>raw_curves</code> is set to <code>TRUE</code>
of the <code>evalmod</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduce_points</code></td>
<td>
<p>A Boolean value to decide whether the points should
be reduced. The points are reduced according to <code>x_bins</code>
of the <code>evalmod</code> function. The default values is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not used by this method.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>fortify</code> function returns a data frame for
<span class="pkg">ggplot2</span>.
</p>


<h3>See Also</h3>

<p><code>evalmod</code> for generating <code>S3</code> objects with
performance evaluation measures.
<code>autoplot</code> for plotting with <span class="pkg">ggplot2</span>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Load library
library(ggplot2)

##################################################
### Single model &amp; single test dataset
###

## Load a dataset with 10 positives and 10 negatives
data(P10N10)

## Generate an sscurve object that contains ROC and Precision-Recall curves
sscurves &lt;- evalmod(scores = P10N10$scores, labels = P10N10$labels)

## Let ggplot internally call fortify
p_rocprc &lt;- ggplot(sscurves, aes(x = x, y = y))
p_rocprc &lt;- p_rocprc + geom_line()
p_rocprc &lt;- p_rocprc + facet_wrap(~curvetype)
p_rocprc

## Explicitly fortify sscurves
ssdf &lt;- fortify(sscurves)

## Plot a ROC curve
p_roc &lt;- ggplot(subset(ssdf, curvetype == "ROC"), aes(x = x, y = y))
p_roc &lt;- p_roc + geom_line()
p_roc

## Plot a Precision-Recall curve
p_prc &lt;- ggplot(subset(ssdf, curvetype == "PRC"), aes(x = x, y = y))
p_prc &lt;- p_prc + geom_line()
p_prc

## Generate an sspoints object that contains basic evaluation measures
sspoints &lt;- evalmod(
  mode = "basic", scores = P10N10$scores,
  labels = P10N10$labels
)
## Fortify sspoints
ssdf &lt;- fortify(sspoints)

## Plot normalized ranks vs. precision
p_prec &lt;- ggplot(subset(ssdf, curvetype == "precision"), aes(x = x, y = y))
p_prec &lt;- p_prec + geom_point()
p_prec


##################################################
### Multiple models &amp; single test dataset
###

## Create sample datasets with 10 positives and 10 negatives
samps &lt;- create_sim_samples(1, 10, 10, "all")
mdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]]
)

## Generate an mscurve object that contains ROC and Precision-Recall curves
mscurves &lt;- evalmod(mdat)

## Let ggplot internally call fortify
p_rocprc &lt;- ggplot(mscurves, aes(x = x, y = y, color = modname))
p_rocprc &lt;- p_rocprc + geom_line()
p_rocprc &lt;- p_rocprc + facet_wrap(~curvetype)
p_rocprc

## Explicitly fortify mscurves
msdf &lt;- fortify(mscurves)

## Plot ROC curve
df_roc &lt;- subset(msdf, curvetype == "ROC")
p_roc &lt;- ggplot(df_roc, aes(x = x, y = y, color = modname))
p_roc &lt;- p_roc + geom_line()
p_roc

## Fortified data frame can be used for plotting a Precision-Recall curve
df_prc &lt;- subset(msdf, curvetype == "PRC")
p_prc &lt;- ggplot(df_prc, aes(x = x, y = y, color = modname))
p_prc &lt;- p_prc + geom_line()
p_prc

## Generate an mspoints object that contains basic evaluation measures
mspoints &lt;- evalmod(mdat, mode = "basic")

## Fortify mspoints
msdf &lt;- fortify(mspoints)

## Plot normalized ranks vs. precision
df_prec &lt;- subset(msdf, curvetype == "precision")
p_prec &lt;- ggplot(df_prec, aes(x = x, y = y, color = modname))
p_prec &lt;- p_prec + geom_point()
p_prec


##################################################
### Single model &amp; multiple test datasets
###

## Create sample datasets with 10 positives and 10 negatives
samps &lt;- create_sim_samples(5, 10, 10, "good_er")
mdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]],
  dsids = samps[["dsids"]]
)

## Generate an smcurve object that contains ROC and Precision-Recall curves
smcurves &lt;- evalmod(mdat, raw_curves = TRUE)

## Let ggplot internally call fortify
p_rocprc &lt;- ggplot(smcurves, aes(x = x, y = y, group = dsid))
p_rocprc &lt;- p_rocprc + geom_smooth(stat = "identity")
p_rocprc &lt;- p_rocprc + facet_wrap(~curvetype)
p_rocprc

## Explicitly fortify smcurves
smdf &lt;- fortify(smcurves, raw_curves = FALSE)

## Plot average ROC curve
df_roc &lt;- subset(smdf, curvetype == "ROC")
p_roc &lt;- ggplot(df_roc, aes(x = x, y = y, ymin = ymin, ymax = ymax))
p_roc &lt;- p_roc + geom_smooth(stat = "identity")
p_roc

## Plot average Precision-Recall curve
df_prc &lt;- subset(smdf, curvetype == "PRC")
p_prc &lt;- ggplot(df_prc, aes(x = x, y = y, ymin = ymin, ymax = ymax))
p_prc &lt;- p_prc + geom_smooth(stat = "identity")
p_prc

## Generate an smpoints object that contains basic evaluation measures
smpoints &lt;- evalmod(mdat, mode = "basic")

## Fortify smpoints
smdf &lt;- fortify(smpoints)

## Plot normalized ranks vs. precision
df_prec &lt;- subset(smdf, curvetype == "precision")
p_prec &lt;- ggplot(df_prec, aes(x = x, y = y, ymin = ymin, ymax = ymax))
p_prec &lt;- p_prec + geom_ribbon(aes(min = ymin, ymax = ymax),
  stat = "identity", alpha = 0.25,
  fill = "grey25"
)
p_prec &lt;- p_prec + geom_point(aes(x = x, y = y))
p_prec


##################################################
### Multiple models &amp; multiple test datasets
###

## Create sample datasets with 10 positives and 10 negatives
samps &lt;- create_sim_samples(5, 10, 10, "all")
mdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]],
  dsids = samps[["dsids"]]
)

## Generate an mscurve object that contains ROC and Precision-Recall curves
mmcurves &lt;- evalmod(mdat, raw_curves = TRUE)

## Let ggplot internally call fortify
p_rocprc &lt;- ggplot(mmcurves, aes(x = x, y = y, group = dsid))
p_rocprc &lt;- p_rocprc + geom_smooth(aes(color = modname), stat = "identity")
p_rocprc &lt;- p_rocprc + facet_wrap(~curvetype)
p_rocprc

## Explicitly fortify mmcurves
mmdf &lt;- fortify(mmcurves, raw_curves = FALSE)

## Plot average ROC curve
df_roc &lt;- subset(mmdf, curvetype == "ROC")
p_roc &lt;- ggplot(df_roc, aes(x = x, y = y, ymin = ymin, ymax = ymax))
p_roc &lt;- p_roc + geom_smooth(aes(color = modname), stat = "identity")
p_roc

## Plot average Precision-Recall curve
df_prc &lt;- subset(mmdf, curvetype == "PRC")
p_prc &lt;- ggplot(df_prc, aes(x = x, y = y, ymin = ymin, ymax = ymax))
p_prc &lt;- p_prc + geom_smooth(aes(color = modname), stat = "identity")
p_prc

## Generate an mmpoints object that contains basic evaluation measures
mmpoints &lt;- evalmod(mdat, mode = "basic")

## Fortify mmpoints
mmdf &lt;- fortify(mmpoints)

## Plot normalized ranks vs. precision
df_prec &lt;- subset(mmdf, curvetype == "precision")
p_prec &lt;- ggplot(df_prec, aes(x = x, y = y, ymin = ymin, ymax = ymax))
p_prec &lt;- p_prec + geom_ribbon(aes(min = ymin, ymax = ymax, group = modname),
  stat = "identity", alpha = 0.25,
  fill = "grey25"
)
p_prec &lt;- p_prec + geom_point(aes(x = x, y = y, color = modname))
p_prec

## End(Not run)

</code></pre>


</div>
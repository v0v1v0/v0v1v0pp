<div class="container">

<table style="width: 100%;"><tr>
<td>topN.new</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rank top-N highest-predicted items for a new user</h2>

<h3>Description</h3>

<p>Rank top-N highest-predicted items for a new user
</p>


<h3>Usage</h3>

<pre><code class="language-R">topN.new(
  model,
  X,
  n = 10,
  include = NULL,
  exclude = NULL,
  output_score = FALSE,
  l2_reg = model$l2_reg,
  l1_reg = model$l1_reg,
  weight_mult = model$weight_mult,
  maxupd = max(1000L, model$maxupd),
  nthreads = parallel::detectCores()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A Poisson factorization model as returned by 'poismf'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Data with the non-zero item indices and counts for this new user. Can be
passed as a sparse vector from package 'Matrix' ('Matrix::dsparseVector', which can
be created from indices and values through 'Matrix::sparseVector'), or as a 'data.frame',
in which case will take the first column as the item/column indices
(numeration starting at 1) and the second column
as the counts. If 'X' passed to 'poismf' was a 'data.frame', 'X' here must also be
a 'data.frame'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Number of top-N highest-predicted results to output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include</code></td>
<td>
<p>List of items which will be ranked. If passing this, will only
make a ranking among these items. If 'X' passed to 'poismf' was a
'data.frame', must match with the entries in its second column,
otherwise should match with the columns of 'X' (numeration starting at 1). Can only pass
one of 'include' or 'exclude.' Must not contain duplicated entries.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>List of items to exclude from the ranking. If passing this, will
rank all the items except for these. If 'X' passed to 'poismf' was a
'data.frame', must match with the entries in its second column,
otherwise should match with the columns of 'X' (numeration starting at 1). Can only pass
one of 'include' or 'exclude'. Must not contain duplicated entries.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_score</code></td>
<td>
<p>Whether to output the scores in addition to the IDs. If passing
'FALSE', will return a single array with the item IDs, otherwise
will return a list with the item IDs and the scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l2_reg</code></td>
<td>
<p>Strength of L2 regularization to use for optimizing the new factors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l1_reg</code></td>
<td>
<p>Strength of the L1 regularization. Not recommended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight_mult</code></td>
<td>
<p>Weight multiplier for the positive entries over the missing entries.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxupd</code></td>
<td>
<p>Maximum number of TNCG updates to perform. You might want to
increase this value depending on the use-case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nthreads</code></td>
<td>
<p>Number of parallel threads to use.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function calculates the latent factors in the same way as
'factors.single' - see the documentation of factors.single
for details.
</p>
<p>Just like topN, it does not exploit any potential sparsity in the
fitted matrices and vectors, so it might be a lot faster to produce the
recommendations externally (see the documentation for topN for details).
</p>
<p>The factors are initialized to the mean of each column in the fitted model.
</p>


<h3>Value</h3>


<ul>
<li>
<p> If passing 'output_score=FALSE' (the default), will return a vector of size 'n'
with the top-N highest predicted items for this user.If the 'X' data passed to
'poismf' was a 'data.frame', will contain the item IDs from its second column,
otherwise will be integers matching to the columns of 'X' (starting at 1). If
'X' was passed as 'data.frame', the entries in this vector might be coerced to
character regardless of their original type.
</p>
</li>
<li>
<p> If passing 'output_score=TRUE', will return a list, with the first entry
being the vector described above under name 'ix', and the second entry being the
associated scores, as a numeric vector of size 'n'.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>factors.single topN
</p>


</div>
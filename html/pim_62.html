<div class="container">

<table style="width: 100%;"><tr>
<td>model.matrix.pim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a model matrix for a probabilistic index model</h2>

<h3>Description</h3>

<p>This function creates a model matrix for use in a probabilistic
index model. This model matrix can be passed to <code>pim.fit</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">model.matrix(object, ...)

## S4 method for signature 'pim'
model.matrix(object, data, ...)

## S4 method for signature 'pim.formula'
model.matrix(
  object,
  data,
  model = c("difference", "marginal", "regular", "customized"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a <code>pim.formula</code> object that contains
the formula necessary for constructing the model matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments passed to or from other methods.
This is currently only implemented in concordance with
the generic <code>model.matrix</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an optional argument specifying the data frame for which
the model matrix should be constructed. See also 
<code>model.matrix)</code> in the <code>stats</code> package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>a single character value with possible values "difference" 
(the default), "marginal", "regular" or "customized". See also
<code>pim</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a design matrix for a pim model
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("FEVData")
# Create the "model frame"
FEVenv &lt;- new.pim.env(FEVData, compare="unique")
# This includes the poset
pos &lt;- poset(FEVenv, as.list=TRUE)

# create the formula and bind it to the pim.environment.
FEVform &lt;- new.pim.formula(
  Age ~ I(L(Height) - R(Height))  ,
  FEVenv
)

# Use this formula object to construct the model matrix
# use the default model ( difference )
MM &lt;- model.matrix(FEVform)

# Use this formula object to construct the pseudo response
Y &lt;- response(FEVform)

# Now pim.fit can do what it does
res &lt;- pim.fit(MM,Y, estim = "estimator.glm", penv=FEVenv)

</code></pre>


</div>
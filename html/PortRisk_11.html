<div class="container">

<table style="width: 100%;"><tr>
<td>risk.attribution</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Risk Attribution of a Portfolio</h2>

<h3>Description</h3>

<p>Combined representation of the risk attributes MCTR, CCTR, CCTR percentage, Portfolio Volatility and individual Volatility of the stocks in a given portfolio for a given weight and time period.
</p>


<h3>Usage</h3>

<pre><code class="language-R">risk.attribution(tickers, weights = rep(1,length(tickers)),
                  start, end, data, CompanyList = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tickers</code></td>
<td>

<p>A character vector of ticker names of companies in the portfolio.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>

<p>A numeric vector of weights assigned to the stocks corresponding to the ticker names in <code>tickers</code>. The sum of the weights need not to be 1 or 100 (in percentage). By default, equal weights to all the stocks are assigned (i.e., by <code>rep(1, length(tickers))</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>

<p>Start date in the format "yyyy-mm-dd".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>

<p>End date in the format "yyyy-mm-dd".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A <code>zoo</code> object whose <code>rownames</code> are dates and <code>colnames</code> are ticker names of the companies. Values of the table corresponds to the daily returns of the stocks of corresponding ticker names.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CompanyList</code></td>
<td>

<p>A dataframe containing all the Company names corresponding to the ticker names as its <code>rownames</code>. The input for this argument is optional.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For details of the risk attributes refer to the corresponding functions. See <code>volatility</code> for individual volatility of the stocks and <code>portvol</code> for portfolio volatility, MCTR &amp; CCTR.
CCTR percentage for a stock in the portfolio is defined as the percentage of the portfolio volatility contributed by that stock for the given weight. i.e.,
</p>
<p style="text-align: center;"><code class="reqn">CCTR(\%) = \frac{CCTR}{\sigma}*100</code>
</p>
<p> where <code class="reqn">\sigma</code> is the portfolio volatility.
</p>


<h3>Value</h3>

<p>Returns a dataframe with <code>rownames</code> as the ticker names as given in the input <code>tickers</code> with the last row corresponding to the portfolio values. The result contains the following columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Company Name</code></td>
<td>
<p>Optional. Available only if the dataframe with the company names corresponding to the ticker names as <code>rownames</code> is supplied as input in <code>risk.attribution</code> for the argument <code>CompanyList</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Weight</code></td>
<td>
<p>Standardized value of the weights assigned to the stocks in the portfolio. Value of this column corresponding to portfolio is the sum of the weights (i.e. 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MCTR</code></td>
<td>
<p>Marginal Contribution to Total Risk (MCTR) in percentage. MCTR corresponding to the portfolio will be shown as <code>NA</code>, since it is meaningless.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CCTR</code></td>
<td>
<p>Conditional Contribution to Total Risk (CCTR) in percentage. CCTR corresponding to the portfolio is the sum of the CCTR values, which is the portfolio volatility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CCTR(%)</code></td>
<td>
<p>Percentage of the portfolio volatility contributed by the stock for the given weight. Clearly, CCTR percentage corresponding to the portfolio is 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Volatility</code></td>
<td>
<p>Individual volatility of the stocks in percentage. Note that, the value of this column corresponding to the portfolio is not the sum of this column. It is the portfolio volatility.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>In the result or output (see example), both the values of the last row (Portfolio) corresponding to the columns CCTR and Volatility are same (Portfolio Volatility). It should also be noted that, Portfolio Volatility is the sum of CCTR values corresponding to all the stocks but not the sum of individual Volatility of the stocks.
</p>


<h3>See Also</h3>

<p><code>volatility</code>, 
<code>portvol</code>, 
<code>mctr</code>, 
<code>cctr</code>, 
<code>zoo</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load the data 'SnP500Returns'
data(SnP500Returns)

# consider the portfolio containing the stocks of the companies
# Apple, IBM, Intel, Microsoft
pf &lt;- c("AAPL","IBM","INTC","MSFT")

# suppose the amount of investments in the above stocks are
# $10,000, $40,000, $20,000 &amp; $30,000 respectively
wt &lt;- c(10000,40000,20000,30000) # weights

# risk attribution for the portfolio 'pf' with weights 'wt'
# for the time period January 1, 2013 - January 31, 2013
risk.attribution(tickers = pf, weights = wt,
                  start = "2013-01-01", end = "2013-01-31",
                  data = SnP500Returns)

# to attach the company names corresponding to the ticker names
# load the dataset containing the company names
data(SnP500List)
risk.attribution(tickers = pf, weights = wt,
                  start = "2013-01-01", end = "2013-01-31",
                  data = SnP500Returns, CompanyList = SnP500List)
</code></pre>


</div>
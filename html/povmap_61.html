<div class="container">

<table style="width: 100%;"><tr>
<td>map_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualizes Regional Disaggregated Estimates on a Map</h2>

<h3>Description</h3>

<p>Function <code>map_plot</code> creates spatial visualizations of the estimates
obtained by small area estimation methods or direct estimation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">map_plot(
  object,
  indicator = "all",
  MSE = FALSE,
  CV = FALSE,
  map_obj = NULL,
  map_dom_id = NULL,
  map_tab = NULL,
  color = c("white", "red4"),
  scale_points = NULL,
  guide = "colourbar",
  return_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of type emdi, containing the estimates to be
visualized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indicator</code></td>
<td>
<p>optional character vector that selects which indicators
shall be returned: (i) all calculated indicators ("all");
(ii) each indicator name: "Mean", "Quantile_10", "Quantile_25", "Median",
"Quantile_75", "Quantile_90", "Head_Count", "Poverty_Gap", "Gini",
"Quintile_Share" or the function name/s of "custom_indicator/s";
(iii) groups of indicators: "Quantiles", "Poverty" or
"Inequality". Note, additional custom indicators can be
defined as argument for model-based approaches (see also <code>ebp</code>)
and do not appear in groups of indicators even though these might belong to
one of the groups. If the <code>model</code> argument is of type "fh",
indicator can be set to "all", "Direct", FH", or "FH_Bench" (if emdi
object is overwritten by function benchmark). Defaults to "all".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MSE</code></td>
<td>
<p>optional logical. If <code>TRUE</code>, the MSE is also visualized.
Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CV</code></td>
<td>
<p>optional logical. If <code>TRUE</code>, the CV is also visualized.
Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_obj</code></td>
<td>
<p>an <code>sf, data.frame</code> object as defined by the
<span class="pkg">sf</span> package on which the data should be visualized. The typical example
is polygon shapefile object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_dom_id</code></td>
<td>
<p>a character string containing the name of a variable in
<code>map_obj</code> that indicates the domains.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_tab</code></td>
<td>
<p>a <code>data.frame</code> object with two columns that match the
domain variable from the census data set (first column) with the domain
variable in the map_obj (second column). This should only be used if the IDs
in both objects ('map_obj' and 'object') differ.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>a <code>vector</code> of length 2 defining the lowest and highest
color in the plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_points</code></td>
<td>
<p>a structure defining the lowest and the highest
value of the colorscale. If a numeric vector of length two is given, this
scale will be used for every plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>guide</code></td>
<td>
<p>character passed to
<code>scale_colour_gradient</code> from <span class="pkg">ggplot2</span>.
Possible values are "none", "colourbar", and "legend".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_data</code></td>
<td>
<p>if set to <code>TRUE</code>, a fortified data frame including
the map data as well as the chosen indicators is returned. Customized maps
can easily be obtained from this data frame via the package <span class="pkg">ggplot2</span>.
Defaults to <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Creates the plots demanded, and, if selected, a fortified data.frame
containing the mapdata and chosen indicators.
</p>


<h3>See Also</h3>

<p><code>direct</code>, <code>ebp</code>, <code>fh</code>,
<code>emdiObject</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data("eusilcA_pop")
data("eusilcA_smp")

# Generate emdi object with additional indicators; here via function ebp()
emdi_model &lt;- ebp(
  fixed = eqIncome ~ gender + eqsize + cash +
    self_empl + unempl_ben + age_ben + surv_ben + sick_ben +
    dis_ben + rent + fam_allow + house_allow + cap_inv +
    tax_adj, pop_data = eusilcA_pop,
  pop_domains = "district", smp_data = eusilcA_smp,
  smp_domains = "district", threshold = 11064.82,
  transformation = "box.cox", L = 50, MSE = TRUE, B = 50
)

# Load shape file
load_shapeaustria()

# Create map plot for mean indicator - point and MSE estimates but no CV
map_plot(
  object = emdi_model, MSE = TRUE, CV = FALSE,
  map_obj = shape_austria_dis, indicator = c("Mean"),
  map_dom_id = "PB"
)

# Create a suitable mapping table to use numerical identifiers of the shape
# file

# First find the right order
dom_ord &lt;- match(shape_austria_dis$PB, emdi_model$ind$Domain)

# Create the mapping table based on the order obtained above
map_tab &lt;- data.frame(
  pop_data_id = emdi_model$ind$Domain[dom_ord],
  shape_id = shape_austria_dis$BKZ
)

# Create map plot for mean indicator - point and CV estimates but no MSE
# using the numerical domain identifiers of the shape file

map_plot(
  object = emdi_model, MSE = FALSE, CV = TRUE,
  map_obj = shape_austria_dis, indicator = c("Mean"),
  map_dom_id = "BKZ", map_tab = map_tab
)

</code></pre>


</div>
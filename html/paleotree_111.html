<div class="container">

<table style="width: 100%;"><tr>
<td>modelMethods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Model Function Methods: Parameter Names, Bounds and Initial Values</h2>

<h3>Description</h3>

<p>A large number of functions for obtaining and modifying the parameters
of likelihood models made in <code>paleotree</code>. 
These functions allow users to obtain
or set parameter names, or obtain and set parameter bounds, both of which
are treated as an attribute of the function class used by paleotree. In
practice, this allows users to quickly obtain parameter names and upper
and lower values for use in bounded optimizers, including reasonable
starting values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">parnames(x, ...)

## S3 method for class 'paleotreeFunc'
parnames(x, ...)

## S3 method for class 'constrained'
parnames(x, ...)

parnames(x) &lt;- value

## S3 replacement method for class 'constrained'
parnames(x) &lt;- value

## S3 replacement method for class 'paleotreeFunc'
parnames(x) &lt;- value

parbounds(x, ...)

## S3 method for class 'paleotreeFunc'
parbounds(x, ...)

## S3 method for class 'constrained'
parbounds(x, ...)

parbounds(x) &lt;- value

## S3 replacement method for class 'constrained'
parbounds(x) &lt;- value

## S3 replacement method for class 'paleotreeFunc'
parbounds(x) &lt;- value

parLower(x, ...)

## S3 method for class 'constrained'
parLower(x, ...)

## S3 method for class 'paleotreeFunc'
parLower(x, ...)

parLower(x) &lt;- value

## S3 replacement method for class 'constrained'
parLower(x) &lt;- value

## S3 replacement method for class 'paleotreeFunc'
parLower(x) &lt;- value

parUpper(x, ...)

## S3 method for class 'constrained'
parUpper(x, ...)

## S3 method for class 'paleotreeFunc'
parUpper(x, ...)

parUpper(x) &lt;- value

## S3 replacement method for class 'constrained'
parUpper(x) &lt;- value

## S3 replacement method for class 'paleotreeFunc'
parUpper(x) &lt;- value

parInit(x, ...)

## S3 method for class 'constrained'
parInit(x, ...)

## S3 method for class 'paleotreeFunc'
parInit(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A function of <code>S3</code> class <code>'paleotreeFunc'</code> with all necessary attributes
expected of that class, which include parameter names and upper and lower bounds.
As I have deliberately not exported the function which creates this class, it
should be impossible for regular users to obtain such objects easily without
using one of the <code>make</code> functions, which automatically output a function of the
appropriate class and attributes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>'Ignored arguments to future methods' (i.e. for <code>diversitree</code>). Kept here only
so <code>constrainParPaleo</code> is kept as close to the parent method in d<code>diversitree</code> as possible.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>The new value with which to replace the parameter names or bounds. Must
be a vector of the same length as the number of parameters. For <code>parbounds</code>, must
be a list composed of two vectors.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Parameter names cannot be changed for a constrained function.
</p>
<p>The <code>parInit</code> function calls the bounds for each parameter and gives a randomly
selected value selected from a uniform distribution, using the parameter bounds
for each parameter as the bounds on the uniform distribution. This users a
shorthand to quickly generate initial parameter values which are within the
set bounds, for use in functions such as <code>optim</code>. The random
sampling of initial values allows a user to quickly assess if initial
parameter values affect the optimization by simply rerunning the function on new values.
Infinite initial parameter values (resulting from infinite bounds) are discarded, and
replaced with the lower bound value (assuming only upper bounds are infinite...).
Some randomly selected initial parameter values may be too high (due to the liberal
upper bounds I set for parameters in many of the likelihood functions) and
thus users should always try slightly different values to see if the resulting
maximum likelihood parameter values change.
</p>
<p>As <code>parInit</code> depends on the upper and lower bounds attribute, no function is offered
to allow it to be replaced (as there is nothing to replace!).
</p>


<h3>Value</h3>

<p>Returns the sought parameter names, bounds or initial values or (for the replacement methods) 
returns a modified function with the respective attributes altered.
</p>


<h3>Author(s)</h3>

<p>These functions are strongly based on or inspired by the <code>argnames</code> functions
provided for handling models in Rich Fitzjohn's library <code>diversitree</code>, but
the functions presented here are derivations written by David Bapst.
</p>


<h3>See Also</h3>

<p>These model methods were introduced to interact with the new model framework introduced in
<code>paleotree</code> version &gt;1.9, in particular to interface with <code>constrainParPaleo</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#example with make_durationFreqCont
set.seed(444)
record &lt;- simFossilRecord(p = 0.1, q = 0.1, nruns = 1,
	nTotalTaxa = c(30,40), nExtant = 0)
taxa &lt;- fossilRecord2fossilTaxa(record)
rangesCont &lt;- sampleRanges(taxa,r = 0.5)
likFun &lt;- make_durationFreqCont(rangesCont)

#get parameter names
parnames(likFun)

#get the bounds for those parameters
parbounds(likFun)

#can also get these seperately
parLower(likFun)
parUpper(likFun)

#initial parameter values
parInit(likFun)   #arbitrary midway value between par bounds

#can then use these in optimizers, such as optim with L-BFGS-B
#see the example for make_durationFreqCont

#renaming parameter names
likFun2 &lt;- likFun
parnames(likFun2) &lt;- c("extRate","sampRate")
parnames(likFun2)
#test if reset correctly
parnames(likFun2) == c("extRate","sampRate")
#also works for constrained functions
constrainFun &lt;- constrainParPaleo(likFun,q.1~r.1)
parnames(constrainFun)
#also modified the parameter bounds, see!
parbounds(constrainFun)
parInit(constrainFun)
#but cannot rename parameter for constrained function!

</code></pre>


</div>
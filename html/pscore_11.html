<div class="container">

<table style="width: 100%;"><tr>
<td>mahalanobisComposite</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Score Data Using the Mahalanobis Distance</h2>

<h3>Description</h3>

<p>Create a composite using the Mahalanobis Distance
</p>


<h3>Usage</h3>

<pre><code class="language-R">mahalanobisComposite(object, ncomponents, pca)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class <code>CompositeReady</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncomponents</code></td>
<td>
<p>the number of components to use from the
principal component analysis. If missing, defaults to the
number of columns in the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pca</code></td>
<td>
<p>An optional PCA object from princomp to use.
If not passed, will be calculated from the data.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An S4 object of class <code>MahalanobisScores</code>.
</p>


<h3>See Also</h3>

<p>Other composite: 
<code>factorComposite()</code>,
<code>sumComposite()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># this example creates distances for the built in mtcars data
# see ?mtcars for more details
# The distances are calculated from the "best" in the dataset
# First we create an appropriate CompositeData class object
# higher mpg &amp; hp are better and lower wt &amp; qsec are better
d &lt;- CompositeData(mtcars[, c("mpg", "hp", "wt", "qsec")],
  thresholds = list(one = with(mtcars, c(
    mpg = max(mpg),
    hp = max(hp),
    wt = min(wt),
    qsec = min(qsec)))
  ),
  higherisbetter = c(TRUE, TRUE, FALSE, FALSE))

# create the distance scores
# and the composite
# covariance matrix will be calculated from the data
# and data will be standardized to unit variance by default
dres &lt;- prepareComposite(d)

# see a density plot of the distance scores
dres@distanceDensity
# regular summary of distance scores
summary(dres@distances)

# examine covariance matrix
round(dres@covmat,2)

# now we can create the composite based on mahalanobis distances
# from our defined thresholds
mcomp &lt;- mahalanobisComposite(dres, 1)

# view a histogram of the composite scores
mcomp@scoreHistogram

# summarize the composite scores
summary(mcomp@scores)

# check the screeplot and loadings
mcomp@screePlot
mcomp@loadingGraph
# examine the loadings as a table
mcomp@loadingTable

# one component is adequate to explain these data
# to be safe can pick first two and re-run model

# use only first two components
mcomp2 &lt;- mahalanobisComposite(dres, ncomponents = 2)

# view a histogram of the updated composite scores
mcomp2@scoreHistogram

# summarize the composite scores
summary(mcomp2@scores)

# compare using all versus two components
plot(mcomp@scores, mcomp2@scores)

# cleanup
rm(d, dres, mcomp, mcomp2)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>varimp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Variable Importance </h2>

<h3>Description</h3>

<p>Standard and conditional variable importance for ‘cforest’, following the permutation
principle of the ‘mean decrease in accuracy’ importance in ‘randomForest’.
</p>


<h3>Usage</h3>

<pre><code class="language-R">varimp(object, mincriterion = 0, conditional = FALSE, 
       threshold = 0.2, nperm = 1, OOB = TRUE, pre1.0_0 = conditional)
varimpAUC(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p> an object as returned by <code>cforest</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mincriterion</code></td>
<td>
<p> the value of the test statistic or 1 - p-value that
must be exceeded in order to include a split in the 
computation of the importance. The default <code>mincriterion = 0</code>
guarantees that all splits are included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditional</code></td>
<td>
<p> a logical determining whether unconditional or conditional 
computation of the importance is performed. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p> the threshold value for (1 - p-value) of the association 
between the variable of interest and a covariate, which must be 
exceeded inorder to include the covariate in the conditioning 
scheme for the variable of interest (only relevant if 
<code>conditional = TRUE</code>). A threshold value of zero includes 
all covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nperm</code></td>
<td>
<p> the number of permutations performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OOB</code></td>
<td>
<p> a logical determining whether the importance is computed from the out-of-bag 
sample or the learning sample (not suggested).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre1.0_0</code></td>
<td>
<p> Prior to party version 1.0-0, the actual data values
were permuted according to the original permutation
importance suggested by Breiman (2001). Now the assignments
to child nodes of splits in the variable of interest
are permuted as described by Hapfelmeier et al. (2012),
which allows for missing values in the explanatory
variables and is more efficient wrt memory consumption and 
computing time. This method does not apply to conditional
variable importances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to <code>varImpAUC</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Function <code>varimp</code> can be used to compute variable importance measures
similar to those computed by <code>importance</code>. Besides the
standard version, a conditional version is available, that adjusts for correlations between
predictor variables. 
</p>
<p>If <code>conditional = TRUE</code>, the importance of each variable is computed by permuting 
within a grid defined by the covariates that are associated  (with 1 - p-value 
greater than <code>threshold</code>) to the variable of interest.
The resulting variable importance score is conditional in the sense of beta coefficients in   
regression models, but represents the effect of a variable in both main effects and interactions.
See Strobl et al. (2008) for details.
</p>
<p>Note, however, that all random forest results are subject to random variation. Thus, before
interpreting the importance ranking, check whether the same ranking is achieved with a
different random seed – or otherwise increase the number of trees <code>ntree</code> in 
<code>ctree_control</code>.
</p>
<p>Note that in the presence of missings in the predictor variables the procedure
described in Hapfelmeier et al. (2012) is performed.
</p>
<p>Function <code>varimpAUC</code> is a wrapper for
<code>varImpAUC</code> which implements AUC-based variables importances as
described by Janitza et al. (2012).  Here, the area under the curve
instead of the accuracy is used to calculate the importance of each variable. 
This AUC-based variable importance measure is more robust towards class imbalance.
</p>
<p>For right-censored responses, <code>varimp</code> uses the integrated Brier score as a 
risk measure for computing variable importances. This feature is extremely slow and
experimental; use at your own risk.
</p>


<h3>Value</h3>

<p>A vector of ‘mean decrease in accuracy’ importance scores.
</p>


<h3>References</h3>

 
<p>Leo Breiman (2001). Random Forests. <em>Machine Learning</em>, 45(1), 5–32.
</p>
<p>Alexander Hapfelmeier, Torsten Hothorn, Kurt Ulm, and Carolin Strobl (2012).
A New Variable Importance Measure for Random Forests with Missing Data.
<em>Statistics and Computing</em>, <a href="https://doi.org/10.1007/s11222-012-9349-1">doi:10.1007/s11222-012-9349-1</a>
</p>
<p>Torsten Hothorn, Kurt Hornik, and Achim Zeileis (2006b). Unbiased
Recursive Partitioning: A Conditional Inference Framework.
<em>Journal of Computational and Graphical Statistics</em>, <b>15</b> (3),
651-674.  Preprint available from 
<a href="https://www.zeileis.org/papers/Hothorn+Hornik+Zeileis-2006.pdf">https://www.zeileis.org/papers/Hothorn+Hornik+Zeileis-2006.pdf</a>
</p>
<p>Silke Janitza, Carolin Strobl and Anne-Laure Boulesteix (2013). An AUC-based Permutation 
Variable Importance Measure for Random Forests. BMC Bioinformatics.2013, <b>14</b> 119.
<a href="https://doi.org/10.1186/1471-2105-14-119">doi:10.1186/1471-2105-14-119</a>
</p>
<p>Carolin Strobl, Anne-Laure Boulesteix, Thomas Kneib, Thomas Augustin, and Achim Zeileis (2008).
Conditional Variable Importance for Random Forests. <em>BMC Bioinformatics</em>, <b>9</b>, 307. 
<a href="https://doi.org/10.1186/1471-2105-9-307">doi:10.1186/1471-2105-9-307</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">    
   set.seed(290875)
   readingSkills.cf &lt;- cforest(score ~ ., data = readingSkills, 
       control = cforest_unbiased(mtry = 2, ntree = 50))

   # standard importance
   varimp(readingSkills.cf)
   # the same modulo random variation
   varimp(readingSkills.cf, pre1.0_0 = TRUE)

   # conditional importance, may take a while...
   varimp(readingSkills.cf, conditional = TRUE)

   ## Not run: 
   data("GBSG2", package = "TH.data")
   ### add a random covariate for sanity check
   set.seed(29)
   GBSG2$rand &lt;- runif(nrow(GBSG2))
   object &lt;- cforest(Surv(time, cens) ~ ., data = GBSG2, 
                     control = cforest_unbiased(ntree = 20)) 
   vi &lt;- varimp(object)
   ### compare variable importances and absolute z-statistics
   layout(matrix(1:2))
   barplot(vi)
   barplot(abs(summary(coxph(Surv(time, cens) ~ ., data = GBSG2))$coeff[,"z"]))
   ### looks more or less the same
   
## End(Not run)
</code></pre>


</div>
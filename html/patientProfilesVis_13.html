<div class="container">

<table style="width: 100%;"><tr>
<td>formatTimeInterval</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set missing start/end time variable in the data.</h2>

<h3>Description</h3>

<p>Set missing start/end time variable in the data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">formatTimeInterval(
  data,
  timeStartVar,
  timeStartLab = getLabelVar(timeStartVar, labelVars = labelVars),
  timeEndVar,
  timeEndLab = getLabelVar(timeEndVar, labelVars = labelVars),
  timeStartShapeVar = NULL,
  timeEndShapeVar = NULL,
  subjectVar = "USUBJID",
  timeLim = NULL,
  timeLimData = NULL,
  timeLimStartVar = NULL,
  timeLimStartLab = getLabelVar(timeLimStartVar, labelVars = labelVars),
  timeLimEndVar = NULL,
  timeLimEndLab = getLabelVar(timeLimEndVar, labelVars = labelVars),
  timeImpType = c("minimal", "data-based", "none"),
  labelVars = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data.frame with data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeStartVar</code></td>
<td>
<p>String, variable of <code>data</code> 
with start of time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeStartLab</code></td>
<td>
<p>String, label for <code>timeStartVar</code>,
displayed in a message and in the plot caption.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEndVar</code></td>
<td>
<p>String, variable of <code>data</code> 
with end of time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEndLab</code></td>
<td>
<p>String, label for <code>timeEndVar</code>,
displayed in a message and in the plot caption.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeStartShapeVar</code></td>
<td>
<p>(optional) String, variable of <code>data</code> 
used for the shape of the symbol displayed 
at the start of the time interval.<br>
If not specified, default shape palette is used,
see section 'Time interval representation'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEndShapeVar</code></td>
<td>
<p>String, variable of <code>data</code> 
used for the shape of the symbol 
displayed at the end of the time interval.
If not specified, default shape palette is used,
see section 'Time interval representation'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subjectVar</code></td>
<td>
<p>String, variable of <code>data</code> with subject ID</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLim</code></td>
<td>
<p>(optional) Vector of length 2 with time limits (x-axis).
If not specified, these are extracted from the minimum <code>timeStartVar</code> 
and maximum <code>timeEndVar</code> per subject.<br>
The time limits are stored as attributes of the plots,
used to align the plots in the final report.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLimData</code></td>
<td>
<p>Data.frame with data used to impute time
in case some time records are missing in <code>data</code>, 
see section: 'Time interval representation'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLimStartVar</code></td>
<td>
<p>String, variable of <code>timeLimData</code> with 
start of the time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLimStartLab</code></td>
<td>
<p>String, label for <code>timeLimeStartVar</code>,
displayed in a message and in the plot caption.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLimEndVar</code></td>
<td>
<p>String, variable of <code>timeLimData</code> with 
end of the time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLimEndLab</code></td>
<td>
<p>String, label for <code>timeLimEndVar</code>,
displayed in a message and in the plot caption.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeImpType</code></td>
<td>
<p>String with imputation type: 'minimal' (default),
'data-based' or 'none', see section: 'Time interval representation'.<br>
This imputation type is not used if a dataset used to impute time is 
specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelVars</code></td>
<td>
<p>Named character vector with variable labels 
(names are the variable code)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list with:
</p>

<ul>
<li>
<p>'data': Data with:
</p>

<ul>
<li>
<p>imputed <code>timeStartVar</code> and <code>timeEndVar</code>
</p>
</li>
<li>
<p>new column 'timeStartStatus': 
character vector containing status of <code>timeStartVar</code> variable:
'Complete' or 'Missing start' or NA
</p>
</li>
<li>
<p>new column 'timeEndStatus': 
character vector containing status of <code>timeEndVar</code> variable:
'Complete' or 'Missing end' or NA
</p>
</li>
</ul>
</li>
<li>
<p>'timeLim': vector of length 2 with minimum/maximum time limits 
across subjects.
</p>
</li>
<li>
<p>'timeLimSpecified': vector of length 2 with time limits as specified 
by the user, either extracted from <code>timeLim</code> or from <code>timeLimData</code>.
If missing value within <code>timeLim</code>, the corresponding minimum/maximum
value in the (updated) data is used.
</p>
</li>
<li>
<p>'timeShapePalette': Named character vector with symbols for the 
different time status
</p>
</li>
<li>
<p>'caption': String with extra explanation concerning imputation that 
could be included in plot caption.
</p>
</li>
</ul>
<h3>Time interval representation</h3>

<p>In case the start or the end of the time interval contain missing values:
</p>

<ul>
<li>
<p>if a dataset (<code>timeLimData</code>), start (<code>timeLimStartVar</code>)
and end (<code>timeLimEndVar</code>) variables are specified: 
</p>

<ol>
<li>
<p>for each subject: 
</p>

<ul>
<li>
<p>the minimum and maximum time values across these specified time 
variables are extracted
</p>
</li>
<li>
<p>missing start values are replaced by the minimum time
</p>
</li>
<li>
<p>missing start values are replaced by the maximum time
</p>
</li>
</ul>
</li>
<li>
<p>if all values are missing for this subject, they are taken across subjects
</p>
</li>
</ol>
</li>
<li>
<p>otherwise, depending on the imputation type (<code>timeImpType</code>):
</p>

<ul>
<li>
<p>'minimal' (by default): 
</p>

<ul>
<li>
<p>if the start and the end of the interval are missing: 
no imputation is done, only the label is displayed
</p>
</li>
<li>
<p>if the start time is missing and the end time is not missing: 
start time is imputed with end time, and status is set to 'Missing start'
</p>
</li>
<li>
<p>if the end time is missing and the start time is not missing: 
end time is imputed with start time, and status is set to 'Missing end'
</p>
</li>
</ul>
</li>
<li>
<p>'data-based' (default in version &lt; 1.0.0): 
minimum/maximum values in the start/end time variables in the data are considered
for the specific subject (if available). If there are missing for a specific subject,
they are taken across subjects. If all time are missings, the range is set to 0 and Inf
</p>
</li>
<li>
<p>'none': no imputation is done
</p>
</li>
</ul>
</li>
</ul>
<p>The symbols displayed at the start and end of the interval are:
</p>

<ul>
<li>
<p>by default: 
</p>

<ul>
<li>
<p>a filled square labelled 'Complete' if the time is not missing
</p>
</li>
<li>
<p>a filled left-directed arrow in case of missing start time
</p>
</li>
<li>
<p>a filled right-directed arrow in case of missing end time
</p>
</li>
</ul>
</li>
<li>
<p>if the variable(s) used for the shape of the start or end 
of the interval are specified (via 
<code>timeStartShapeVar</code>/<code>timeEndShapeVar</code>): 
labels are based on these variables, and a standard shape palette is used
</p>
</li>
</ul>
<p>The time limits are the same across subjects, and set to:
</p>

<ul>
<li>
<p><code>timeLim</code> if specified
</p>
</li>
<li>
<p>maximum time range in <code>timeLimStartVar</code> and 
<code>timeLimEndVar</code> in <code>timeLimData</code> 
if specified
</p>
</li>
<li>
<p>the maximum range on the data obtained after imputation of missing 
values
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Laure Cougnaud
</p>


</div>
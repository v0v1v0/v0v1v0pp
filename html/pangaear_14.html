<div class="container">

<table style="width: 100%;"><tr>
<td>pg_search_es</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Search the Pangaea database with Elasticsearch</h2>

<h3>Description</h3>

<p>Search the Pangaea database with Elasticsearch
</p>


<h3>Usage</h3>

<pre><code class="language-R">pg_search_es(
  query = NULL,
  size = 10,
  from = NULL,
  source = NULL,
  df = NULL,
  analyzer = NULL,
  default_operator = NULL,
  explain = NULL,
  sort = NULL,
  track_scores = NULL,
  timeout = NULL,
  terminate_after = NULL,
  search_type = NULL,
  lowercase_expanded_terms = NULL,
  analyze_wildcard = NULL,
  version = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>(character) Query terms..</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>(character) The number of hits to return. Pass in as a
character string to avoid problems with large number conversion to
scientific notation. Default: 10. The default maximum is 10,000 - however,
you can change this default maximum by changing the
<code>index.max_result_window</code> index level parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>(character) The starting from index of the hits to return.
Pass in as a character string to avoid problems with large number
conversion to scientific notation. Default: 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>(character) character vector of fields to return</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>(character) The default field to use when no field prefix is
defined within the query.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>analyzer</code></td>
<td>
<p>(character) The analyzer name to be used when analyzing the
query string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default_operator</code></td>
<td>
<p>(character) The default operator to be used, can be
<code>AND</code> or <code>OR</code>. Default: <code>OR</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>explain</code></td>
<td>
<p>(logical) For each hit, contain an explanation of how
scoring of the hits was computed. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>(character) Sorting to perform. Can either be in the form of
fieldName, or <code>fieldName:asc</code>/<code>fieldName:desc</code>. The fieldName
can either be an actual field within the document, or the special
<code style="white-space: pre;">⁠_score⁠</code> name to indicate sorting based on scores. There can be several
sort parameters (order is important).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>track_scores</code></td>
<td>
<p>(logical) When sorting, set to <code>TRUE</code> in order to
still track scores and return them as part of each hit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p>(numeric) A search timeout, bounding the search request to
be executed within the specified time value and bail with the hits
accumulated up to that point when expired. Default: no timeout.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>terminate_after</code></td>
<td>
<p>(numeric) The maximum number of documents to collect
for each shard, upon reaching which the query execution will terminate
early. If set, the response will have a boolean field terminated_early to
indicate whether the query execution has actually terminated_early.
Default: no terminate_after</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search_type</code></td>
<td>
<p>(character) The type of the search operation to perform.
Can be <code>query_then_fetch</code> (default) or <code>dfs_query_then_fetch</code>.
Types <code>scan</code> and <code>count</code> are deprecated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lowercase_expanded_terms</code></td>
<td>
<p>(logical) Should terms be automatically
lowercased or not. Default: <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>analyze_wildcard</code></td>
<td>
<p>(logical) Should wildcard and prefix queries be
analyzed or not. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>(logical) Print the document version with each document.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Curl options passed on to crul::verb-GET</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>An interface to Pangaea's Elasticsearch query interface.
You can also just use <a href="https://github.com/ropensci/elastic">elastic</a>
package to interact with it. The base URL is
https://ws.pangaea.de/es/pangaea/panmd/_search
</p>


<h3>Value</h3>

<p>tibble/data.frame, empty if no results
</p>


<h3>See Also</h3>

<p><code>pg_search()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
(res &lt;- pg_search_es())
attributes(res)
attr(res, "total")
attr(res, "max_score")

pg_search_es(query = 'water', source = c('parentURI', 'minElevation'))
pg_search_es(query = 'water', size = 3)
pg_search_es(query = 'water', size = 3, from = 10)

pg_search_es(query = 'water sky', default_operator = "OR")
pg_search_es(query = 'water sky', default_operator = "AND")

pg_search_es(query = 'water', sort = "minElevation")
pg_search_es(query = 'water', sort = "minElevation:desc")

## End(Not run)
</code></pre>


</div>
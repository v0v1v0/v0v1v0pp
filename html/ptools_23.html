<div class="container">

<table style="width: 100%;"><tr>
<td>prep_grid</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates vector grid cells over study area</h2>

<h3>Description</h3>

<p>Creates grid cells of given size over particular study area.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prep_grid(outline, size, clip_level = 0, point_over = NULL, point_n = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>outline</code></td>
<td>
<p>SpatialPolygon or SpatialPolygonDataFrame that defines the area to draw grid cells over</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>scaler for the size of the grid cells (one side), in whatever units the outline is in</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clip_level</code></td>
<td>
<p>, you can clip grid cells if they are not entirely inside the outlined area, defaults to <code>0</code>
so any cells at least touching are included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point_over</code></td>
<td>
<p>default <code>NULL</code>, but can pass in SpatialPoints and will only include grid cells that have at least one point</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point_n</code></td>
<td>
<p>default 0, only used if passing in <code>point_over</code>. Will return only grid cells with greater than <code>point_n</code> points</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This generates a vector grid over the study area of interest. Intentionally working with vector data for use with
other feature engineering helper functions (that can pass in X/Y).
</p>


<h3>Value</h3>

<p>A SpatialPolygonDataFrame object with columns
</p>

<ul>
<li> <p><code>id</code>, integer id value (not the same as row.names!)
</p>
</li>
<li> <p><code>x</code>, x centroid of grid cell
</p>
</li>
<li> <p><code>y</code>, y centroid of grid cell
</p>
</li>
<li> <p><code>cover</code>, proportion that grid cell is covered by <code>outline</code>
</p>
</li>
<li> <p><code>count</code>, optional (only if you pass in <code>point_over</code>)
</p>
</li>
</ul>
<h3>References</h3>

<p>Wheeler, A. P. (2018). The effect of 311 calls for service on crime in DC at microplaces. <em>Crime &amp; Delinquency</em>, 64(14), 1882-1903.
</p>
<p>Wheeler, A. P., &amp; Steenbeek, W. (2021). Mapping the risk terrain for crime using machine learning. <em>Journal of Quantitative Criminology</em>, 37(2), 445-480.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(sp) #for sp plot methods
# large grid cells
data(nyc_bor)
res &lt;- prep_grid(nyc_bor,5000)
plot(nyc_bor)
plot(res,border='BLUE',add=TRUE)

# clipping so majority of grid is inside outline
res &lt;- prep_grid(nyc_bor,2000,clip_level=0.5)
plot(nyc_bor)
plot(res,border='BLUE',add=TRUE)

# only grid cells that have at least one shooting
data(nyc_shoot)
res &lt;- prep_grid(nyc_bor,2000,clip_level=0,nyc_shoot)
plot(nyc_bor)
plot(res,border='RED',add=TRUE)

</code></pre>


</div>
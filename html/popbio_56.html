<div class="container">

<table style="width: 100%;"><tr>
<td>test.census</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Census data for hypothetical plant</h2>

<h3>Description</h3>

<p>Three years of census data for a hypothetical plant with three stage classes
</p>


<h3>Usage</h3>

<pre><code class="language-R">test.census
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 census rows and 4 columns:
</p>

<dl>
<dt><code>plant</code></dt>
<dd>
<p>Plant id number</p>
</dd>
<dt><code>year</code></dt>
<dd>
<p>Year of census</p>
</dd>
<dt><code>stage</code></dt>
<dd>
<p>Stage class: seedling, vegetative, or reproductive</p>
</dd>
<dt><code>fruits</code></dt>
<dd>
<p>Total number of fruits</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">test.census
stages &lt;- c("seedling", "vegetative", "reproductive")
## Cross-tabulate stage vectors and order rows by stage
sv &lt;- table(test.census$stage, test.census$year)[stages, ]
sv
stage.vector.plot(sv)
## set xaxt='n' to avoid fractions of a year (2002.5)
stage.vector.plot(sv, prop = FALSE, xaxt = "n", las = 1)
axis(1, 2001:2003, c(2001, 2002, 2003))
## Convert census data to state-fate transition table using reshape
reshape(test.census, direction = "wide", idvar = "plant", timevar = "year")
## Convert census data  to state-fate transition table using merge
trans &lt;- subset(
  merge(test.census, test.census, by = "plant", sort = FALSE),
  year.x == year.y - 1
)
trans
## Format column and row names
trans &lt;- trans[, c(1:4, 6)]
colnames(trans)[2:5] &lt;- c("year", "stage", "fruits", "fate")
rownames(trans) &lt;- 1:nrow(trans)
## Order stage and fate columns
trans$stage &lt;- ordered(trans$stage, levels = stages)
trans$fate &lt;- ordered(trans$fate, levels = c(stages, "dead"))
## Select transitions for 2001-2002 and count offspring (seedlings)
trans01 &lt;- subset(trans, year == 2001)
seedlings &lt;- nrow(subset(test.census, year == 2002 &amp; stage == "seedling"))
## Add individual fertilities using "anonymous reproduction"  based on the
## proportional reproductive outputs of flowering plants and the total number
## of seedlings at the end of the projection interval
trans01$seedling &lt;- trans01$fruits / sum(trans01$fruits) * seedlings
trans01
##  Create transition frequency table  and build T matrix
tf &lt;- table(trans01$fate, trans01$stage)
tf
## remove "dead" fate from matrix
## T.mat&lt;-prop.table(tf,2)[-4,]
T.mat &lt;- prop.table(tf, 2)[stages, ]
T.mat
## Summarize stage-specific fertility rates and build F matrix
fert &lt;- tapply(trans01$seedling, trans01$stage, mean)
fert
F.mat &lt;- T.mat * 0
F.mat[1, ] &lt;- fert
F.mat
## The final projection matrix is just
T.mat + F.mat
## OR use projection matrix function -
projection.matrix(trans01)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>yaml_agent_interrogate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get an <em>agent</em> from <strong>pointblank</strong> YAML and <code>interrogate()</code>
</h2>

<h3>Description</h3>

<p>The <code>yaml_agent_interrogate()</code> function operates much like the
<code>yaml_read_agent()</code> function (reading a <strong>pointblank</strong> YAML file and
generating an <em>agent</em> with a validation plan in place). The key difference is
that this function takes things a step further and interrogates the target
table (defined by table-prep formula that is required in the YAML file). The
additional auto-invocation of <code>interrogate()</code> uses the default options of
that function. As with <code>yaml_read_agent()</code> the agent is returned except, this
time, it has intel from the interrogation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">yaml_agent_interrogate(filename, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p><em>File name</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <strong>required</strong>
</p>
<p>The name of the YAML file that contains fields related to an <em>agent</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>#' @param path <em>File path</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>An optional path to the YAML file (combined with <code>filename</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>ptblank_agent</code> object.
</p>


<h3>Examples</h3>

<p>There's a YAML file available in the <strong>pointblank</strong> package that's also
called <code>"agent-small_table.yml"</code>. The path for it can be accessed through
<code>system.file()</code>:
</p>
<div class="sourceCode r"><pre>yml_file_path &lt;- 
  system.file(
    "yaml", "agent-small_table.yml",
    package = "pointblank"
  )
</pre></div>
<p>The YAML file can be read as an agent with a pre-existing validation plan by
using the <code>yaml_read_agent()</code> function.
</p>
<div class="sourceCode r"><pre>agent &lt;- yaml_read_agent(filename = yml_file_path)

agent
</pre></div>


<img src="https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_yaml_write_1.png" alt="This image was generated from the first code example in the `yaml_write()` help file." style="width:100%;"><p>This particular agent is using <code>~ tbl_source("small_table", "tbl_store.yml")</code>
to source the table-prep from a YAML file that holds a table store (can be
seen using <code>yaml_agent_string(agent = agent)</code>). Let's put that file in the
working directory (the <strong>pointblank</strong> package has the corresponding YAML
file):
</p>
<div class="sourceCode r"><pre>yml_tbl_store_path &lt;-
  system.file(
    "yaml", "tbl_store.yml",
    package = "pointblank"
  )

file.copy(from = yml_tbl_store_path, to = ".")
</pre></div>
<p>As can be seen from the validation report, no interrogation was yet
performed. Saving an agent to YAML will remove any traces of interrogation
data and serve as a plan for a new interrogation on the same target table. We
can either follow this up with with <code>interrogate()</code> and get an agent with
intel, or, we can interrogate directly from the YAML file with
<code>yaml_agent_interrogate()</code>:
</p>
<div class="sourceCode r"><pre>agent &lt;- yaml_agent_interrogate(filename = yml_file_path)

agent
</pre></div>


<img src="https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_yaml_write_2.png" alt="This image was generated from the second code example in the `yaml_write()` help file." style="width:100%;"><h3>Function ID</h3>

<p>11-4
</p>


<h3>See Also</h3>

<p>Other pointblank YAML: 
<code>yaml_agent_show_exprs()</code>,
<code>yaml_agent_string()</code>,
<code>yaml_exec()</code>,
<code>yaml_informant_incorporate()</code>,
<code>yaml_read_agent()</code>,
<code>yaml_read_informant()</code>,
<code>yaml_write()</code>
</p>


</div>
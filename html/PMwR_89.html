<div class="container">

<table style="width: 100%;"><tr>
<td>valuation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Valuation
</h2>

<h3>Description</h3>

<p>Valuation of financial objects: map an object into a
quantity that is measured in a concrete (typically
currency) unit.
</p>


<h3>Usage</h3>

<pre><code class="language-R">valuation(x, ...)

## S3 method for class 'journal'
valuation(x, multiplier = 1,
          cashflow = function(x, ...) x$amount * x$price,
          instrument = function(x, ...) "cash",
          flip.sign = TRUE, ...)

## S3 method for class 'position'
valuation(x, vprice, multiplier = 1,
          do.sum = FALSE,
          price.unit,
          use.names = FALSE,
          verbose = TRUE, do.warn = TRUE, ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multiplier</code></td>
<td>
<p>a numeric vector, typically with
named elements</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cashflow</code></td>
<td>
<p>either a numeric vector or a function
that takes on argument (a journal) and transforms
it into a numeric vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>instrument</code></td>
<td>

<p>either a character vector or a function that takes on argument (a
journal) and transforms it into a character vector
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flip.sign</code></td>
<td>

<p>logical.  If <code>TRUE</code> (the default), a positive amount gets
mapped into a negative cashflow.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vprice</code></td>
<td>
<p>numeric: a matrix whose elements
correspond to those in <code>x</code>.  If only a single
timestamp is used and the position is named, this may
also be a named numeric vector; see Examples.  The
argument behaves like <code>vprice</code> in
<code>pl</code>; but for valuation those prices need
not be sorted in time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.sum</code></td>
<td>

<p>logical: sum over positions
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.names</code></td>
<td>

<p>logical: use names of <code>vprice</code>?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>price.unit</code></td>
<td>

<p>a named character vector. Not implemented.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>logical
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.warn</code></td>
<td>

<p>logical
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>other arguments passed to methods
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>This function is experimental, and the methods'
interfaces are not stable yet.</strong>
</p>
<p><code>valuation</code> is a generic function.  Its
semantics suggest that an object (e.g. a financial
instrument or a position) is mapped into a concrete
quantity (such as an amount of some currency).
</p>
<p>The <code>journal</code> method transforms the
transactions in a journal into amounts of currency
(e.g, a sale of 100 shares of a company is
transformed into the value of these 100 shares).
</p>
<p>The <code>position</code> method takes a position
and returns the value (in currency units) of the
position.
</p>


<h3>Value</h3>

<p>depends on the object: for journals, a <code>journal</code>
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann &lt;es@enricoschumann.net&gt;
</p>


<h3>References</h3>

<p>Schumann, E. (2020) <em>Portfolio Management with R</em>.
<a href="https://enricoschumann.net/R/packages/PMwR/">https://enricoschumann.net/R/packages/PMwR/</a>
</p>


<h3>See Also</h3>

<p><code>journal</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## valuing a JOURNAL

j &lt;- journal(amount = 10, price = 2)
##    amount  price
## 1      10      2
##
## 1 transaction

valuation(j, instrument = NA)
##    amount  price
## 1     -20      1
##
## 1 transaction



## valuing a POSITION
pos &lt;- position(c(AMZN = -10, MSFT = 200))

### contructing a price table:
### ==&gt; P[i, j] must correspond to pos[i, j]
P &lt;- array(c(2200, 170), dim = c(1, 2))
colnames(P) &lt;- instrument(pos)

valuation(pos, vprice = P)
##        AMZN  MSFT
## [1,] -22000 34000

### contructing a price table, alternative:
### a named vector
### ==&gt; only works when there is only a single timestamp
valuation(pos, vprice = c(MSFT = 170, AMZN = 2200))

all.equal(valuation(pos, vprice = P),
          valuation(pos, vprice = c(MSFT = 170, AMZN = 2200)))
</code></pre>


</div>
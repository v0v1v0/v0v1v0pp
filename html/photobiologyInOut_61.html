<div class="container">

<table style="width: 100%;"><tr>
<td>read_wasatch_csv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read File Saved by Wasatch's Enlighten.</h2>

<h3>Description</h3>

<p>Read wavelength and spectral data from the data section of a file as
output by Enlighten importing them into R. Parse the header of a file to
extract the acquisition time, instrument name and serial number, as well
additional metadata related to the instrument and its settings. Function
<code>read_wasatch_csv()</code> only accepts "column oriented" CSV files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read_wasatch_csv(
  file,
  date = NULL,
  geocode = NULL,
  label = NULL,
  tz = NULL,
  locale = readr::default_locale(),
  s.qty = NULL,
  extra.cols = "keep",
  scale.factor = 1,
  simplify = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>character</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date</code></td>
<td>
<p>a <code>POSIXct</code> object to use to set the <code>"when.measured"</code>
attribute. If <code>NULL</code>, the default, the date and time are extracted from the
file header.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geocode</code></td>
<td>
<p>A data frame with columns <code>lon</code> and <code>lat</code> used to
set attribute <code>"where.measured"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>character string, but if <code>NULL</code> the value of <code>file</code> is
used, and if <code>NA</code> the "what.measured" attribute is not set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>character Time zone is by default that of the machine's locale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locale</code></td>
<td>
<p>The locale controls defaults that vary from place to place. The
default locale is US-centric (like R), but you can use
<code>locale</code> to create your own locale that controls things
like the default time zone, encoding, decimal mark, big mark, and day/month
names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s.qty</code></td>
<td>
<p>character, possibly named. The name of the quantity using the
conventions accepted used in package 'photobiology' that is to be imported
from column "Processed" from the file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra.cols</code></td>
<td>
<p>character What to do non-processed data columns if present 
in file. One of <code>"keep"</code>, <code>"drop.pixel"</code>, <code>"drop"</code> or 
<code>"split"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale.factor</code></td>
<td>
<p>numeric vector of length 1, or length equal to the number
of rows (= detector pixels). Numeric multiplier applied to returned
spectral values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify</code></td>
<td>
<p>logical If TRUE, single spectra are returned as individual 
spectra instead of collections of length one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to the constructor of the spectrum
object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Enlighten's column-wise CSV files contain at least two columns,
Wavelength and Processed. In the header the Technique used is recorded.
Additional data columns can be present. Column Pixel contains the pixel
index in the array as integers. Columns Raw, Dark and Reference contain
detector counts data. Technique is used to guess the type of spectrum
stored in the column named Processed, which can be detector counts or
derived values. By default the data are read into a single spectrum object
and all columns retained, but only the data in Processed are interpreted as
spectral data corresponding to the class of the object. If passed
<code>extra.cols = "drop"</code>, only Wavelength and Processed are copied to the
returned object, while if passed <code>extra.cols = "drop.pixel"</code> only the
contents of column Pixel are discarded. If passed <code>extra.cols =
  "split"</code> all columns containing spectral data are each read into a separate
spectrum, these are collected and a "generic_mspct" object containing them
returned. <code>extra.cols</code> can be a named vector of mappings, of length at
least one but possibly longer. If longer a "generic_mspct" is returned,
otherwise a spectrum object as inferred from the name each column is mapped
to.
</p>


<h3>Value</h3>

<p>An object of a class derived from <code>generic_spct</code> such as
<code>raw_spct</code> or <code>filter_spct</code>. <code>generic_spct</code> is derived from
tibble and data frame.
</p>


<h3>Acknowledgements</h3>

<p>We thank Ruud Niesen from Photon Mission 
(<a href="https://photonmission.com/">https://photonmission.com/</a>) for organizing the loan of the
spectrometer used to produce the various files needed for the development of 
this function.
</p>


<h3>Note</h3>

<p>Enlighten, the free software from Wasatch Photonics can save spectra in
a variety of additional formats: different types of CSV files, plain text
and JSON. Plain text files contain no metadata or even column headers and
if the need arises can be read with R function <code>read.table()</code>. JSON
files contain the most detailed metadata.
</p>


<h3>References</h3>

<p><a href="https://wasatchphotonics.com/">https://wasatchphotonics.com/</a>
<a href="https://wasatchphotonics.com/product-category/software/">https://wasatchphotonics.com/product-category/software/</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
 file.name &lt;- 
   system.file("extdata", "enlighten-wasatch-scope.csv",
               package = "photobiologyInOut", mustWork = TRUE)
              
 wasatch.raw.spct &lt;- 
   read_wasatch_csv(file = file.name)
 summary(wasatch.raw.spct)

 wasatch.raw.spct &lt;- 
   read_wasatch_csv(file = file.name, s.qty = "counts")
 summary(wasatch.raw.spct)

 wasatch.raw.spct &lt;- 
   read_wasatch_csv(file = file.name, s.qty = c(Processed = "counts"))
 summary(wasatch.raw.spct)

 wasatch.raw.spct &lt;- 
   read_wasatch_csv(file = file.name, extra.cols = "drop")
 summary(wasatch.raw.spct)

</code></pre>


</div>
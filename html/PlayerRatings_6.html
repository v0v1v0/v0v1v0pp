<div class="container">

<table style="width: 100%;"><tr>
<td>glicko2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The Glicko-2 Rating System</h2>

<h3>Description</h3>

<p>Implements the Glicko-2 rating system for estimating the relative 
skill level of players in two-player games such as chess. It
extends the Glicko method by including a volatility parameter for
each player, representing the degree of expected fluctuation in 
the rating. Volatility is therefore a measure of consistency of
performance.  
</p>


<h3>Usage</h3>

<pre><code class="language-R">glicko2(x, status = NULL, init = c(2200,300,0.15), gamma = 0, 
    tau = 1.2, history = FALSE, sort = TRUE, rdmax = 350, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data frame containing four variables: (1) a numeric
vector denoting the time period in which the game took place
(2) a numeric or character identifier for player one (3)
a numeric or character identifier for player two and (4)
the result of the game expressed as a number, typically
equal to one for a player one win, zero for a player two
win and one half for a draw.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>A data frame with the current status of the
system. If not <code>NULL</code>, this needs to be a data frame 
in the form of the <code>ratings</code> component of the returned 
list, containing variables named <code>Player</code>, <code>Rating</code>,
<code>Deviation</code>, <code>Volatility</code>, and optionally <code>Games</code>, 
<code>Win</code>, <code>Draw</code>, <code>Loss</code> and <code>Lag</code>, which are 
set to zero if not given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>
<p>The rating vector at which to initialize a new player 
not appearing in <code>status</code>. Must be a vector of length three
giving the initial rating, initial deviation and initial volatility 
respectively. If different initializations for different players are 
required, this can be done using <code>status</code>. The initial
deviation cannot be greater than <code>rdmax</code>. The initial
volatility cannot be greater than <code>rdmax</code> divided by 
<code>400/log(10)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>A player one advantage parameter; either a single
value or a numeric vector equal to the number of rows in 
<code>x</code>. Positive values favour player one, while negative 
values favour player two. This could represent the advantage 
of playing at home, or the advantage of playing white for chess. 
Note that this is not passed to <code>predict.rating</code>, 
which has its own <code>gamma</code> parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>The tau parameter, which controls the change in the
player volatility across time. Smaller values prevent the 
volatility measures from changing by large amounts. Must be a 
single number. Mark Glickman suggests a value between 0.3 and 1.2.
A non-positive value can be specified, in which case the 
volatilities are never updated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>history</code></td>
<td>
<p>If <code>TRUE</code> returns the entire history for each 
period in the component <code>history</code> of the returned list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>If <code>TRUE</code> sort the results by rating (highest
to lowest). If <code>FALSE</code> sort the results by player.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rdmax</code></td>
<td>
<p>The maximum value allowed for the rating deviation.
The maximum value allowed for the volatility is <code>rdmax</code> 
divided by <code>400/log(10)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The Glicko-2 rating system is a method for evaluating the skill 
of players. It is more complex than Glicko because it includes a 
volatility for each player. It requires a single parameter 
optimization for each player within each time period. We use the
R function <code>optimize</code> in preference to the root-finding 
approaches suggested in Glickman (2001) and Glickman (2013).
Default values are roughly optimized for the chess data analyzed 
in the file doc/ChessRatings.pdf, using the binomial deviance 
criterion. A player one advantage parameter has been added to 
the original definition in the reference. A player one advantage 
parameter is also used for prediction purposes in 
<code>predict.rating</code>.
</p>


<h3>Value</h3>

<p>A list object of class <code>"rating"</code> with the following 
components
</p>
<table>
<tr style="vertical-align: top;">
<td><code>ratings</code></td>
<td>
<p>A data frame of the results at the end of the 
final time period. The variables are self explanatory except
for <code>Lag</code>, which represents the number of time periods
since the player last played a game. This is equal to zero
for players who played in the latest time period, and is
also zero for players who have not yet played any games.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>history</code></td>
<td>
<p>A three dimensional array, or <code>NULL</code> if 
<code>history</code> is <code>FALSE</code>. The row dimension is the 
players, the column dimension is the time periods. 
The third dimension gives different parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>The player one advantage parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>The tau parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The character string <code>"Glicko-2"</code>.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Glickman, M.E. (2001) 
Dynamic paired comparison models with stochastic variances. 
Journal of Applied Statistics, 28, 673-689.
</p>
<p>Glickman, M.E. (2013) 
Example of the Glicko-2 system.
</p>


<h3>See Also</h3>

<p><code>elo</code>, <code>glicko</code>, <code>steph</code></p>


<h3>Examples</h3>

<pre><code class="language-R">initstate &lt;- data.frame(Player=1:4, Rating = c(1500,1400,1550,1700), 
  Deviation = c(200,30,100,300), Volatility = 0.06)
games &lt;- data.frame(Week = 1, Payer1 = 1, Player2 = 2:4, Score = c(1,0,0))
robj &lt;- glicko2(games, status = initstate, tau = 0.5, sort = FALSE)
print(robj, cols = 1:4, digits = 6)

afl &lt;- aflodds[,c(2,3,4,7)]
robj &lt;- glicko2(afl)
robj

robj &lt;- glicko2(afl[afl$Week==1,])
for(i in 2:max(afl$Week)) robj &lt;- glicko2(afl[afl$Week==i,], robj$ratings)
robj
</code></pre>


</div>
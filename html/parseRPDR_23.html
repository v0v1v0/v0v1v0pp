<div class="container">

<table style="width: 100%;"><tr>
<td>load_enc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Loads encounter information into R.</h2>

<h3>Description</h3>

<p>Loads encounter-level detail information into the R environment, both Enc and Exc files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">load_enc(
  file,
  merge_id = "EMPI",
  sep = ":",
  id_length = "standard",
  perc = 0.6,
  na = TRUE,
  identical = TRUE,
  nThread = parallel::detectCores() - 1,
  mrn_type = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>string, full file path to Enc.txt or Exc.txt</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge_id</code></td>
<td>
<p>string, column name to use to create <em>ID_MERGE</em> column used to merge different datasets. Defaults to <em>EPIC_PMRN</em>,
as it is the preferred MRN in the RPDR system.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>string, divider between hospital ID and MRN. Defaults to <em>:</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_length</code></td>
<td>
<p>string, indicating whether to modify MRN length based-on required values <em>id_length = standard</em>, or to keep lengths as is <em>id_length = asis</em>.
If <em>id_length = standard</em> then in case of <em>MGH, BWH, MCL, EMPI and PMRN</em> the length of the MRNs are corrected accordingly by adding zeros, or removing numeral from the beginning.
In other cases the lengths are unchanged. Defaults to <em>standard</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perc</code></td>
<td>
<p>numeric, a number between 0-1 indicating which parsed ID columns to keep. Data present in <em>perc x 100%</em> of patients are kept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na</code></td>
<td>
<p>boolean, whether to remove columns with only NA values. Defaults to <em>TRUE</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>identical</code></td>
<td>
<p>boolean, whether to remove columns with identical values. Defaults to <em>TRUE</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nThread</code></td>
<td>
<p>integer, number of threads to use to load data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mrn_type</code></td>
<td>
<p>boolean, should data in <em>MRN_Type</em> and <em>MRN</em> be parsed. Defaults to <em>FALSE</em>, as it is not advised to parse these for all data sources as it takes considerable time.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data table, with encounter information.
</p>

<dl>
<dt>ID_MERGE</dt>
<dd>
<p>numeric, defined IDs by <em>merge_id</em>, used for merging later.</p>
</dd>
<dt>ID_enc_EMPI</dt>
<dd>
<p>string, Unique Partners-wide identifier assigned to the patient used to consolidate patient information
from <em>enc</em> datasource, corresponds to EMPI in RPDR. Data is formatted using pretty_mrn().</p>
</dd>
<dt>ID_enc_PMRN</dt>
<dd>
<p>string, Epic medical record number. This value is unique across Epic instances within the Partners network
from <em>enc</em> datasource, corresponds to EPIC_PMRN in RPDR. Data is formatted using pretty_mrn().</p>
</dd>
<dt>ID_enc_loc</dt>
<dd>
<p>string, if mrn_type == TRUE, then the data in <em>MRN_Type</em> and <em>MRN</em> are parsed into IDs corresponding to locations <em>(loc)</em>. Data is formatted using pretty_mrn().</p>
</dd>
<dt>enc_numb</dt>
<dd>
<p>string, Unique identifier of the record/visit. This values includes the source system, hospital, and a unique identifier within the source system, corresponds to Encounter_number in RPDR.</p>
</dd>
<dt>time_enc_admit</dt>
<dd>
<p>POSIXct, Date when the patient was admitted or entered the facility, corresponds to Admit_Date in RPDR. Converted to POSIXct format.</p>
</dd>
<dt>time_enc_disch</dt>
<dd>
<p>POSIXct, Date when the patient was discharged or left the facility, corresponds to Discharge_Date in RPDR. Converted to POSIXct format.</p>
</dd>
<dt>enc_status</dt>
<dd>
<p>string, Billing account-related notes about the encounter. This will not be populated for all encounters, corresponds to Encounter_Status in RPDR.</p>
</dd>
<dt>enc_hosp</dt>
<dd>
<p>string, Facility where the encounter occurred, corresponds to Hospital in RPDR.</p>
</dd>
<dt>enc_inpatient</dt>
<dd>
<p>string, Classifies the type of encounter as either Inpatient or Outpatient. ED visits are currently classified under the 'Outpatient' label, corresponds to Inpatient_or_Outpatient in RPDR.</p>
</dd>
<dt>enc_service</dt>
<dd>
<p>string, Hospital service line assigned to the encounter, corresponds to Service_Line in RPDR.</p>
</dd>
<dt>enc_attending</dt>
<dd>
<p>string, The attending provider associated with the encounter. For Epic professional billing, this is the billing provider, corresponds to Attending_MD in RPDR.</p>
</dd>
<dt>enc_length</dt>
<dd>
<p>numeric, Length of stay for the encounter, corresponds to LOS_days in RPDR.</p>
</dd>
<dt>enc_clinic</dt>
<dd>
<p>string, Specific department/location where the encounter occured, corresponds to Clinic_Name in RPDR.</p>
</dd>
<dt>enc_admit_src</dt>
<dd>
<p>string, Location where the patient was admitted when entering the hospital/clinic, corresponds to Admit_Source in RPDR.</p>
</dd>
<dt>enc_pat_type</dt>
<dd>
<p>string, Provides information regarding the specific patient classifications and status of the patient visit. This field is only populated for McLean Hospital encounters, corresponds to Patient_Type in RPDR.</p>
</dd>
<dt>enc_ref_disp</dt>
<dd>
<p>string, Location where the patient has been directed for treatment or follow-up by a staff member. This field is only populated for McLean Hospital encounters, corresponds to Referrer_Discipline in RPDR.</p>
</dd>
<dt>enc_disch_disp</dt>
<dd>
<p>string, Patient's anticipated location or status following the encounter, corresponds to Discharge_Disposition in RPDR.</p>
</dd>
<dt>enc_pay</dt>
<dd>
<p>string, Payors responsible for the hospital account. Multiple payors (primary, secondary, etc.) may be listed, corresponds to Payor in RPDR.</p>
</dd>
<dt>enc_diag_admit</dt>
<dd>
<p>string, Initial working diagnosis documented by the admitting or attending physician, corresponds to Admitting_Diagnosis in RPDR.</p>
</dd>
<dt>enc_diag_princ</dt>
<dd>
<p>string, Condition established, after study, to be chiefly responsible for occasioning the admission of the patient to the hospital for care, corresponds to Principle_Diagnosis in RPDR.</p>
</dd>
<dt>enc_diag_1</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_1 in RPDR.</p>
</dd>
<dt>enc_diag_2</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_2 in RPDR.</p>
</dd>
<dt>enc_diag_3</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_3 in RPDR.</p>
</dd>
<dt>enc_diag_4</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_4 in RPDR.</p>
</dd>
<dt>enc_diag_5</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_5 in RPDR.</p>
</dd>
<dt>enc_diag_6</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_6 in RPDR.</p>
</dd>
<dt>enc_diag_7</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_7 in RPDR.</p>
</dd>
<dt>enc_diag_8</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_8 in RPDR.</p>
</dd>
<dt>enc_diag_9</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_9 in RPDR.</p>
</dd>
<dt>enc_diag_10</dt>
<dd>
<p>string, Additional diagnoses associated with this encounter or visit, corresponds to Diagnosis_10 in RPDR.</p>
</dd>
<dt>enc_diag_group</dt>
<dd>
<p>string, Diagnosis-Related Group for the encounter, in the following format: SYSTEM:CODE - Description, corresponds to DRG in RPDR.</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#Using defaults
d_enc &lt;- load_enc(file = "test_Enc.txt")

#Use sequential processing
d_enc &lt;- load_enc(file = "test_Enc.txt", nThread = 1)

#Use parallel processing and parse data in MRN_Type and MRN columns and keep all IDs
d_exc &lt;- load_enc(file = "test_Exc.txt", nThread = 20, mrn_type = TRUE, perc = 1)

## End(Not run)
</code></pre>


</div>
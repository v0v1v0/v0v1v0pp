<div class="container">

<table style="width: 100%;"><tr>
<td>R2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R2 coefficient</h2>

<h3>Description</h3>

<p>This function calcultates the <code class="reqn">R^2</code> coefficient of OQuigley and Flandre (1994) to evaluate the predictive capacity of the proportional hazards model (or Cox model).</p>


<h3>Usage</h3>

<pre><code class="language-R">R2(formula, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>A formula object or character string with the time and censoring status separated by "+" on the left hand side and the covariates separated by "+" on the right. For instance, if the time name is "Time", the censoring status is "Status" and the covariates are called "Cov1" and "Cov2", the formula is "Time+Status~Cov1+Cov2".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
 
<p>A data.frame with the data. The censoring status should be 1 for failure and 0 for censoring. No missing data accepted.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p> The program does not handle ties in the data. We suggest to randomly split the ties before using the program.
</p>


<h3>Value</h3>


<ul>
<li>
<p> If one covariate Z is present in the model, the <code class="reqn">R^2</code> coefficient is 
</p>
<p style="text-align: center;"><code class="reqn"> R^2=1-\frac{\sum(Zi-E_b(Zi))^2}{\sum(Zi-E_0(Zi))^2}, </code>
</p>

<p>where the sums are over the failures. <code class="reqn">E_b(Zi)</code> is the expectation of <code class="reqn">Z</code> at the ith failure time under the model of parameter <code class="reqn">b</code> = the maximum partial likelihood estimator of the regression coefficient. <code class="reqn">E_0(Zi)</code> is the expectation of <code class="reqn">Z</code> under the model of parameter 0 at the ith failure time. 
</p>
</li>
<li>
<p> If several covariates are present in the model, the <code class="reqn">R^2</code> coefficient is evaluated as in the previous case except that the covariate Z is replaced by the prognostic index <code class="reqn">b'Z</code>.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Cecile Chauvel</p>


<h3>References</h3>

<p>OQuigley J, Flandre P. (1994) Predictive capability of proportional hazards regression. <em>PNAS</em> <b>91</b>, 2310-2314. 
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(survival)
data(ovarian)
R2(futime+fustat~age,data=ovarian)
R2(futime+fustat~age+rx,data=ovarian)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>mmdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Reformat input data for performance evaluation calculation</h2>

<h3>Description</h3>

<p>The <code>mmdata</code> function takes predicted scores and labels
and returns an <code>mdat</code> object. The <code>evalmod</code> function
takes an <code>mdat</code> object as input data to calculate evaluation measures.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mmdata(
  scores,
  labels,
  modnames = NULL,
  dsids = NULL,
  posclass = NULL,
  na_worst = TRUE,
  ties_method = "equiv",
  expd_first = NULL,
  mode = "rocprc",
  nfold_df = NULL,
  score_cols = NULL,
  lab_col = NULL,
  fold_col = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>scores</code></td>
<td>
<p>A numeric dataset of predicted scores. It can be a vector,
a matrix, an array, a data frame, or a list. The <code>join_scores</code>
function can be useful to make scores with multiple datasets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>A numeric, character, logical, or factor dataset
of observed labels. It can be a vector, a matrix, an array,
a data frame, or a list. The <code>join_labels</code>
function can be useful to make labels with multiple datasets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modnames</code></td>
<td>
<p>A character vector for the names of the models.
The <code>evalmod</code> function automatically generates default names
as "m1", "m2", "m3", and so on when it is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dsids</code></td>
<td>
<p>A numeric vector for test dataset IDs.
The <code>evalmod</code> function automatically generates the default ID
as <code>1</code> when it is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>posclass</code></td>
<td>
<p>A scalar value to specify the label of positives
in <code>labels</code>. It must be the same data type as <code>labels</code>.
For example, <code>posclass = -1</code> changes the positive label
from <code>1</code> to <code>-1</code> when <code>labels</code> contains
<code>1</code> and <code>-1</code>. The positive label will be automatically
detected when <code>posclass</code> is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_worst</code></td>
<td>
<p>A Boolean value for controlling the treatment of NAs
in <code>scores</code>.
</p>

<dl>
<dt>TRUE</dt>
<dd>
<p>All NAs are treated as the worst scores</p>
</dd>
<dt>FALSE</dt>
<dd>
<p>All NAs are treated as the best scores</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ties_method</code></td>
<td>
<p>A string for controlling ties in <code>scores</code>.
</p>

<dl>
<dt>"equiv"</dt>
<dd>
<p>Ties are equivalently ranked</p>
</dd>
<dt>"first"</dt>
<dd>
<p>Ties are ranked in an increasing order as appeared</p>
</dd>
<dt>"random"</dt>
<dd>
<p> Ties are ranked in random order</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expd_first</code></td>
<td>
<p>A string to indicate which of the two variables
- model names or test dataset IDs
should be expanded first when they are automatically generated.
</p>

<dl>
<dt>"modnames"</dt>
<dd>
<p>Model names are expanded first. For example,
The <code>mmdata</code> function generates <code>modnames</code> as
<code>c("m1", "m2")</code> and <code>dsids</code> as <code>c(1, 1)</code>
when two vectors are passed as input,
and <code>modnames</code> and <code>dsids</code> are unspecified.</p>
</dd>
<dt>"dsids"</dt>
<dd>
<p>Test dataset IDs are expanded first. For example,
The <code>mmdata</code> function generates <code>modnames</code> as
<code>c("m1", "m1")</code> and <code>dsids</code> as <code>c(1, 2)</code>
when two vectors are passed as input,
and <code>modnames</code> and <code>dsids</code> are unspecified.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>A string that specifies the types of evaluation measures
that the <code>evalmod</code> function calculates.
</p>

<dl>
<dt>"rocprc"</dt>
<dd>
<p>ROC and Precision-Recall curves</p>
</dd>
<dt>"prcroc"</dt>
<dd>
<p>Same as above</p>
</dd>
<dt>"basic"</dt>
<dd>
<p>Normalized ranks vs. accuracy, error rate, specificity,
sensitivity, precision, Matthews correlation coefficient,
and F-score. </p>
</dd>
<dt>"aucroc"</dt>
<dd>
<p>Fast AUC(ROC) calculation with the U statistic</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfold_df</code></td>
<td>
<p>A data frame that contains at least one score column,
label and fold columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score_cols</code></td>
<td>
<p>A character/numeric vector that specifies score columns
of <code>nfold_df</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lab_col</code></td>
<td>
<p>A number/string that specifies the label column
of <code>nfold_df</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fold_col</code></td>
<td>
<p>A number/string that specifies the fold column
of <code>nfold_df</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not used by this method.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>mmdata</code> function returns an <code>mdat</code> object
that contains formatted labels and score ranks. The object can
be used as input data for the <code>evalmod</code> function.
</p>


<h3>See Also</h3>

<p><code>evalmod</code> for calculation evaluation measures.
<code>join_scores</code> and <code>join_labels</code> for formatting
scores and labels with multiple datasets.
<code>format_nfold</code> for creating n-fold cross validation dataset
from data frame.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
##################################################
### Single model &amp; single test dataset
###

## Load a dataset with 10 positives and 10 negatives
data(P10N10)

## Generate mdat object
ssmdat1 &lt;- mmdata(P10N10$scores, P10N10$labels)
ssmdat1
ssmdat2 &lt;- mmdata(1:8, sample(c(0, 1), 8, replace = TRUE))
ssmdat2


##################################################
### Multiple models &amp; single test dataset
###

## Create sample datasets with 100 positives and 100 negatives
samps &lt;- create_sim_samples(1, 100, 100, "all")

## Multiple models &amp; single test dataset
msmdat1 &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]]
)
msmdat1

## Use join_scores and join_labels
s1 &lt;- c(1, 2, 3, 4)
s2 &lt;- c(5, 6, 7, 8)
scores &lt;- join_scores(s1, s2)

l1 &lt;- c(1, 0, 1, 1)
l2 &lt;- c(1, 0, 1, 1)
labels &lt;- join_labels(l1, l2)

msmdat2 &lt;- mmdata(scores, labels, modnames = c("ms1", "ms2"))
msmdat2


##################################################
### Single model &amp; multiple test datasets
###

## Create sample datasets with 100 positives and 100 negatives
samps &lt;- create_sim_samples(10, 100, 100, "good_er")

## Single model &amp; multiple test datasets
smmdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]],
  dsids = samps[["dsids"]]
)
smmdat


##################################################
### Multiple models &amp; multiple test datasets
###

## Create sample datasets with 100 positives and 100 negatives
samps &lt;- create_sim_samples(10, 100, 100, "all")

## Multiple models &amp; multiple test datasets
mmmdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]],
  dsids = samps[["dsids"]]
)
mmmdat


##################################################
### N-fold cross validation datasets
###

## Load test data
data(M2N50F5)
head(M2N50F5)

## Speficy nessesary columns to create mdat
cvdat1 &lt;- mmdata(
  nfold_df = M2N50F5, score_cols = c(1, 2),
  lab_col = 3, fold_col = 4,
  modnames = c("m1", "m2"), dsids = 1:5
)
cvdat1

## Use column names
cvdat2 &lt;- mmdata(
  nfold_df = M2N50F5, score_cols = c("score1", "score2"),
  lab_col = "label", fold_col = "fold",
  modnames = c("m1", "m2"), dsids = 1:5
)
cvdat2

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>pcv.plsr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run Partial Least Squares Regression on spectral data</h2>

<h3>Description</h3>

<p>Partial Least Squares Regression (plsr) is often used to analyze spectral data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pcv.plsr(df, resps = NULL, spectra = NULL, train = 0.8, cv = 10, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Data frame containing metadata and spectral histogram data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resps</code></td>
<td>
<p>Vector of response variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spectra</code></td>
<td>
<p>Either one column name (in the case of long data) or a set of columns in the case of
wide data. If a single character string is provided and it is not one of the column names then it is
taken to be a pattern that will match some set of column names in the data to use (see examples).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train</code></td>
<td>
<p>Proportion of data to use as training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv</code></td>
<td>
<p>Number of cross validation iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to caret::train.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that columns that sum to 0 in the training or test data will be removed.
This function also uses the 'pls' method from the pls package.
</p>


<h3>Value</h3>

<p>a list of lists each with model performance, prediction target, model, plot, N components,
and variable influence on projection components for each response variable.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (rlang::is_installed("pls")) {
dists &lt;- list(
  rlnorm = list(meanlog = log(40), sdlog = 0.5),
  rlnorm = list(meanlog = log(60), sdlog = 0.35)
)
mv &lt;- mvSim(dists = dists, n_samples = 100, counts = 1000,
            min_bin = 1, max_bin = 180, wide = TRUE)
sv &lt;- growthSim("logistic",
                n = 5, t = 20,
                params = list("A" = c(200, 160), "B" = c(13, 11), "C" = c(3, 3.5))
)
d &lt;- cbind(sv, mv[, -1])
# note that this requires the "pls" package to be installed.
x &lt;- pcv.plsr(df = d, resps = "y", spectra = grepl("^sim_", colnames(d)))
}

</code></pre>


</div>
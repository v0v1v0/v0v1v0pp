<div class="container">

<table style="width: 100%;"><tr>
<td>adjacency_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjacency matrix</h2>

<h3>Description</h3>

<p>Create a matrix showing which planning units are spatially adjacent to
each other.
</p>


<h3>Usage</h3>

<pre><code class="language-R">adjacency_matrix(x, ...)

## S3 method for class 'Raster'
adjacency_matrix(x, directions = 4, ...)

## S3 method for class 'SpatRaster'
adjacency_matrix(x, directions = 4, ...)

## S3 method for class 'SpatialPolygons'
adjacency_matrix(x, ...)

## S3 method for class 'SpatialLines'
adjacency_matrix(x, ...)

## S3 method for class 'SpatialPoints'
adjacency_matrix(x, ...)

## S3 method for class 'sf'
adjacency_matrix(x, ...)

## Default S3 method:
adjacency_matrix(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>terra::rast()</code> or <code>sf::sf()</code> object representing planning units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directions</code></td>
<td>
<p><code>integer</code> If <code>x</code> is a
<code>terra::rast()</code> object, the number of directions
in which cells should be considered adjacent: 4 (rook's case), 8 (queen's
case), 16 (knight and one-cell queen moves), or "bishop" to for cells
with one-cell diagonal moves.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Spatial processing is completed using
<code>sf::st_intersects()</code> for <code>sf::sf()</code> objects,
and <code>terra::adjacent()</code> for <code>terra::rast()</code> objects.
Note that spatially overlapping planning units are considered
adjacent.
</p>


<h3>Value</h3>

<p>A <code>dsCMatrix</code> sparse symmetric matrix.
Each row and column represents a planning unit.
Cells values indicate if different planning units are
adjacent to each other or not (using ones and zeros).
To reduce computational burden, cells among the matrix diagonal are
set to zero. Furthermore, if the argument to <code>x</code> is a
<code>terra::rast()</code> object, then cells with <code>NA</code> values are set to
zero too.
</p>


<h3>Notes</h3>

<p>In earlier versions (&lt; 5.0.0), this function was named as the
<code>connected_matrix</code> function. It has been renamed to be consistent
with other spatial association matrix functions.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# load data
sim_pu_raster &lt;- get_sim_pu_raster()
sim_pu_polygons &lt;- get_sim_pu_polygons()

# create adjacency matrix using raster data
## crop raster to 9 cells
r &lt;- terra::crop(sim_pu_raster, terra::ext(c(0, 0.3, 0, 0.3)))

## make adjacency matrix
am_raster &lt;- adjacency_matrix(r)

# create adjacency matrix using polygon data
## subset 9 polygons
ply &lt;- sim_pu_polygons[c(1:3, 11:13, 20:22), ]

## make adjacency matrix
am_ply &lt;- adjacency_matrix(ply)

# plot data and the adjacency matrices

## plot raster and adjacency matrix
plot(r, main = "raster", axes = FALSE)
Matrix::image(am_raster, main = "adjacency matrix")

## plot polygons and adjacency matrix
plot(ply[, 1], main = "polygons")
Matrix::image(am_ply, main = "adjacency matrix")


## End(Not run)
</code></pre>


</div>
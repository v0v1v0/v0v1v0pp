<div class="container">

<table style="width: 100%;"><tr>
<td>separate_trajectories</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Separate rows of data into separately labeled trajectories.</h2>

<h3>Description</h3>

<p>Separate rows of data into separately labeled trajectories.
</p>


<h3>Usage</h3>

<pre><code class="language-R">separate_trajectories(
  obj_name,
  max_frame_gap = 1,
  frame_rate_proportion = 0.1,
  frame_gap_messaging = FALSE,
  frame_gap_plotting = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj_name</code></td>
<td>
<p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_frame_gap</code></td>
<td>
<p>Default 1; defines the largest permissible gap in data
before a new trajectory is forced to be defined. Can be either a numeric
value or "autodetect". See Details for more.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frame_rate_proportion</code></td>
<td>
<p>Default 0.10; if <code>max_frame_gap =
  "autodetect"</code>, proportion of frame rate to be used as a reference (see
Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frame_gap_messaging</code></td>
<td>
<p>Default FALSE; should frame gaps be reported in
the console?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frame_gap_plotting</code></td>
<td>
<p>Default FALSE; should frame gap diagnostic plots be
shown?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to/from other pathviewr functions</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is designed to separate rows of data into separately
labeled trajectories.
</p>
<p>The <code>max_frame_gap</code> parameter determines how trajectories will be
separated. If numeric, the function uses the supplied value as the largest
permissible gap in frames before a new trajectory is defined.
</p>
<p>If <code>max_frame_gap = "autodetect"</code> is used, the function
attempts to guesstimate the best value(s) of <code>max_frame_gap</code>. This is
performed separately for each subject in the data set, i.e. as many
<code>max_frame_gap</code> values will be estimated as there are unique subjects.
The highest possible value of any <code>max_frame_gap</code> is first set as a
proportion of the capture frame rate, as defined by the
<code>frame_rate_proportion</code> parameter (default 0.10). For each subject, a
plot of total trajectory counts vs. max frame gap values is created
internally (but can be plotted via setting
<code>frame_gap_plotting = TRUE</code>). As larger max frame gaps are allowed,
trajectory count will necessarily decrease but may reach a value that
likely represents the "best" option. The "elbow" of that plot is then used
to find an estimate of the best max frame gap value to use.
</p>


<h3>Value</h3>

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which a new column
<code>file_sub_traj</code> is added, which labels trajectories within the data by
concatenating file name, subject name, and a trajectory number (all
separated by underscores).
</p>


<h3>Author(s)</h3>

<p>Vikram B. Baliga and Melissa S. Armstrong
</p>


<h3>See Also</h3>

<p>Other data cleaning functions: 
<code>gather_tunnel_data()</code>,
<code>get_full_trajectories()</code>,
<code>quick_separate_trajectories()</code>,
<code>redefine_tunnel_center()</code>,
<code>relabel_viewr_axes()</code>,
<code>rename_viewr_characters()</code>,
<code>rotate_tunnel()</code>,
<code>select_x_percent()</code>,
<code>standardize_tunnel()</code>,
<code>trim_tunnel_outliers()</code>,
<code>visualize_frame_gap_choice()</code>
</p>
<p>Other functions that define or clean trajectories: 
<code>get_full_trajectories()</code>,
<code>quick_separate_trajectories()</code>,
<code>visualize_frame_gap_choice()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Import the example Motive data included in the package
motive_data &lt;-
  read_motive_csv(system.file("extdata", "pathviewr_motive_example_data.csv",
                              package = 'pathviewr'))

## Clean the file. It is generally recommended to clean up to the
## "select" step before running select_x_percent().
motive_selected &lt;-
  motive_data %&gt;%
  relabel_viewr_axes() %&gt;%
  gather_tunnel_data() %&gt;%
  trim_tunnel_outliers() %&gt;%
  rotate_tunnel() %&gt;%
  select_x_percent(desired_percent = 50)

## Now separate trajectories using autodetect
motive_separated &lt;-
  motive_selected %&gt;%
  separate_trajectories(max_frame_gap = "autodetect",
                        frame_rate_proportion = 0.1)

## See new column file_sub_traj for trajectory labeling
names(motive_separated)
</code></pre>


</div>
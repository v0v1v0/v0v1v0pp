<div class="container">

<table style="width: 100%;"><tr>
<td>maxdepth_sampler</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sampling function generator for specifying varying maximum tree depth 
in a prediction rule ensemble (pre)</h2>

<h3>Description</h3>

<p><code>maxdepth_sampler</code> generates a random sampling function, governed
by a pre-specified average tree depth.
</p>


<h3>Usage</h3>

<pre><code class="language-R">maxdepth_sampler(av.no.term.nodes = 4L, av.tree.depth = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>av.no.term.nodes</code></td>
<td>
<p>integer of length one. Specifies the average 
number of terminal nodes in trees used for rule inducation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>av.tree.depth</code></td>
<td>
<p>integer of length one. Specifies the average maximum
tree depth in trees used for rule induction.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The original RuleFit implementation varying tree sizes for
rule induction. Furthermore, it defined tree size in terms of the number
of terminal nodes. In contrast, function <code>pre</code> defines the 
maximum tree size in terms of a (constant) tree depth. Function 
<code>maxdepth_sampler</code> allows for mimicing the behavior of the
orignal RuleFit implementation. In effect, the maximum tree depth is 
sampled from an exponential distribution with learning rate 
<code class="reqn">1/(\bar{L}-2)</code>, where <code class="reqn">\bar{L} \ge 2</code> represents the
average number of terminal nodes for trees in the ensemble. See
Friedman &amp; Popescu (2008, section 3.3).
</p>


<h3>Value</h3>

<p>Returns a random sampling function with single argument <code>ntrees</code>,
which can be supplied to the <code>maxdepth</code> argument of function 
<code>pre</code> to specify varying tree depths.
</p>


<h3>References</h3>

<p>Friedman, J. H., &amp; Popescu, B. E. (2008). Predictive learning 
via rule ensembles. <em>The Annals of Applied Statistics, 2</em>(3), 916-954.
</p>


<h3>See Also</h3>

<p><code>pre</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## RuleFit default is max. 4 terminal nodes, on average:
func1 &lt;- maxdepth_sampler()
set.seed(42)
func1(10)
mean(func1(1000))

## Max. 16 terminal nodes, on average (equals average maxdepth of 4):
func2 &lt;- maxdepth_sampler(av.no.term.nodes = 16L)
set.seed(42)
func2(10)
mean(func2(1000))

## Max. tree depth of 3, on average:
func3 &lt;- maxdepth_sampler(av.tree.depth = 3)
set.seed(42)
func3(10)
mean(func3(1000))

## Max. 2 of terminal nodes, on average (always yields maxdepth of 1):
func4 &lt;- maxdepth_sampler(av.no.term.nodes = 2L)
set.seed(42)
func4(10)
mean(func4(1000))

## Create rule ensemble with varying maxdepth:
set.seed(42)
airq.ens &lt;- pre(Ozone ~ ., data = airquality[complete.cases(airquality),],
                maxdepth = func1)
airq.ens
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>pamr.decorrelate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A function to decorrelate (adjust) the feature matrix with respect to some
additional predictors</h2>

<h3>Description</h3>

<p>A function to decorrelate (adjust) the feature matrix with respect to some
additional predictors
</p>


<h3>Usage</h3>

<pre><code class="language-R">pamr.decorrelate(
  x,
  adjusting.predictors,
  xtest = NULL,
  adjusting.predictors.test = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Matrix of training set feature values, with genes in the rows,
samples in the columns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjusting.predictors</code></td>
<td>
<p>List of training set predictors to be used for
adjustment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtest</code></td>
<td>
<p>Optional matrix of test set feature values, to be adjusted in
the same way as the training set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjusting.predictors.test</code></td>
<td>
<p>Optional list of test set predictors to be
used for adjustment</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>pamr.decorrelate</code> Does a least squares regression of each row of x on
the adjusting predictors, and returns the residuals. If xtest is provided,
it also returns the adjusted version of xtest, using the training set least
squares regression model for adjustment
</p>


<h3>Value</h3>

<p>A list with components </p>
<table>
<tr style="vertical-align: top;">
<td><code>x.adj</code></td>
<td>
<p>Adjusted x matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtest.adj</code></td>
<td>
<p>Adjusted xtest matrix, if xtest we provided</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Trevor Hastie,Robert Tibshirani, Balasubramanian Narasimhan, and
Gilbert Chu
</p>


<h3>References</h3>

<p>Robert Tibshirani, Trevor Hastie, Balasubramanian Narasimhan,
and Gilbert Chu Diagnosis of multiple cancer types by shrunken centroids of
gene expression PNAS 99: 6567-6572.  Available at www.pnas.org
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#generate some data
suppressWarnings(RNGversion("3.5.0"))
set.seed(120)

x&lt;-matrix(rnorm(1000*20),ncol=20)
y&lt;-c(rep(1,10),rep(2,10))
adjusting.predictors=list(pred1=rnorm(20), pred2=as.factor(sample(c(1,2),replace
=TRUE,size=20)))
xtest=matrix(rnorm(1000*10),ncol=10)
adjusting.predictors.test=list(pred1=rnorm(10), pred2=as.factor(sample(c(1,2),replace
=TRUE,size=10)))

# decorrelate training x wrt adjusting predictors

x.adj=pamr.decorrelate(x,adjusting.predictors)$x.adj
# train classifier with adjusted x

d=list(x=x.adj,y=y)
a&lt;-pamr.train(d)

# decorrelate training and test x wrt adjusting predictors, then make
#predictions for test set

temp &lt;- pamr.decorrelate(x,adjusting.predictors, xtest=xtest,
                         adjusting.predictors.test=adjusting.predictors.test)

d=list(x=temp$x.adj,y=y)
a&lt;-pamr.train(d)
aa&lt;-pamr.predict(a,temp$xtest.adj, threshold=.5)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>split_rast</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split 2D feature distributions into 3D ones</h2>

<h3>Description</h3>

<p>Split 2D feature distributions into 3D ones
</p>


<h3>Usage</h3>

<pre><code class="language-R">split_rast(biodiv_raster, depth_raster, breaks, biodiv_df, val_depth_range=TRUE,
sep_biodiv_df=",")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>biodiv_raster</code></td>
<td>

<p>SpatRaster object or folder path with 2D feature distributions as layers.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth_raster</code></td>
<td>

<p>SpatRaster object or file path with elevation/bathymetric map.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>

<p>Numeric vector defining the range of depth layers to use.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>biodiv_df</code></td>
<td>

<p><code>data.frame</code> or a file path (CSV, TXT, XLS, or XLSX) containing additional
information about biodiversity features.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>val_depth_range</code></td>
<td>

<p>No correction of the splitted 3D distributions based on depth range of the biodiversity
features (<code>"min_z"</code> and <code>"max_z"</code> from <code>biodiv_df</code>) is needed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep_biodiv_df</code></td>
<td>

<p>The separator used in biodiv_df file, if biodiv_df is in path format.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is used to convert 2D distributions of biodiversity
features (rasters) into a 3D format. Here the <code>biodiv_df</code> can have the
following column names (independently of their order and any other names are ignored):
</p>

<ul>
<li>
<p><code>"species_name"</code>: <b>Mandatory</b> column with the feature names, which must
be the same with biodiv_raster.
</p>
</li>
<li>
<p><code>"pelagic"</code>: <b>Mandatory</b> column about the features' behaviour.
<code>TRUE</code> means that this feature is pelagic and <code>FALSE</code> means that this feature is
benthic.
</p>
</li>
<li>
<p><code>"min_z"</code>: <b>Optional</b> column about the minimum vertical range of
features. <code>NA</code> values are translated as unlimited upward feature movement.
</p>
</li>
<li>
<p><code>"max_z"</code>: <b>Optional</b> column about the maximum vertical range of
features. <code>NA</code> values are translated as unlimited downward feature movement.
</p>
</li>
</ul>
<p><code>breaks</code> must be in correspondence to depth_raster file.
For example, if depth_raster has range <code class="reqn">[10, -3000]</code>, then a breaks vector of
<code>c(0,-40,-200,-2000,-Inf)</code> will create depth levels <code class="reqn">[0,-40],\\
(-40,200], (-200, -2000], (-2000, -\infty)</code>
and set to NA cells with values greater than <code class="reqn">0</code>.
</p>
<p>If <code>val_depth_range = TRUE</code> (default), then no correction is done and the depth range
of the biodiversity features is derived from the corresponding feature distribution
raster and so <code>"min_z"</code> and <code>"max_z"</code> are ignored.
If <code>val_depth_range = FALSE</code>, then the function uses the minimum and maximum depth
information provided in the biodiv_df, so as to remove feature occurrences outside their
expected range.
</p>


<h3>Value</h3>

<p>A list containing species distributions for each bathymetric layer, that are necessary for
further 3D analysis. List names are indicating the depth levels.
</p>


<h3>Examples</h3>

<pre><code class="language-R">biodiv_raster &lt;- get_biodiv_raster()
depth_raster &lt;- get_depth_raster()
data(biodiv_df)

# You can split features' 2D distributions into 3D ones and then run only 3D analysis
split_features &lt;- split_rast(biodiv_raster,
                             depth_raster,
                             breaks = c(0, -40, -200, -2000, -Inf),
                             biodiv_df)
</code></pre>


</div>
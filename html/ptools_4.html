<div class="container">

<table style="width: 100%;"><tr>
<td>count_xy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Count of points in polygon</h2>

<h3>Description</h3>

<p>Given a base X/Y dataset, calculates number of feature points that fall inside
</p>


<h3>Usage</h3>

<pre><code class="language-R">count_xy(base, feat, weight = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>base dataset (eg gridcells), needs to be SpatialPolygonsDataFrame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feat</code></td>
<td>
<p>feature dataset (eg another crime generator), needs to be SpatialPointsDataFrame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>if 1 (default), does not use weights, else pass in string that is the variable name for weights in <code>feat</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This generates a count (or weighted count) of features inside of the base areas. Both should be projected in the same units.
Uses <code>sp::over()</code> methods in the function.
</p>


<h3>Value</h3>

<p>A vector of counts (or weighted sums)
</p>


<h3>References</h3>

<p>Wheeler, A. P. (2019). Quantifying the local and spatial effects of alcohol outlets on crime. <em>Crime &amp; Delinquency</em>, 65(6), 845-871.
</p>


<h3>See Also</h3>

<p><code>dist_xy()</code> for calculating distance to nearest
</p>
<p><code>dcount_xy()</code> for counting points within distance of base polygon
</p>
<p><code>kern_xy()</code> for estimating gaussian density of points for features at base polygon xy coords
</p>
<p><code>bisq_xy()</code> to estimate bi-square kernel weights of points for features at base polygon xy coords
</p>
<p><code>idw_xy()</code> to estimate inverse distance weights of points for features at base polygon xy coords
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(nyc_liq); data(nyc_bor)
gr_nyc &lt;- prep_grid(nyc_bor,10000)
gr_nyc$liq_cnt &lt;- count_xy(gr_nyc,nyc_liq)
gr_nyc$table_cnt &lt;- count_xy(gr_nyc,nyc_cafe,'SWC_TABLES')
head(gr_nyc@data)
sp::spplot(gr_nyc,zcol='liq_cnt')


</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>chart.QQPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot a QQ chart</h2>

<h3>Description</h3>

<p>Plot the return data against any theoretical distribution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">chart.QQPlot(
  R,
  distribution = "norm",
  ylab = NULL,
  xlab = paste(distribution, "Quantiles"),
  main = NULL,
  las = par("las"),
  envelope = FALSE,
  labels = FALSE,
  col = c(1, 4),
  lwd = 2,
  pch = 1,
  cex = 1,
  line = c("quartiles", "robust", "none"),
  element.color = "darkgray",
  cex.axis = 0.8,
  cex.legend = 0.8,
  cex.lab = 1,
  cex.main = 1,
  xaxis = TRUE,
  yaxis = TRUE,
  ylim = NULL,
  distributionParameter = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>an xts, vector, matrix, data frame, timeSeries or zoo object of
asset returns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distribution</code></td>
<td>
<p>root name of comparison distribution - e.g., 'norm' for
the normal distribution; 't' for the t-distribution. See examples for other
ideas.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>set the y-axis label, as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>set the x-axis label, as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>set the chart title, same as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>las</code></td>
<td>
<p>set the direction of axis labels, same as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envelope</code></td>
<td>
<p>confidence level for point-wise confidence envelope, or
FALSE for no envelope.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>vector of point labels for interactive point identification,
or FALSE for no labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>color for points and lines; the default is the <em>second</em>
entry in the current color palette (see 'palette' and 'par').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>set the line width, as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>
<p>symbols to use, see also <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>symbols to use, see also <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line</code></td>
<td>
<p>'quartiles' to pass a line through the quartile-pairs, or
'robust' for a robust-regression line; the latter uses the 'rlm' function
in the 'MASS' package. Specifying 'line = "none"' suppresses the line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>element.color</code></td>
<td>
<p>provides the color for drawing chart elements, such as
the box lines, axis lines, etc. Default is "darkgray"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.axis</code></td>
<td>
<p>The magnification to be used for axis annotation relative to
the current setting of 'cex'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.legend</code></td>
<td>
<p>The magnification to be used for sizing the legend
relative to the current setting of 'cex'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.lab</code></td>
<td>
<p>The magnification to be used for x- and y-axis labels
relative to the current setting of 'cex'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.main</code></td>
<td>
<p>The magnification to be used for the main title relative to
the current setting of 'cex'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xaxis</code></td>
<td>
<p>if true, draws the x axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yaxis</code></td>
<td>
<p>if true, draws the y axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>set the y-axis limits, same as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distributionParameter</code></td>
<td>
<p>a string of the parameters of the distribution
e.g., distributionParameter = 'location = 1, scale = 2, shape = 3, df = 4' 
for skew-T distribution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>any other passthru parameters to the distribution function</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A Quantile-Quantile (QQ) plot is a scatter plot designed to compare the data
to the theoretical distributions to visually determine if the observations
are likely to have come from a known population. The empirical quantiles are
plotted to the y-axis, and the x-axis contains the values of the theorical
model.  A 45-degree reference line is also plotted. If the empirical data
come from the population with the choosen distribution, the points should
fall approximately along this reference line. The larger the departure from
the reference line, the greater the evidence that the data set have come
from a population with a different distribution.
</p>


<h3>Author(s)</h3>

<p>John Fox, ported by Peter Carl
</p>


<h3>References</h3>

<p>main code forked/borrowed/ported from the excellent: <br> Fox,
John (2007) <em>car: Companion to Applied Regression</em> <br><a href="http://socserv.socsci.mcmaster.ca/jfox/">http://socserv.socsci.mcmaster.ca/jfox/</a>
</p>


<h3>See Also</h3>

<p><code>qqplot</code> <br><code>qq.plot</code> <br><code>plot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MASS) 
library(PerformanceAnalytics)
data(managers)
x = checkData(managers[,2, drop = FALSE], na.rm = TRUE, method = "vector")

# Panel 1: Normal distribution
chart.QQPlot(x, main = "Normal Distribution",
		line=c("quartiles"), distribution = 'norm',  
		envelope=0.95)


# Panel 2, Log-Normal distribution
fit = fitdistr(1+x, 'lognormal')
chart.QQPlot(1+x, main = "Log-Normal Distribution", envelope=0.95, 
    distribution='lnorm',distributionParameter='meanlog = fit$estimate[[1]], 
    sdlog = fit$estimate[[2]]')


## Not run:  
# Panel 3: Mixture Normal distribution
library(nor1mix)
obj = norMixEM(x,m=2)
chart.QQPlot(x, main = "Normal Mixture Distribution",
		line=c("quartiles"), distribution = 'norMix',  distributionParameter='obj',
		envelope=0.95)


# Panel 4: Symmetric t distribution
library(sn)
n = length(x)
fit.tSN = st.mple(as.matrix(rep(1,n)),x,symmetr = TRUE)
names(fit.tSN$dp) = c("location","scale","dof")
round(fit.tSN$dp,3)

chart.QQPlot(x, main = "MO Symmetric t-Distribution QQPlot",
		xlab = "quantilesSymmetricTdistEst",line = c("quartiles"),
		envelope = .95, distribution = 't', 
		distributionParameter='df=fit.tSN$dp[3]',pch = 20)

# Panel 5: Skewed t distribution
fit.st = st.mple(as.matrix(rep(1,n)),x)
# fit.st = st.mple(y=x)  Produces same result as line above
names(fit.st$dp) = c("location","scale","skew","dof")
round(fit.st$dp,3)

chart.QQPlot(x, main = "MO Returns Skewed t-Distribution QQPlot",
		xlab = "quantilesSkewedTdistEst",line = c("quartiles"),
		envelope = .95, distribution = 'st',
		distributionParameter = 'xi = fit.st$dp[1],
				omega = fit.st$dp[2],alpha = fit.st$dp[3],
				nu=fit.st$dp[4]',
		pch = 20)

# Panel 6: Stable Parietian
library(fBasics)
fit.stable = stableFit(x,doplot=FALSE)
chart.QQPlot(x, main = "Stable Paretian Distribution", envelope=0.95, 
             distribution = 'stable', 
             distributionParameter = 'alpha = fit(stable.fit)$estimate[[1]], 
                 beta = fit(stable.fit)$estimate[[2]], 
                 gamma = fit(stable.fit)$estimate[[3]], 
                 delta = fit(stable.fit)$estimate[[4]], pm = 0')

## End(Not run)

#end examples

</code></pre>


</div>
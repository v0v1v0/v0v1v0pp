<div class="container">

<table style="width: 100%;"><tr>
<td>RePrInDT</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Repeated <code>PrInDT</code> for specified percentage combinations</h2>

<h3>Description</h3>

<p><code>PrInDT</code> is called repeatedly according to the percentages specified in the vectors 'plarge' and 
'psmall'.<br>
The relationship between the two-class factor variable 'classname' and all other factor and numerical variables
in the data frame 'datain' is optimally modeled by means of 'N' repetitions of undersampling.<br> 
The trees generated from undersampling can be restricted by rejecting 
unacceptable trees which include split results specified in the character strings of the vector 'ctestv'.<br>
The probability threshold 'thres' for the prediction of the smaller class may be specified (default = 0.5).<br>
Undersampling may be stratified in two ways by the feature 'strat'.
</p>
<p><strong>Reference</strong><br> Weihs, C., Buschfeld, S. 2021c. Repeated undersampling in PrInDT (RePrInDT): Variation in undersampling and prediction, 
and ranking of predictors in ensembles. arXiv:2108.05129
</p>


<h3>Usage</h3>

<pre><code class="language-R">RePrInDT(datain, classname, ctestv=NA, N, plarge, psmall, conf.level=0.95,
       thres=0.5, stratvers=0, strat=NA, seedl=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>datain</code></td>
<td>
<p>Input data frame with class factor variable 'classname' and the<br>
influential variables, which need to be factors or numericals (transform logicals and character variables to factors)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classname</code></td>
<td>
<p>Name of class variable (character)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctestv</code></td>
<td>
<p>Vector of character strings of forbidden split results;<br>
see function <code>PrInDT</code> for details.<br>
If no restrictions exist, the default = NA is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Number of repetitions (integer &gt; 0)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plarge</code></td>
<td>
<p>Vector of undersampling percentages of larger class (numerical, &gt; 0 and &lt;= 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>psmall</code></td>
<td>
<p>Vector of undersampling percentages of smaller class (numerical, &gt; 0 and &lt;= 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>(1 - significance level) in function <code>ctree</code> (numerical, &gt; 0 and &lt;= 1);<br>
default = 0.95</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thres</code></td>
<td>
<p>Probability threshold for prediction of smaller class (numerical, &gt;= 0 and &lt; 1); default = 0.5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratvers</code></td>
<td>
<p>Version of stratification;<br>
= 0: none (default),<br>
= 1: stratification according to the percentages of the values of the factor variable 'strat',<br>
&gt; 1: stratification with minimum number 'stratvers' of observations per value of 'strat'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strat</code></td>
<td>
<p>Name of one (!) stratification variable for undersampling (character);<br>
default = NA (no stratification)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seedl</code></td>
<td>
<p>Should the seed for random numbers be set (TRUE / FALSE)?<br>
default = TRUE</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Standard output can be produced by means of <code>print(name)</code> or just <code> name </code> as well as <code>plot(name)</code> where 'name' is the output data 
frame of the function.<br>
The plot function will produce a series of more than one plot. If you use R, you might want to specify <code>windows(record=TRUE)</code> before 
<code>plot(name)</code> to save the whole series of plots. In R-Studio this functionality is provided automatically.
</p>


<h3>Value</h3>


<dl>
<dt>treesb</dt>
<dd>
<p>best trees for the different percentage combinations; refer to an individual tree as <code>treesb[[k]]</code>, k = 1, ..., length(plarge)*length(psmall)</p>
</dd>
<dt>acc1st</dt>
<dd>
<p>accuracies of best trees on full sample</p>
</dd>
<dt>acc3en</dt>
<dd>
<p>accuracies of ensemble of 3 best trees on full sample</p>
</dd>
<dt>simp_m</dt>
<dd>
<p>mean of permutation losses for the predictors</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">datastrat &lt;- PrInDT::data_zero
data &lt;- na.omit(datastrat) # cleaned full data: no NAs
# interpretation restrictions (split exclusions)
ctestv &lt;- rbind('ETH == {C2a, C1a}', 'MLU == {1, 3}')
N &lt;- 51  # no. of repetitions
conf.level &lt;- 0.99 # 1 - significance level (mincriterion) in ctree
psmall &lt;- c(0.95,1)     # percentages of the small class
plarge &lt;- c(0.09,0.1)  # percentages of the large class
outRe &lt;- RePrInDT(data,"real",ctestv,N,plarge,psmall,conf.level) # might take 5 minutes
outRe
plot(outRe)

</code></pre>


</div>
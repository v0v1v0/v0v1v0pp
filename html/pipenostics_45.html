<div class="container">

<table style="width: 100%;"><tr>
<td>m325traceline</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Minenergo-325. Trace thermal-hydraulic regime for linear segment of district
heating network</h2>

<h3>Description</h3>

<p>Trace values of thermal-hydraulic regime (temperature, pressure,
flow_rate, and other) along the adjacent linear segments of pipeline using
norms of heat loss values prescribed by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">m325traceline(
  temperature = 130,
  pressure = mpa_kgf(6),
  flow_rate = 250,
  g = 0,
  d = 700,
  len = c(600, 530, 300, 350),
  year = 1986,
  insulation = 0,
  laying = "underground",
  beta = FALSE,
  exp5k = TRUE,
  roughness = 0.006,
  inlet = 0,
  outlet = 0,
  elev_tol = 0.1,
  method = "romeo",
  forward = TRUE,
  absg = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>temperature</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Sensor-measured temperature of heat
carrier (water)
inside the pipe sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path, [<em>°C</em>].
Type: <code>assert_number</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pressure</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute
pressure</a> of heat carrier (water) sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path, [<em>MPa</em>].
Type: <code>assert_number</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flow_rate</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Amount of heat carrier (water)
sensor-measured at the inlet (forward tracing) or at the outlet (backward
tracing) of path, [<em>ton/hour</em>]. Type: <code>assert_number</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>amount of heat carrier discharge to network for each pipe segment in the
tracing path enumerated along the direction of flow. If flag <code>absg</code>
is <code>TRUE</code> then they treat argument <code>g</code> as absolute value in
[<em>ton/hour</em>], otherwise they do as percentage of flow_rate in the
pipe segment.
Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>internal diameters of subsequent pipes in tracing path that are enumerated
along the direction of flow, [<em>mm</em>].
Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>len</code></td>
<td>
<p>length of subsequent pipes in tracing path that are enumerated
along the direction of flow, [<em>m</em>].
Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>year when pipe is put in operation after laying or total overhaul for
each pipe in tracing path enumerated along the direction of flow.
Type: <code>assert_integerish</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>insulation</code></td>
<td>
<p>insulation that covers the exterior of pipe:
</p>

<dl>
<dt><code>0</code></dt>
<dd>
<p>no insulation</p>
</dd>
<dt><code>1</code></dt>
<dd>
<p>foamed polyurethane or analogue</p>
</dd>
<dt><code>2</code></dt>
<dd>
<p>polymer concrete</p>
</dd>
</dl>
<p>for each pipe in tracing path enumerated along the direction of flow.
Type: <code>assert_numeric</code> and <code>assert_subset</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>laying</code></td>
<td>
<p>type of pipe laying depicting the position of pipe in space:
</p>

<ul>
<li> <p><code>air</code>
</p>
</li>
<li> <p><code>channel</code>
</p>
</li>
<li> <p><code>room</code>
</p>
</li>
<li> <p><code>tunnel</code>
</p>
</li>
<li> <p><code>underground</code>
</p>
</li>
</ul>
<p>for each pipe in tracing path enumerated along the direction of flow.
Type: <code>assert_character</code> and <code>assert_subset</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>logical indicator: should they consider additional heat loss of fittings?
Logical value for each pipe in tracing path enumerated along the direction
of flow. Type: <code>assert_logical</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp5k</code></td>
<td>
<p>logical indicator for regime of pipe: is pipe operated more that
<code>5000</code> hours per year? Logical value for each pipe in tracing path
enumerated along the direction of flow.
Type: <code>assert_logical</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roughness</code></td>
<td>
<p>roughness of internal wall for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inlet</code></td>
<td>
<p>elevation of pipe inlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outlet</code></td>
<td>
<p>elevation of pipe outlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elev_tol</code></td>
<td>
<p>maximum allowed discrepancy between adjacent outlet and inlet elevations of
two subsequent pipes in the traced path, [<em>m</em>].
Type: <code>assert_number</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>
</p>

<ul>
<li> <p><code>romeo</code>
</p>
</li>
<li> <p><code>vatankhan</code>
</p>
</li>
<li> <p><code>buzelli</code>
</p>
</li>
</ul>
<p>Type: <code>assert_choice</code>. For more details see <code>dropp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forward</code></td>
<td>
<p>tracing direction flag: is it a forward direction of tracing?
If <code>FALSE</code> the backward tracing is performed.
Type: <code>assert_flag</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>absg</code></td>
<td>
<p>Whether argument <code>g</code> (amount of heat carrier discharge to network) is an
absolute value in [<em>ton/hour</em>] (<code>TRUE</code>) or is it a percentage of
flow rate in the pipe segment (<code>FALSE</code>)?
Type: <code>assert_flag</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The calculated (values of) regime may be considered as representation of
district heating process in conditions of hypothetically perfect
technical state of pipe walls and insulation.
</p>
<p>They consider only simple tracing paths which do not contain rings and any
kind of parallelization. At the same time bidirectional (forward and
backward) tracing is possible in accordance with sensor position. They also
may consider discharges to network at the inlet of each pipeline segment
as an approximation of actual forks of flows. Relevant illustration of
adopted assumptions for 4-segment tracing path is depicted on the next
figure.
</p>
<p><img src="../help/figures/m325regtrace.png" alt="m325regtrace.png"></p>
<p>They make additional check for consistency of <code>inlet</code> and <code>outlet</code>
values for subsequent pipe segments. Discrepancy of appropriate elevations
cannot be more than <code>elev_tol</code>.
</p>
<p>Since inner diameter of the pipe is used as input, the the thickness of the
pipe wall additionally considered in heat flux calculations. Pipe wall thickness
is derived from pipe diameter using
<a href="https://docs.cntd.ru/document/1200174717">GOST 30732</a> specifications.
</p>


<h3>Value</h3>

<p><code>list</code> containing results (detailed log) of tracing for each pipe
in tracing path enumerated along the direction of flow:
</p>

<dl>
<dt><code>temperature</code></dt>
<dd>
<p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
carrier (water), [<em>°C</em>]. Type: <code>assert_double</code>.
</p>
</dd>
<dt><code>pressure</code></dt>
<dd>
<p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
carrier (water) for each pipe in tracing path enumerated along the
direction of flow, [<em>MPa</em>]. Type: <code>assert_double</code>.
</p>
</dd>
<dt><code>flow_rate</code></dt>
<dd>
<p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
carrier (water) for each pipe in tracing path enumerated along the
direction of flow, [<em>ton/hour</em>]. Type: <code>assert_double</code>.
</p>
</dd>
<dt><code>loss</code></dt>
<dd>
<p><em>Traced thermal hydraulic regime</em>. Normative specific heat
loss power for each pipe in tracing path enumerated along the direction
of flow, [<em>kcal/m/h</em>]. Type: <code>assert_double</code>.
</p>
</dd>
<dt><code>flux</code></dt>
<dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat flux for each pipe
in tracing path enumerated along the direction of flow, [<em>W/m^2</em>].
Type: <code>assert_double</code>.
</p>
</dd>
<dt><code>Q</code></dt>
<dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat loss for each
pipe in tracing path enumerated along the direction of flow per day,
[<em>kcal</em>]. Type: <code>assert_double</code>.
</p>
</dd>
</dl>
<p>Type: <code>assert_list</code>.
</p>


<h3>See Also</h3>

<p>Other Regime tracing: 
<code>m325tracebw()</code>,
<code>m325tracefw()</code>,
<code>tracebw()</code>,
<code>tracefw()</code>,
<code>traceline()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"> library(pipenostics)

# Consider 4-segment tracing path depicted in ?m325regtrace help page.
# First, let sensor readings for forward tracing:
t_fw &lt;- 130  # [°C]
p_fw &lt;- mpa_kgf(6)*all.equal(.588399, mpa_kgf(6))  # [MPa]
g_fw &lt;- 250  # [ton/hour]

# Let discharges to network for each pipeline segment are somehow determined as
discharges &lt;- seq(0, 30, 10)  # [ton/hour]

# Then the calculated regime (red squares) for forward tracing is
regime_fw &lt;- m325traceline(t_fw, p_fw, g_fw, discharges, forward = TRUE)
print(regime_fw)

# $temperature
# [1] 129.1799 128.4269 127.9628 127.3367
#
# $pressure
# [1] 0.5878607 0.5874226 0.5872143 0.5870330
#
# $flow_rate
# [1] 250 240 220 190
#
# $loss
# [1] 348.0000 347.1389 346.3483 345.8610
#
# $flux
# [1] 181.9600 181.5097 181.0963 180.8415
#
# $Q
# [1] 5011200 4415607 2493707 2905232


# Next consider values of traced regime as sensor readings for backward tracing:
t_bw &lt;- 127.3367  # [°C]
p_bw &lt;- .5870330  # [MPa]
g_bw &lt;- 190  # [ton/hour]

# Then the calculated regime (red squares) for backward tracing is
regime_bw &lt;- m325traceline(t_bw, p_bw, g_bw, discharges, forward = FALSE)
print(regime_bw)

# $temperature
# [1] 129.9953 129.1769 128.4254 127.9619
#
# $pressure
# [1] 0.5883998 0.5878611 0.5874228 0.5872144
#
# $flow_rate
# [1] 250 250 240 220
#
# $loss
# [1] 347.1358 346.3467 345.8599 345.2035
#
# $flux
# [1] 181.5081 181.0955 180.8410 180.4978
#
# $Q
# [1] 4998755 4405529 2490192 2899710

# Let compare sensor readings with backward tracing results:
tracing &lt;- with(regime_bw, {
  lambda &lt;- function(val, constraint)
    c(val, constraint, constraint - val,
      abs(constraint - val)*100/constraint)
  first &lt;- 1
  structure(
    rbind(
      lambda(temperature[first], t_fw),
      lambda(pressure[first],    p_fw),
      lambda(flow_rate[first], g_fw)
    ),
    dimnames = list(
      c("temperature", "pressure", "flow_rate"),
      c("sensor.value", "traced.value", "abs.discr", "rel.discr")
    )
  )
})
print(tracing)

# sensor.value traced.value     abs.discr    rel.discr
# temperature  129.9952943   130.000000  4.705723e-03 0.0036197868
# pressure       0.5883998     0.588399 -8.215938e-07 0.0001396321
# flow_rate    250.0000000   250.000000  0.000000e+00 0.0000000000

</code></pre>


</div>
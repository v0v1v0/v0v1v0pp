<div class="container">

<table style="width: 100%;"><tr>
<td>plot_network</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualize a (partial correlation) network graph of words.</h2>

<h3>Description</h3>

<p>Visualize a (partial correlation) network graph of words.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_network(
  data,
  words = NULL,
  pattern = NULL,
  index = c("pcor", "cor", "glasso", "sim"),
  alpha = 0.05,
  bonf = FALSE,
  max = NULL,
  node.size = "auto",
  node.group = NULL,
  node.color = NULL,
  label.text = NULL,
  label.size = 1.2,
  label.size.equal = TRUE,
  label.color = "black",
  edge.color = c("#009900", "#BF0000"),
  edge.label = FALSE,
  edge.label.size = 1,
  edge.label.color = NULL,
  edge.label.bg = "white",
  file = NULL,
  width = 10,
  height = 6,
  dpi = 500,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>wordvec</code> (data.table) or
<code>embed</code> (matrix),
see <code>data_wordvec_load</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>words</code></td>
<td>
<p>[Option 1] Character string(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>[Option 2] Regular expression (see <code>str_subset</code>).
If neither <code>words</code> nor <code>pattern</code> are specified (i.e., both are <code>NULL</code>),
then all words in the data will be extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>Use which index to perform network analysis?
Can be <code>"pcor"</code> (partial correlation, default and suggested),
<code>"cor"</code> (raw correlation),
<code>"glasso"</code> (graphical lasso-estimation of partial correlation matrix
using the <code>glasso</code> package),
or <code>"sim"</code> (pairwise cosine similarity).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Significance level to be used for not showing edges. Defaults to <code>0.05</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bonf</code></td>
<td>
<p>Bonferroni correction of <em>p</em> value. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max</code></td>
<td>
<p>Maximum value for scaling edge widths and colors. Defaults to the highest value of the index.
Can be <code>1</code> if you want to compare several graphs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.size</code></td>
<td>
<p>Node size. Defaults to 8*exp(-nNodes/80)+1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.group</code></td>
<td>
<p>Node group(s). Can be a named list (see examples) in which each element
is a vector of integers identifying the numbers of the nodes that belong together, or a factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.color</code></td>
<td>
<p>Node color(s). Can be a character vector of colors corresponding to <code>node.group</code>.
Defaults to white (if <code>node.group</code> is not specified)
or the palette of ggplot2 (if <code>node.group</code> is specified).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.text</code></td>
<td>
<p>Node label of text. Defaults to original words.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.size</code></td>
<td>
<p>Node label font size. Defaults to <code>1.2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.size.equal</code></td>
<td>
<p>Make the font size of all labels equal. Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.color</code></td>
<td>
<p>Node label color. Defaults to <code>"black"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge.color</code></td>
<td>
<p>Edge colors for positive and negative values, respectively.
Defaults to <code>c("#009900", "#BF0000")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge.label</code></td>
<td>
<p>Edge label of values. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge.label.size</code></td>
<td>
<p>Edge label font size. Defaults to <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge.label.color</code></td>
<td>
<p>Edge label color. Defaults to <code>edge.color</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge.label.bg</code></td>
<td>
<p>Edge label background color. Defaults to <code>"white"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>File name to be saved, should be png or pdf.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>
<p>Width and height (in inches) for the saved file.
Defaults to <code>10</code> and <code>6</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dpi</code></td>
<td>
<p>Dots per inch. Defaults to <code>500</code> (i.e., file resolution: 4000 * 3000).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other parameters passed to <code>qgraph</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisibly return a <code>qgraph</code> object,
which further can be plotted using <code>plot()</code>.
</p>


<h3>Download</h3>

<p>Download pre-trained word vectors data (<code>.RData</code>):
<a href="https://psychbruce.github.io/WordVector_RData.pdf">https://psychbruce.github.io/WordVector_RData.pdf</a>
</p>


<h3>See Also</h3>

<p><code>plot_similarity</code>
</p>
<p><code>plot_wordvec_tSNE</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">d = as_embed(demodata, normalize=TRUE)

words = cc("
man, woman,
he, she,
boy, girl,
father, mother,
mom, dad,
China, Japan
")

plot_network(d, words)

p = plot_network(
  d, words,
  node.group=list(Gender=1:6, Family=7:10, Country=11:12),
  node.color=c("antiquewhite", "lightsalmon", "lightblue"),
  file="network.png")
plot(p)

unlink("network.png")  # delete file for code check

# network analysis with centrality plot (see `qgraph` package)
qgraph::centralityPlot(p, include="all", scale="raw",
                       orderBy="Strength")

# graphical lasso-estimation of partial correlation matrix
plot_network(
  d, words,
  index="glasso",
  # threshold=TRUE,
  node.group=list(Gender=1:6, Family=7:10, Country=11:12),
  node.color=c("antiquewhite", "lightsalmon", "lightblue"))

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>chi_check</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check the validity of a CHI number</h2>

<h3>Description</h3>

<p><code>chi_check</code> takes a CHI number or a vector of CHI numbers
with <code>character</code> class. It returns feedback on the validity of the
entered CHI number and, if found to be invalid, provides an explanation as
to why.
</p>


<h3>Usage</h3>

<pre><code class="language-R">chi_check(x)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a CHI number or a vector of CHI numbers with <code>character</code> class.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The Community Health Index (CHI) is a register of all patients in
NHS Scotland. A CHI number is a unique, ten-digit identifier assigned to
each patient on the index.
</p>
<p>The first six digits of a CHI number are a patient's date of birth in
DD/MM/YY format.
</p>
<p>The ninth digit of a CHI number identifies a patient's sex: odd for male,
even for female. The tenth digit is a check digit, denoted <code>checksum</code>.
</p>
<p>While a CHI number is made up exclusively of numeric digits, it cannot be
stored with <code>numeric</code> class in R. This is because leading zeros in
numeric values are silently dropped, a practice not exclusive to R. For this
reason, <code>chi_check</code> accepts input values of <code>character</code> class
only. A leading zero can be added to a nine-digit CHI number using
<code>chi_pad()</code>.
</p>
<p><code>chi_check</code> assesses whether an entered CHI number is valid by checking
whether the answer to each of the following criteria is <code>Yes</code>:
</p>

<ul>
<li>
<p> Does it contain no non-numeric characters?
</p>
</li>
<li>
<p> Is it ten digits in length?
</p>
</li>
<li>
<p> Do the first six digits denote a valid date?
</p>
</li>
<li>
<p> Is the checksum digit correct?
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>chi_check</code> returns a character string. Depending on the
validity of the entered CHI number, it will return one of the following:
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠Valid CHI⁠</code>
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Invalid character(s) present⁠</code>
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Too many characters⁠</code>
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Too few characters⁠</code>
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Invalid date⁠</code>
</p>
</li>
<li> <p><code style="white-space: pre;">⁠Invalid checksum⁠</code>
</p>
</li>
<li> <p><code>Missing (NA)</code>
</p>
</li>
<li> <p><code>Missing (Blank)</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">chi_check("0101011237")
chi_check(c("0101201234", "3201201234"))

library(dplyr)
df &lt;- tibble(chi = c(
  "3213201234",
  "123456789",
  "12345678900",
  "010120123?",
  NA
))
df %&gt;%
  mutate(validity = chi_check(chi))
</code></pre>


</div>
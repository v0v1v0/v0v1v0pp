<div class="container">

<table style="width: 100%;"><tr>
<td>time_series</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collect Time-Series Google Trends Data</h2>

<h3>Description</h3>

<p>This function uses the 'pytrends.interest_over_time()' function available in 'pytrends' Python library to collect time-series Google Trends data and automatically store it in the specified directory.
</p>


<h3>Usage</h3>

<pre><code class="language-R">time_series(params, reference_geo_code = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>A list containing parameters including keyword, topic, folder_name, start_date, end_date, and data_format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_geo_code</code></td>
<td>
<p>Google Trends Geo code for the user-selected reference region. For example, UK's Geo is 'GB', Central Denmark Region's Geo is 'DK-82, and US DMA Philadelphia PA's Geo is '504'. Default is 'US'.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function collects Google Trends time-series data based on the specified parameters and saves it in the following structure: <code>folder_name/data_format/over_time/reference_geo_code</code>. Google Trends provides daily data if the time period between the start and end dates is less than 270 days, weekly data if the time period is between 270 days and 1890 days (270 weeks), and monthly data if it's equal to or greater than 270 weeks.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Create a temporary folder for the example

# Ensure the temporary folder is cleaned up after the example


if (reticulate::py_module_available("pytrends")) {
  params &lt;- initialize_request_trends(
    keyword = "Coronavirus disease 2019",
    topic = "/g/11j2cc_qll",
    folder_name = file.path(tempdir(), "test_folder"),
    start_date = "2024-05-01",
    end_date = "2024-05-03",
    data_format = "daily"
  )
  on.exit(unlink("test_folder", recursive = TRUE))

  # Run the time_series function with the parameters
  tryCatch({
    time_series(params, reference_geo_code = "US-CA")
  }, pytrends.exceptions.TooManyRequestsError = function(e) {
  message("Too many requests error: ", conditionMessage(e))
  })
} else {
  message("The 'pytrends' module is not available.
  Please install it by running install_pytrendslongitudinalr()")
}

</code></pre>


</div>
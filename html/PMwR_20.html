<div class="container">

<table style="width: 100%;"><tr>
<td>Adjust-Series</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Adjust Time Series for Dividends and Splits
</h2>

<h3>Description</h3>

<p>Adjust a time series for dividends and splits.
</p>


<h3>Usage</h3>

<pre><code class="language-R">div_adjust(x, t, div, backward = TRUE, additive = FALSE)

split_adjust(x, t, ratio, backward = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a numeric vector: the series to be adjusted
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>

<p>An integer vector, specifying the positions in
<code>x</code> at which dividends were paid
(‘ex-days’) or at which a split occurred.
Timestamps may be duplicated, e.g. several payments
may occur on a single timestamp.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>div</code></td>
<td>

<p>A numeric vector, specifying the dividends (or
payments, cashflows).  If necessary, recycled to
the length of <code>t</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>

<p>a numeric vector, specifying the split ratios. The ratio must be
‘American Style’: a 2-for-1 stock split, for example,
corresponds to a ratio of 2. (In other countries, for instance
Germany, a 2-for-1 stock split would be called a 1-for-1 split: you
keep your shares and receive one new share per share that you own.)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>backward</code></td>
<td>

<p>logical; see Details
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>additive</code></td>
<td>

<p>logical; see Details
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function transforms <code class="reqn">x</code> into returns, and
with those returns specified in <code class="reqn">t</code> calculated
as
</p>
<p style="text-align: center;"><code class="reqn">\frac{x_t + D_t}{x_{t-1}} - 1\,,</code>
</p>

<p>in which <code class="reqn">x</code> is the price, <code class="reqn">D</code> are dividends
and <code class="reqn">t</code> is time.  The adjusted <code class="reqn">x</code> is
then reconstructed from those returns.
</p>
<p>When <code>additive</code> is <code>TRUE</code>, dividends are
simply added back to the series; see Examples.
</p>
<p>With <code>backward</code> set to <code>TRUE</code>, which is the
default, the final prices in the unadjusted series matches
the final prices in the adjusted series.
</p>


<h3>Value</h3>

<p>a numeric vector of length equal to <code>length(x)</code>
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>Schumann, E. (2023) <em>Portfolio Management with R</em>.
<a href="https://enricoschumann.net/PMwR/">https://enricoschumann.net/PMwR/</a>
</p>
<p>Using <code>div_adjust</code> for handling generic external cashflows:
<a href="https://enricoschumann.net/R/packages/PMwR/manual/PMwR.html#returns-with-external-cashflows">https://enricoschumann.net/R/packages/PMwR/manual/PMwR.html#returns-with-external-cashflows</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- c(9.777, 10.04, 9.207, 9.406)
div &lt;- 0.7
t &lt;- 3

div_adjust(x, t, div)
div_adjust(x, t, div, FALSE)



## assume there were three splits: adjust shares outstanding
shares &lt;- c(100, 100, 200, 200, 1000, 1500)
t &lt;- c(3, 5, 6)
ratio &lt;- c(2, 5, 1.5)
### =&gt; invert ratio
split_adjust(shares, t, 1/ratio)
## [1] 1500 1500 1500 1500 1500 1500

split_adjust(shares, t, 1/ratio, backward = FALSE)
## [1] 100 100 100 100 100 100



## 'additive' ** FALSE ** (default setting)
x &lt;- c(100, 95, 100, 95, 100)
div &lt;- 5
t &lt;- c(2, 4)
div_adjust(x, t, div)
## 90.25  90.25  95.00  95.00 100.00
returns(div_adjust(x, t, div))
## 0.00000000 0.05263158 0.00000000 0.05263158
## ==&gt; reflect _actual_ returns 100/95 - 1

## 'additive' ** TRUE **
div_adjust(x, t, div, additive = TRUE)
## 90  90  95  95 100
returns(div_adjust(x, t, div, additive = TRUE))
## 0.00000000 0.05555556 0.00000000 0.05263158
## ==&gt; reflect return 95/90 - 1
</code></pre>


</div>
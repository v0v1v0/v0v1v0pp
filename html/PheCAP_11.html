<div class="container">

<table style="width: 100%;"><tr>
<td>phecap_train_phenotyping_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Train Phenotyping Model using the Training Labels
</h2>

<h3>Description</h3>

<p>Train the phenotyping model on the training dataset,
and evaluate its performance via random splits of the training dataset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">phecap_train_phenotyping_model(
  data, surrogates, feature_selected,
  method = "lasso_bic",
  train_percent = 0.7, num_splits = 200L,
  start_seed = 78900L, verbose = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>an object of class <code>PhecapData</code>, obtained by calling <code>PhecapData(...)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surrogates</code></td>
<td>

<p>a list of objects of class <code>PhecapSurrogate</code>, obtained by something like
<code>list(PhecapSurrogate(...), PhecapSurrogate(...))</code>.
The surrogates used here might be different from
that used in feature extraction.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feature_selected</code></td>
<td>

<p>a character vector of the features that should be included in the model,
probably returned by <code>phecap_run_feature_extraction</code>
(but not necessary).
The features listed here might be different from
those returned from feature extraction.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>

<p>Either a character vector or a list of two components.
If a character vector is used, possible entries are given below.
When at least two methods are specified,
the predicted probability is the simple average of the
predicted probabilities from each method.
</p>

<ul>
<li> <p><code>'plain'</code> (logistic regression without penalty)
</p>
</li>
<li> <p><code>'ridge_cv'</code> (logistic regression with ridge penalty and CV tuning)
</p>
</li>
<li> <p><code>'lasso_cv'</code> (logistic regression with lasso penalty and CV tuning)
</p>
</li>
<li> <p><code>'lasso_bic'</code> (logistic regression with lasso penalty and BIC tuning)
</p>
</li>
<li> <p><code>'alasso_cv'</code> (logistic regression with adaptive lasso penalty and CV tuning)
</p>
</li>
<li> <p><code>'alasso_bic'</code> (logistic regression with adaptive lasso penalty and BIC tuning)
</p>
</li>
<li> <p><code>'svm'</code> (support vector machine with CV tuning, package <code>e1071</code> needed, <code>subject_weight</code> not supported)
</p>
</li>
<li> <p><code>'rf'</code> (random forest with default parameters, package <code>randomForestSRC</code> needed)
</p>
</li>
<li> <p><code>'xgb'</code> (extreme gradient boosting with default parameters, package <code>xgboost</code> needed)
</p>
</li>
</ul>
<p>If a list is used, it should contain two named components as follows.
</p>

<ul>
<li> <p><code>fit</code> (a function for model fitting, with arguments <code>x</code>, <code>y</code>, <code>subject_weight</code>, <code>penalty_weight</code>)
</p>
</li>
<li> <p><code>predict</code> (a function for prediction, with arguments <code>object</code> which was returned by <code>fit</code>, <code>x</code> which was used as the new data to predict on)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_percent</code></td>
<td>

<p>The percentage (between 0 and 1) of labels that are used for model training
during random splits
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_splits</code></td>
<td>

<p>The number of random splits.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_seed</code></td>
<td>

<p>in the i-th split, the seed is set to start_seed + i.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>print progress every verbose splits if verbose is positive,
or remain quiet if verbose is zero
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>PhecapModel</code>, with components
</p>
<table>
<tr style="vertical-align: top;">
<td><code>coefficients</code></td>
<td>
<p>the fitted object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the method used for model training</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feature_selected</code></td>
<td>
<p>the feature selected by SAFE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_roc</code></td>
<td>
<p>ROC on training dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_auc</code></td>
<td>
<p>AUC on training dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split_roc</code></td>
<td>
<p>average ROC on random splits of training dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split_auc</code></td>
<td>
<p>average AUC on random splits of training dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit_function</code></td>
<td>
<p>the function used for fitting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predict_function</code></td>
<td>
<p>the function used for prediction</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p>See <code>PheCAP-package</code> for code examples.
</p>


</div>
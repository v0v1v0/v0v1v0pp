<div class="container">

<table style="width: 100%;"><tr>
<td>intxsurv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the CATE model using specified scoring methods for survival outcomes</h2>

<h3>Description</h3>

<p>Coefficients of the CATE estimated with random forest, boosting, naive Poisson, two regression, and contrast regression
</p>


<h3>Usage</h3>

<pre><code class="language-R">intxsurv(
  y,
  d,
  trt,
  x.cate,
  x.ps,
  x.ipcw,
  yf = NULL,
  tau0,
  surv.min = 0.025,
  score.method = c("randomForest", "boosting", "poisson", "twoReg", "contrastReg"),
  ps.method = "glm",
  minPS = 0.01,
  maxPS = 0.99,
  ipcw.method = "breslow",
  initial.predictor.method = "randomForest",
  tree.depth = 3,
  n.trees.rf = 1000,
  n.trees.boosting = 150,
  B = 3,
  Kfold = 5,
  plot.gbmperf = TRUE,
  error.maxNR = 0.001,
  max.iterNR = 100,
  tune = c(0.5, 2),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Observed survival or censoring time; vector of size <code>n</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>The event indicator, normally <code>1 = event, 0 = censored</code>; vector of size <code>n</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trt</code></td>
<td>
<p>Treatment received; vector of size <code>n</code> with treatment coded as 0/1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.cate</code></td>
<td>
<p>Matrix of <code>p.cate</code> baseline covariates specified in the outcome model; dimension <code>n</code> by <code>p.cate</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.ps</code></td>
<td>
<p>Matrix of <code>p.ps</code> baseline covariates specified in the propensity score model; dimension <code>n</code> by <code>p.ps</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.ipcw</code></td>
<td>
<p>Matrix of <code>p.ipw</code> baseline covariate specified in inverse probability of censoring weighting; dimension <code>n</code> by <code>p.ipw</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yf</code></td>
<td>
<p>Follow-up time, interpreted as the potential censoring time; vector of size <code>n</code> if the potential censoring time is known.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau0</code></td>
<td>
<p>The truncation time for defining restricted mean time lost.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surv.min</code></td>
<td>
<p>Lower truncation limit for probability of being censored (positive and very close to 0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score.method</code></td>
<td>
<p>A vector of one or multiple methods to estimate the CATE score.
Allowed values are:  <code>'randomForest'</code>, <code>'boosting'</code>, <code>'poisson'</code>, <code>'twoReg'</code>,
<code>'contrastReg'</code>. Default specifies all 5 methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ps.method</code></td>
<td>
<p>A character vector for the method to estimate the propensity score.
Allowed values include one of:
<code>'glm'</code> for logistic regression with main effects only (default), or
<code>'lasso'</code> for a logistic regression with main effects and LASSO penalization on
two-way interactions (added to the model if interactions are not specified in <code>ps.model</code>).
Relevant only when <code>ps.model</code> has more than one variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minPS</code></td>
<td>
<p>A numerical value (in '[0, 1]') below which estimated propensity scores should be
truncated. Default is <code>0.01</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxPS</code></td>
<td>
<p>A number above which estimated propensity scores should be trimmed; scalar</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ipcw.method</code></td>
<td>
<p>The censoring model. Allowed values are: <code>'breslow'</code> (Cox regression with Breslow estimator of the baseline survivor function),
<code>'aft (exponential)'</code>, <code>'aft (weibull)'</code>, <code>'aft (lognormal)'</code> or <code>'aft (loglogistic)'</code>. Default is <code>'breslow'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial.predictor.method</code></td>
<td>
<p>A character vector for the method used to get initial
outcome predictions conditional on the covariates in <code>cate.model</code>
in <code>score.method = 'twoReg'</code> and <code>'contrastReg'</code>. Allowed values include
one of <code>'randomForest'</code>, <code>'boosting'</code> and <code>'logistic'</code> (fastest). Default is <code>'randomForest'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tree.depth</code></td>
<td>
<p>A positive integer specifying the depth of individual trees in boosting
(usually 2-3). Used only if <code>score.method = 'boosting'</code> or
if <code>score.method = 'twoReg'</code> or <code>'contrastReg'</code> and
<code>initial.predictor.method = 'boosting'</code>. Default is <code>3</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.trees.rf</code></td>
<td>
<p>A positive integer specifying the maximum number of trees in random forest.
Used if <code>score.method = 'ranfomForest'</code> or
if <code>initial.predictor.method = 'randomForest'</code> with
<code>score.method = 'twoReg'</code> or <code>'contrastReg'</code>. Default is <code>1000</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.trees.boosting</code></td>
<td>
<p>A positive integer specifying the maximum number of trees in boosting
(usually 100-1000). Used if <code>score.method = 'boosting'</code> or
if <code>initial.predictor.method = 'boosting'</code> with
<code>score.method = 'twoReg'</code> or <code>'contrastReg'</code>. Default is <code>150</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>A positive integer specifying the number of time cross-fitting is repeated in
<code>score.method = 'twoReg'</code> and <code>'contrastReg'</code>. Default is <code>3</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Kfold</code></td>
<td>
<p>A positive integer specifying the number of folds (parts) used in cross-fitting
to partition the data in <code>score.method = 'twoReg'</code> and <code>'contrastReg'</code>.
Default is <code>5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.gbmperf</code></td>
<td>
<p>A logical value indicating whether to plot the performance measures in
boosting. Used only if <code>score.method = 'boosting'</code> or if <code>score.method = 'twoReg'</code>
or <code>'contrastReg'</code> and <code>initial.predictor.method = 'boosting'</code>. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error.maxNR</code></td>
<td>
<p>A numerical value &gt; 0 indicating the minimum value of the mean absolute
error in Newton Raphson algorithm. Used only if <code>score.method = 'contrastReg'</code>.
Default is <code>0.001</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iterNR</code></td>
<td>
<p>A positive integer indicating the maximum number of iterations in the
Newton Raphson algorithm. Used only if <code>score.method = 'contrastReg'</code>.
Default is <code>100</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tune</code></td>
<td>
<p>A vector of 2 numerical values &gt; 0 specifying tuning parameters for the
Newton Raphson algorithm. <code>tune[1]</code> is the step size, <code>tune[2]</code> specifies a
quantity to be added to diagonal of the slope matrix to prevent singularity.
Used only if <code>score.method = 'contrastReg'</code>. Default is <code>c(0.5, 2)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments for <code>gbm()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Depending on what score.method is, the outputs is a combination of the following:
result.randomForest: Results of random forest fit, for trt = 0 and trt = 1 separately
result.boosting: Results of boosting fit, for trt = 0 and trt = 1 separately
result.poisson: Naive Poisson estimator (beta1 - beta0); vector of length <code>p.cate</code> + 1
result.twoReg: Two regression estimator (beta1 - beta0); vector of length <code>p.cate</code> + 1
result.contrastReg: A list of the contrast regression results with 2 elements:
$delta.contrastReg: Contrast regression DR estimator; vector of length <code>p.cate</code> + 1
$converge.contrastReg: Indicator that the Newton Raphson algorithm converged for <code>delta_0</code>; boolean
</p>


</div>
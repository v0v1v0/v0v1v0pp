<div class="container">

<table style="width: 100%;"><tr>
<td>rvar_factor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Factor random variables of arbitrary dimension</h2>

<h3>Description</h3>

<p>Random variables backed by factor-like arrays of arbitrary dimension.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rvar_factor(
  x = factor(),
  dim = NULL,
  dimnames = NULL,
  nchains = NULL,
  with_chains = FALSE,
  ...
)

rvar_ordered(
  x = ordered(NULL),
  dim = NULL,
  dimnames = NULL,
  nchains = NULL,
  with_chains = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>(multiple options) The object to convert to an <code>rvar</code>:
</p>

<ul>
<li>
<p> A vector of draws from a distribution.
</p>
</li>
<li>
<p> An array where the first dimension represents draws from a distribution.
The resulting <code>rvar</code> will have dimension <code>dim(x)[-1]</code>; that is,
everything except the first dimension is used for the shape of the
variable, and the first dimension is used to index draws from the
distribution (see <strong>Examples</strong>). Optionally,
if <code>with_chains == TRUE</code>, the first dimension indexes the iteration and the
second dimension indexes the chain (see <code>with_chains</code>).
</p>
</li>
<li>
<p> An <code>rvar</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dim</code></td>
<td>
<p>(integer vector) One or more integers giving the maximal indices
in each dimension to override the dimensions of the <code>rvar</code> to be created
(see <code>dim()</code>). If <code>NULL</code> (the default), <code>dim</code> is determined by the input.
<strong>NOTE:</strong> This argument controls the dimensions of the <code>rvar</code>, not the
underlying array, so you cannot change the number of draws using this
argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimnames</code></td>
<td>
<p>(list) Character vectors giving the names in each dimension
to override the names of the dimensions of the <code>rvar</code> to be created (see
<code>dimnames()</code>). If <code>NULL</code> (the default), this is determined by the input.
<strong>NOTE:</strong> This argument controls the names of the dimensions of the
<code>rvar</code>, not the underlying array.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nchains</code></td>
<td>
<p>(positive integer) The number of chains. The if <code>NULL</code> (the default),
<code>1</code> is used unless <code>x</code> is already an <code>rvar</code>, in which case the number of
chains it has is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>with_chains</code></td>
<td>
<p>(logical) Does <code>x</code> include a dimension for chains?
If <code>FALSE</code> (the default), chains are not included, the first dimension of
the input array should index draws, and the <code>nchains</code> argument can be
used to determine the number of chains. If <code>TRUE</code>, the <code>nchains</code> argument
is ignored and the second dimension of <code>x</code> is used to index chains.
Internally, the array will be converted to a format without the chain index.
Ignored when <code>x</code> is already an <code>rvar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Arguments passed on to <code>base::factor</code>
</p>

<dl>
<dt><code>levels</code></dt>
<dd>
<p>an optional vector of the unique values (as character strings)
that <code>x</code> might have taken.  The default is the unique set of
values taken by <code>as.character(x)</code>, sorted into
increasing order <em>of <code>x</code></em>.  Note that this set can be
specified as smaller than <code>sort(unique(x))</code>.</p>
</dd>
<dt><code>labels</code></dt>
<dd>
<p><em>either</em> an optional character vector of
labels for the levels (in the same order as <code>levels</code> after
removing those in <code>exclude</code>), <em>or</em> a character string of
length 1.  Duplicated values in <code>labels</code> can be used to map
different values of <code>x</code> to the same factor level.</p>
</dd>
<dt><code>exclude</code></dt>
<dd>
<p>a vector of values to be excluded when forming the
set of levels.  This may be factor with the same level set as <code>x</code>
or should be a <code>character</code>.</p>
</dd>
<dt><code>ordered</code></dt>
<dd>
<p>logical flag to determine if the levels should be regarded
as ordered (in the order given).</p>
</dd>
<dt><code>nmax</code></dt>
<dd>
<p>an upper bound on the number of levels; see ‘Details’.</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A subtype of <code>rvar()</code> that represents a (possibly multidimensional) sample of
a factor or an ordered factor. It is otherwise very similar to the basic <code>rvar()</code>:
it is backed by a multidimensional array with draws as the first dimension.
The primary difference is that the backing array has class <code>"factor"</code> (for <code>rvar_factor()</code>)
or <code>c("ordered", "factor")</code> (for <code>rvar_ordered()</code>). If you
pass a factor or ordered factor to <code>rvar()</code> it will automatically return
an object with the classes <code>"rvar_factor"</code> or <code>c("rvar_ordered", "rvar_factor")</code>.
</p>
<p>See <code>rvar()</code> for more details on the internals of the random variable datatype.
</p>


<h3>Value</h3>

<p>An object of class <code>"rvar_factor"</code> representing a <code>factor</code>-like random variable.
</p>


<h3>See Also</h3>

<p><code>as_rvar_factor()</code> to convert objects to <code>rvar_factor</code>s. See <code>rdo()</code>, <code>rfun()</code>, and
<code>rvar_rng()</code> for higher-level interfaces for creating <code>rvar</code>s.
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1234)

# To create a "scalar" `rvar_factor`, pass a one-dimensional array or a vector
# whose length (here `4000`) is the desired number of draws:
x &lt;- rvar(sample(c("a","a","a","b","c"), 4000, replace = TRUE))
x

# Create random vectors by adding an additional dimension:
x_array &lt;- array(c(
    sample(c("a","a","a","b","c"), 4000, replace = TRUE),
    sample(c("a","a","b","c","c"), 4000, replace = TRUE),
    sample(c("b","b","b","b","c"), 4000, replace = TRUE),
    sample(c("d","d","b","b","c"), 4000, replace = TRUE)
  ), dim = c(4000, 4))
rvar_factor(x_array)

# You can also create ordered factors
rvar_ordered(x_array)

# arguments of factor() and ordered() are passed down by the constructor
# e.g. we can reorder levels of an ordered factor:
rvar_ordered(x_array, levels = c("d","c","b","a"))

# Unlike base factors, rvar factors can be matrices or arrays:
rvar_factor(x_array, dim = c(2, 2))

# If the input to rvar_factor() is an array with a `"levels"` attribute, it
# will use those as the levels of the factor
y_array &lt;- t(array(rbinom(3000, 1, c(0.1, 0.5, 0.9)) + 1, dim = c(3, 1000)))
rvar(y_array)
# with levels
attr(y_array, "levels") = c("a", "b")
rvar_factor(y_array)

</code></pre>


</div>
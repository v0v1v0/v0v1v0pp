<div class="container">

<table style="width: 100%;"><tr>
<td>simulate_d_database</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate d value databases of primary studies</h2>

<h3>Description</h3>

<p>The <code>simulate_d_database</code> function generates databases of psychometric d value data from sample-size parameters, correlation parameters, mean parameters, standard deviation parameters, reliability parameters, and selection-ratio parameters.
The output database can be provided in a long format.
If composite variables are to be formed, parameters can also be defined for the weights used to form the composites as well as the selection ratios applied to the composites.
This function will return a database of statistics as well as a database of parameters - the parameter database contains the actual study parameters for each simulated sample (without sampling error) to allow comparisons between meta-analytic results computed from the statistics and the actual means and variances of parameters.
The <code>merge_simdat_d</code> function can be used to merge multiple simulated databases and the <code>sparsify_simdat_d</code> function can be used to randomly delete artifact information (a procedure commonly done in simulations of artifact-distribution methods).
</p>


<h3>Usage</h3>

<pre><code class="language-R">simulate_d_database(
  k,
  n_params,
  rho_params,
  mu_params = NULL,
  sigma_params = 1,
  rel_params = 1,
  sr_params = 1,
  k_items_params = 1,
  wt_params = NULL,
  allow_neg_wt = FALSE,
  sr_composite_params = NULL,
  group_names = NULL,
  var_names = NULL,
  composite_names = NULL,
  diffs_as_obs = FALSE,
  show_applicant = FALSE,
  keep_vars = NULL,
  decimals = 2,
  max_iter = 100,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Number of studies to simulate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_params</code></td>
<td>
<p>List of parameter distributions (or data-generation function; see details) for subgroup sample sizes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho_params</code></td>
<td>
<p>List containing a list of parameter distributions (or data-generation functions; see details) for correlations for each simulated group. If simulating data from a single fixed population matrix in each group, supply a list of those matrices for this argument (if the diagonals contains non-unity values and 'sigma_params' argument is not specified, those values will be used as variances).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mu_params</code></td>
<td>
<p>List containing a list of parameter distributions (or data-generation functions; see details) for means for each simulated group. If <code>NULL</code>, all means will be set to zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma_params</code></td>
<td>
<p>List containing a list of parameter distributions (or data-generation functions; see details) for standard deviations for each simulated group. If <code>NULL</code>, all standard deviations will be set to unity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rel_params</code></td>
<td>
<p>List containing a list of parameter distributions (or data-generation functions; see details) for reliabilities for each simulated group. If <code>NULL</code>, all reliabilities will be set to unity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_params</code></td>
<td>
<p>List of parameter distributions (or data-generation functions; see details) for selection ratios. If <code>NULL</code>, all selection ratios will be set to unity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k_items_params</code></td>
<td>
<p>List of parameter distributions (or data-generation functions; see details) for the number of test items comprising each of the variables to be simulated (all are single-item variables by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt_params</code></td>
<td>
<p>List of parameter distributions (or data-generation functions; see details) to create weights for use in forming composites.
If multiple composites are formed, the list should be a list of lists, with the general format: <code>list(comp1_params = list(...params...), comp2_params = list(...params...), etc.)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_neg_wt</code></td>
<td>
<p>Logical scalar that determines whether negative weights should be allowed (<code>TRUE</code>) or not (<code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_composite_params</code></td>
<td>
<p>Parameter distributions (or data-generation functions; see details) for composite selection ratios.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_names</code></td>
<td>
<p>Optional vector of group names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_names</code></td>
<td>
<p>Optional vector of variable names for all non-composite variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>composite_names</code></td>
<td>
<p>Optional vector of names for composite variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diffs_as_obs</code></td>
<td>
<p>Logical scalar that determines whether standard deviation parameters represent standard deviations of observed scores (<code>TRUE</code>) or of true scores (<code>FALSE</code>; default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_applicant</code></td>
<td>
<p>Should applicant data be shown for sample statistics (<code>TRUE</code>) or suppressed (<code>FALSE</code>)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_vars</code></td>
<td>
<p>Optional vector of variable names to be extracted from the simulation and returned in the output object. All variables are returned by default. Use this argument when
only some variables are of interest and others are generated solely to serve as selection variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals</code></td>
<td>
<p>Number of decimals to which statistical results (not parameters) should be rounded. Rounding to 2 decimal places best captures the precision of data available from published primary research.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter</code></td>
<td>
<p>Maximum number of iterations to allow in the parameter selection process before terminating with convergence failure. Must be finite.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Values supplied as any argument with the suffix "params" can take any of three forms (see Examples for a demonstration of usage):
</p>

<ul>
<li>
<p> A vector of values from which study parameters should be sampled.
</p>
</li>
<li>
<p> A vector containing a mean with a variance or standard deviation. These values must be named "mean," "var," and "sd," respectively, for the program to recognize which value is which.
</p>
</li>
<li>
<p> A matrix containing a row of values (this row must be named "values") from which study parameters should be sampled and a row of weights (this row must be labeled 'weights') associated
with the values to be sampled.
</p>
</li>
<li>
<p> A matrix containing a column of values (this column must be named "values") from which study parameters should be sampled and a column of weights (this column must be labeled 'weights') associated
with the values to be sampled.
</p>
</li>
<li>
<p> A function that is configured to generate data using only one argument that defines the number of cases to generate, e.g., <code>fun(n = 10)</code>.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A database of simulated primary studies' statistics and analytically determined parameter values.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (requireNamespace("nor1mix", quietly = TRUE)) {
  ## Define sample sizes, means, and other parameters for each of two groups:
  n_params &lt;- list(c(mean = 200, sd = 20),
                   c(mean = 100, sd = 20))
  rho_params &lt;- list(list(c(.3, .4, .5)),
                     list(c(.3, .4, .5)))
  mu_params &lt;- list(list(c(mean = .5, sd = .5), c(-.5, 0, .5)),
                    list(c(mean = 0, sd = .5), c(-.2, 0, .2)))
  sigma_params &lt;- list(list(1, 1),
                       list(1, 1))
  rel_params &lt;- list(list(.8, .8),
                     list(.8, .8))
  sr_params &lt;- list(1, .5)

  simulate_d_database(k = 5, n_params = n_params, rho_params = rho_params,
                      mu_params = mu_params, sigma_params = sigma_params,
                      rel_params = rel_params, sr_params = sr_params,
                      k_items = c(4, 4),
                      group_names = NULL, var_names = c("y1", "y2"),
                      show_applicant = TRUE, keep_vars = c("y1", "y2"), decimals = 2)
}
</code></pre>


</div>
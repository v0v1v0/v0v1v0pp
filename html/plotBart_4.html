<div class="container">

<table style="width: 100%;"><tr>
<td>plot_common_support</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot common support based on the standard deviation rule, chi squared rule, or both</h2>

<h3>Description</h3>

<p>Plot common support based on the standard deviation rule, chi squared rule, or both.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_common_support(.model, rule = c("both", "sd", "chi"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rule</code></td>
<td>
<p>one of c('both', 'sd', 'chi') denoting which rule to use to identify lack of support</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Sufficient overlap/common support is an assumption of causal inference.
BART models use the uncertainty of counter factual uncertainty.
When the posterior distribution of an individual's counterfactual prediction extends beyond a specified cut-point, that point likely has insufficient common support.
'bartCause' model offer the option to automatically remove points without common support from analyses, however, this must be specified during model fitting.
Cut-points are determined through one of two rules: the standard deviation (sd) or chi-squared (chi).
Under the standard deviation rule, a point has weak common support if its posterior distribution of the counterfactual deviation is greater than the maximum posterior of the observed predictions with 1 standard deviation of the distribution of standard deviations for each individual's predicted outcome under the observed assignment.
Under the chi-squared rule, a point is discarded if the variance between its counterfactual prediction over observed prediction are statistically different under a chi-squared distribution with 1 degree of freedom. For more details on discard rules see Hill and Su 2013.
</p>
<p>When called this plot will show how many points would have been removed under the standard deviation and chi-squared rules. This plot should be used as a diagnostic for 'bartCause' models fit without a common-support rule.
</p>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>References</h3>

<p>Hill, J., &amp; Su, Y. S. (2013).
Assessing lack of common support in causal inference using Bayesian nonparametrics: Implications for evaluating the effect of breastfeeding on children's cognitive outcomes.
The Annals of Applied Statistics,
1386-1420.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none'
)
plot_common_support(model_results)

</code></pre>


</div>
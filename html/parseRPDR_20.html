<div class="container">

<table style="width: 100%;"><tr>
<td>load_dem</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Loads demographic information into R for new demographic tables following changes in the beginning of 2022.</h2>

<h3>Description</h3>

<p>Loads patient demographic  and vital status information into the R environment. Since version 0.2.2 of the software this function supports the new demographics table data definitions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">load_dem(
  file,
  merge_id = "EMPI",
  sep = ":",
  id_length = "standard",
  perc = 0.6,
  na = TRUE,
  identical = TRUE,
  nThread = parallel::detectCores() - 1,
  mrn_type = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>string, full file path to Dem.txt.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge_id</code></td>
<td>
<p>string, column name to use to create <em>ID_MERGE</em> column used to merge different datasets. Defaults to <em>EPIC_PMRN</em>,
as it is the preferred MRN in the RPDR system.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>string, divider between hospital ID and MRN. Defaults to <em>:</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_length</code></td>
<td>
<p>string, indicating whether to modify MRN length based-on required values <em>id_length = standard</em>, or to keep lengths as is <em>id_length = asis</em>.
If <em>id_length = standard</em> then in case of <em>MGH, BWH, MCL, EMPI and PMRN</em> the length of the MRNs are corrected accordingly by adding zeros, or removing numeral from the beginning.
In other cases the lengths are unchanged. Defaults to <em>standard</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perc</code></td>
<td>
<p>numeric, a number between 0-1 indicating which parsed ID columns to keep. Data present in <em>perc x 100%</em> of patients are kept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na</code></td>
<td>
<p>boolean, whether to remove columns with only NA values. Defaults to <em>TRUE</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>identical</code></td>
<td>
<p>boolean, whether to remove columns with identical values. Defaults to <em>TRUE</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nThread</code></td>
<td>
<p>integer, number of threads to use to load data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mrn_type</code></td>
<td>
<p>boolean, should data in <em>MRN_Type</em> and <em>MRN</em> be parsed. Defaults to <em>FALSE</em>, as it is not advised to parse these for all data sources as it takes considerable time.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data table, with demographic information data.
</p>

<dl>
<dt>ID_MERGE</dt>
<dd>
<p>numeric, defined IDs by <em>merge_id</em>, used for merging later.</p>
</dd>
<dt>ID_dem_EMPI</dt>
<dd>
<p>string, Unique Partners-wide identifier assigned to the patient used to consolidate patient information.
from <em>dem</em> datasource, corresponds to EMPI in RPDR. Data is formatted using pretty_mrn().</p>
</dd>
<dt>ID_dem_PMRN</dt>
<dd>
<p>string, Epic medical record number. This value is unique across Epic instances within the Partners network.
from <em>dem</em> datasource, corresponds to EPIC_PMRN in RPDR. Data is formatted using pretty_mrn().</p>
</dd>
<dt>ID_dem_loc</dt>
<dd>
<p>string, if mrn_type == TRUE, then the data in <em>MRN_Type</em> and <em>MRN</em> are parsed into IDs corresponding to locations <em>(loc)</em>. Data is formatted using pretty_mrn().</p>
</dd>
<dt>gender_legal_sex</dt>
<dd>
<p>string, Patient's legal sex, corresponds to Gender_Legal_Sex in RPDR.</p>
</dd>
<dt>sex_at_birth</dt>
<dd>
<p>string, Patientâ€™s sex at time of birth, corresponds to Sex_at_Birth in RPDR.</p>
</dd>
<dt>gender_identity</dt>
<dd>
<p>string, Patient's personal conception of their gender, corresponds to Gender_Identity in RPDR.</p>
</dd>
<dt>time_date_of_birth</dt>
<dd>
<p>POSIXct, Patient's date of birth, corresponds to Date_of_Birth. Converted to POSIXct format.</p>
</dd>
<dt>age</dt>
<dd>
<p>string, Patient's current age (or age at death), corresponds to Age in RPDR.</p>
</dd>
<dt>language</dt>
<dd>
<p>string, Patient's preferred spoken language, corresponds to Language in RPDR.</p>
</dd>
<dt>language_group</dt>
<dd>
<p>string, Patient's preferred language: English or Non-English, corresponds to Language_Group in RPDR.</p>
</dd>
<dt>race_1</dt>
<dd>
<p>string, Patient's primary race, corresponds to Race1 in RPDR.</p>
</dd>
<dt>race_2</dt>
<dd>
<p>string, Patient's primary race if more than one race, corresponds to Race2 in RPDR.</p>
</dd>
<dt>race_group</dt>
<dd>
<p>string, Patient's Race Group as determined by Race1 and Race2, corresponds to Race_Group in RPDR.</p>
</dd>
<dt>ethnic_group</dt>
<dd>
<p>string, Patient's Ethnicity: Hispanic or Non Hispanic, corresponds to Ethnic_Group in RPDR.</p>
</dd>
<dt>marital</dt>
<dd>
<p>string, Patient's current marital status, corresponds to Marital_Status in RPDR.</p>
</dd>
<dt>religion</dt>
<dd>
<p>string, Patient-identified religious preference, corresponds to Religion in RPDR.</p>
</dd>
<dt>veteran</dt>
<dd>
<p>string, Patient's current military veteran status, corresponds to Is_a_veteran in RPDR.</p>
</dd>
<dt>country_dem</dt>
<dd>
<p>string, Patient's current country of residence from dem datasource, corresponds to Country in RPDR.</p>
</dd>
<dt>zip_dem</dt>
<dd>
<p>string, Mailing zip code of patient's primary residence from dem datasource, corresponds to Zip_code in RPDR.Formatted to 5 character zip codes.</p>
</dd>
<dt>vital_status</dt>
<dd>
<p>string, Identifies if the patient is living or deceased.
This data is updated monthly from the Partners registration system and the Social Security Death Master Index, corresponds to Vital_Status in RPDR. Punctuation marks are removed.</p>
</dd>
<dt>time_date_of_death</dt>
<dd>
<p>POSIXct, Recorded date of death from source in 'Vital_Status'.
Date of death information obtained solely from the Social Security Death Index will not be reported until 3 years after death due to privacy concerns.
If the value is independently documented by a Partners entity within the 3 year window then the date will be displayed. corresponds to Date_of_Death in RPDR. Converted to POSIXct format.</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#Using defaults
d_dem &lt;- load_dem(file = "test_Dem.txt")

#Use sequential processing
d_dem &lt;- load_dem(file = "test_Dem.txt", nThread = 1)

#Use parallel processing and parse data in MRN_Type and MRN columns and keep all IDs
d_dem &lt;- load_dem(file = "test_Dem.txt", nThread = 20, mrn_type = TRUE, perc = 1)

## End(Not run)
</code></pre>


</div>
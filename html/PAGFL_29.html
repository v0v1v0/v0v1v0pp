<div class="container">

<table style="width: 100%;"><tr>
<td>sim_DGP</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate a Panel With a Group Structure in the Slope Coefficients</h2>

<h3>Description</h3>

<p>Construct a static or dynamic, exogenous or endogenous panel data set subject to a group structure in the slope coefficients with optional <code class="reqn">AR(1)</code> or <code class="reqn">GARCH(1,1)</code> innovations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_DGP(
  N = 50,
  n_periods = 40,
  p = 2,
  n_groups = 3,
  group_proportions = NULL,
  error_spec = "iid",
  dynamic = FALSE,
  dyn_panel = lifecycle::deprecated(),
  q = NULL,
  alpha_0 = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>the number of cross-sectional units. Default is 50.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_periods</code></td>
<td>
<p>the number of simulated time periods <code class="reqn">T</code>. Default is 40.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>the number of explanatory variables. Default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_groups</code></td>
<td>
<p>the number of groups <code class="reqn">K</code>. Default is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_proportions</code></td>
<td>
<p>a numeric vector of length <code>n_groups</code> indicating size of each group as a fraction of <code class="reqn">N</code>. If <code>NULL</code>, all groups are of size <code class="reqn">N / K</code>. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_spec</code></td>
<td>
<p>options include
</p>

<dl>
<dt><code>"iid"</code></dt>
<dd>
<p>for <code class="reqn">iid</code> errors.</p>
</dd>
<dt><code>"AR"</code></dt>
<dd>
<p>for an <code class="reqn">AR(1)</code> error process with an autoregressive coefficient of 0.5.</p>
</dd>
<dt><code>"GARCH"</code></dt>
<dd>
<p>for a <code class="reqn">GARCH(1,1)</code> error process with a 0.05 constant, a 0.05 ARCH and a 0.9 GARCH coefficient.</p>
</dd>
</dl>
<p>Default is <code>"iid"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dynamic</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the panel includes one stationary autoregressive lag of <code class="reqn">y_{it}</code> as an explanatory variable (see sec. Details for more information on the <code class="reqn">AR</code> coefficient). Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dyn_panel</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> deprecated and replaced by <code>dynamic</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>the number of exogenous instruments when a panel with endogenous regressors is to be simulated. If panel data set with exogenous regressors is supposed to be generated, pass <code>NULL</code>. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_0</code></td>
<td>
<p>a <code class="reqn">K \times p</code> matrix of group-specific coefficients. If <code>dynamic = TRUE</code>, the first column represents the stationary <code class="reqn">AR</code> coefficient. If <code>NULL</code>, the coefficients are drawn randomly (see sec. Details). Default is <code>NULL</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The scalar dependent variable <code class="reqn">y_{it}</code> is generated according to the following grouped panel data model
</p>
<p style="text-align: center;"><code class="reqn">y_{it} = \gamma_i + \beta_i^\prime x_{it} + u_{it}, \quad i = \{1, \dots, N\}, \quad t = \{1, \dots, T\}.</code>
</p>

<p><code class="reqn">\gamma_i</code> represents individual fixed effects and <code class="reqn">x_{it}</code> a <code class="reqn">p \times 1</code> vector of regressors.
The individual slope coefficient vectors <code class="reqn">\beta_i</code> are subject to a group structure
</p>
<p style="text-align: center;"><code class="reqn">\beta_i = \sum_{k = 1}^K \alpha_k \bold{1} \{i \in G_k\},</code>
</p>

<p>with <code class="reqn">\cup_{k = 1}^K G_k = \{1, \dots, N\}</code>, <code class="reqn">G_k \cap G_j = \emptyset</code> and <code class="reqn">\| \alpha_k - \alpha_j \| \neq 0</code> for any <code class="reqn">k \neq j</code>, <code class="reqn">k = 1, \dots, K</code>. The total number of groups <code class="reqn">K</code> is determined by <code>n_groups</code>.
</p>
<p>If a panel data set with exogenous regressors is generated (set <code>q = NULL</code>), the explanatory variables are simulated according to
</p>
<p style="text-align: center;"><code class="reqn">x_{it,j} = 0.2 \gamma_i + e_{it,j}, \quad \gamma_i,e_{it,j} \sim i.i.d. N(0, 1), \quad j = \{1, \dots, p\},</code>
</p>

<p>where <code class="reqn">e_{it,j}</code> denotes a series of innovations. <code class="reqn">\gamma_i</code> and <code class="reqn">e_i</code> are independent of each other.
</p>
<p>In case <code>alpha_0 = NULL</code>, the group-level slope parameters <code class="reqn">\alpha_{k}</code> are drawn from <code class="reqn">\sim U[-2, 2]</code>.
</p>
<p>If a dynamic panel is specified (<code>dynamic = TRUE</code>), the <code class="reqn">AR</code> coefficients <code class="reqn">\beta^{\text{AR}}_i</code> are drawn from a uniform distribution with support <code class="reqn">(-1, 1)</code> and <code class="reqn">x_{it,j} = e_{it,j}</code>.
Moreover, the individual fixed effects enter the dependent variable via <code class="reqn">(1 - \beta^{\text{AR}}_i) \gamma_i</code> to account for the autoregressive dependency.
We refer to Mehrabani (2023, sec 6) for details.
</p>
<p>When specifying an endogenous panel (set <code>q</code> to <code class="reqn">q \geq p</code>), the <code class="reqn">e_{it,j}</code> correlate with the cross-sectional innovations <code class="reqn">u_{it}</code> by a magnitude of 0.5 to produce endogenous regressors (<code class="reqn">\text{E}(u|X) \neq 0</code>). However, the endogenous regressors can be accounted for by exploiting the <code class="reqn">q</code> instruments in <code class="reqn">\bold{Z}</code>, for which <code class="reqn">\text{E}(u|Z) = 0</code> holds.
The instruments and the first stage coefficients are generated in the same fashion as <code class="reqn">\bold{X}</code> and <code class="reqn">\bold{\alpha}</code> when <code>q = NULL</code>.
</p>
<p>The function nests, among other, the DGPs employed in the simulation study of Mehrabani (2023, sec. 6).
</p>


<h3>Value</h3>

<p>A list holding
</p>
<table>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>the <code class="reqn">K \times p</code> matrix of group-specific slope parameters. If <code>dynamic = TRUE</code>, the first column holds the <code class="reqn">AR</code> coefficient.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>a vector indicating the group memberships <code class="reqn">(g_1, \dots, g_N)</code>, where <code class="reqn">g_i = k</code> if <code class="reqn">i \in</code> group <code class="reqn">k</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a <code class="reqn">NT \times 1</code> vector of the dependent variable, with <code class="reqn">\bold{y}=(y_1, \dots, y_N)^\prime</code>, <code class="reqn">y_i = (y_{i1}, \dots, y_{iT})^\prime</code> and the scalar <code class="reqn">y_{it}</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>a <code class="reqn">NT \times p</code> matrix of explanatory variables, with <code class="reqn">\bold{X}=(x_1, \dots, x_N)^\prime</code>, <code class="reqn">x_i = (x_{i1}, \dots, x_{iT})^\prime</code> and the <code class="reqn">p \times 1</code> vector <code class="reqn">x_{it}</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>a <code class="reqn">NT \times q</code> matrix of instruments , where <code class="reqn">q \geq p</code>, <code class="reqn">\bold{Z}=(z_1, \dots, z_N)^\prime</code>, <code class="reqn">z_i = (z_{i1}, \dots, z_{iT})^\prime</code> and <code class="reqn">z_{it}</code> is a <code class="reqn">q \times 1</code> vector. In case a panel with exogenous regressors is generated (<code>q = NULL</code>), <code class="reqn">\bold{Z}</code> equals <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a <code class="reqn">NT \times (p + 1)</code> data.frame of the outcome and the explanatory variables.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Paul Haimerl
</p>


<h3>References</h3>

<p>Mehrabani, A. (2023). Estimation and identification of latent group structures in panel data. <em>Journal of Econometrics</em>, 235(2), 1464-1482. <a href="https://doi.org/10.1016/j.jeconom.2022.12.002">doi:10.1016/j.jeconom.2022.12.002</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Simulate DGP 1 from Mehrabani (2023, sec. 6)
alpha_0_DGP1 &lt;- matrix(c(0.4, 1, 1.6, 1.6, 1, 0.4), ncol = 2)
DGP1 &lt;- sim_DGP(
  N = 50, n_periods = 20, p = 2, n_groups = 3,
  group_proportions = c(.4, .3, .3), alpha_0 = alpha_0_DGP1
)
</code></pre>


</div>
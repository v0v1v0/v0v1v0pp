<div class="container">

<table style="width: 100%;"><tr>
<td>OUTmethod</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fitting potential outcome regression with different methods</h2>

<h3>Description</h3>

<p>The function <code>OUTmethod</code> is an internal function to estimate the potential outcomes given a specified model through formula.
It is built into function <code>PSweight</code>, and is used for constructing the augmented estimators.
</p>


<h3>Usage</h3>

<pre><code class="language-R">OUTmethod(
  out.formula = out.formula,
  y = y,
  out.method = "glm",
  family = "gaussian",
  datain = datain,
  dataout = dataout,
  out.control = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>out.formula</code></td>
<td>
<p>an object of class <code>formula</code> (or one that can be coerced to that class):
a symbolic description of the outcome model to be fitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a vector of the observed outcome in the training data (<code>datain</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.method</code></td>
<td>
<p>a character to specify the method for estimating the outcome regression model. <code>"glm"</code> is default, and <code>"gbm"</code> and <code>"SuperLearner"</code> are also allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>a description of the error distribution and link function to be used in the outcome model. Supported distributional families include
<code>"gaussian" (link = identity)</code>, <code>"binomial" (link = logit)</code> and <code>"poisson" (link = log)</code>. Default is <code>"gaussian"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datain</code></td>
<td>
<p>The training data for the outcome model. In the context of <code>PSweight</code>, it refers to the data observed for each treatment group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataout</code></td>
<td>
<p>The prediction data for the outcome model. In the context of <code>PSweight</code>, it refers to the full data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.control</code></td>
<td>
<p>a list to specify additional options when <code>out.method</code> is set to <code>"gbm"</code> or <code>"SuperLearner"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A typical form for <code>out.formula</code> is <code>y ~ terms</code> where <code>y</code> is the outcome
variable and <code>terms</code> is a series of terms which specifies linear predictors (on the link function scale). <code>out.formula</code> by default specifies generalized
linear model given the gaussian error through the default arguments <code>method = "glm"</code> and <code>family = "gaussian"</code>.  It fits the logistic regression when <code>family = "binomal"</code>,and poisson
regression when <code>family = "poisson"</code>. The argument <code>out.method</code> allows user to choose
model other than glm to fit the outcome regression models for constructing the augmented estimator. We have included <code>gbm</code> and <code>SuperLearner</code> as alternative machine learning estimators.
Additional argument in them can be supplied through the <code>...</code> argument. Please refer to the user manual of the <code>gbm</code> and <code>SuperLearner</code> packages for all the
allowed arguments.
</p>


<h3>Value</h3>


<dl>
<dt><code> m.est</code></dt>
<dd>
<p>a vector of predicted outcome on the <code>dataout</code>.</p>
</dd>
<dt><code> gamma.h</code></dt>
<dd>
<p>estimated coefficient of the outcome model when <code>method = "glm"</code>.</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">
#' the outcome model
out.formula &lt;- Y~cov1+cov2+cov3+cov4+cov5+cov6
y &lt;- psdata$Y
#train on model with treatment group 1
datain &lt;- psdata[psdata$trt==1, ]
outfit &lt;- OUTmethod(out.formula = out.formula, y=y, datain = datain, dataout = psdata)

</code></pre>


</div>
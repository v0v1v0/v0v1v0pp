<div class="container">

<table style="width: 100%;"><tr>
<td>setTfrType</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The "Tfr.type" attribute</h2>

<h3>Description</h3>

<p>Function to set by reference the <code>"Tfr.type"</code> attribute of an
existing <code>filter_spct</code> or <code>object_spct</code> object, and function to
query its current status.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setTfrType(x, Tfr.type = c("total", "internal"))

getTfrType(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>filter_spct</code> or an <code>object_spct</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Tfr.type</code></td>
<td>
<p>character string, either <code>"total"</code> or <code>"internal"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Transmittance, <code class="reqn">T</code> or <code class="reqn">\tau</code>, has two different definitions that
differ in how reflectance is taken into account: "total" transmittance and
"internal" transmittance. They are both in widespread use, and rather
frequently the interconversion is approximate or even not possible.
</p>
<p style="text-align: center;"><code class="reqn">T = \frac{I_z}{I_0}</code>
</p>

<p style="text-align: center;"><code class="reqn">\tau = \frac{I_z}{I_0 - \rho}</code>
</p>

<p>where <code class="reqn">T</code> is total transmittance and <code class="reqn">\tau</code> is internal transmittance;
<code class="reqn">I_0</code> is the radiant power incident on an object and <code class="reqn">I_z</code> is the
radiant power at depth <code class="reqn">z</code>, in most cases measured below the non-illuminated
side of the object, and <code class="reqn">\rho</code> is the total reflectance at the
illuminated surface.
</p>
<p>The transmittance of an object as a whole depends on the length of the light
path within the object and reflectance on the angle of incidence of the light
on the surface. When the light beam is near-normal to the surface, both
quantities are at their minimum.
</p>
<p>Thus, the interconversion of total spectral transmittance, <code class="reqn">T(\lambda)</code>,
into internal spectral transmittance, <code class="reqn">\tau(\lambda)</code>, is strictly
possible only if the spectral reflectance <code class="reqn">\rho(\lambda)</code> is known. In
practice, the spectral reflectance is approximated by a constant value
that is assumed independent of wavelength.
</p>
<p>Objects of class <code>object_spct</code> contain spectral data for both spectral
transmittance and spectral reflectance or spectral absorptance, making
conversion possible. Objects of class <code>filter_spct</code> do not contain
spectral reflectance data, but may have a known approximate value for a
reflectance constant, but this is frequently not the case.
</p>
<p>The type of transmittance data stored in an object of these classes is
recorded as metadata in attribute <code>Tfr.Type</code>. The functions described
here set and query this attribute. Contrary to directly accessing the
attribute, the query function consistently returns <code>NA</code> both when the
attribute is set to <code>NA</code> and when the attribute has not been set, as can
be the case of objects created with early versions of the package.
</p>
<p>Absorptance, <code class="reqn">\alpha</code>, and absorbance, <code class="reqn">A</code>, are normally given as
<code>"internal"</code>, and this is the assumption in this package. However,
as in some cases strict enforcement would prevent conversions, this is not
strictly enforced. (IUPAC, recommends use of the name <em>attenuance</em>
(formerly <em>extinction</em>) instead of
<em>absorbance</em> when light attenuation involves processes other than pure
absorption, such as scattering and luminescence.)
</p>
<p style="text-align: center;"><code class="reqn">1 = \alpha + \rho + \tau</code>
</p>

<p style="text-align: center;"><code class="reqn">A_{10} = \log_{10} \frac{1}{\alpha} = - \log_{10} \alpha</code>
</p>

<p>When a solvent-only <em>blank</em> is used when measuring the absorbance of a
solution, the absorbance is not only <code>"internal"</code> to the solution
(discounting reflections at the cuvette boundaries) but also discounts the
effect of the solvent itself. When measuring solid samples, like a sheet of
glass, in most cases a blank is not available.
</p>
<p>For semitransparent objects like glass, it is important to take into
account that reflections occur at each interface between substances with
different refractive index.
</p>
<p>This attribute is normally set when the <code>source_spct</code> object
is created. But <code>convertTfrType()</code> updates it when it changes due
to a conversion.
</p>


<h3>Value</h3>

<p><code>x</code>, with the modified attribute in the case of <code>setTfrType()</code> or
the <code>character</code> value, <code>"total"</code> or <code>internal</code>, stored in
the <code>"Tfr.type"</code> attribute of <code>x</code> in the case
of <code>getTfrType()</code>. If <code>x</code> is not a <code>filter_spct</code> or
an <code>object_spct</code> object, <code>NA</code> is returned.
</p>


<h3>Note</h3>

<p>Function <code>setTfrType()</code> alters <code>x</code> itself by reference and in
addition returns <code>x</code> invisibly. If <code>x</code> is not
a <code>filter_spct</code> or an <code>object_spct object</code>, <code>x</code> is not
modified. The behaviour of this function is 'unusual' in that the default
for parameter <code>Tfr.type</code> is used only if <code>x</code> does not already
have this attribute set.
</p>


<h3>See Also</h3>

<p><code>convertTfrType</code>, <code>filter_spct</code>,
and <code>object_spct</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">my.spct &lt;- polyester.spct
getTfrType(my.spct)
setTfrType(my.spct, "internal")
getTfrType(my.spct)

</code></pre>


</div>
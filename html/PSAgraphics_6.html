<div class="container">

<table style="width: 100%;"><tr>
<td>box.psa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compare balance graphically of a continuous covariate as part of a PSA</h2>

<h3>Description</h3>

<p>Given predefined strata and two level treatment for a continuous covariate
from a propensity score analysis, <code>box.psa</code> draws pairs of side by side
boxplots corresponding to control and treatment for each stratum.
</p>


<h3>Usage</h3>

<pre><code class="language-R">box.psa(
  continuous,
  treatment = NULL,
  strata = NULL,
  boxwex = 0.17,
  offset = 0.17,
  col = c("yellow", "orange", "black", "red", "darkorange3"),
  xlab = "Stratum",
  legend.xy = NULL,
  legend.labels = NULL,
  pts = TRUE,
  balance = FALSE,
  trim = 0,
  B = 1000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>continuous</code></td>
<td>
<p>Vector or N X 3 dataframe or matrix. If a vector, then
represents the quantitative covariate that is being balanced within strata
in a PSA. If <code>continuous</code> has three columns, then the second and third
are assumed to be the <code>treatment</code> and <code>strata</code> respectively.
Missing values are not allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>Binary vector of same length as <code>continuous</code>
representing the two treatments; can be a character vector or factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>A vector or factor of same length as <code>continuous</code>
indicating the derived strata from estimated propensity scores. May be
numeric or character vector, or factor. Strata are ordered lexicographically
in plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxwex</code></td>
<td>
<p>Numeric; controls width of boxes. Default = 0.17</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>Numeric; controls distance between the two boxes in each
stratum. Default = 0.17</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Default = <code>c("yellow", "orange", "black", "red",
"darkorange3")</code>. Color vector for the control boxes, treatment boxes, and
line connecting their means.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>Label for the x-axis; default = <code>"Stratum"</code>.  Other
standard labels may be used as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.xy</code></td>
<td>
<p>Binary vector giving coordinates of the legend. By default
the legend is placed to the top left.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.labels</code></td>
<td>
<p>Vector of labels for the legend; default is essentially
<code>c("Treatment (first)", "Treatment (second)", "Treatment Means
Compared", "KS p-values", "Strata-Treatment Size")</code> where treatment names
are taken from <code>treatment</code>.  Vector has four elements if <code>balance
= FALSE</code>, ommitting "KS p-values".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pts</code></td>
<td>
<p>Logical; if <code>TRUE</code> then (jittered) points are added on top
of the boxplots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balance</code></td>
<td>
<p>Logical; if <code>TRUE</code> then <code>bal.ms.psa</code> provides a
histogram of a permutation distribution and reference statstic to assess
balance across strata; <code>bal.ks.psa</code> adds p-values to the graph derived
from 2-sample Kologmorov-Smirnov tests of equivalence of control/treatment
distributions within each stratum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trim</code></td>
<td>
<p>If <code>balance=TRUE</code>, defines fraction (0 to 0.5) of
observations to be trimmed from each end of stratum-treatment level before
the mean is computed. See <code>mean</code>, <code>bal.ms.psa</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Passed to <code>bal.ms.psa</code> if necessary, determines number of
randomly generated comparison statistics.  Default =1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other graphical parameters passed to <code>boxplot</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Draws a pair of side by side boxplots for each stratum of a propensity score
analysis.  This allows visual comparisons within strata of the distribution
of the given continuous covariate, and comparisons between strata as well.
The number of observations in each boxplot are given below each box, and the
means of paired treatment and control groups are connected.
</p>


<h3>Author(s)</h3>

<p>James E. Helmreich <a href="mailto:James.Helmreich@Marist.edu">James.Helmreich@Marist.edu</a>
</p>
<p>Robert M. Pruzek <a href="mailto:RMPruzek@yahoo.com">RMPruzek@yahoo.com</a>
</p>


<h3>See Also</h3>

<p><code>bal.ks.psa</code>, <code>bal.ms.psa</code>, <code>cat.psa</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
continuous&lt;-rnorm(1000)
treatment&lt;-sample(c(0,1),1000,replace=TRUE)
strata&lt;-sample(5,1000,replace=TRUE)
box.psa(continuous, treatment, strata)

data(lindner)
attach(lindner)
lindner.ps &lt;- glm(abcix ~ stent + height + female +
      diabetic + acutemi + ejecfrac + ves1proc,
      data = lindner, family = binomial)
ps&lt;-lindner.ps$fitted
lindner.s5 &lt;- as.numeric(cut(ps, quantile(ps, seq(0, 1, 1/5)),
      include.lowest = TRUE, labels = FALSE))
box.psa(ejecfrac, abcix, lindner.s5, xlab = "ejecfrac",
      legend.xy = c(3.5,110))

lindner.s10 &lt;- as.numeric(cut(ps, quantile(ps, seq(0, 1, 1/5)),
      include.lowest = TRUE, labels = FALSE))
box.psa(height, abcix, lindner.s10, xlab="height",
      boxwex = .15, offset = .15, legend.xy = c(2,130), balance = TRUE)

</code></pre>


</div>
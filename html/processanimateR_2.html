<div class="container">

<table style="width: 100%;"><tr>
<td>animate_process</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Animate cases on a process map</h2>

<h3>Description</h3>

<p>This function animates the cases stored in a 'bupaR' event log on top of a process model.
Each case is represented by a token that travels through the process model according to the waiting and processing times of activities.
Currently, animation is only supported for process models created by <code>process_map</code> of the 'processmapR' package.
The animation will be rendered as SVG animation (SMIL) using the 'htmlwidgets' framework. Each token is a SVG shape and customizable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">animate_process(
  eventlog,
  processmap = process_map(eventlog, render = F, ...),
  renderer = renderer_graphviz(),
  mode = c("absolute", "relative", "off"),
  duration = 60,
  jitter = 0,
  timeline = TRUE,
  legend = NULL,
  initial_state = c("playing", "paused"),
  initial_time = 0,
  repeat_count = 1,
  repeat_delay = 0.5,
  epsilon_time = duration/1000,
  mapping = token_aes(),
  token_callback_onclick = c("function(svg_root, svg_element, case_id) {", "}"),
  token_callback_select = token_select_decoration(),
  activity_callback_onclick = c("function(svg_root, svg_element, activity_id) {", "}"),
  activity_callback_select = activity_select_decoration(),
  elementId = NULL,
  preRenderHook = NULL,
  width = NULL,
  height = NULL,
  sizingPolicy = htmlwidgets::sizingPolicy(browser.fill = TRUE, viewer.fill = TRUE,
    knitr.figure = FALSE, knitr.defaultWidth = "100%", knitr.defaultHeight = "300"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>eventlog</code></td>
<td>
<p>The 'bupaR' event log object that should be animated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>processmap</code></td>
<td>
<p>A process map created with 'processmapR' (<code>process_map</code>)
on which the event log will be animated. If not provided a standard process map will be generated
from the supplied event log.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>renderer</code></td>
<td>
<p>Whether to use Graphviz (<code>renderer_graphviz</code>) to layout and render the process map,
or to render the process map using Leaflet (<code>renderer_leaflet</code>) on a geographical map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Whether to animate the cases according to their actual time of occurrence ('absolute') or to start all cases at once ('relative').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>duration</code></td>
<td>
<p>The overall duration of the animation, all times are scaled according to this overall duration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jitter</code></td>
<td>
<p>The magnitude of a random coordinate translation, known as jitter in scatterplots, which is added to each token.
Adding jitter can help to disambiguate tokens drawn on top of each other.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeline</code></td>
<td>
<p>Whether to render a timeline slider in supported browsers (Work only on recent versions of Chrome and Firefox).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>Whether to show a legend for the 'size' or the 'color' scale. The default is not to show a legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial_state</code></td>
<td>
<p>Whether the initial playback state is 'playing' or 'paused'. The default is 'playing'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial_time</code></td>
<td>
<p>Sets the initial time of the animation. The default value is '0'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeat_count</code></td>
<td>
<p>The number of times the process animation is repeated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeat_delay</code></td>
<td>
<p>The seconds to wait before one repetition of the animation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsilon_time</code></td>
<td>
<p>A (small) time to be added to every animation to ensure that tokens are visible.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mapping</code></td>
<td>
<p>A list of aesthetic mappings from event log attributes to certain visual parameters of the tokens.
Use <code>token_aes</code> to create a suitable mapping list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token_callback_onclick</code></td>
<td>
<p>A JavaScript function that is called when a token is clicked.
The function is parsed by <code>JS</code> and received three parameters: ‘svg_root', ’svg_element', and 'case_id'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token_callback_select</code></td>
<td>
<p>A JavaScript callback function called when token selection changes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>activity_callback_onclick</code></td>
<td>
<p>A JavaScript function that is called when an activity is clicked.
The function is parsed by <code>JS</code> and received three parameters: 'svg_root', 'svg_element', and 'activity_id'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>activity_callback_select</code></td>
<td>
<p>A JavaScript callback function called when activity selection changes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elementId</code></td>
<td>
<p>passed through to <code>createWidget</code>. A custom elementId is useful to capture the selection events
via input$elementId_tokens and input$elementId_activities when used in Shiny.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preRenderHook</code></td>
<td>
<p>passed through to <code>createWidget</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>
<p>Fixed size for widget (in css units).
The default is NULL, which results in intelligent automatic sizing based on the widget's container.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sizingPolicy</code></td>
<td>
<p>Options that govern how the widget is sized in various
containers (e.g. a standalone browser, the RStudio Viewer, a knitr figure,
or a Shiny output binding). These options can be specified by calling the
<code>sizingPolicy</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Options passed on to <code>process_map</code>.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>process_map</code>, <code>token_aes</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(example_log)

# Animate the process with default options (absolute time and 60s duration)
animate_process(example_log)

# Animate the process with default options (relative time, with jitter, infinite repeat)
animate_process(example_log, mode = "relative", jitter = 10, repeat_count = Inf)


</code></pre>


</div>
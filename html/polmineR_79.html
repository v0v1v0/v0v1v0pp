<div class="container">

<table style="width: 100%;"><tr>
<td>as.TermDocumentMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate TermDocumentMatrix / DocumentTermMatrix.</h2>

<h3>Description</h3>

<p>Methods to generate the classes <code>TermDocumentMatrix</code> or
<code>DocumentTermMatrix</code> as defined in the <code>tm</code> package.  There are
many text mining applications for document-term matrices. A
<code>DocumentTermMatrix</code> is required as input by the <code>topicmodels</code>
package, for instance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.TermDocumentMatrix(x, ...)

as.DocumentTermMatrix(x, ...)

## S4 method for signature 'character'
as.TermDocumentMatrix(x, p_attribute, s_attribute, verbose = TRUE, ...)

## S4 method for signature 'corpus'
as.DocumentTermMatrix(
  x,
  p_attribute,
  s_attribute,
  stoplist = NULL,
  binarize = FALSE,
  verbose = TRUE,
  ...
)

## S4 method for signature 'character'
as.DocumentTermMatrix(x, p_attribute, s_attribute, verbose = TRUE, ...)

## S4 method for signature 'bundle'
as.TermDocumentMatrix(x, col, p_attribute = NULL, verbose = TRUE, ...)

## S4 method for signature 'bundle'
as.DocumentTermMatrix(x, col = NULL, p_attribute = NULL, verbose = TRUE, ...)

## S4 method for signature 'partition_bundle'
as.DocumentTermMatrix(x, p_attribute = NULL, col = NULL, verbose = TRUE, ...)

## S4 method for signature 'partition_bundle'
as.TermDocumentMatrix(x, p_attribute = NULL, col = NULL, verbose = TRUE, ...)

## S4 method for signature 'subcorpus_bundle'
as.TermDocumentMatrix(x, p_attribute = NULL, verbose = TRUE, ...)

## S4 method for signature 'subcorpus_bundle'
as.DocumentTermMatrix(x, p_attribute = NULL, verbose = TRUE, ...)

## S4 method for signature 'partition_bundle'
as.DocumentTermMatrix(x, p_attribute = NULL, col = NULL, verbose = TRUE, ...)

## S4 method for signature 'context'
as.DocumentTermMatrix(x, p_attribute, verbose = TRUE, ...)

## S4 method for signature 'context'
as.TermDocumentMatrix(x, p_attribute, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>character</code> vector indicating a corpus, or an object of class
<code>bundle</code>, or inheriting from class <code>bundle</code> (e.g. <code>partition_bundle</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Definitions of s-attribute used for subsetting the corpus, compare
partition-method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_attribute</code></td>
<td>
<p>A p-attribute counting is be based on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s_attribute</code></td>
<td>
<p>An s-attribute that defines content of columns, or rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A <code>logial</code> value, whether to output progress messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stoplist</code></td>
<td>
<p>A <code>character</code> vector of tokens to exclude from the matrix, as
memory efficient way to exclude irrelevant terms early on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>binarize</code></td>
<td>
<p>A <code>logical</code> value. If <code>TRUE</code>, report occurence of term, not
absoulte count.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>The column of <code>data.table</code> in slot <code>stat</code> (if <code>x</code>
is a <code>bundle</code>) to use of assembling the matrix.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>x</code> refers to a corpus (i.e. is a length 1 character vector), a
<code>TermDocumentMatrix</code>, or <code>DocumentTermMatrix</code> will be generated for
subsets of the corpus based on the <code>s_attribute</code> provided. Counts are
performed for the <code>p_attribute</code>. Further parameters provided (passed in
as <code>...</code> are interpreted as s-attributes that define a subset of the
corpus for splitting it according to <code>s_attribute</code>. If struc values for
<code>s_attribute</code> are not unique, the necessary aggregation is performed, slowing
things somewhat down.
</p>
<p>If <code>x</code> is a <code>bundle</code> or a class inheriting from it, the counts or
whatever measure is present in the <code>stat</code> slots (in the column
indicated by <code>col</code>) will be turned into the values of the sparse
matrix that is generated. A special case is the generation of the sparse
matrix based on a <code>partition_bundle</code> that does not yet include counts.
In this case, a <code>p_attribute</code> needs to be provided. Then counting will
be performed, too.
</p>
<p>If <code>x</code> is a <code>partition_bundle</code>, and argument <code>col</code> is
not <code>NULL</code>, as <code>TermDocumentMatrix</code> is generated based on the
column indicated by <code>col</code> of the <code>data.table</code> with counts in the
<code>stat</code> slots of the objects in the bundle. If <code>col</code> is
<code>NULL</code>, the p-attribute indicated by <code>p_attribute</code> is decoded,
and a count is performed to obtain the values of the resulting
<code>TermDocumentMatrix</code>. The same procedure applies to get a
<code>DocumentTermMatrix</code>.
</p>
<p>If <code>x</code> is a <code>subcorpus_bundle</code>, the p-attribute provided
by argument <code>p_attribute</code> is decoded, and a count is performed to
obtain the resulting <code>TermDocumentMatrix</code> or
<code>DocumentTermMatrix</code>.
</p>


<h3>Value</h3>

<p>A <code>TermDocumentMatrix</code>, or a <code>DocumentTermMatrix</code> object.
These classes are defined in the <code>tm</code> package, and inherit from the
<code>simple_triplet_matrix</code>-class defined in the <code>slam</code>-package.
</p>


<h3>Author(s)</h3>

<p>Andreas Blaette
</p>


<h3>Examples</h3>

<pre><code class="language-R"># examples not run by default to save time on CRAN test machines

#' use(pkg = "RcppCWB", corpus = "REUTERS")
 
# enriching partition_bundle explicitly 
tdm &lt;- corpus("REUTERS") %&gt;% 
  partition_bundle(s_attribute = "id") %&gt;% 
  enrich(p_attribute = "word") %&gt;%
  as.TermDocumentMatrix(col = "count")
   
# leave the counting to the as.TermDocumentMatrix-method
tdm &lt;- partition_bundle("REUTERS", s_attribute = "id") %&gt;% 
  as.TermDocumentMatrix(p_attribute = "word", verbose = FALSE)
  
# obtain TermDocumentMatrix directly (fastest option)
tdm &lt;- as.TermDocumentMatrix(
  "REUTERS",
  p_attribute = "word",
  s_attribute = "id",
  verbose = FALSE
)

# workflow using split()
dtm &lt;- corpus("REUTERS") %&gt;%
  split(s_attribute = "id") %&gt;%
  as.TermDocumentMatrix(p_attribute = "word")

</code></pre>


</div>
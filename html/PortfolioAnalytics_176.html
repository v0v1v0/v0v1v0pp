<div class="container">

<table style="width: 100%;"><tr>
<td>rp_transform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform a weights vector to satisfy constraints</h2>

<h3>Description</h3>

<p>This function uses a block of code from <code>randomize_portfolio</code> 
to transform the weight vector if either the weight_sum (leverage) 
constraints, box constraints, group constraints, position_limit constraints,
or leverage exposure constraints are violated. The logic from 
<code>randomize_portfolio</code> is heavily utilized here with extensions to
handle more complex constraints.
The resulting weights vector might be quite different from the original weights vector.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rp_transform(
  w,
  min_sum,
  max_sum,
  min_box,
  max_box,
  groups = NULL,
  cLO = NULL,
  cUP = NULL,
  max_pos = NULL,
  group_pos = NULL,
  max_pos_long = NULL,
  max_pos_short = NULL,
  leverage = NULL,
  weight_seq = NULL,
  max_permutations = 200
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>weights vector to be transformed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_sum</code></td>
<td>
<p>minimum sum of all asset weights, default 0.99</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_sum</code></td>
<td>
<p>maximum sum of all asset weights, default 1.01</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_box</code></td>
<td>
<p>numeric or named vector specifying minimum weight box constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_box</code></td>
<td>
<p>numeric or named vector specifying maximum weight box constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>vector specifying the groups of the assets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cLO</code></td>
<td>
<p>numeric or vector specifying minimum weight group constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cUP</code></td>
<td>
<p>numeric or vector specifying minimum weight group constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_pos</code></td>
<td>
<p>maximum assets with non-zero weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_pos</code></td>
<td>
<p>vector specifying maximum number assets with non-zero weights per group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_pos_long</code></td>
<td>
<p>maximum number of assets with long (i.e. buy) positions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_pos_short</code></td>
<td>
<p>maximum number of assets with short (i.e. sell) positions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leverage</code></td>
<td>
<p>maximum leverage exposure where leverage is defined as <code>sum(abs(weights))</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight_seq</code></td>
<td>
<p>vector of seed sequence of weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_permutations</code></td>
<td>
<p>integer: maximum number of iterations to try for a valid portfolio, default 200</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>named weighting vector
</p>


<h3>Author(s)</h3>

<p>Peter Carl, Brian G. Peterson, Ross Bennett (based on an idea by Pat Burns)
</p>


</div>
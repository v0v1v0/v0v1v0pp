<div class="container">

<table style="width: 100%;"><tr>
<td>picker</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Render a Picker Widget</h2>

<h3>Description</h3>

<p>Render a Picker Widget
</p>


<h3>Usage</h3>

<pre><code class="language-R">picker(
  coords,
  colors,
  labels,
  title = NULL,
  label_coords = NULL,
  polygons = NULL,
  point_color_polygons = NULL,
  show_controls = TRUE,
  grid_legend_items = NULL,
  scale_legend_props = NULL,
  scatter_props = NULL,
  deck_props = NULL,
  text_props = NULL,
  polygon_props = NULL,
  xrange = NULL,
  yrange = NULL,
  xaxs = 0.04,
  yaxs = 0.04,
  width = NULL,
  height = NULL,
  elementId = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>data.frame with two columns. First has x, second has y coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colors</code></td>
<td>
<p>vector of hex colors, one for each row of <code>coords</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>vector of point labels used for tooltips on hover.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>character string to show in top left of plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_coords</code></td>
<td>
<p>data.frame with three columns 'x', 'y', and 'label'. Used for text layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polygons</code></td>
<td>
<p>data.frame containing at minimum columns 'x1', 'x2', 'y1', 'y2',
that define the polygons to draw and 'color' that defines the color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point_color_polygons</code></td>
<td>
<p>character, a color to make points when polygons are shown e.g. <code>'white'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_controls</code></td>
<td>
<p>Should control panel be shown? Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_legend_items</code></td>
<td>
<p>list of lists with <code>color</code> hex for legend
square and <code>label</code> for legend items. Only visible for grid display.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_legend_props</code></td>
<td>
<p>optional props to render a gradient scale legend.
For example: <code>list(colorHigh = 'red', colorLow = 'gray', high = 4, low = 0)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scatter_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/layers/scatterplot-layer/">ScatterplotLayer</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deck_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/core/deck/">Deck</a> instance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/layers/text-layer/">TextLayer</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polygon_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/layers/polygon-layer/">PolygonLayer</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xrange</code></td>
<td>
<p>range of x-values. Default is <code>range(coords[,1])</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yrange</code></td>
<td>
<p>range of y-values. Default is <code>range(coords[,2])</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xaxs</code></td>
<td>
<p>the fraction to extend <code>xrange</code> on either side. Default is 0.04.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yaxs</code></td>
<td>
<p>the fraction to extend <code>yrange</code> on either side. Default is 0.04.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>width of htmlwidget.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>height of htmlwidget.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elementId</code></td>
<td>
<p>id of htmlwidget.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>renders html widget
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (interactive()) {
  library(shiny)
  library(picker)

  # load example data
  load(system.file('extdata/pbmcs.rda', package = 'picker'))

  # setup gradient scale legend
  scale_legend_props &lt;- list(
    colorHigh = 'blue',
    colorLow = '#f5f5f5',
    high = round(max(exp)),
    low = min(exp))

  text_props &lt;- list()

  # get colors for gene expression
  exp &lt;- scales::rescale(exp, c(0, 1))
  expression_colors &lt;- scales::seq_gradient_pal('#f5f5f5', 'blue')(exp)

  # legend to show when grid is visible
  grid_legend_items = list(
    list(color = '#FF0000', label = '\U2191'),
    list(color = '#0000FF', label = '\U2193'),
    list(color = '#989898', label = 'p \U003C .05'),
    list(color = '#EAEAEA', label = 'p \U2265 .05')
  )

  ui = shinyUI(fluidPage(
    tags$head(tags$style(".picker {border: 1px solid #ddd; margin: 20px 0;}")),
    shiny::column(
      width = 6,
      pickerOutput('clusters', width = '100%', height = '400px'),
      pickerOutput('expression', width = '100%', height = '400px'),
      verbatimTextOutput('selected')
    )
  ))

  server = function(input, output) {

    # show selected output
    output$selected &lt;- renderPrint({
      input$clusters_selected_points
    })

    # coordinate views (zoom/pan)
    clusters_proxy &lt;- picker_proxy('clusters')
    observeEvent(input$expression_view_state, {
      update_picker(clusters_proxy, input$expression_view_state)
    })

    expression_proxy &lt;- picker_proxy('expression')
    observeEvent(input$clusters_view_state, {
      update_picker(expression_proxy, input$clusters_view_state)
    })

    # change title between grid/scatterplot
    observeEvent(input$clusters_show_grid, {
      title &lt;- ifelse(input$clusters_show_grid, '\U0394 CELLS', '')
      update_picker(clusters_proxy, title = title)
    })


    # render pickers
    output$clusters &lt;- renderPicker(
      picker(
        coords,
        cluster_colors,
        labels,
        label_coords = label_coords,
        polygons = polygons,
        text_props = text_props,
        point_color_polygons = 'white',
        grid_legend_items = grid_legend_items)
    )

    output$expression &lt;- renderPicker(
      picker(coords,
             expression_colors,
             labels,
             show_controls = FALSE,
             scale_legend_props = scale_legend_props)
    )
  }

  shinyApp(ui = ui, server = server, options = list(launch.browser = TRUE))
}
</code></pre>


</div>
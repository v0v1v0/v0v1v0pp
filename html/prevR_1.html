<div class="container">

<table style="width: 100%;"><tr>
<td>prevR-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimating regional trends of a prevalence from a DHS.</h2>

<h3>Description</h3>

<p><span class="pkg">prevR</span> allows spatial estimation of a prevalence surface or a relative
risks surface, using data from a Demographic and Health Survey (DHS) or an
analog survey.
</p>


<h3>Details</h3>


<table>
<tr>
<td style="text-align: left;">
Package: </td>
<td style="text-align: left;"> prevR</td>
</tr>
<tr>
<td style="text-align: left;">
Type: </td>
<td style="text-align: left;"> Package</td>
</tr>
<tr>
<td style="text-align: left;">
Licence: </td>
<td style="text-align: left;"> CeCILL-C -
<a href="https://cecill.info/licences/Licence_CeCILL-C_V1-en.html">https://cecill.info/licences/Licence_CeCILL-C_V1-en.html</a>
</td>
</tr>
<tr>
<td style="text-align: left;">
Website: </td>
<td style="text-align: left;"> <a href="https://larmarange.github.io/prevR/">https://larmarange.github.io/prevR/</a>
</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>This package performs a methodological approach for spatial estimation of
regional trends of a prevalence using data from surveys using a stratified
two-stage sample design (as Demographic and Health Surveys). In these kind
of surveys, positive and control cases are spatially positioned at the
centre of their corresponding surveyed cluster.
</p>
<p>This package provides functions to estimate a prevalence surface using a
kernel estimator with adaptative bandwidths of equal number of persons
surveyed (a variant of the nearest neighbor technique) or with fixed
bandwidths. The prevalence surface could also be calculated using a spatial
interpolation (kriging or inverse distance weighting) after a moving average
smoothing based on circles of equal number of observed persons or circles
of equal radius.
</p>
<p>With the kernel estimator approach, it's also possible to estimate a surface
of relative risks.
</p>
<p>For a quick demo, enter <code>quick.prevR(fdhs)</code>.
</p>
<p>For a full demo, enter <code>demo(prevR)</code>.
</p>
<p>The content of <span class="pkg">prevR</span> can be broken up as follows:
</p>
<p><em>Datasets</em><br>
fdhs is a fictive dataset used for testing the package.<br>
TMWorldBorders provides national borders of every countries in the World
and could be used to define the limits of the studied area.
</p>
<p><em>Creating objects</em><br><span class="pkg">prevR</span> functions takes as input objects of class prevR.<br><code>import.dhs()</code> allows to import easily, through a step by step procedure,
data from a DHS (Demographic and Health Surveys) downloaded from
<a href="http://www.measuredhs.com">http://www.measuredhs.com</a>.<br><code>as.prevR()</code> is a generic function to create an object of class
prevR.<br><code>create.boundary()</code> could be used to select borders of a country and
transfer them to <code>as.prevR()</code> in order to define the studied area.
</p>
<p><em>Data visualization</em><br>
Methods <code>show()</code>, <code>print()</code>
and <code>summary()</code> display a summary of a object of class
prevR.<br>
The method <code>plot()</code> could be used on a object of class
prevR for visualizing the studied area, spatial position
of clusters, number of observations or number of positive cases by cluster.
</p>
<p><em>Data manipulation</em><br>
The method <code>changeproj()</code> changes the projection
of the spatial coordinates.<br>
The method <code>as.data.frame()</code> converts an object of
class prevR into a data frame.<br>
The method <code>export()</code> export data and/or the studied
area in a text file, a dbf file or a shapefile.
</p>
<p><em>Data analysis</em><br><code>rings()</code> calculates rings of equal number of
observations and/or equal radius.<br><code>kde()</code> calculates a prevalence surface or a relative
risks surface using gaussian kernel density estimators (kde)
with adaptative bandwidths.<br><code>krige()</code> executes a spatial interpolation using an
ordinary kriging.<br><code>idw()</code> executes a spatial interpolation using an inverse
distance weighting (idw) technique.
</p>


<h3>Acknowledgment</h3>

<p><span class="pkg">prevR</span> has been developed with funding from
the French National Agency for Research on AIDS and Viral Hepatitis
(ANRS - <a href="http://www.anrs.fr">http://www.anrs.fr</a>) and the French Research Institute for
Sustainable Development (IRD - <a href="https://www.ird.fr">https://www.ird.fr</a>), and technical
support from LYSIS (info@lysis-consultants.fr).
</p>


<h3>Citation</h3>

<p>To cite <span class="pkg">prevR</span>:<br>
Larmarange Joseph, Vallo Roselyne, Yaro Seydou, Msellati Philippe and
Meda Nicolas (2011) "Methods for mapping regional trends of HIV prevalence
from Demographic and Health Surveys (DHS)",
<em>Cybergeo: European Journal of Geography</em>, no 558,
<a href="https://journals.openedition.org/cybergeo/24606">https://journals.openedition.org/cybergeo/24606</a>,
DOI: 10.4000/cybergeo.24606.
</p>


<h3>Author(s)</h3>

<p>Joseph Larmarange <a href="mailto:joseph.larmarange@ird.fr">joseph.larmarange@ird.fr</a><br>
IRD - CEPED (UMR 196 Université Paris Descartes Ined IRD)
</p>


<h3>References</h3>

<p>Larmarange Joseph and Bendaud Victoria (2014) "HIV estimates at second
subnational level from national population-based survey",
<em>AIDS</em>, n° 28, p. S469-S476, DOI: 10.1097/QAD.0000000000000480
</p>
<p>Larmarange Joseph, Vallo Roselyne, Yaro Seydou, Msellati Philippe and Meda
Nicolas (2011) "Methods for mapping regional trends of HIV prevalence from
Demographic and Health Surveys (DHS)",
<em>Cybergeo: European Journal of Geography</em>, n° 558,
<a href="https://journals.openedition.org/cybergeo/24606">https://journals.openedition.org/cybergeo/24606</a>,
DOI: 10.4000/cybergeo.24606
</p>
<p>Larmarange Joseph (2007) <em>Prévalences du VIH en Afrique : validité
d'une mesure</em>, PhD thesis in demography, directed by Benoît Ferry,
université Paris Descartes,
<a href="https://theses.hal.science/tel-00320283">https://theses.hal.science/tel-00320283</a>.
</p>
<p>Larmarange Joseph, Vallo Roselyne, Yaro Seydou, Msellati Philippe Meda
Nicolas and Ferry Benoît (2006), "Cartographier les données des enquêtes
démographiques et de santé à partir des coordonnées des zones d'enquête",
<em>Chaire Quételet, 29 novembre au 1er décembre 2006</em>, Université
Catholique de Louvain, Louvain-la-Neuve, Belgique.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
par(ask = TRUE)
# Creating an object of class prevR
col &lt;- c(
  id = "cluster",
  x = "x",
  y = "y",
  n = "n",
  pos = "pos",
  c.type = "residence",
  wn = "weighted.n",
  wpos = "weighted.pos"
)
dhs &lt;- as.prevR(fdhs.clusters, col, fdhs.boundary)

str(dhs)
print(dhs)

plot(dhs, main = "Clusters position")
plot(dhs, type = "c.type", main = "Clusters by residence")
plot(dhs, type = "count", main = "Observations by cluster")
plot(dhs, type = "flower", main = "Positive cases by cluster")

# Changing coordinates projection
plot(dhs, axes = TRUE)
dhs &lt;- changeproj(
  dhs,
  "+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"
)
print(dhs)
plot(dhs, axes = TRUE)

# Calculating rings of equal number of observations for different values of N
dhs &lt;- rings(dhs, N = c(100, 200, 300, 400, 500))
print(dhs)
summary(dhs)

# Prevalence surface for N=300
prev.N300 &lt;- kde(dhs, N = 300, nb.cells = 200)
plot(
  prev.N300["k.wprev.N300.RInf"],
  pal = prevR.colors.red,
  lty = 0,
  main = "Regional trends of prevalence (N=300)"
)

# Smoothing ring radii surface (spatial interpolation by kriging)
radius.N300 &lt;- krige("r.radius", dhs, N = 300, nb.cells = 200)
plot(
  radius.N300,
  pal = prevR.colors.blue,
  lty = 0,
  main = "Radius of circle (N=300)"
)
par(ask = FALSE)

## End(Not run)
</code></pre>


</div>
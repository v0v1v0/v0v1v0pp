<div class="container">

<table style="width: 100%;"><tr>
<td>pseries</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>panel series</h2>

<h3>Description</h3>

<p>A class for panel series for which several useful computations and
data transformations are available.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'pseries'
print(x, ...)

## S3 method for class 'pseries'
as.matrix(x, idbyrow = TRUE, ...)

## S3 method for class 'pseries'
plot(
  x,
  plot = c("lattice", "superposed"),
  scale = FALSE,
  transparency = TRUE,
  col = "blue",
  lwd = 1,
  ...
)

## S3 method for class 'pseries'
summary(object, ...)

## S3 method for class 'summary.pseries'
plot(x, ...)

## S3 method for class 'summary.pseries'
print(x, ...)

Sum(x, ...)

## Default S3 method:
Sum(x, effect, ...)

## S3 method for class 'pseries'
Sum(x, effect = c("individual", "time", "group"), ...)

## S3 method for class 'matrix'
Sum(x, effect, ...)

Between(x, ...)

## Default S3 method:
Between(x, effect, ...)

## S3 method for class 'pseries'
Between(x, effect = c("individual", "time", "group"), ...)

## S3 method for class 'matrix'
Between(x, effect, ...)

between(x, ...)

## Default S3 method:
between(x, effect, ...)

## S3 method for class 'pseries'
between(x, effect = c("individual", "time", "group"), ...)

## S3 method for class 'matrix'
between(x, effect, ...)

Within(x, ...)

## Default S3 method:
Within(x, effect, ...)

## S3 method for class 'pseries'
Within(x, effect = c("individual", "time", "group", "twoways"), ...)

## S3 method for class 'matrix'
Within(x, effect, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, object</code></td>
<td>
<p>a <code>pseries</code> or a matrix; or a <code>summary.pseries</code> object,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments, e. g., <code>na.rm = TRUE</code> for
transformation functions like <code>between</code>, see <strong>Details</strong>
and <strong>Examples</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idbyrow</code></td>
<td>
<p>if <code>TRUE</code> in the <code>as.matrix</code> method, the lines of
the matrix are the individuals,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot, scale, transparency, col, lwd</code></td>
<td>
<p>plot arguments,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect</code></td>
<td>
<p>for the pseries methods: character string indicating the
<code>"individual"</code>, <code>"time"</code>, or <code>"group"</code> effect, for <code>Within</code>
<code>"twoways"</code> additionally; for non-pseries methods, <code>effect</code> is a factor
specifying the dimension (<code>"twoways"</code> is not possible),</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The functions <code>between</code>, <code>Between</code>, <code>Within</code>, and <code>Sum</code> perform specific
data transformations, i. e., the between, within, and sum transformation,
respectively.
</p>
<p><code>between</code> returns a vector/matrix containing the individual means (over
time) with the length of the vector equal to the number of
individuals (if <code>effect = "individual"</code> (default); if <code>effect = "time"</code>,
it returns the time means (over individuals)). <code>Between</code>
duplicates the values and returns a vector/matrix which length/number of rows
is the number of total observations. <code>Within</code> returns a vector/matrix
containing the values in deviation from the individual means
(if <code>effect = "individual"</code>, from time means if <code>effect = "time"</code>), the so
called demeaned data. <code>Sum</code> returns a vector/matrix with sum per individual
(over time) or the sum per time period (over individuals) with
<code>effect = "individual"</code> or <code>effect = "time"</code>, respectively, and has length/
number of rows of the total observations (like <code>Between</code>).
</p>
<p>For <code>between</code>, <code>Between</code>, <code>Within</code>, and <code>Sum</code> in presence of NA values it
can be useful to supply <code>na.rm = TRUE</code> as an additional argument to
keep as many observations as possible in the resulting transformation.
na.rm is passed on to the mean()/sum() function used by these transformations
(i.e., it does not remove NAs prior to any processing!), see also
<strong>Examples</strong>.
</p>


<h3>Value</h3>

<p>All these functions return an object of class <code>pseries</code> or a matrix,
except:<br><code>between</code>, which returns a numeric vector or a matrix;
<code>as.matrix</code>, which returns a matrix.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code>is.pseries()</code> to check if an object is a pseries. For
more functions on class 'pseries' see <code>lag()</code>, <code>lead()</code>,
<code>diff()</code> for lagging values, leading values (negative lags) and
differencing.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# First, create a pdata.frame
data("EmplUK", package = "plm")
Em &lt;- pdata.frame(EmplUK)

# Then extract a series, which becomes additionally a pseries
z &lt;- Em$output
class(z)

# obtain the matrix representation
as.matrix(z)

# compute the between and within transformations
between(z)
Within(z)

# Between and Sum replicate the values for each time observation
Between(z)
Sum(z)

# between, Between, Within, and Sum transformations on other dimension
between(z, effect = "time")
Between(z, effect = "time")
Within(z, effect = "time")
Sum(z, effect = "time")

# NA treatment for between, Between, Within, and Sum
z2 &lt;- z
z2[length(z2)] &lt;- NA # set last value to NA
between(z2, na.rm = TRUE) # non-NA value for last individual
Between(z2, na.rm = TRUE) # only the NA observation is lost
Within(z2, na.rm = TRUE)  # only the NA observation is lost
Sum(z2, na.rm = TRUE)     # only the NA observation is lost

sum(is.na(Between(z2))) # 9 observations lost due to one NA value
sum(is.na(Between(z2, na.rm = TRUE))) # only the NA observation is lost
sum(is.na(Within(z2))) # 9 observations lost due to one NA value
sum(is.na(Within(z2, na.rm = TRUE))) # only the NA observation is lost
sum(is.na(Sum(z2))) # 9 observations lost due to one NA value
sum(is.na(Sum(z2, na.rm = TRUE))) # only the NA observation is lost

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>form_tails</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform tails of distribution</h2>

<h3>Description</h3>

<p>Modify tail(s) of distribution defined by certain cutoff level using method
of choice. This function is useful for doing robust analysis in presence of
possible outliers.
</p>


<h3>Usage</h3>

<pre><code class="language-R">form_tails(f, level, method = "trim", direction = "both")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>A pdqr-function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Cutoff level. For direction "both" should be between 0 and 0.5;
for "left" and "right" - between 0 and 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Modification method. One of "trim" or "winsor".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction</code></td>
<td>
<p>Information about which tail(s) to modify. One of "both",
"left", "right".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Edges for left and right tails are computed as <code>level</code> and <code>1 - level</code> quantiles respectively. The left tail is interval to the left of
left edge, and right tail - to the right of right edge.
</p>
<p>Method "trim" removes tail(s) while normalizing "center part". Method
"winsor" "squashes" tails inside center of distribution in dirac-like
fashion, i.e. probability of tail(s) is moved inside and becomes concentrated
in <code>1e-8</code> neighborhood of nearest edge.
</p>
<p>Direction "both" affect both tails. Directions "left" and "right" affect only
left and right tail respectively.
</p>


<h3>Value</h3>

<p>A pdqr-function with transformed tail(s).
</p>


<h3>See Also</h3>

<p><code>form_resupport()</code> for changing support to some
known interval.
</p>
<p><code>summ_center()</code> and <code>summ_spread()</code> for computing summaries of distributions.
</p>
<p>Other form functions: 
<code>form_estimate()</code>,
<code>form_mix()</code>,
<code>form_regrid()</code>,
<code>form_resupport()</code>,
<code>form_retype()</code>,
<code>form_smooth()</code>,
<code>form_trans()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Type "discrete"
my_dis &lt;- new_d(data.frame(x = 1:4, prob = (1:4) / 10), type = "discrete")
meta_x_tbl(form_tails(my_dis, level = 0.1))
meta_x_tbl(
  form_tails(my_dis, level = 0.35, method = "winsor", direction = "left")
)

# Type "continuous"
d_norm &lt;- as_d(dnorm)
plot(d_norm)
lines(form_tails(d_norm, level = 0.1), col = "blue")
lines(
  form_tails(d_norm, level = 0.1, method = "winsor", direction = "right"),
  col = "green"
)

# Use `form_resupport()` and `as_q()` to remove different levels from both
# directions. Here 0.1 level tail from left is removed, and 0.05 level from
# right
new_supp &lt;- as_q(d_norm)(c(0.1, 1 - 0.05))
form_resupport(d_norm, support = new_supp)

# Examples of robust mean
set.seed(101)
x &lt;- rcauchy(1000)
d_x &lt;- new_d(x, "continuous")
summ_mean(d_x)
## Trimmed mean
summ_mean(form_tails(d_x, level = 0.1, method = "trim"))
## Winsorized mean
summ_mean(form_tails(d_x, level = 0.1, method = "winsor"))
</code></pre>


</div>
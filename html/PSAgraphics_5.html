<div class="container">

<table style="width: 100%;"><tr>
<td>bal.ms.psa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Balance for Continuous Covariate: Random Strata as part of a PSA</h2>

<h3>Description</h3>

<p>Function provides a measure (based on the trimmed mean) of the balance
achieved between control and treatment groups for a continuous covariate
from user defined strata. This statistic is compared to the same measure for
randomly permuted strata.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bal.ms.psa(
  continuous,
  treatment = NULL,
  strata = NULL,
  trim = 0,
  B = 1000,
  main = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>continuous</code></td>
<td>
<p>Quantitative covariate that is being balanced within
strata in a PSA.  If <code>continuous</code> has three columns, then the second
and third are assumed to be the treatment and strata respectively.  Missing
values are not allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>Binary variable of same length as <code>continuous</code>;
generally 0 for 'control,' 1 for 'treatment.'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>Integer variable; a vector of same length as <code>continuous</code>
indicating the derived strata from estimated propensity scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trim</code></td>
<td>
<p>Fraction (0 to 0.5) of observations to be trimmed from each end
of stratum-treatment level before the mean is computed. See
<code>mean</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Numeric; number of randomly generated iterations of the balance
measure are created for the comparison distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Title passed to <code>histogram</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function measures the balance achieved across K strata for a continuous
covariate.  If <code class="reqn"> \mu_{ik} </code> is the covariate trimmed (as specified by
user) mean of cases in stratum k, treatment i, then the statistic is the sum
over all K of <code class="reqn"> |\mu_{0k} - \mu_{1k}| </code>.  A permutation distribution is
generated by randomly assigning cases to strata, thus generating B permuted
stratifications and the associated B permutation statistics.  The
permutation stratifications are generated under a fixed marginals model to
retain comparability with the original stratification.  A histogram of the
permutation statistics is produced with the original statistic referenced as
a red dot.
</p>


<h3>Value</h3>

<p>In addition to the histogram, a list with the following components
is returned: </p>
<table>
<tr style="vertical-align: top;">
<td><code>balance.orig </code></td>
<td>
<p>Balance measure of user defined strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank.orig</code></td>
<td>
<p>Rank of original balance measure in comparison with the B
randomly generated values.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>James E. Helmreich <a href="mailto:James.Helmreich@Marist.edu">James.Helmreich@Marist.edu</a>
</p>
<p>Robert M. Pruzek <a href="mailto:RMPruzek@yahoo.com">RMPruzek@yahoo.com</a>
</p>


<h3>See Also</h3>

<p><code>bal.ks.psa</code>, <code>bal.cws.psa</code>, <code>bal.cs.psa</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Balance stat should be close to zero
meas&lt;-rnorm(500)
continuous&lt;-c(meas,meas+rnorm(500,0,.1))
treatment&lt;-c(rep(0,500),rep(1,500))
strata&lt;-rep(c(rep(1,100),rep(2,100),rep(3,100),rep(4,100),rep(5,100)),2)
bal.ms.psa(continuous,treatment,strata)


#Balance stat should be close to .4
meas&lt;-rnorm(500)
continuous&lt;-c(meas, meas[1:250] + runif(250,0,.2),
   meas[251:500]-runif(250,0,.2))
treatment&lt;-c(rep(0,500),rep(1,500))
strata&lt;-rep(c(rep(1,100), rep(2,100), rep(3,100),
   rep(4,100),rep(5,100)),2)
bal.ms.psa(continuous, treatment, strata, B=200)

</code></pre>


</div>
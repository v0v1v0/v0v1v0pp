<div class="container">

<table style="width: 100%;"><tr>
<td>sir_exp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate SMR</h2>

<h3>Description</h3>

<p>Calculate Standardized Mortality Ratios (SMRs) using 
a single data set that includes
observed and expected cases and additionally person-years.
</p>
<p><code>sir_lex</code> solves SMR from a <code>Lexis</code> object 
calculated with <code>lexpand</code>.
</p>
<p><code>sir_ag</code> solves SMR from a <code>aggre</code> object 
calculated using <code>lexpand</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sir_exp(
  x,
  obs,
  exp,
  pyrs = NULL,
  print = NULL,
  conf.type = "profile",
  test.type = "homogeneity",
  conf.level = 0.95,
  subset = NULL
)

sir_lex(x, print = NULL, breaks = NULL, ...)

sir_ag(
  x,
  obs = "from0to1",
  print = attr(x, "aggre.meta")$by,
  exp = "d.exp",
  pyrs = "pyrs",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Data set e.g. <code>aggre</code> or <code>Lexis</code> object 
(see: <code>lexpand</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>Variable name of the observed cases in the data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp</code></td>
<td>
<p>Variable name or expression for expected cases</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pyrs</code></td>
<td>
<p>Variable name for person-years (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print</code></td>
<td>
<p>Variables or expression to stratify the results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.type</code></td>
<td>
<p>select confidence interval type: (default=) 'profile', 'wald', 'univariate'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.type</code></td>
<td>
<p>Test for equal SIRs. Test available are 'homogeneity' and 'trend'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>Level of type-I error in confidence intervals, default 0.05 is 95% CI</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>a logical vector for subsetting data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>a named list to split age group (age), period (per) or follow-up (fot).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>pass arguments to <code>sir_exp</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are intended to calculate SMRs from a single data set 
that includes both observed and expected number of cases. For example utilizing the
argument <code>pop.haz</code> of the <code>lexpand</code>.
</p>
<p><code>sir_lex</code> automatically exports the transition <code>fromXtoY</code> using the first
state in <code>lex.Str</code> as <code>0</code> and all other as <code>1</code>. No missing values
is allowed in observed, pop.haz or person-years.
</p>


<h3>Value</h3>

<p>A sir object
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>sir_lex()</code>: 
</p>
</li>
<li> <p><code>sir_ag()</code>: 
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Matti Rantanen
</p>


<h3>See Also</h3>

<p><code>lexpand</code>
<a href="../doc/sir.html">A SIR calculation vignette</a>
</p>
<p>Other sir functions: 
<code>lines.sirspline()</code>,
<code>plot.sirspline()</code>,
<code>sir()</code>,
<code>sir_ratio()</code>,
<code>sirspline()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

BL &lt;- list(fot = 0:5, per = c("2003-01-01","2008-01-01", "2013-01-01"))

## Aggregated data
x1 &lt;- lexpand(sire, breaks = BL, status = status != 0, 
              birth = bi_date, entry = dg_date, exit = ex_date,
              pophaz=popmort,
              aggre=list(sex, period = per, surv.int = fot))
sir_ag(x1, print = 'period')


# no aggreate or breaks
x2 &lt;- lexpand(sire, status = status != 0, 
              birth = bi_date, entry = dg_date, exit = ex_date,
              pophaz=popmort)
sir_lex(x2, breaks = BL, print = 'per')


</code></pre>


</div>
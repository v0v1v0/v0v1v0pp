<div class="container">

<table style="width: 100%;"><tr>
<td>Fit_References</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit a Collective Model to a Wishlist of References</h2>

<h3>Description</h3>

<p>The function fits a collective model to a wishlist of references (expected layer losses and excess frequencies).
The function allows to specify the family of the severity distribution that is used. Depending on this distribution family the
function works slightly differently: </p>

<ul>
<li>
<p> For the severity distribution <code>PiecewisePareto</code> the function returns a <code>PPP_Model</code> that satisfies all the references
</p>
</li>
<li>
<p> For the severity distribution <code>Pareto</code> the function returns a <code>PPP_Model</code> that minimizes the squared relative deviations from the references
</p>
</li>
<li>
<p> For the severity distribution <code>GenPareto</code> the function returns a <code>PGP_Model</code> that minimizes the squared relative deviations from the references
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">Fit_References(
  Covers = NULL,
  Attachment_Points = NULL,
  Expected_Layer_Losses = NULL,
  Thresholds = NULL,
  Frequencies = NULL,
  model_threshold = min(c(Attachment_Points, Thresholds)),
  default_alpha = 2,
  dispersion = 1,
  alpha_max = 100,
  severity_distribution = "PiecewisePareto",
  ignore_inconsistent_references = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Covers</code></td>
<td>
<p>Numeric vector. Vector containing the covers of the layers from the wishlist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Attachment_Points</code></td>
<td>
<p>Numeric vector. Vector containing the attachment points of the layers from the wishlist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Expected_Layer_Losses</code></td>
<td>
<p>Numeric vector. Vector containing the expected losses of the layers from the wishlist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Thresholds</code></td>
<td>
<p>Numeric vector. Contains the thresholds from the wishlist for which excess frequencies are given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Frequencies</code></td>
<td>
<p>Numeric vector. Expected frequencies excess the <code>Thresholds</code> from the wishlist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_threshold</code></td>
<td>
<p>Numerical. Lowest threshold of the fitted piecewise Pareto distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default_alpha</code></td>
<td>
<p>Numerical. Default alpha for situations where an alpha has to be selected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dispersion</code></td>
<td>
<p>Numerical. Dispersion of the claim count distribution in the resulting PPP_Model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_max</code></td>
<td>
<p>Numerical. Maximum alpha to be used for the matching.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>severity_distribution</code></td>
<td>
<p>Character. Implemented distributions: "PiecewisePareto" (default), "Pareto" and "GenPareto".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_inconsistent_references</code></td>
<td>
<p>Logical. If TRUE then inconsistent references are ignored in case of the
piecewise Pareto distribution and the other references are used to fit the model</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>For severity_distribution = "PiecewisePareto" or "Pareto": A PPP_Model object that contains the information about a collective model with a Panjer distributed claim count and a Piecewise Pareto distributed severity. The object contains the following elements: </p>

<ul>
<li> <p><code>FQ</code> Numerical. Frequency in excess of the lowest threshold of the piecewise Pareto distribution
</p>
</li>
<li> <p><code>t</code> Numeric vector. Vector containing the thresholds for the piecewise Pareto distribution
</p>
</li>
<li> <p><code>alpha</code> Numeric vector. Vector containing the Pareto alphas of the piecewise Pareto distribution
</p>
</li>
<li> <p><code>truncation</code> Numerical. If <code>truncation</code> is not <code>NULL</code> and <code>truncation &gt; max(t)</code>, then the distribution is truncated at <code>truncation</code>.
</p>
</li>
<li> <p><code>truncation_type</code> Character. If <code>truncation_type = "wd"</code> then the whole distribution is truncated. If <code>truncation_type = "lp"</code> then a truncated Pareto is used for the last piece.
</p>
</li>
<li> <p><code>dispersion</code> Numerical. Dispersion of the Panjer distribution (i.e. variance to mean ratio).
</p>
</li>
<li> <p><code>Status</code> Numerical indicator: 0 = success, 1 = some information has been ignored, 2 = no solution found
</p>
</li>
<li> <p><code>Comment</code> Character. Information on whether the fit was successful
</p>
</li>
</ul>
<p>For severity_distribution = "GenPareto": A PGP_Model object that contains the information about a collective model with a Panjer distributed claim count and a Piecewise Pareto distributed severity. The object contains the following elements: </p>

<ul>
<li> <p><code>FQ</code> Expected claim count of the collective model.
</p>
</li>
<li> <p><code>t</code> Numeric. Threshold of the Pareto distribution.
</p>
</li>
<li> <p><code>alpha_ini</code> Numeric. Initial Pareto alpha (at <code>t</code>).
</p>
</li>
<li> <p><code>alpha_tail</code> Numeric. Tail Pareto alpha.
</p>
</li>
<li> <p><code>truncation</code> If <code>truncation</code> is not <code>NULL</code> and <code>truncation &gt; t</code>, then the Pareto distribution is truncated at <code>truncation</code>.
</p>
</li>
<li> <p><code>dispersion</code> Numerical. Dispersion of the Panjer distribution (i.e. variance to mean ratio).
</p>
</li>
<li> <p><code>Status</code> Numerical indicator: 0 = success, 1 = some information has been ignored, 2 = no solution found
</p>
</li>
<li> <p><code>Comment</code> Character. Information on whether the fit was successful
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">covers &lt;- c(1000, 1000, 1000)
att_points &lt;- c(1000, 2000, 5000)
exp_losses &lt;- c(100, 50, 10)
thresholds &lt;- c(4000, 10000)
fqs &lt;- c(0.04, 0.005)
fit &lt;- Fit_References(covers, att_points, exp_losses, thresholds, fqs)
Layer_Mean(fit, covers, att_points)
Excess_Frequency(fit, thresholds)
fit &lt;- Fit_References(covers, att_points, exp_losses, thresholds, fqs,
                      severity_distribution = "Pareto")
Layer_Mean(fit, covers, att_points)
Excess_Frequency(fit, thresholds)
fit &lt;- Fit_References(covers, att_points, exp_losses,
                      severity_distribution = "GenPareto")
Layer_Mean(fit, covers, att_points)

</code></pre>


</div>
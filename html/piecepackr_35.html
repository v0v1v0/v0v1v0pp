<div class="container">

<table style="width: 100%;"><tr>
<td>op_transform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Oblique projection helper function</h2>

<h3>Description</h3>

<p>Guesses <code>z</code> coordinates and
sorting order to more easily
make 3D graphics with <code>pmap_piece</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">op_transform(
  df,
  ...,
  cfg = getOption("piecepackr.cfg", pp_cfg()),
  envir = getOption("piecepackr.envir"),
  op_angle = getOption("piecepackr.op_angle", 45),
  pt_thickness = 0.01,
  as_top = character(0),
  cfg_class = "list"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame with coordinates and dimensions in inches</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfg</code></td>
<td>
<p>Piecepack configuration list or <code>pp_cfg</code> object,
a list of <code>pp_cfg</code> objects,
or a character vector of <code>pp_cfg</code> objects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>Environment (or named list) containing configuration list(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>op_angle</code></td>
<td>
<p>Intended oblique projection angle (used for re-sorting)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pt_thickness</code></td>
<td>
<p>Thickness of pyramid tip i.e. value to add to the z-value of a pyramid top
if it is a (weakly) smaller ranked pyramid (top)
placed on top of a larger ranked pyramid (top).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_top</code></td>
<td>
<p>Character vector of components whose “side”
should be converted to “top” e.g. <code>c("pawn_face")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfg_class</code></td>
<td>
<p>Either <code>"list"</code> (default) or <code>"character"</code>.
Desired class of the <code>cfg</code> column in the returned tibble.
<code>"list"</code> is more efficient for use with <code>pmap_piece()</code> but
<code>geom_piece()</code> needs <code>"character"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The heuristics used to generate guesses
for <code>z</code> coordinates and sorting order
aren't guaranteed to work in every case.
In some cases you may get better sorting results
by changing the <code>op_angle</code> or the dimensions of pieces.
</p>


<h3>Value</h3>

<p>A tibble with extra columns added
and re-sorted rows
</p>


<h3>See Also</h3>

<p><a href="https://trevorldavis.com/piecepackr/3d-projections.html">https://trevorldavis.com/piecepackr/3d-projections.html</a> for more details
and examples of oblique projections in <code>piecepackr</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">df &lt;- tibble::tibble(piece_side="tile_back",
                     x=c(2,2,2,4,6,6,4,2,5),
                     y=c(4,4,4,4,4,2,2,2,3))
cfg &lt;- game_systems()$piecepack
pmap_piece(df, op_angle=135, trans=op_transform,
           op_scale=0.5, default.units="in", cfg=cfg)
</code></pre>


</div>
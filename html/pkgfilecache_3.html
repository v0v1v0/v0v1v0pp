<div class="container">

<table style="width: 100%;"><tr>
<td>ensure_files_available</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Ensure all given files exist in the file cache, download them if they are not.</h2>

<h3>Description</h3>

<p>Ensure all given files exist in the file cache, download them if they are not.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ensure_files_available(
  pkg_info,
  relative_filenames,
  urls,
  files_are_binary = NULL,
  md5sums = NULL,
  on_errors = "warn",
  download = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkg_info, </code></td>
<td>
<p>named list. Package identifier, see get_pkg_info() on how to get one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relative_filenames, </code></td>
<td>
<p>vector of strings. A vector of filenames, realtive to the package cache.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>urls, </code></td>
<td>
<p>vector of strings. For each file, a remote URL where to download the file. Will be passed to 'downloader::download', see that function for URL encoding details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>files_are_binary, </code></td>
<td>
<p>logical vector. For each file, whether it is binary. Only required on Windows, when files need to be downloaded. See 'downloader::download' docs for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>md5sums, </code></td>
<td>
<p>vector of strings or NULL. A list of MD5 checksums, one for each file in param 'relative_filenames', if not NULL. If given, the files will only be reported as existing if the MD5 sums match.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>on_errors, </code></td>
<td>
<p>string. What to do if getting the files failed. One of c("warn", "stop", "ignore"). At the end, files are checked using 'files_available'(including MD5 if given). Depending on the check results, the behaviours triggered are: "warn": Print a warning for each file that failed the check. "stop": Stop the script, i.e., the whole application. "ignore": Do nothing. You can still react using the return value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>download, </code></td>
<td>
<p>logical. Whether to try downloading missing files. Defaults to TRUE. Existing files (with correct MD5 if available) will never be downloaded.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Named list. The list has entries: "available": vector of strings. The names of the files that are available in the local file cache. You can access them using get_filepath(). "missing": vector of strings. The names of the files that this function was unable to retrieve. "file_status": Logical array indicating whether the files are available. Order is identical to the one in argument 'relative_filenames'.
</p>


<h3>Examples</h3>

<pre><code class="language-R">   pkg_info = get_pkg_info("mypackage");
   local_relative_filenames = c("local_file1.txt", "local_file2.txt");
   bu = "https://raw.githubusercontent.com/dfsp-spirit/";
   url1 = paste(bu, "pkgfilecache/master/inst/extdata/file1.txt", sep="");
   url2 = paste(bu, "pkgfilecache/master/inst/extdata/file2.txt", sep="");
   urls = c(url1, url2);
   md5sums = c("35261471bcd198583c3805ee2a543b1f", "85ffec2e6efb476f1ee1e3e7fddd86de");
   res = ensure_files_available(pkg_info, local_relative_filenames, urls, md5sums=md5sums);
   erase_file_cache(pkg_info); # clear full cache

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>shaving</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Repeated shaving of variables</h2>

<h3>Description</h3>

<p>One of five filter methods can be chosen for repeated shaving of
a certain percentage of the worst performing variables. Performance of the
reduced models are stored and viewable through <code>print</code> and <code>plot</code>
methods.
</p>


<h3>Usage</h3>

<pre><code class="language-R">shaving(
  y,
  X,
  ncomp = 10,
  method = c("SR", "VIP", "sMC", "LW", "RC"),
  prop = 0.2,
  min.left = 2,
  comp.type = c("CV", "max"),
  validation = c("CV", 1),
  fixed = integer(0),
  newy = NULL,
  newX = NULL,
  segments = 10,
  plsType = "plsr",
  Y.add = NULL,
  ...
)

## S3 method for class 'shaved'
plot(x, y, what = c("error", "spectra"), index = "min", log = "x", ...)

## S3 method for class 'shaved'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>vector of response values (<code>numeric</code> or <code>factor</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>numeric predictor <code>matrix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncomp</code></td>
<td>
<p>integer number of components (default = 10).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>filter method, i.e. SR, VIP, sMC, LW or RC given as <code>character</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prop</code></td>
<td>
<p>proportion of variables to be removed in each iteration (<code>numeric</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.left</code></td>
<td>
<p>minimum number of remaining variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comp.type</code></td>
<td>
<p>use number of components chosen by cross-validation, <code>"CV"</code>,
or fixed, <code>"max"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validation</code></td>
<td>
<p>type of validation for <code>plsr</code>. The default is "CV". If more
than one set of CV segments is wanted, use a vector of lenth two, e.g. <code>c("CV",5)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed</code></td>
<td>
<p>vector of indeces for compulsory/fixed variables that should always be
included in the modelling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newy</code></td>
<td>
<p>validation response for RMSEP/error computations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newX</code></td>
<td>
<p>validation predictors for RMSEP/error computations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>segments</code></td>
<td>
<p>see <code>mvr</code> for documentation of segment choices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plsType</code></td>
<td>
<p>Type of PLS model, "plsr" or "cppls".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y.add</code></td>
<td>
<p>Additional response for CPPLS, see <code>plsType</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments for <code>plsr</code> or <code>cvsegments</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object of class <code>shaved</code> for plotting or printing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>what</code></td>
<td>
<p>plot type. Default = "error". Alternative = "spectra".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>which iteration to plot. Default = "min"; corresponding to minimum RMSEP.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>
<p>logarithmic x (default) or y scale.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Variables are first sorted with respect to some importancemeasure, 
and usually one of the filter measures described above are used. Secondly, a 
threshold is used to eliminate a subset of the least informative variables. Then
a model is fitted again to the remaining variables and performance is measured. 
The procedure is repeated until maximum model performance is achieved.
</p>


<h3>Value</h3>

<p>Returns a list object of class <code>shaved</code> containing the method type,
the error, number of components, and number of variables per reduced model. It
also contains a list of all sets of reduced variable sets plus the original data.
</p>


<h3>Author(s)</h3>

<p>Kristian Hovde Liland
</p>


<h3>See Also</h3>

<p><code>VIP</code> (SR/sMC/LW/RC), <code>filterPLSR</code>, <code>shaving</code>, 
<code>stpls</code>, <code>truncation</code>,
<code>bve_pls</code>, <code>ga_pls</code>, <code>ipw_pls</code>, <code>mcuve_pls</code>,
<code>rep_pls</code>, <code>spa_pls</code>,
<code>lda_from_pls</code>, <code>lda_from_pls_cv</code>, <code>setDA</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(mayonnaise, package = "pls")
sh &lt;- shaving(mayonnaise$design[,1], pls::msc(mayonnaise$NIR), type = "interleaved")
pars &lt;- par(mfrow = c(2,1), mar = c(4,4,1,1))
plot(sh)
plot(sh, what = "spectra")
par(pars)
print(sh)

</code></pre>


</div>
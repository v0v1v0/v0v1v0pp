<div class="container">

<table style="width: 100%;"><tr>
<td>rings,prevR-method</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculation of rings of equal number of observation and/or equal radius.</h2>

<h3>Description</h3>

<p>For each cluster, this function determines a ring of equal number of
observations and/or equal radius and calculates several indicators from
observations located inside that ring.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'prevR'
rings(object, N = seq(100, 500, 50), R = Inf, progression = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>object of class prevR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>minimum number of observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>maximum rings radius (in kilometers if coordinates in decimal
degrees, in the unit of the projection otherwise).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progression</code></td>
<td>
<p>show a progress bar?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For each row of the data frame <code>clusters</code> of <code>object</code>, <code>rings()</code>
determines a ring, centered on the cluster. It could be:
</p>

<ul>
<li>
<p> rings of equal number of observations if <code>N</code> is finite and <code>R = Inf</code>;
</p>
</li>
<li>
<p> rings of equal radius if <code>N = Inf</code> and <code>R</code> is finite;
</p>
</li>
<li>
<p> a combination of both (see below) if <code>N</code> and <code>R</code> are both finite.
</p>
</li>
</ul>
<p>For *rings of equal number of observations, <code>rings()</code> selects the smallest
ring containing at least <code>N</code> valid observations.
</p>
<p>For <em>rings of equal radius</em>, <code>rings()</code> selects all clusters located at a
lower distance than <code>R</code> from the central cluster.
</p>
<p>For <em>combination of both</em>, <code>rings()</code> calculates first the ring with the
minimum number of observations and test if its radius is lower than <code>R</code> or
not. If so, the ring is kept, otherwise the ring of maximum radius is
calculated.
</p>
<p>Different series of rings could be simultaneously calculated by providing
different values for <code>N</code> and <code>R</code>. <code>rings()</code> will calculate rings
corresponding to each couple (<code>N</code>,<code>R</code>).
</p>


<h3>Value</h3>

<p>Return <code>object</code> with the slot <code>rings</code> completed for each couple
(N,R).
</p>
<p>Each entry is composed of 3 elements: <code>N</code>, minimum number of observations per
ring; <code>R</code>, maximum radius of rings and <code>estimates</code>, a data frame with the
following variables:
</p>

<ul>
<li>
<p> "id" cluster ID.
</p>
</li>
<li>
<p> "r.pos" number of positive cases inside the ring.
</p>
</li>
<li>
<p> "r.n" number of valid observations inside the ring.
</p>
</li>
<li>
<p> "r.prev" observed prevalence (in %) inside the ring (r.pos/r.n).
</p>
</li>
<li>
<p> "r.radius" ring radius (in kilometers if coordinates in decimal degrees,
in the unit of the projection otherwise).
</p>
</li>
<li>
<p> "r.clusters" number of clusters located inside the ring.
</p>
</li>
<li>
<p> "r.wpos" (optional) sum of weights of positive cases inside the ring.
</p>
</li>
<li>
<p> "r.wn" (optional) sum of weights of valid observations inside the ring.
</p>
</li>
<li>
<p> "r.wprev" (optional) weighted observed prevalence (in %) inside the ring
(r.wpos/r.wn).
</p>
</li>
</ul>
<p>Note: the list <code>rings</code> is named, the name of each element is
N<em>N_value</em>.R<em>R_value</em>, for example <em>N300.RInf</em>.
</p>
<p>Note 2: <em>r.wpos</em>, <em>r.wn</em> and <em>r.wprev</em> are calculated only if
the slot <code>clusters</code> of <code>object</code> contains weighted data.
</p>


<h3>References</h3>

<p>Larmarange Joseph, Vallo Roselyne, Yaro Seydou, Msellati Philippe and Meda
Nicolas (2011) "Methods for mapping regional trends of HIV prevalence from
Demographic and Health Surveys (DHS)",
<em>Cybergeo : European Journal of Geography</em>, no 558,
<a href="https://journals.openedition.org/cybergeo/24606">https://journals.openedition.org/cybergeo/24606</a>,
DOI: 10.4000/cybergeo.24606.
</p>
<p>Larmarange Joseph (2007)
<em>Prévalences du VIH en Afrique : validité d'une mesure</em>,
PhD thesis in demography, directed by Benoît Ferry, université Paris
Descartes, <a href="https://theses.hal.science/tel-00320283">https://theses.hal.science/tel-00320283</a>.
</p>


<h3>See Also</h3>

<p>prevR.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
print(fdhs)
dhs &lt;- rings(fdhs, N = c(100, 200, 300, 400, 500))
print(dhs)

## End(Not run)
</code></pre>


</div>
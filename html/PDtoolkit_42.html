<div class="container">

<table style="width: 100%;"><tr>
<td>stepFWDr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Customized stepwise regression with p-value and trend check on raw risk factors</h2>

<h3>Description</h3>

<p><code>stepFWDr</code> customized stepwise regression with p-value and trend check on raw risk factors. Trend check is performed
comparing observed trend between target and analyzed risk factor and trend of the estimated coefficients within the
binomial logistic regression. Difference between <code>stepFWDr</code> and <code>stepFWD</code> is that this function
run stepwise regression on mixed risk factor types (numerical and/or categorical), while  <code>stepFWD</code> accepts only categorical risk factors.
Note that procedure checks the column names of supplied <code>db</code> data frame therefore some
renaming (replacement of special characters) is possible to happen. For details check help example.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stepFWDr(
  start.model,
  p.value = 0.05,
  db,
  check.start.model = TRUE,
  offset.vals = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>start.model</code></td>
<td>
<p>Formula class that represents starting model. It can include some risk factors, but it can be
defined only with intercept (<code>y ~ 1</code> where <code>y</code> is target variable).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.value</code></td>
<td>
<p>Significance level of p-value of the estimated coefficients. For numerical risk factors this value is
is directly compared to the p-value of the estimated coefficients, while for categorical risk factors
multiple Wald test is employed and its p-value is used for comparison with selected threshold (<code>p.value</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>Modeling data with risk factors and target variable. Risk factors can be categorized or continuous.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check.start.model</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code>), if risk factors from the starting model should be
checked for p-value and trend in stepwise process. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset.vals</code></td>
<td>
<p>This can be used to specify an a priori known component to be included in the linear predictor during fitting.
This should be <code>NULL</code> or a numeric vector of length equal to the number of cases. Default is <code>NULL</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The command <code>stepFWDr</code> returns a list of four objects.<br>
The first object (<code>model</code>), is the final model, an object of class inheriting from <code>"glm"</code>.<br>
The second object (<code>steps</code>), is the data frame with risk factors selected at each iteration.<br>
The third object (<code>warnings</code>), is the data frame with warnings if any observed.
The warnings refer to the following checks: if any categorical risk factor has more than 10 modalities or
if any of the bins (groups) has less than 5% of observations.<br>
The final, fourth, object <code>dev.db</code> returns the model development database.
</p>


<h3>Examples</h3>

<pre><code class="language-R">suppressMessages(library(PDtoolkit))
data(loans)
trf &lt;- c("Creditability", "Account Balance", "Duration of Credit (month)",
        "Age (years)", "Guarantors", "Concurrent Credits")
res &lt;- stepFWDr(start.model = Creditability ~ 1, 
               p.value = 0.05, 
            db = loans[, trf],
               check.start.model = TRUE, 
               offset.vals = NULL)
summary(res$model)$coefficients
rf.check &lt;- tapply(res$dev.db$Creditability, 
		 res$dev.db$Guarantors, 
		 mean)
rf.check
diff(rf.check)
res$steps
head(res$dev.db)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>interrogate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Given an agent that has a validation plan, perform an interrogation</h2>

<h3>Description</h3>

<p>When the agent has all the information on what to do (i.e., a validation plan
which is a series of validation steps), the interrogation process can occur
according its plan. After that, the agent will have gathered intel, and we
can use functions like <code>get_agent_report()</code> and <code>all_passed()</code> to understand
how the interrogation went down.
</p>


<h3>Usage</h3>

<pre><code class="language-R">interrogate(
  agent,
  extract_failed = TRUE,
  get_first_n = NULL,
  sample_n = NULL,
  sample_frac = NULL,
  sample_limit = 5000,
  show_step_label = FALSE,
  progress = interactive()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>agent</code></td>
<td>
<p><em>The pointblank agent object</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;ptblank_agent&gt;⁠</code> // <strong>required</strong>
</p>
<p>A <strong>pointblank</strong> <em>agent</em> object that is commonly created through the use of
the <code>create_agent()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extract_failed</code></td>
<td>
<p><em>Collect failed rows as data extracts</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>An option to collect rows that didn't pass a particular validation step.
The default is <code>TRUE</code> and further options allow for fine control of how
these rows are collected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>get_first_n</code></td>
<td>
<p><em>Get the first n values</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>If the option to collect non-passing rows is chosen, there is the option
here to collect the first <code>n</code> rows here. Supply the number of rows to
extract from the top of the non-passing rows table (the ordering of data
from the original table is retained).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_n</code></td>
<td>
<p><em>Sample n values</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>If the option to collect non-passing rows is chosen, this option allows for
the sampling of <code>n</code> rows. Supply the number of rows to sample from the
non-passing rows table. If <code>n</code> is greater than the number of non-passing
rows, then all the rows will be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_frac</code></td>
<td>
<p><em>Sample a fraction of values</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;numeric&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>If the option to collect non-passing rows is chosen, this option allows for
the sampling of a fraction of those rows. Provide a number in the range of
<code>0</code> and <code>1</code>. The number of rows to return may be extremely large (and this
is especially when querying remote databases), however, the <code>sample_limit</code>
option will apply a hard limit to the returned rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_limit</code></td>
<td>
<p><em>Row limit for sampling</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>5000</code>
</p>
<p>A value that limits the possible number of rows returned when sampling
non-passing rows using the <code>sample_frac</code> option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_step_label</code></td>
<td>
<p><em>Show step labels in progress</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code>
</p>
<p>Whether to show the <code>label</code> value of each validation step in the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p><em>Show interrogation progress</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>interactive()</code>
</p>
<p>Whether to show the progress of an agent's interrogation in the console.
Defaults to <code>TRUE</code> in interactive sessions.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>ptblank_agent</code> object.
</p>


<h3>Examples</h3>

<p>Create a simple table with two columns of numerical values.
</p>
<div class="sourceCode r"><pre>tbl &lt;-
  dplyr::tibble(
    a = c(5, 7, 6, 5, 8, 7),
    b = c(7, 1, 0, 0, 0, 3)
  )

tbl
#&gt; # A tibble: 6 x 2
#&gt;       a     b
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     5     7
#&gt; 2     7     1
#&gt; 3     6     0
#&gt; 4     5     0
#&gt; 5     8     0
#&gt; 6     7     3
</pre></div>
<p>Validate that values in column <code>a</code> from <code>tbl</code> are always less than <code>5</code>. Using
<code>interrogate()</code> carries out the validation plan and completes the whole
process.
</p>
<div class="sourceCode r"><pre>agent &lt;-
  create_agent(
    tbl = tbl,
    label = "`interrogate()` example"
  ) %&gt;%
  col_vals_gt(columns = a, value = 5) %&gt;%
  interrogate()
</pre></div>
<p>We can print the resulting object to see the validation report.
</p>
<div class="sourceCode r"><pre>agent
</pre></div>


<img src="https://raw.githubusercontent.com/rstudio/pointblank/main/images/man_interrogate_1.png" alt="This image was generated from the first code example in the `interrogate()` help file." style="width:100%;"><h3>Function ID</h3>

<p>6-1
</p>


<h3>See Also</h3>

<p>Other Interrogate and Report: 
<code>get_agent_report()</code>
</p>


</div>
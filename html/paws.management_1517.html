<div class="container">

<table style="width: 100%;"><tr>
<td>ssm_update_association</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Updates an association</h2>

<h3>Description</h3>

<p>Updates an association. You can update the association name and version, the document version, schedule, parameters, and Amazon Simple Storage Service (Amazon S3) output. When you call <code>update_association</code>, the system removes all optional parameters from the request and overwrites the association with null values for those parameters. This is by design. You must specify all optional parameters in the call, even if you are not changing the parameters. This includes the <code>Name</code> parameter. Before calling this API action, we recommend that you call the <code>describe_association</code> API operation and make a note of all optional parameters required for your <code>update_association</code> call.
</p>
<p>See <a href="https://www.paws-r-sdk.com/docs/ssm_update_association/">https://www.paws-r-sdk.com/docs/ssm_update_association/</a> for full documentation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ssm_update_association(
  AssociationId,
  Parameters = NULL,
  DocumentVersion = NULL,
  ScheduleExpression = NULL,
  OutputLocation = NULL,
  Name = NULL,
  Targets = NULL,
  AssociationName = NULL,
  AssociationVersion = NULL,
  AutomationTargetParameterName = NULL,
  MaxErrors = NULL,
  MaxConcurrency = NULL,
  ComplianceSeverity = NULL,
  SyncCompliance = NULL,
  ApplyOnlyAtCronInterval = NULL,
  CalendarNames = NULL,
  TargetLocations = NULL,
  ScheduleOffset = NULL,
  Duration = NULL,
  TargetMaps = NULL,
  AlarmConfiguration = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>AssociationId</code></td>
<td>
<p>[required] The ID of the association you want to update.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Parameters</code></td>
<td>
<p>The parameters you want to update for the association. If you create a
parameter using Parameter Store, a capability of Amazon Web Services
Systems Manager, you can reference the parameter using
<code>{{ssm:parameter-name}}</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DocumentVersion</code></td>
<td>
<p>The document version you want update for the association.
</p>
<p>State Manager doesn't support running associations that use a new
version of a document if that document is shared from another account.
State Manager always runs the <code>default</code> version of a document if shared
from another account, even though the Systems Manager console shows that
a new version was processed. If you want to run an association using a
new version of a document shared form another account, you must set the
document version to <code>default</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ScheduleExpression</code></td>
<td>
<p>The cron expression used to schedule the association that you want to
update.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OutputLocation</code></td>
<td>
<p>An S3 bucket where you want to store the results of this request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Name</code></td>
<td>
<p>The name of the SSM Command document or Automation runbook that contains
the configuration information for the managed node.
</p>
<p>You can specify Amazon Web Services-predefined documents, documents you
created, or a document that is shared with you from another account.
</p>
<p>For Systems Manager document (SSM document) that are shared with you
from other Amazon Web Services accounts, you must specify the complete
SSM document ARN, in the following format:
</p>
<p><code>arn:aws:ssm:region:account-id:document/document-name </code>
</p>
<p>For example:
</p>
<p><code>arn:aws:ssm:us-east-2:12345678912:document/My-Shared-Document</code>
</p>
<p>For Amazon Web Services-predefined documents and SSM documents you
created in your account, you only need to specify the document name. For
example, <code>AWS-ApplyPatchBaseline</code> or <code>My-Document</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Targets</code></td>
<td>
<p>The targets of the association.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AssociationName</code></td>
<td>
<p>The name of the association that you want to update.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AssociationVersion</code></td>
<td>
<p>This parameter is provided for concurrency control purposes. You must
specify the latest association version in the service. If you want to
ensure that this request succeeds, either specify <code style="white-space: pre;">⁠$LATEST⁠</code>, or omit
this parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AutomationTargetParameterName</code></td>
<td>
<p>Choose the parameter that will define how your automation will branch
out. This target is required for associations that use an Automation
runbook and target resources by using rate controls. Automation is a
capability of Amazon Web Services Systems Manager.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MaxErrors</code></td>
<td>
<p>The number of errors that are allowed before the system stops sending
requests to run the association on additional targets. You can specify
either an absolute number of errors, for example 10, or a percentage of
the target set, for example 10%. If you specify 3, for example, the
system stops sending requests when the fourth error is received. If you
specify 0, then the system stops sending requests after the first error
is returned. If you run an association on 50 managed nodes and set
<code>MaxError</code> to 10%, then the system stops sending the request when the
sixth error is received.
</p>
<p>Executions that are already running an association when <code>MaxErrors</code> is
reached are allowed to complete, but some of these executions may fail
as well. If you need to ensure that there won't be more than max-errors
failed executions, set <code>MaxConcurrency</code> to 1 so that executions proceed
one at a time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MaxConcurrency</code></td>
<td>
<p>The maximum number of targets allowed to run the association at the same
time. You can specify a number, for example 10, or a percentage of the
target set, for example 10%. The default value is 100%, which means all
targets run the association at the same time.
</p>
<p>If a new managed node starts and attempts to run an association while
Systems Manager is running <code>MaxConcurrency</code> associations, the
association is allowed to run. During the next association interval, the
new managed node will process its association within the limit specified
for <code>MaxConcurrency</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ComplianceSeverity</code></td>
<td>
<p>The severity level to assign to the association.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SyncCompliance</code></td>
<td>
<p>The mode for generating association compliance. You can specify <code>AUTO</code>
or <code>MANUAL</code>. In <code>AUTO</code> mode, the system uses the status of the
association execution to determine the compliance status. If the
association execution runs successfully, then the association is
<code>COMPLIANT</code>. If the association execution doesn't run successfully, the
association is <code>NON-COMPLIANT</code>.
</p>
<p>In <code>MANUAL</code> mode, you must specify the <code>AssociationId</code> as a parameter
for the <code>put_compliance_items</code> API
operation. In this case, compliance data isn't managed by State Manager,
a capability of Amazon Web Services Systems Manager. It is managed by
your direct call to the
<code>put_compliance_items</code> API operation.
</p>
<p>By default, all associations use <code>AUTO</code> mode.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ApplyOnlyAtCronInterval</code></td>
<td>
<p>By default, when you update an association, the system runs it
immediately after it is updated and then according to the schedule you
specified. Specify this option if you don't want an association to run
immediately after you update it. This parameter isn't supported for rate
expressions.
</p>
<p>If you chose this option when you created an association and later you
edit that association or you make changes to the SSM document on which
that association is based (by using the Documents page in the console),
State Manager applies the association at the next specified cron
interval. For example, if you chose the <code>Latest</code> version of an SSM
document when you created an association and you edit the association by
choosing a different document version on the Documents page, State
Manager applies the association at the next specified cron interval if
you previously selected this option. If this option wasn't selected,
State Manager immediately runs the association.
</p>
<p>You can reset this option. To do so, specify the
<code>no-apply-only-at-cron-interval</code> parameter when you update the
association from the command line. This parameter forces the association
to run immediately after updating it and according to the interval
specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CalendarNames</code></td>
<td>
<p>The names or Amazon Resource Names (ARNs) of the Change Calendar type
documents you want to gate your associations under. The associations
only run when that change calendar is open. For more information, see
<a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-change-calendar.html">Amazon Web Services Systems Manager Change Calendar</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TargetLocations</code></td>
<td>
<p>A location is a combination of Amazon Web Services Regions and Amazon
Web Services accounts where you want to run the association. Use this
action to update an association in multiple Regions and multiple
accounts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ScheduleOffset</code></td>
<td>
<p>Number of days to wait after the scheduled day to run an association.
For example, if you specified a cron schedule of
<code style="white-space: pre;">⁠cron(0 0 ? * THU#2 *)⁠</code>, you could specify an offset of 3 to run the
association each Sunday after the second Thursday of the month. For more
information about cron schedules for associations, see <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/reference-cron-and-rate-expressions.html">Reference: Cron and rate expressions for Systems Manager</a>
in the <em>Amazon Web Services Systems Manager User Guide</em>.
</p>
<p>To use offsets, you must specify the <code>ApplyOnlyAtCronInterval</code>
parameter. This option tells the system not to run an association
immediately after you create it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Duration</code></td>
<td>
<p>The number of hours the association can run before it is canceled.
Duration applies to associations that are currently running, and any
pending and in progress commands on all targets. If a target was taken
offline for the association to run, it is made available again
immediately, without a reboot.
</p>
<p>The <code>Duration</code> parameter applies only when both these conditions are
true:
</p>

<ul>
<li>
<p> The association for which you specify a duration is cancelable
according to the parameters of the SSM command document or
Automation runbook associated with this execution.
</p>
</li>
<li>
<p> The command specifies the <code>ApplyOnlyAtCronInterval</code> parameter,
which means that the association doesn't run immediately after it is
updated, but only according to the specified schedule.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TargetMaps</code></td>
<td>
<p>A key-value mapping of document parameters to target resources. Both
Targets and TargetMaps can't be specified together.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AlarmConfiguration</code></td>
<td>
</td>
</tr>
</table>
</div>
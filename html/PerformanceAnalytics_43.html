<div class="container">

<table style="width: 100%;"><tr>
<td>chart.BarVaR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Periodic returns in a bar chart with risk metric overlay</h2>

<h3>Description</h3>

<p>Plots the periodic returns as a bar chart overlayed with a risk metric
calculation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">chart.BarVaR(
  R,
  width = 0,
  gap = 12,
  methods = c("none", "ModifiedVaR", "GaussianVaR", "HistoricalVaR", "StdDev",
    "ModifiedES", "GaussianES", "HistoricalES"),
  p = 0.95,
  clean = c("none", "boudt", "geltner"),
  all = FALSE,
  ...,
  show.clean = FALSE,
  show.horizontal = FALSE,
  show.symmetric = FALSE,
  show.endvalue = FALSE,
  show.greenredbars = FALSE,
  legend.loc = "bottomleft",
  ylim = NA,
  lwd = 2,
  colorset = 1:12,
  lty = c(1, 2, 4, 5, 6),
  ypad = 0,
  legend.cex = 0.8,
  plot.engine = "default"
)

charts.BarVaR(
  R,
  main = "Returns",
  cex.legend = 0.8,
  colorset = 1:12,
  ylim = NA,
  ...,
  perpanel = NULL,
  show.yaxis = c("all", "firstonly", "alternating", "none")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>an xts, vector, matrix, data frame, timeSeries or zoo object of
asset returns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>periods specified for rolling-period calculations.  Note that
VaR, ES, and Std Dev with width=0 are calculated from the start of the
timeseries</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gap</code></td>
<td>
<p>numeric number of periods from start of series to use to train
risk calculation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>methods</code></td>
<td>
<p>Used to select the risk parameter of trailing <code>width</code>
returns to use: May be any of: </p>
 <ul>
<li>
<p> none - does not add a risk
line, </p>
</li>
<li>
<p> ModifiedVaR - uses Cornish-Fisher modified VaR, </p>
</li>
<li>
<p>GaussianVaR - uses traditional Value at Risk, </p>
</li>
<li>
<p> HistoricalVaR -
calculates historical Value at Risk, </p>
</li>
<li>
<p> ModifiedES - uses Cornish-Fisher
modified Expected Shortfall, </p>
</li>
<li>
<p> GaussianES - uses traditional Expected
Shortfall, </p>
</li>
<li>
<p> HistoricalES - calculates historical Expected Shortfall,
</p>
</li>
<li>
<p> StdDev - per-period standard deviation </p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>confidence level for <code>VaR</code> or <code>ModifiedVaR</code> calculation,
default is .99</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean</code></td>
<td>
<p>the method to use to clean outliers from return data prior to
risk metric estimation. See <code>Return.clean</code> and <code>VaR</code>
for more detail</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p>if TRUE, calculates risk lines for each column given in R.  If
FALSE, only calculates the risk line for the first column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>any other passthru parameters to <code>chart.TimeSeries</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.clean</code></td>
<td>
<p>if TRUE and a method for 'clean' is specified, overlays
the actual data with the "cleaned" data.  See <code>Return.clean</code> for
more detail</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.horizontal</code></td>
<td>
<p>if TRUE, shows a line across the timeseries at the
value of the most recent VaR estimate, to help the reader evaluate the
number of exceptions thus far</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.symmetric</code></td>
<td>
<p>if TRUE and the metric is symmetric, this will show
the metric's positive values as well as negative values, such as for method
"StdDev".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.endvalue</code></td>
<td>
<p>if TRUE, show the final (out of sample) value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.greenredbars</code></td>
<td>
<p>if TRUE, show the per-period returns using green
and red bars for positive and negative returns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.loc</code></td>
<td>
<p>legend location, such as in <code>chart.TimeSeries</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>set the y-axis limit, same as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>set the line width, same as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorset</code></td>
<td>
<p>color palette to use, such as in
<code>chart.TimeSeries</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>set the line type, same as in <code>plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ypad</code></td>
<td>
<p>adds a numerical padding to the y-axis to keep the data away
when legend.loc="bottom".  See examples below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.cex</code></td>
<td>
<p>sets the legend text size, such as in
<code>chart.TimeSeries</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.engine</code></td>
<td>
<p>Choose the engine for plotting, including "default","dygraph","ggplot","plotly" and "googleVis"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>sets the title text, such as in <code>chart.TimeSeries</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.legend</code></td>
<td>
<p>sets the legend text size, such as in
<code>chart.TimeSeries</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perpanel</code></td>
<td>
<p>default NULL, controls column display</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.yaxis</code></td>
<td>
<p>one of "all", "firstonly", "alternating", or "none" to
control where y axis is plotted in multipanel charts</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that <code>StdDev</code> and <code>VaR</code> are symmetric calculations, so a high
and low measure will be plotted.  <code>ModifiedVaR</code>, on the other hand, is
assymetric and only a lower bound will be drawn.
</p>
<p>Creates a plot of time on the x-axis and vertical lines for each period to
indicate value on the y-axis.  Overlays a line to indicate the value of a
risk metric calculated at that time period.
</p>
<p><code>charts.BarVaR</code> places multile bar charts in a single 
graphic, with associated risk measures
</p>


<h3>Author(s)</h3>

<p>Peter Carl
</p>


<h3>See Also</h3>

<p><code>chart.TimeSeries</code> <br><code>plot</code> <br><code>ES</code> <br><code>VaR</code> <br><code>Return.clean</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run:  # not run on CRAN because of example time
data(managers)
# plain
chart.BarVaR(managers[,1,drop=FALSE], main="Monthly Returns")

# with risk line
chart.BarVaR(managers[,1,drop=FALSE], 
		methods="HistoricalVaR", 
		main="... with Empirical VaR from Inception")
		
# with lines for all managers in the sample
chart.BarVaR(managers[,1:6], 
		methods="GaussianVaR", 
		all=TRUE, lty=1, lwd=2, 
		colorset= c("red", rep("gray", 5)), 
		main="... with Gaussian VaR and Estimates for Peers")

# with multiple methods
chart.BarVaR(managers[,1,drop=FALSE],
		methods=c("HistoricalVaR", "ModifiedVaR", "GaussianVaR"), 
		main="... with Multiple Methods")

# cleaned up a bit
chart.BarVaR(managers[,1,drop=FALSE],
		methods=c("HistoricalVaR", "ModifiedVaR", "GaussianVaR"), 
		lwd=2, ypad=.01, 
		main="... with Padding for Bottom Legend")

# with 'cleaned' data for VaR estimates
chart.BarVaR(managers[,1,drop=FALSE],
		methods=c("HistoricalVaR", "ModifiedVaR"), 
		lwd=2, ypad=.01, clean="boudt", 
		main="... with Robust ModVaR Estimate")

# Cornish Fisher VaR estimated with cleaned data, 
# with horizontal line to show exceptions
chart.BarVaR(managers[,1,drop=FALSE],
		methods="ModifiedVaR", 
		lwd=2, ypad=.01, clean="boudt", 
		show.horizontal=TRUE, lty=2, 
		main="... with Robust ModVaR and Line for Identifying Exceptions")

## End(Not run)

</code></pre>


</div>
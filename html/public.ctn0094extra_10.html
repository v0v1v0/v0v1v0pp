<div class="container">

<table style="width: 100%;"><tr>
<td>MarkMissing</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Code Empty Visit Values as "Missing" as Appropriate</h2>

<h3>Description</h3>

<p>Given a complete timeline of potential subject visits per study
protocol, mark certain visits as "Missing"
</p>


<h3>Usage</h3>

<pre><code class="language-R">MarkMissing(timeline_df, windowWidth = 7, daysGrace = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>timeline_df</code></td>
<td>
<p>A data frame with columns <code>who</code>, <code>when</code>,
<code>visit</code> and <code>randomized</code>. This data frame measures on which days
the subjects visited the clinic (<code>visit</code>) and indicates when the
subjects were randomized to Phase I of their respective studies (the
<code>randomized</code> column). This data set will contain one (and only one)
record per subject per day; and enough rows to cover all potential visits
per the protocol length of the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>windowWidth</code></td>
<td>
<p>How many days are expected between clinic visits? Defaults
to 7, representing weekly clinic visits.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>daysGrace</code></td>
<td>
<p>How many days late are subjects allowed to be for their
weekly visit. Defaults to 0. Under this default behavior with weekly
visits, a subject who visits the clinic on days 8 and 14 instead of days
7 and 14 will have a missing visit imputed for day 7.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Most definitions of opioid use disorder treatment success or failure
partially depend on a tally of the number of missed clinic visits. For
example, a definition of early treatment failure could be "3 or more UDS
positive for non-study opioids or missing visits within the first 28 days
of randomization". Given a table of subject visits by day over the entire
protocol timeline, this function will estimate when each subject missed a
clinic visit (unfortunately, missed visits can often be improperly
recorded in the patient logs; if such information is complete, using this
function is unnecessary).
</p>
<p>This estimation is conducted as follows: (1) first, for each subject, a
regular grid of days is spread from the randomization day to the end of
treatment by <code>windowWidth</code>; (2) next, we iterate over each day in
this regular grid, and at each step we check the next <code>windowWidth</code>
plus <code>daysGrace</code> days for a visit in that range, and we mark the day
at the end of the window as "missing" if there are no visits in that
range; (3) and finally, we combine these subject-specific data tables.
</p>


<h3>Value</h3>

<p>A copy of <code>timeline_df</code> with the column <code>visitYM</code> added.
This column is a copy of the <code>visit</code> column with additional cells
marking if a subject should have attended the clinic but did not.
</p>


<h3>Examples</h3>

<pre><code class="language-R">   # TO DO
</code></pre>


</div>
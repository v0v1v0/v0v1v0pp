<div class="container">

<table style="width: 100%;"><tr>
<td>GetEfftoxContour</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assigns next patient cohort based on the Efftox model with a Desirability based objective function.</h2>

<h3>Description</h3>

<p>Provides the optimal dose level as determined by the Efftox model, posterior mean toxicity probability, efficacy probability, and desirability of each dose level. Doses that are unacceptably toxic or inefficous have a desirability of 0.
</p>


<h3>Usage</h3>

<pre><code class="language-R">GetEfftoxContour(
  YE,
  YT,
  Doses,
  Dose,
  Dosetried,
  cohort,
  Contour,
  CutE,
  CutT,
  AcceptE,
  AcceptT,
  HypermeansEFF,
  HypervarsEFF,
  B
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>YE</code></td>
<td>
<p>Length n binary indicator vector of efficacy status.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>YT</code></td>
<td>
<p>Length n binary indicator vector of toxicity status.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Doses</code></td>
<td>
<p>Length n vector of integer Doses given to patients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dose</code></td>
<td>
<p>Vector of standardized log-dose levels considered in the trial.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dosetried</code></td>
<td>
<p>Binary vector corresponding to which doses have been tried.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort</code></td>
<td>
<p>Cohort size for the trial.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Contour</code></td>
<td>
<p>Contour vector for desirability function. Contains in order: (pi_1,E,pi_2,T,pi_3,E,pi_4,T).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CutE</code></td>
<td>
<p>Cutoff for efficacy probability acceptability. Dose-efficacy probabilities must be larger than this for patient assignment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CutT</code></td>
<td>
<p>Cutoff for toxicity probability acceptability. Dose-toxicity probabilities must be smaller than this for patient assignment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AcceptE</code></td>
<td>
<p>Posterior probability threshold for efficacy acceptability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AcceptT</code></td>
<td>
<p>Posterior probability threshold for toxicity acceptability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HypermeansEFF</code></td>
<td>
<p>Hypermeans for the Efftox model. In order, entries are hypermeans for (beta_0,E,beta_1,E,beta_2,E,beta_0,T,beta_1,T,psi).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HypervarsEFF</code></td>
<td>
<p>Hypervariances for the Efftox model. In order, entries are hypervariances for (beta_0,E,beta_1,E,beta_2,E,beta_0,T,beta_1,T,psi).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Number of iterations to run for the MCMC.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the optimal dose level to assign the next patient cohort in the first entry and a matrix in the second entry, with rows corresponding to (1) the dose #, (2) mean posterior toxicity probability at each dose, mean posterior efficacy probability at each dose, and acceptable posterior desirability score of each dose level (0s indicate the dose is not acceptably efficous or toxic).
</p>


<h3>Examples</h3>

<pre><code class="language-R">##Get the Data
##True Tox Prob
PT = c(.1,.2,.25,.5,.7)
##True EFF Prob
PE = c(.3,.4,.7,.5,.5)
Doses=c(1,1,1,2,2,2,3,3,3,2,2,2,1,1,1,2,2,2,3,3,3)
YE=Doses
YT=Doses
Dosetried=rep(0,length(PE))
##Generate data
for(k in 1:length(PE)){
if(sum(Doses==k)){
##Dose level has been tried
Dosetried[k]=1
YE[Doses==k]=rbinom(sum(Doses==k),1,PE[k])
YT[Doses==k]=rbinom(sum(Doses==k),1,PT[k])
}
}
##Hypermeans and hypervariances
HypermeansEFF = c(.022,3.45,0,-4.23,3.1,0)
HypervarsEFF = c(2.6761, 2.6852, .2, 3.1304, 3.1165, 1)
HypervarsEFF=HypervarsEFF^2
##Vector of Numerical Doses
Dose = c(1,2,3,3.5,5)
##Dose for Eff-Tox
Dose=log(Dose)-mean(log(Dose))
##Trial parameters
cohort=3
##Contour vector
Contour = c(.35, .75,.7,.4)
CutE=.3 ##Efficacy threshold
CutT=.4 ##Toxicity threshold
AcceptE=.3 ##Eff acceptability threshold
AcceptT= .3 ##Tox acceptability threshold
B=100##Number of iterations
GetEfftoxContour(YE, YT,Doses,Dose, Dosetried,
cohort, Contour,CutE, CutT, AcceptE, AcceptT,
HypermeansEFF, HypervarsEFF,B )
</code></pre>


</div>
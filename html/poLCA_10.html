<div class="container">

<table style="width: 100%;"><tr>
<td>poLCA.simdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create simulated cross-classification data</h2>

<h3>Description</h3>

<p>Uses the latent class model's assumed data-generating process to create a simulated dataset that can be used to test the properties of the poLCA latent class and latent class regression estimator.</p>


<h3>Usage</h3>

<pre><code class="language-R">poLCA.simdata(N = 5000, probs = NULL, nclass = 2, ndv = 4, 
              nresp = NULL, x = NULL, niv = 0, b = NULL, 
              P = NULL, missval = FALSE, pctmiss = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>number of observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>a list of matrices of dimension <code>nclass</code> by <code>nresp</code> with each matrix corresponding to one manifest variable, and each row containing the class-conditional outcome probabilities (which must sum to 1)  If <code>probs</code> is <code>NULL</code> (default) then the outcome probabilities are generated randomly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nclass</code></td>
<td>
<p>number of latent classes. If<code>probs</code> is specified, then <code>nclass</code> is set equal to the number of rows in each matrix in that list. If <code>P</code> is specified, then <code>nclass</code> is set equal to the length of that vector. If <code>b</code> is specified, then <code>nclass</code> is set equal to one greater than the number of columns in <code>b</code>. Otherwise, the default is two.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ndv</code></td>
<td>
<p>number of manifest variables.  If <code>probs</code> is specified, then <code>ndv</code> is set equal to the number of matrices in that list. If <code>nresp</code> is specified, then <code>ndv</code> is set equal to the length of that vector. Otherwise, the default is four.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nresp</code></td>
<td>
<p>number of possible outcomes for each manifest variable. If <code>probs</code> is specified, then <code>ndv</code> is set equal to the number of columns in each matrix in that list. If both <code>probs</code> and <code>nresp</code> are <code>NULL</code> (default), then the manifest variables are assigned a random number of outcomes between two and five.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a matrix of concomicant variables with <code>N</code> rows and <code>niv</code> columns. If <code>x=NULL</code> (default), but <code>niv&gt;0</code>, then <code>niv</code> concomitant variables will be  generated as mutually independent random draws from a standard normal distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>niv</code></td>
<td>
<p>number of concomitant variables (covariates).  Setting <code>niv=0</code> (default) creates a data set assuming no covariates.  If <code>nclass=1</code> then <code>niv</code> is automatically set equal to 0. If both <code>x</code> and <code>niv</code> are entered, then the number of columns in <code>x</code> overrides the value of <code>niv</code>.  The number of rows in <code>b</code>, less one, also overrides <code>niv</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>when using covariates, an <code>niv+1</code> by <code>nclass-1</code> matrix of (multinomial) logit coefficients. If <code>b</code> is <code>NULL</code> (default), then coefficients are generated as random integers between -2 and 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P</code></td>
<td>
<p>a vector of mixing proportions (class population shares) of length <code>nclass</code>. <code>P</code> must sum to 1.  Disregarded if <code>b</code> is specified or <code>niv&gt;1</code> because then <code>P</code> is, in part, a function of the concomitant variables.  If <code>P</code> is <code>NULL</code> (default), then the mixing proportions are generated randomly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missval</code></td>
<td>
<p>logical. If <code>TRUE</code> then a fraction <code>pctmiss</code> of the manifest variables are randomly dropped as missing values.  Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pctmiss</code></td>
<td>
<p>percentage of values to be dropped as missing, if <code>missval=TRUE</code>.  If <code>pctmiss</code> is <code>NULL</code> (default), then a value between 5 and 40 percent is chosen randomly.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that entering <code>probs</code> overrides <code>nclass</code>, <code>ndv</code>, and <code>nresp</code>.  It also overrides <code>P</code> if the length of the <code>P</code> vector is not equal to the length of the <code>probs</code> list.  Likewise, if <code>probs=NULL</code>, then <code>length(nresp)</code> overrides <code>ndv</code> and <code>length(P)</code> overrides <code>nclass</code>.  Setting <code>niv&gt;1</code> causes any user-entered value of <code>P</code> to be disregarded.</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>a data frame containing the simulated variables.  Variable names for manifest variables are Y1, Y2, etc.  Variable names for concomitant variables are X1, X2, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>a list of matrices of dimension <code>nclass</code> by <code>nresp</code> containing the class-conditional response probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nresp</code></td>
<td>
<p>a vector containing the number of possible outcomes for each manifest variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>coefficients on covariates, if used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P</code></td>
<td>
<p>mixing proportions corresponding to each latent class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pctmiss</code></td>
<td>
<p>percent of observations missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trueclass</code></td>
<td>
<p><code>N</code> by 1 vector containing the "true" class membership for each individual.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>poLCA</code></p>


<h3>Examples</h3>

<pre><code class="language-R"># Create a sample data set with 3 classes and no covariates 
# and run poLCA to recover the specified parameters.

probs &lt;- list(matrix(c(0.6, 0.1, 0.3,
                       0.6, 0.3, 0.1,
		       0.3, 0.1, 0.6),
		     ncol = 3,byrow = TRUE), # conditional resp prob to Y1
              matrix(c(0.2, 0.8,
	               0.7, 0.3,
		       0.3, 0.7),
		     ncol = 2, byrow = TRUE), # conditional resp prob to Y2
              matrix(c(0.3, 0.6, 0.1,
	               0.1, 0.3, 0.6,
		       0.3, 0.6, 0.1),
		     ncol = 3,byrow = TRUE), # conditional resp prob to Y3
              matrix(c(0.1, 0.1, 0.5, 0.3,
	               0.5, 0.3, 0.1, 0.1,
		       0.3, 0.1, 0.1, 0.5),
		     ncol = 4,byrow = TRUE), # conditional resp prob to Y4
              matrix(c(0.1, 0.1, 0.8,
	               0.1, 0.8, 0.1,
		       0.8, 0.1, 0.1),
		     ncol = 3,
		     byrow = TRUE)) # conditional resp prob to Y5
simdat &lt;- poLCA.simdata(N=1000,probs,P=c(0.2,0.3,0.5))
f1 &lt;- cbind(Y1,Y2,Y3,Y4,Y5)~1
lc1 &lt;- poLCA(f1,simdat$dat,nclass=3)
table(lc1$predclass,simdat$trueclass)

# Create a sample dataset with 2 classes and three covariates.
# Then compare predicted class memberships when the model is 
# estimated "correctly" with covariates to when it is estimated
# "incorrectly" without covariates.
simdat2 &lt;- poLCA.simdata(N=1000,ndv=7,niv=3,nclass=2,b=matrix(c(1,-2,1,-1)))
f2a &lt;- cbind(Y1,Y2,Y3,Y4,Y5,Y6,Y7)~X1+X2+X3
lc2a &lt;- poLCA(f2a,simdat2$dat,nclass=2)
f2b &lt;- cbind(Y1,Y2,Y3,Y4,Y5,Y6,Y7)~1
lc2b &lt;- poLCA(f2b,simdat2$dat,nclass=2)
table(lc2a$predclass,lc2b$predclass)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>pmap_piece</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create graphics using data frame input</h2>

<h3>Description</h3>

<p><code>pmap_piece()</code> operates on the rows of a data frame
applying <code>.f</code> to each row (usually <code>grid.piece</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">pmap_piece(
  .l,
  .f = pieceGrob,
  ...,
  cfg = getOption("piecepackr.cfg"),
  envir = getOption("piecepackr.envir"),
  trans = getOption("piecepackr.trans"),
  draw = TRUE,
  name = NULL,
  gp = NULL,
  vp = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.l</code></td>
<td>
<p>A list of vectors, such as a data frame. The length of <code>.l</code>
determines the number of arguments that <code>.f</code>
will be called  with. List names will be used if present.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.f</code></td>
<td>
<p>Function to be applied to <code>.l</code> after adjustments to
<code>cfg</code> and <code>envir</code> and the application of <code>trans</code>.
Usually <code>grid.piece()</code>, <code>pieceGrob()</code>, <code>piece3d()</code>, or <code>piece()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra arguments to pass to <code>.f</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfg</code></td>
<td>
<p>Piecepack configuration list or <code>pp_cfg</code> object,
a list of <code>pp_cfg</code> objects,
or a character vector referring to names in <code>envir</code>
or a character vector referring to object names that
can be retrieved by <code>base::dynGet()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>Environment (or named list) containing configuration list(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trans</code></td>
<td>
<p>Function to modify <code>.l</code> before drawing.
Default (<code>NULL</code>) is to not modify <code>.l</code>.  <code>op_transform</code>
can help with using an oblique projection (i.e. <code>op_scale</code> over 0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw</code></td>
<td>
<p>A logical value indicating whether graphics output should be produced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>A character identifier (for grid)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gp</code></td>
<td>
<p>An object of class “gpar”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp</code></td>
<td>
<p>A <code>grid</code> viewport object (or <code>NULL</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>pmap_piece()</code> differs from <code>purrr::pmap()</code> in a few ways:
</p>

<ol>
<li>
<p>If <code>cfg</code> and/or <code>envir</code> are missing attempts to set reasonable defaults.
</p>
</li>
<li>
<p>If not <code>NULL</code> will first apply function <code>trans</code> to <code>.l</code>.
</p>
</li>
<li>
<p>If the output of <code>.f</code> is a grid grob object then <code>pmap_piece</code>
will return a <code>gTree</code> object with
specified <code>name</code>, <code>gp</code>, and <code>vp</code> values and if <code>draw</code> is true draw it.
</p>
</li>
<li>
<p>If <code>.l</code> lacks a <code>name</code> column or if <code>name</code> column is non-unique
attempts to generate a reasonable new default <code>name</code> column
and use that to name the return <code>gTree</code> children  or <code>list</code> values.
</p>
</li>
</ol>
<h3>See Also</h3>

<p><code>render_piece()</code> is a higher-level function that wraps this function.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  if (requireNamespace("grid", quietly = TRUE) &amp;&amp; piecepackr:::device_supports_unicode()) {
       dark_colorscheme &lt;- list(suit_color="darkred,black,darkgreen,darkblue,black",
                            invert_colors.suited=TRUE, border_color="black", border_lex=2)
       traditional_ranks &lt;- list(use_suit_as_ace=TRUE, rank_text=",a,2,3,4,5")
       cfg3d &lt;- list(width.pawn=0.75, height.pawn=0.75, depth.pawn=1,
                          dm_text.pawn="", shape.pawn="convex6", invert_colors.pawn=TRUE,
                          edge_color.coin="tan", edge_color.tile="tan")
       cfg &lt;- pp_cfg(c(dark_colorscheme, traditional_ranks, cfg3d))
       grid::grid.newpage()
       df_tiles &lt;- data.frame(piece_side="tile_back", x=0.5+c(3,1,3,1), y=0.5+c(3,3,1,1),
                              suit=NA, angle=NA, z=NA, stringsAsFactors=FALSE)
       df_coins &lt;- data.frame(piece_side="coin_back", x=rep(4:1, 4), y=rep(4:1, each=4),
                              suit=1:16%%2+rep(c(1,3), each=8),
                              angle=rep(c(180,0), each=8), z=1/4+1/16, stringsAsFactors=FALSE)
       df &lt;- rbind(df_tiles, df_coins)
       pmap_piece(df, cfg=cfg, op_scale=0.5, default.units="in")
  }
</code></pre>


</div>
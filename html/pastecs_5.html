<div class="container">

<table style="width: 100%;"><tr>
<td>buysbal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Buys-Ballot table </h2>

<h3>Description</h3>

<p>Calculate a Buys-Ballot table from a time-series
</p>


<h3>Usage</h3>

<pre><code class="language-R">buysbal(x, y=NULL, frequency=12, units="years", datemin=NULL,
        dateformat="m/d/Y", count=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> Either a vector with time values (in this case, <code>y</code> must be defined), or a regular time-series </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p> If <code>x</code> is a vector with time values, <code>y</code> must contain corresponding observations </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frequency</code></td>
<td>
<p> The frequency of observations per year to use in the Buys-Ballot table. By default <code>frequency=12</code> which corresponds to monthly samples, and the resulting table has 12 column, one per month </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p> either <code>"years"</code> (by default), and time is not rescaled, or <code>"days"</code>, and the time is rescaled to "years" with the function <code>daystoyears()</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datemin</code></td>
<td>
<p> A character string representing the first date, using a format corresponding to <code>dateformat</code>. For instance, with <code>datemin="04/23/1998"</code> and <code>dateformat="m/d/Y"</code>, the first observation is assumed to be made the 23th April 1998. In <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, it can also be a POSIXt date (see <code>?DataTimeClasses</code>). In this case, <code>dateformat</code> is not required and is ignored. By default, <code>datemin=NULL</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dateformat</code></td>
<td>
<p> The format used for the date in <code>datemin</code>. For instance, <code>"d/m/Y"</code> or <code>"m/d/Y"</code> (by default). The distinction between "Y" and "y" is not important in Splus, but it is vital in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> to use "y" for two-digit years (ex: 89) and "Y" for four-digits years (ex: 1989), or the date will not be correctly converted! In <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, you can also use a POSIXt format specification like "%d-%m%Y" for instance (see <code>?strptime</code> for a complete description of POSIXt format specification. In both Splus and <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, you can also use "mon" for abbreviated months like "mon d Y" for "Apr 20 1965", and "month" for fully-spelled months like "d month Y" for "24 September 2003" </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>count</code></td>
<td>
<p> If <code>FALSE</code> (by default), the Buys-Ballot table is calculated. If <code>TRUE</code>, the function returns only the number of observations that are used in each cell of the Buys-Ballot table </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A Buys-Ballot table summarizes data to highlight seasonal variations. Each line is one year and each column is a period of the year (12 months, 4 quarters, 52 weeks,...). A cell ij of this table contain the mean value for all observations made during the year i at the period j.
</p>


<h3>Value</h3>

<p>A matrix containing either the Buys-Ballot table (<code>count=FALSE</code>), or the number of observations used to build the table (<code>count=TRUE</code>)
</p>


<h3>Author(s)</h3>

<p> Frédéric Ibanez (<a href="mailto:ibanez@obs-vlfr.fr">ibanez@obs-vlfr.fr</a>), Philippe Grosjean (<a href="mailto:phgrosjean@sciviews.org">phgrosjean@sciviews.org</a>) </p>


<h3>See Also</h3>

 <p><code>daystoyears</code>, <code>tsd</code> </p>


<h3>Examples</h3>

<pre><code class="language-R">data(releve)
buysbal(releve$Day, releve$Melosul, frequency=4, units="days",
        datemin="21/03/1989", dateformat="d/m/Y")
buysbal(releve$Day, releve$Melosul, frequency=4, units="days",
        datemin="21/03/1989", dateformat="d/m/Y", count=TRUE)
</code></pre>


</div>
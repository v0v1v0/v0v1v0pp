<div class="container">

<table style="width: 100%;"><tr>
<td>pubbias_svalue</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Severity of publication bias needed to "explain away" results</h2>

<h3>Description</h3>

<p>Estimates the S-value, defined as the severity of publication bias (i.e., the
ratio by which affirmative studies are more likely to be published than
nonaffirmative studies) that would be required to shift the pooled point
estimate or its confidence interval limit to the value <code>q</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pubbias_svalue(
  yi,
  vi,
  sei,
  cluster = 1:length(yi),
  q = 0,
  model_type = "robust",
  favor_positive = TRUE,
  alpha_select = 0.05,
  ci_level = 0.95,
  small = TRUE,
  selection_ratio_max = 200,
  return_worst_meta = FALSE
)

svalue(
  yi,
  vi,
  q,
  clustervar = 1:length(yi),
  model,
  alpha.select = 0.05,
  eta.grid.hi = 200,
  favor.positive,
  CI.level = 0.95,
  small = TRUE,
  return.worst.meta = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>yi</code></td>
<td>
<p>A vector of point estimates to be meta-analyzed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vi</code></td>
<td>
<p>A vector of estimated variances (i.e., squared standard errors) for
the point estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sei</code></td>
<td>
<p>A vector of estimated standard errors for the point estimates.
(Only one of <code>vi</code> or <code>sei</code> needs to be specified).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>Vector of the same length as the number of rows in the data,
indicating which cluster each study should be considered part of (defaults
to treating studies as independent; i.e., each study is in its own cluster).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>The attenuated value to which to shift the point estimate or CI.
Should be specified on the same scale as <code>yi</code> (e.g., if
<code>yi</code> is on the log-RR scale, then <code>q</code> should be as well).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_type</code></td>
<td>
<p>"fixed" for fixed-effects (a.k.a. "common-effect") or
"robust" for robust random-effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>favor_positive</code></td>
<td>
<p><code>TRUE</code> if publication bias are
assumed to favor significant positive estimates; <code>FALSE</code> if assumed to
favor significant negative estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_select</code></td>
<td>
<p>Alpha level at which an estimate's probability of being
favored by publication bias is assumed to change (i.e.,
the threshold at which study investigators, journal editors, etc., consider
an estimate to be significant).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci_level</code></td>
<td>
<p>Confidence interval level (as proportion) for the corrected
point estimate. (The alpha level for inference on the corrected point
estimate will be calculated from <code>ci_level</code>.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>small</code></td>
<td>
<p>Should inference allow for a small meta-analysis? We recommend
always using <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selection_ratio_max</code></td>
<td>
<p>The largest value of <code>selection_ratio</code> that should
be included in the grid search. This argument is only needed when
<code>model_type = "robust"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_worst_meta</code></td>
<td>
<p>Should the worst-case meta-analysis of only the
nonaffirmative studies be returned?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clustervar</code></td>
<td>
<p>(deprecated) see cluster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>(deprecated) see model_type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha.select</code></td>
<td>
<p>(deprecated) see alpha_select</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eta.grid.hi</code></td>
<td>
<p>(deprecated) see selection_ratio_max</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>favor.positive</code></td>
<td>
<p>(deprecated) see favor_positive</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI.level</code></td>
<td>
<p>(deprecated) see ci_level</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.worst.meta</code></td>
<td>
<p>(deprecated) see return_worst_meta</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To illustrate interpretation of the S-value, if the S-value for the
point estimate is 30 with <code>q=0</code>, this indicates that affirmative studies
(i.e., those with a "statistically significant" and positive estimate)
would need to be 30-fold more likely to be published than nonaffirmative
studies (i.e., those with a "nonsignificant" or negative estimate) to
attenuate the pooled point estimate to <code>q</code>.
</p>
<p>If <code>favor_positive = FALSE</code>, such that publication bias is assumed to favor
negative rather than positive estimates, the signs of <code>yi</code> will be reversed
prior to performing analyses. The returned number of affirmative and
nonaffirmative studies will reflect the recoded signs.
</p>
<p>If <code>return_worst_meta = TRUE</code>, also returns the worst-case meta-analysis of
only the nonaffirmative studies. If <code>model_type = "fixed"</code>, the worst-case
meta-analysis is fit by <code>metafor::rma.uni()</code>. If <code>model_type = "robust"</code>,
it is fit by <code>robumeta::robu()</code>. Note that in the latter case, custom
inverse-variance weights are used, which are the inverse of the sum of the
study's variance and a heterogeneity estimate from a naive random-effects
meta-analysis (Mathur &amp; VanderWeele, 2020). This is done for consistency
with the results of <code>pubbias_meta()</code>, which is used to determine <code>sval_est</code>
and <code>sval_ci</code>. Therefore, the worst-case meta-analysis results may differ
slightly from what you would obtain if you simply fit <code>robumeta::robu()</code> on
the nonaffirmative studies with the default weights.
</p>


<h3>Value</h3>

<p>An object of class <code>metabias::metabias()</code>, a list containing:
</p>

<dl>
<dt>data</dt>
<dd>
<p>A tibble with one row per study and the columns
<code>yi</code>, <code>yif</code>, <code>vi</code>, <code>affirm</code>, <code>cluster</code>.</p>
</dd>
<dt>values</dt>
<dd>
<p>A list with the elements <code>selection_ratio</code>, <code>selection_tails</code>, <code>model_type</code>, <code>favor_positive</code>, <code>alpha_select</code>, <code>ci_level</code>, <code>small</code>, <code>k</code>, <code>k_affirmative</code>, <code>k_nonaffirmative</code>.</p>
</dd>
<dt>stats</dt>
<dd>
<p>A tibble with the columns <code>model</code>, <code>estimate</code>, <code>se</code>, <code>ci_lower</code>, <code>ci_upper</code>, <code>p_value</code>.
<code>sval_est</code> represents the amount of publication bias required
to attenuate the pooled point estimate to <code>q</code>; <code>sval_ci</code>
represents the amount of publication bias required to
attenuate the confidence interval limit of the pooled point
estimate to <code>q</code>.</p>
</dd>
<dt>fit</dt>
<dd>
<p>A list of fitted models, if any.</p>
</dd>
</dl>
<h3>References</h3>

<p>Mathur MB, VanderWeele TJ (2020).
“Sensitivity analysis for publication bias in meta-analyses.”
<em>Journal of the Royal Statistical Society: Series C (Applied Statistics)</em>, <b>69</b>(5), 1091–1119.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># calculate effect sizes from example dataset in metafor
require(metafor)
dat &lt;- metafor::escalc(measure = "RR", ai = tpos, bi = tneg, ci = cpos,
                       di = cneg, data = dat.bcg)

##### Fixed-Effects Specification #####
# S-values and worst-case meta-analysis under fixed-effects specification
svals_fixed_0 &lt;- pubbias_svalue(yi = dat$yi,
                                vi = dat$vi,
                                q = 0,
                                model_type = "fixed",
                                favor_positive = FALSE)

# publication bias required to shift point estimate to 0
svals_fixed_0$stats$sval_est

# and to shift CI to include 0
svals_fixed_0$stats$sval_ci

# now try shifting to a nonzero value (RR = 0.90)
svals_fixed_q &lt;- pubbias_svalue(yi = dat$yi,
                                vi = dat$vi,
                                q = log(.9),
                                model_type = "fixed",
                                favor_positive = FALSE)

# publication bias required to shift point estimate to RR = 0.90
svals_fixed_q$stats$sval_est

# and to shift CI to RR = 0.90
svals_fixed_q$stats$sval_ci

##### Robust Clustered Specification #####
svals &lt;- pubbias_svalue(yi = dat$yi,
                        vi = dat$vi,
                        q = 0,
                        model_type = "robust",
                        favor_positive = FALSE)
summary(svals)
</code></pre>


</div>
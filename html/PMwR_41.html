<div class="container">

<table style="width: 100%;"><tr>
<td>plot_trading_hours</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Plot Time Series During Trading Hours
</h2>

<h3>Description</h3>

<p>Plot a time series after removing weekends and specific times of the day.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_trading_hours(x, t = NULL, interval = "5 min",
                   labels = "hours", label.format = NULL,
                   exclude.weekends = TRUE, holidays = NULL,
                   fromHHMMSS = "000000", toHHMMSS = "240000",
                   do.plot.axis = TRUE,
                   ...,
                   from = NULL, to = NULL,
                   do.plot = TRUE,
                   axis1.par = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A numeric vector. Can also be of class <code>zoo</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>

<p>A vector that inherits from class <code>POSIXt</code>. If <code>x</code>
inherits from class <code>zoo</code>, then <code>index(x)</code> is used (and
any supplied value for <code>t</code> is ignored).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval</code></td>
<td>

<p>A character string like “num units”, in which <code>num</code> is a
number, and <code>units</code> is “sec”, “min”,
“hour” or “day”. The space between num and
units is mandatory.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>

<p>A character vector of length one, determining the grid for
<code>plot_trading_hours</code>: can be “hour”, “day”,
“dayhour” or “month”.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.format</code></td>
<td>

<p>See <code>strftime</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude.weekends</code></td>
<td>

<p>logical: default is <code>TRUE</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>holidays</code></td>
<td>

<p>a vector of class <code>Date</code> or a character
vector in a format that is understood by <code>as.Date</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fromHHMMSS</code></td>
<td>

<p>a character vector of length one in format “HHMMSS”
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>toHHMMSS</code></td>
<td>

<p>a character vector of length one in format “HHMMSS”
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.plot.axis</code></td>
<td>

<p>logical. Should <code>axis(1)</code> be plotted? Default is <code>TRUE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>parameters passed to <code>plot</code>
(and typically <code>par</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>

<p>POSIXct: start plot at (if not specified,
plot starts at first data point)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>

<p>POSIXct: end plot at (if not specified,
plot ends at last data point)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.plot</code></td>
<td>

<p>logical. Should anything be plotted? Default is <code>TRUE</code>. If
<code>FALSE</code>, the function returns a list of points.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis1.par</code></td>
<td>

<p>a list of named elements
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Plot a timeseries during specific times of day.
</p>


<h3>Value</h3>

<p>A list (invisibly if <code>do.plot</code> is <code>TRUE</code>):
</p>
<p><code>list(t, x, axis.pos = pos, axis.labels, timegrid)</code>
</p>
<table>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>
<p>positions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.pos</code></td>
<td>
<p>positions of x-tickmarks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.labels</code></td>
<td>
<p>labels at x-ticks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timegrid</code></td>
<td>
<p>a POSIXct vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>a function. See the manual (a link is under References).</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Enrico Schumann &lt;es@enricoschumann.net&gt;
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8–12, 2001.
</p>
<p>E. Schumann (2023) <em>Portfolio Management with R</em>.
<a href="https://enricoschumann.net/PMwR/">https://enricoschumann.net/PMwR/</a>; in particular, see<br><a href="https://enricoschumann.net/R/packages/PMwR/manual/PMwR.html#plot-trading-hours">https://enricoschumann.net/R/packages/PMwR/manual/PMwR.html#plot-trading-hours</a>
</p>


<h3>See Also</h3>

<p><code>DateTimeClasses</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">t &lt;- as.POSIXct("2012-08-31 08:00:00") + 0:32400
x &lt;- runif(length(t))

par(tck = 0.001, mgp = c(3,1,0.5), bty = "n")
p &lt;- plot_trading_hours(x, t,
                        interval = "5 min", labels = "hours",
                        xlab = "time", ylab = "random points",
                        col = "blue")


## with ?lines
t &lt;- as.POSIXct("2012-08-31 10:00:00") + 0:9000
x &lt;- seq(0, 1, length.out = 9001)
lines(p$map(t)$t, x[p$map(t)$ix], pch = 19)

</code></pre>


</div>
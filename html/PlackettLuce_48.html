<div class="container">

<table style="width: 100%;"><tr>
<td>preflib</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read Preflib Election Data Files</h2>

<h3>Description</h3>

<p>Read orderings from <code>.soc</code>, <code>.soi</code>, <code>.toc</code> or <code>.toi</code> file types storing
election data as defined by
<a href="https://www.preflib.org/">{PrefLib}: A Library for Preferences</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read.soc(file)

read.soi(file)

read.toc(file)

read.toi(file)

## S3 method for class 'preflib'
as.aggregated_rankings(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>An election data file, conventionally with extension <code>.soc</code>,
<code>.soi</code>, <code>.toc</code> or <code>.toi</code> according to data type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>"preflib"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>as.rankings()</code>: <code>freq</code>,
<code>input</code> or <code>items</code> will be ignored with a warning as they are set
automatically.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The file types supported are
</p>

<dl>
<dt>.soc</dt>
<dd>
<p>Strict Orders - Complete List</p>
</dd>
<dt>.soi</dt>
<dd>
<p>Strict Orders - Incomplete List</p>
</dd>
<dt>.toc</dt>
<dd>
<p>Orders with Ties - Complete List</p>
</dd>
<dt>.toi</dt>
<dd>
<p>Orders with Ties - Incomplete List</p>
</dd>
</dl>
<p>Note that the file types do not distinguish between types of incomplete
orderings, i.e. whether they are a complete ranking of a subset of items
(as supported by <code>PlackettLuce()</code>) or top-<code class="reqn">n</code> rankings of <code class="reqn">n</code> items
from the full set of items (not currently supported by <code>PlackettLuce()</code>).
</p>
<p>The numerically coded orderings and their frequencies are read into a
data frame, storing the item names as an attribute. The
<code>as.aggregated_rankings</code> method converts these to an
<code>"aggregated_rankings"</code> object with the items labelled
by the item names.
</p>
<p>A Preflib file may be corrupt, in the sense that the ordered items do not
match the named items. In this case, the file can be read in as a data
frame (with a warning) using the corresponding <code style="white-space: pre;">⁠read.*⁠</code> function, but
<code>as.aggregated_rankings</code> will throw an error.
</p>


<h3>Value</h3>

<p>A data frame of class <code>"preflib"</code> with first column <code>Freq</code>,
giving the frequency of the ranking in that row, and remaining columns
<code>Rank 1</code>, ..., <code>Rank r</code> giving the items ranked from first to
last place in that ranking. Ties are represented by vector elements in list
columns. The data frame has an attribute <code>"items"</code> giving the labels
corresponding to each item number.
</p>


<h3>Note</h3>

<p>The Netflix and cities datasets used in the examples are from
Bennet and Lanning (2007) and Caragiannis et al (2017) respectively. These
data sets require a citation for re-use.
</p>


<h3>References</h3>

<p>Mattei, N. and Walsh, T. (2013) PrefLib: A Library of Preference Data.
<em>Proceedings of Third International Conference on Algorithmic Decision
Theory (ADT 2013)</em>. Lecture Notes in Artificial Intelligence, Springer.
</p>
<p>Caragiannis, I., Chatzigeorgiou, X, Krimpas, G. A., and Voudouris, A. A.
(2017) Optimizing positional scoring rules for rank aggregation.
In <em>Proceedings of the 31st AAAI Conference on Artificial Intelligence</em>.
</p>
<p>Bennett, J. and Lanning, S. (2007) The Netflix Prize.
<em>Proceedings of The KDD Cup and Workshops</em>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# strict complete orderings of four films on Netflix
netflix &lt;- read.soc(system.file("extdata", "netflix.soc",
                                package = "PlackettLuce"))
head(netflix)
attr(netflix, "items")

head(as.aggregated_rankings(netflix))

# strict incomplete orderings of 6 random cities from 36 in total
cities &lt;- read.soi(system.file("extdata", "cities.soi",
                                package = "PlackettLuce"))

# complete orderings with ties of 30 skaters
skaters &lt;- read.toc(system.file("extdata", "skaters.toc",
                                package = "PlackettLuce"))

# incomplete orderings with ties: most important qualities for success
# from 20 in total
qualities &lt;- read.toi(system.file("extdata", "education_qualities.toi",
                      package = "PlackettLuce"))

# alternatively read from a url
# - can take a little while depending on speed of internet connection

## Not run: 
# incomplete orderings with ties: most important qualities for success
# from 20 in total
preflib &lt;- "https://www.preflib.org/static/data/"
qualities2 &lt;- read.toi(file.path(preflib, "education/00032-00000007.toi"))
all.equal(qualities, qualities2)

## End(Not run)
</code></pre>


</div>
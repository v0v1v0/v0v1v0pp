<div class="container">

<table style="width: 100%;"><tr>
<td>pclass</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Form nonresponse adjustment classes based on propensity scores
</h2>

<h3>Description</h3>

<p>Fit a binary regression model for response probabilities and divide units into a specified number of classes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pclass(formula, data, link="logit", numcl=5, type, design=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>symbolic description of the binary regression model to be fitted as used in <code>glm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an optional data frame; must be specified if <code>type="unwtd"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>a specification for the model link function; allowable values are <code>"logit"</code>, <code>"probit"</code>, or <code>"cloglog"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numcl</code></td>
<td>
<p>number of classes into which units are split based on estimated propensities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>whether an unweighted or weighted binary regression should be fit; allowable values are <code>"unwtd"</code> or <code>"wtd"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>sample design object; required if <code>type="wtd"</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A typical <code>formula</code> has the form <code>response ~ terms</code> where response is a two-level variable coded as 0 or 1, or is a factor where the first level denotes nonresponse and the second level is response. If <code>type="unwtd"</code>, <code>glm</code> is used to fit an unweighted regression. If <code>type="wtd"</code>, <code>svyglm</code> in the <code>survey</code> package is used to fit a survey-weighted regression.
</p>


<h3>Value</h3>

<p>A list with components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>p.class</code></td>
<td>
<p>propensity class for each unit</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>propensities</code></td>
<td>
<p>estimated response probability for each unit</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Richard Valliant, Jill A. Dever, Frauke Kreuter
</p>


<h3>References</h3>

<p>Valliant, R., Dever, J., Kreuter, F. (2018, chap. 13). <em>Practical Tools for Designing and Weighting Survey Samples, 2nd edition</em>. New York: Springer.
</p>


<h3>See Also</h3>

<p><code>NRadjClass</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">    # classes based on unweighted logistic regression
require(PracTools)
data(nhis)
out &lt;- pclass(formula = resp ~ age + as.factor(sex) + as.factor(hisp) + as.factor(race),
           data = nhis, type = "unwtd", link="logit", numcl=5)
table(out$p.class, useNA="always")
summary(out$propensities)
    # classes based on survey-weighted logistic regression
require(survey)
nhis.dsgn &lt;- svydesign(ids = ~psu, strata = ~stratum, data = nhis, nest = TRUE, weights = ~svywt)
out &lt;- pclass(formula = resp ~ age + as.factor(sex) + as.factor(hisp) + as.factor(race),
           type = "wtd", design = nhis.dsgn, link="logit", numcl=5)
table(out$p.class, useNA="always")
summary(out$propensities)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>pin_bayes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>PIN estimation - Bayesian approach</h2>

<h3>Description</h3>

<p>Estimates the Probability of Informed Trading (<code>PIN</code>) using
Bayesian Gibbs sampling as in
Griffin et al. (2021) and the initial sets
from the algorithm in Ersan and Alici (2016).
</p>


<h3>Usage</h3>

<pre><code class="language-R">pin_bayes(data, xtraclusters = 4, sweeps = 1000, burnin = 500,
                 prior.a = 1, prior.b = 2, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataframe with 2 variables: the first
corresponds to buyer-initiated trades (buys), and the second corresponds
to seller-initiated trades (sells).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtraclusters</code></td>
<td>
<p>An integer used to divide trading days into
<code>#(2 + xtraclusters)</code> clusters, thereby resulting in
<code>#comb(1 + xtraclusters, 1)</code> initial parameter sets in line with
Ersan and Alici (2016). The default value is <code>4</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sweeps</code></td>
<td>
<p>An integer referring to the number of iterations for the Gibbs
Sampler. This has to be large enough to ensure convergence of the Markov chain.
The default value is <code>1000</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>burnin</code></td>
<td>
<p>An integer referring to the number of initial iterations for
which the parameter draws should be discarded. This is to ensure that we keep
the draws at the point where the MCMC has converged to the parameter space in
which the parameter estimate is likely to fall. This figure must always be
less than the sweeps. The default value is <code>500</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior.a</code></td>
<td>
<p>An integer controlling the mean number of informed trades,
such as the prior of informed buys and sells is the Gamma density function
with <code class="reqn">\mu</code> ~ <code style="white-space: pre;">⁠Ga(prior.a,⁠</code> <code class="reqn">\eta</code><code style="white-space: pre;">⁠)⁠</code>. The default value is <code>1</code>.
For more details, please refer to
Griffin et al. (2021).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior.b</code></td>
<td>
<p>An integer controlling the mean number of uninformed trades,
such as the prior of uninformed buys and sells is the Gamma density function
with <code class="reqn">\epsilon</code><sub>b</sub> ~ <code style="white-space: pre;">⁠Ga(prior.b,⁠</code> <code class="reqn">\eta</code><code style="white-space: pre;">⁠)⁠</code>, and <code class="reqn">\epsilon</code><sub>s</sub> ~ <code style="white-space: pre;">⁠Ga(prior.b,⁠</code> <code class="reqn">\eta</code><code style="white-space: pre;">⁠)⁠</code>.
The default value is <code>2</code>. For more details, please refer to
Griffin et al. (2021).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A binary variable that determines whether detailed
information about the steps of the estimation of the PIN model is displayed.
No output is produced when <code>verbose</code> is set to <code>FALSE</code>. The default
value is <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The argument 'data' should be a numeric dataframe, and contain
at least two variables. Only the first two variables will be considered:
The first variable is assumed to correspond to the total number of
buyer-initiated trades, while the second variable is assumed to
correspond to the total number of seller-initiated trades. Each row or
observation correspond to a trading day. <code>NA</code> values will be ignored.
</p>
<p>The function <code>pin_bayes()</code> implements the algorithm detailed in
Ersan and Alici (2016).
The higher the number of the additional clusters (<code>xtraclusters</code>), the
better is the estimation. Ersan and Alici (2016),
however, have shown the benefit of increasing this number beyond 5 is
marginal, and statistically insignificant.<br><br>
The function <code>initials_pin_ea()</code> provides the initial parameter sets
obtained through the implementation of the
Ersan and Alici (2016) algorithm.
For further information on the initial parameter set determination, see
<code>initials_pin_ea()</code>.
</p>


<h3>Value</h3>

<p>Returns an object of class <code>estimate.pin</code>
</p>


<h3>References</h3>

<p>Ersan O, Alici A (2016).
“An unbiased computation methodology for estimating the probability of informed trading (PIN).”
<em>Journal of International Financial Markets, Institutions and Money</em>, <b>43</b>, 74–94.
ISSN 10424431.<br><br> Griffin J, Oberoi J, Oduro SD (2021).
“Estimating the probability of informed trading: A Bayesian approach.”
<em>Journal of Banking &amp; Finance</em>, <b>125</b>, 106045.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Use the function generatedata_mpin() to generate a dataset of
# 60 days according to the assumptions of the original PIN model.

sdata &lt;- generatedata_mpin(layers = 1)
xdata &lt;- sdata@data

# Estimate the PIN model using the Bayesian approach developed in
# Griffin et al. (2021), and initial parameter sets generated using the
# algorithm of Ersan and Alici (2016). The argument xtraclusters is
# set to 1. We also leave the arguments 'sweeps' and 'burnin' at their
# default values.

estimate &lt;- pin_bayes(xdata, xtraclusters = 1, verbose = FALSE)


# Display the empirical PIN value at the data, and the PIN value
# estimated using the bayesian approach

setNames(c(sdata@emp.pin, estimate@pin), c("data", "estimate"))

# Display the empirial and the estimated parameters

show(unlist(sdata@empiricals))
show(estimate@parameters)

# Find the initial set that leads to the optimal estimate
optimal &lt;- which.max(estimate@details$likelihood)

# Store the matrix of Monte Carlo simulation for the optimal
# estimate, and display its last five rows

mcmatrix &lt;- estimate@details$markovmatrix[[optimal]]
show(tail(mcmatrix, 5))

# Display the summary of Geweke test for the Monte Carlo matrix above.
show(estimate@details$summary[[optimal]])

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>chain</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Chain and rebase a price index</h2>

<h3>Description</h3>

<p>Chain a period-over-period index by taking the cumulative product of its
values to turn it into a fixed-base (direct) index.
</p>
<p>Unchain a fixed-base index by dividing its values for successive periods to
get a period-over-period index.
</p>
<p>Rebase a fixed-base index by dividing its values with the value of the index
in the new base period.
</p>


<h3>Usage</h3>

<pre><code class="language-R">chain(x, ...)

## Default S3 method:
chain(x, ...)

## S3 method for class 'chainable_piar_index'
chain(x, link = rep(1, nlevels(x)), ...)

unchain(x, ...)

## Default S3 method:
unchain(x, ...)

## S3 method for class 'direct_piar_index'
unchain(x, base = rep(1, nlevels(x)), ...)

rebase(x, ...)

## Default S3 method:
rebase(x, ...)

## S3 method for class 'direct_piar_index'
rebase(x, base = rep(1, nlevels(x)), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A price index, as made by, e.g., <code>elemental_index()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to or used by methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>A numeric vector, or something that can coerced into one, of
link values for each level in <code>x</code>. The default is a vector of 1s so
that no linking is done.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>A numeric vector, or something that can coerced into one, of
base-period index values for each level in <code>x</code>. The default is a vector
of 1s so that the base period remains the same. If <code>base</code> is a length-one
character vector giving a time period of <code>x</code> then the index values for this
time period are used as the base-period values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The default methods attempt to coerce <code>x</code> into an index with
<code>as_index()</code> prior to chaining/unchaining/rebasing.
</p>
<p>Chaining an index takes the cumulative product of the index values for each
level; this is roughly the same as
<code>t(apply(as.matrix(x), 1, cumprod)) * link</code>. Unchaining does the opposite,
so these are inverse operations. Note that unchaining a period-over-period
index does nothing, as does chaining a fixed-base index.
</p>
<p>Rebasing a fixed-base index divides the values for each level of this index
by the corresponding values for each level in the new base period. It's
roughly the same as <code>as.matrix(x) / base</code>. Like unchaining, rebasing a
period-over-period index does nothing.
</p>
<p>Percent-change contributions are removed when chaining/unchaining/rebasing
an index as it's not usually possible to update them correctly.
</p>


<h3>Value</h3>

<p><code>chain()</code> and <code>rebase()</code> return a fixed-base index that inherits
from <code>direct_piar_index</code>.
</p>
<p><code>unchain()</code> returns a period-over-period index that inherits from
<code>chainable_piar_index</code>.
</p>


<h3>See Also</h3>

<p>Other index methods: 
<code>[.piar_index()</code>,
<code>aggregate.piar_index</code>,
<code>as.data.frame.piar_index()</code>,
<code>contrib()</code>,
<code>head.piar_index()</code>,
<code>is.na.piar_index()</code>,
<code>levels.piar_index()</code>,
<code>mean.piar_index</code>,
<code>merge.piar_index()</code>,
<code>split.piar_index()</code>,
<code>stack.piar_index()</code>,
<code>time.piar_index()</code>,
<code>window.piar_index()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">index &lt;- as_index(matrix(1:9, 3))

# Make period 0 the fixed base period

chain(index)

# Chaining and unchaining reverse each other

all.equal(index, unchain(chain(index)))

# Change the base period to period 2 (note the
# loss of information for period 0)

index &lt;- chain(index)
rebase(index, index[, 2])

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>sl_utils</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Functions for some basic operations with seasons</h2>

<h3>Description</h3>

<p>Functions for some basic operations with seasons.</p>


<h3>Usage</h3>

<pre><code class="language-R">toSeason(t, period, t1 = 1, from = 1)
toSeasonPair(t, s, period, ...)
ttTosl(r, period)
ttmatToslPairs(i, j, period)
</code></pre>


<h3>Arguments</h3>



<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>covariance matrix, see ‘Details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>
<p>a vector of integers, representing times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>a vector of integers, representing times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>the number of seasons.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t1</code></td>
<td>
<p>time corresponding to the first season, an integer number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>1 or 0, depending on whether the season numbers start from
1 or 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>a vector of integers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>
<p>a vector of integers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> todo: describe! </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>ttmatToslPairs(i,j,period)</code> transforms time-time pairs to
season-lag pairs. The time pairs are obtained by pairing each element
of <code>i</code> with each element of <code>j</code>. A four column matrix is
created with one row for each pair <code>(t,s)</code>, such that
<code>t=i[m]</code> and <code>s=j[n]</code> for some <code>m</code> and <code>n</code>.  The
row is <code>m, n, s, l</code>, where <code>(s,l)</code> is the season-lag pair
corresponding to <code>(t,s)</code>.
</p>
<p><code>ttTosl(r,period)</code> converts autocovariances given in a covariance
matrix (i.e. in “tt” form) to the “sl” form. The result is a
<code>period x (maxlag+1)</code> matrix, where <code>maxlag</code> is the maximal
lag available in <code>r</code>. Entries for which no values are available
are filled with <code>NA</code>'s.  Warning is given if contradictory entries
are found (i.e. if <code>r</code> is not from a periodically correlated
process with the given period).
</p>
<p><code>toSeason(t,period,t1=1,from=1)</code> returns the season corresponding
to <code>t</code>.  <code>t1</code> is a time (integer) whose season is the first
season, <code>from</code> is 1 if the numbering of seasons is 1,2,...,period,
or 0 if the numbering of seasons is 0,1,...,period-1.  Other values for
<code>from</code> are not admissible (but not checked).  <strong>Note:</strong> some
of the functions in this package implicitly assume that <code>t1=1</code> and
<code>from=1</code>.
</p>
<p><code>toSeasonPair(t,s,period)</code> converts the “tt” pair <code>t,s</code> to
“sl” pair and returns the result in the form of a list with elements
<code>season</code> and <code>lag</code>. Currently <code>t</code> and <code>s</code> must be
scalars.
</p>
<p><code>pc.omitneg</code> helps to implement dropping of negative indices in
season-lag objects. It returns its first argument, <code>lags</code>, if all
of its elements are non-negative. Otherwise, all elements of
<code>lags</code> must be non-positive. In this case the function creates the
vector <code>0:maxlag</code> and drops the elements specified by lags.  Note
that the default indexing will not work properly since zero elements in
an index are omitted (and there are such indices in season-lag
objects).
</p>


<h3>Value</h3>

<p>for <code>ttmatToslPairs</code>, a matrix with four columns;
</p>
<p>for <code>ttTosl</code>, a matrix with <code>period</code> rows;
</p>
<p>for <code>toSeason(t,period,t1=1,from=1)</code>, a vector of integers;
</p>
<p>for <code>toSeasonPair(t,s,period)</code>, a list with elements
<code>season</code> and <code>lag</code>;
</p>
<p>for <code>pc.omitneg</code>, a vector of lags (non-negative integers).
</p>


<h3>Note</h3>

<p>2013-10-24 - Corrected the description of the return value of
<code>ttmatToslPairs</code>. It incorrectly stated that the first two
columns are "tt" pair (they are actually indices in <code>i</code> and
<code>j</code>).
</p>


<h3>Author(s)</h3>

<p>Georgi N. Boshnakov</p>


<h3>References</h3>

<p>Boshnakov GN, Iqelan BM (2009).
“Generation of time series models with given spectral properties.”
<em>J. Time Series Anal.</em>, <b>30</b>(3), 349–368.
ISSN 0143-9782, <a href="https://doi.org/10.1111/j.1467-9892.2009.00617.x">doi:10.1111/j.1467-9892.2009.00617.x</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># ttmatToslPairs
ttmatToslPairs(3, 3, 4)  # 1, 1, 3, 0
ttmatToslPairs(3, 2, 4)  # 1, 1, 3, 1

ttmatToslPairs(1:4, 1:4, 4)

ttmatToslPairs(3:4, 3:4, 4)

# ttTosl -  :todo:

# toSeason
toSeason(1:10, 4)           # 1 2 3 4  1 2 3 4  1 2
toSeason(1:10, 4, from = 0) # 0 1 2 3  0 1 2 3  0 1

## first data is for 3rd quarter
toSeason(1:10, 4, t1 = 3)  # 3 4 1 2 3 4 1 2 3 4

# toSeasonPair
toSeasonPair(3, 3, period=4) # season=3, lag = 0
toSeasonPair(8, 8, period=4) # season=4, lag = 0

toSeasonPair(3, 2, period=4) # season=3, lag = 1
toSeasonPair(7, 6, period=4) # same

#### # pc.omitneg
#### pc.omitneg(0:5,10) # 0:5, unchaged since all values &gt;= 0
#### 
#### pc.omitneg(-(0:5),10) # 6:10, works like
#### (0:10)[-(0:5 +1)]     # same
#### 
#### # don't mix positive and negative numbers in pc.omitneg
#### \dontrun{pc.omitneg(c(0,2,3,-4,5), 10)}
</code></pre>


</div>
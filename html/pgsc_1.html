<div class="container">

<table style="width: 100%;"><tr>
<td>pgsc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Wrapper function for GSC estimation</h2>

<h3>Description</h3>

<p>Wrapper function for GSC estimation
</p>


<h3>Usage</h3>

<pre><code class="language-R">pgsc(dta, dep.var, indep.var, b.init, method, sol.it = NULL,
  wt.init = NULL, print.level = 0, g.i = NULL, g.i.grad = NULL,
  ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dta</code></td>
<td>
<p>A data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dep.var</code></td>
<td>
<p>A string defining the dependent variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indep.var</code></td>
<td>
<p>A vector of strings defining the independent (treatment) variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b.init</code></td>
<td>
<p>An initial value for the treatment variable coefficients. Must have same 
length as 'indep.var'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>The GSC iteration method to be used. Must be one of:
</p>

<ul>
<li>
<p><code>onestep</code>: "Plain" GSC solution, without weights
</p>
</li>
<li>
<p><code>twostep.aggte</code>: Observations weighted by unit MSEs from the one-step solution.
</p>
</li>
<li>
<p><code>twostep.indiv</code>: Observations weighted by unit MSEs from individual, unit-by-unit unweighted solutions.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sol.it</code></td>
<td>
<p>The first step solution used in the two-step methods. If omitted, 
a new one-step solution is computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt.init</code></td>
<td>
<p>An initial value for the weighting matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.level</code></td>
<td>
<p>The level of detail provided in the printed output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g.i</code></td>
<td>
<p>A function defining a restriction on the parameters.  Used in hypothesis testing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g.i.grad</code></td>
<td>
<p>The gradient of <code>g.i</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments to be passed to the optimization</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See the vignette "Using <code>pgsc</code>" for an extended example.
</p>


<h3>Value</h3>

<p>Returns the point estimate of the model as a <code>gsc</code> object, a list with entries:
</p>

<dl>
<dt>b</dt>
<dd>
<p>The point estimate of the coefficients on the dependent variables</p>
</dd>
<dt>diff</dt>
<dd>
<p>The difference between successive iterations</p>
</dd>
<dt>err</dt>
<dd>
<p>The maximum error on the within-iteration optimization problems</p>
</dd>
<dt>it</dt>
<dd>
<p>Number of iterations require to solve</p>
</dd>
<dt>sig.i</dt>
<dd>
<p>The unit-specific MSEs from the solution</p>
</dd>
<dt>W</dt>
<dd>
<p>The "full" weighting matrix for counterfactuals, containing own-unit weights (all zero) and unit-N weights</p>
</dd>
<dt>wt</dt>
<dd>
<p>The "minimal" weighting matrix, omitting own-unit weights and weights on unit N (which can be computed as one-minus-rowsum)</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">data("pgsc.dta")
sol &lt;- pgsc(pgsc.dta, dep.var = 'y', indep.var = c('D1','D2'), 
b.init = c(0,0), method='onestep' )
summary(sol)
g.i &lt;- function(b) b[1] ; g.i.grad &lt;- function(b) c(1,0)
sol.r &lt;- pgsc(pgsc.dta, dep.var = 'y', indep.var = c('D1','D2'), 
b.init = sol$b, method='onestep', g.i=g.i, g.i.grad=g.i.grad )
summary(sol.r)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>data_transform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform plain text of word vectors into
<code>wordvec</code> (data.table) or <code>embed</code> (matrix),
saved in a compressed ".RData" file.</h2>

<h3>Description</h3>

<p>Transform plain text of word vectors into
<code>wordvec</code> (data.table) or <code>embed</code> (matrix),
saved in a compressed ".RData" file.
</p>
<p><em>Speed</em>: In total (preprocess + compress + save),
it can process about 30000 words/min
with the slowest settings (<code>compress="xz"</code>, <code>compress.level=9</code>)
on a modern computer (HP ProBook 450, Windows 11, Intel i7-1165G7 CPU, 32GB RAM).
</p>


<h3>Usage</h3>

<pre><code class="language-R">data_transform(
  file.load,
  file.save,
  as = c("wordvec", "embed"),
  sep = " ",
  header = "auto",
  encoding = "auto",
  compress = "bzip2",
  compress.level = 9,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file.load</code></td>
<td>
<p>File name of raw text (must be plain text).
</p>
<p>Data must be in this format (values separated by <code>sep</code>):
</p>
<p>cat 0.001 0.002 0.003 0.004 0.005 ... 0.300
</p>
<p>dog 0.301 0.302 0.303 0.304 0.305 ... 0.600</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.save</code></td>
<td>
<p>File name of to-be-saved R data (must be .RData).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as</code></td>
<td>
<p>Transform the text to which R object?
<code>wordvec</code> (data.table) or
<code>embed</code> (matrix).
Defaults to <code>wordvec</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>Column separator. Defaults to <code>" "</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header</code></td>
<td>
<p>Is the 1st row a header (e.g., meta-information such as "2000000 300")?
Defaults to <code>"auto"</code>, which automatically determines whether there is a header.
If <code>TRUE</code>, then the 1st row will be dropped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>File encoding. Defaults to <code>"auto"</code>
(using <code>vroom::vroom_lines()</code> to fast read the file).
If specified to any other value (e.g., <code>"UTF-8"</code>),
then it uses <code>readLines()</code> to read the file,
which is much slower than <code>vroom</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress</code></td>
<td>
<p>Compression method for the saved file. Defaults to <code>"bzip2"</code>.
</p>
<p>Options include:
</p>

<ul>
<li> <p><code>1</code> or <code>"gzip"</code>: modest file size (fastest)
</p>
</li>
<li> <p><code>2</code> or <code>"bzip2"</code>: small file size (fast)
</p>
</li>
<li> <p><code>3</code> or <code>"xz"</code>: minimized file size (slow)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress.level</code></td>
<td>
<p>Compression level from <code>0</code> (none) to <code>9</code>
(maximal compression for minimal file size). Defaults to <code>9</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Print information to the console? Defaults to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>wordvec</code> (data.table) or <code>embed</code> (matrix).
</p>


<h3>Download</h3>

<p>Download pre-trained word vectors data (<code>.RData</code>):
<a href="https://psychbruce.github.io/WordVector_RData.pdf">https://psychbruce.github.io/WordVector_RData.pdf</a>
</p>


<h3>See Also</h3>

<p><code>as_wordvec</code> / <code>as_embed</code>
</p>
<p><code>load_wordvec</code> / <code>load_embed</code>
</p>
<p><code>normalize</code>
</p>
<p><code>data_wordvec_subset</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# please first manually download plain text data of word vectors
# e.g., from: https://fasttext.cc/docs/en/crawl-vectors.html

# the text file must be on your disk
# the following code cannot run unless you have the file
library(bruceR)
set.wd()
data_transform(file.load="cc.zh.300.vec",   # plain text file
               file.save="cc.zh.300.vec.RData",  # RData file
               header=TRUE, compress="xz")  # of minimal size

## End(Not run)

</code></pre>


</div>
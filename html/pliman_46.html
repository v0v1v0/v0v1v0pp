<div class="container">

<table style="width: 100%;"><tr>
<td>utils_transform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Spatial transformations</h2>

<h3>Description</h3>

<p>Performs image rotation and reflection
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠image autocrop()⁠</code> Crops automatically  an image to the area of objects.
</p>
</li>
<li> <p><code>image_crop()</code> Crops an image to the desired area.
</p>
</li>
<li> <p><code>image_trim()</code> Remove pixels from the edges of an image (20 by default).
</p>
</li>
<li> <p><code>image_dimension()</code> Gives the dimension (width and height) of an image.
</p>
</li>
<li> <p><code>image_rotate()</code> Rotates the image clockwise by the given angle.
</p>
</li>
<li> <p><code>image_horizontal()</code> Converts (if needed) an image to a horizontal image.
</p>
</li>
<li> <p><code>image_vertical()</code> Converts (if needed) an image to a vertical image.
</p>
</li>
<li> <p><code>image_hreflect()</code> Performs horizontal reflection of the <code>image</code>.
</p>
</li>
<li> <p><code>image_vreflect()</code> Performs vertical reflection of the <code>image</code>.
</p>
</li>
<li> <p><code>image_resize()</code> Resize the <code>image</code>. See more at <code>EBImage::resize()</code>.
</p>
</li>
<li> <p><code>image_contrast()</code> Improve contrast locally by performing adaptive
histogram equalization. See more at <code>EBImage::clahe()</code>.
</p>
</li>
<li> <p><code>image_dilate()</code> Performs image dilatation. See more at <code>EBImage::dilate()</code>.
</p>
</li>
<li> <p><code>image_erode()</code> Performs image erosion. See more at <code>EBImage::erode()</code>.
</p>
</li>
<li> <p><code>image_opening()</code> Performs an erosion followed by a dilation. See more at
<code>EBImage::opening()</code>.
</p>
</li>
<li> <p><code>image_closing()</code> Performs a dilation followed by an erosion. See more at
<code>EBImage::closing()</code>.
</p>
</li>
<li> <p><code>image_filter()</code> Performs median filtering in constant time. See more at
<code>EBImage::medianFilter()</code>.
</p>
</li>
<li> <p><code>image_blur()</code> Performs blurring filter of images. See more at
<code>EBImage::gblur()</code>.
</p>
</li>
<li> <p><code>image_skeleton()</code> Performs image skeletonization.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">image_autocrop(
  img,
  index = "NB",
  edge = 5,
  filter = 3,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_crop(
  img,
  width = NULL,
  height = NULL,
  viewer = get_pliman_viewer(),
  show = "rgb",
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_dimension(img, parallel = FALSE, workers = NULL, verbose = TRUE)

image_rotate(
  img,
  angle,
  bg_col = "white",
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = TRUE
)

image_horizontal(
  img,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_vertical(
  img,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_hreflect(
  img,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_vreflect(
  img,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_resize(
  img,
  rel_size = 100,
  width,
  height,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_trim(
  img,
  edge = NULL,
  top = NULL,
  bottom = NULL,
  left = NULL,
  right = NULL,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_dilate(
  img,
  kern = NULL,
  size = NULL,
  shape = "disc",
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_erode(
  img,
  kern = NULL,
  size = NULL,
  shape = "disc",
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_opening(
  img,
  kern = NULL,
  size = NULL,
  shape = "disc",
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_closing(
  img,
  kern = NULL,
  size = NULL,
  shape = "disc",
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_skeleton(
  img,
  kern = NULL,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE,
  ...
)

image_thinning(
  img,
  niter = 3,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE,
  ...
)

image_filter(
  img,
  size = 2,
  cache = 512,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_blur(
  img,
  sigma = 3,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)

image_contrast(
  img,
  parallel = FALSE,
  workers = NULL,
  verbose = TRUE,
  plot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>img</code></td>
<td>
<p>An image or a list of images of class <code>Image</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>The index to segment the image. See <code>image_index()</code> for more
details. Defaults to <code>"NB"</code> (normalized blue).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge</code></td>
<td>

<ul>
<li>
<p> for <code>image_autocrop()</code> the number of pixels in the edge of the cropped
image. If <code>edge = 0</code> the image will be cropped to create a bounding rectangle
(x and y coordinates) around the image objects.
</p>
</li>
<li>
<p> for <code>image_trim()</code>, the number of pixels removed from the edges. By
default, 20 pixels are removed from all the edges.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>Performs median filtering in the binary image. This is useful
to remove noise (like dust) and improve the image autocropping method. See
more at <code>image_filter()</code>. Set to <code>FALSE</code> to remove the median filtering.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Processes the images asynchronously (in parallel) in separate
R sessions running in the background on the same machine. It may speed up
the processing time when <code>image</code> is a list. The number of sections is set
up to 70% of available cores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>workers</code></td>
<td>
<p>A positive numeric scalar or a function specifying the maximum
number of parallel processes that can be active at the same time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If <code>TRUE</code> (default) a summary is shown in the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>If <code>TRUE</code> plots the modified image. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>

<ul>
<li>
<p> For <code>image_resize()</code> the Width and height of the resized image. These arguments
can be missing. In this case, the image is resized according to the
relative size informed in <code>rel_size</code>.
</p>
</li>
<li>
<p> For <code>image_crop()</code> a numeric vector indicating the pixel range (x and y,
respectively) that will be maintained in the cropped image, e.g., width =
100:200
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viewer</code></td>
<td>
<p>The viewer option. If not provided, the value is retrieved
using <code>get_pliman_viewer()</code>. This option controls the type of viewer to use
for interactive plotting. The available options are "base" and "mapview".
If set to "base", the base R graphics system is used for interactive
plotting. If set to "mapview", the mapview package is used. To set this
argument globally for all functions in the package, you can use the
<code>set_pliman_viewer()</code> function. For example, you can run
<code>set_pliman_viewer("mapview")</code> to set the viewer option to "mapview" for
all functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show</code></td>
<td>
<p>How to plot in mapview viewer, either <code>"rgb"</code> or <code>"index"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>The rotation angle in degrees.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg_col</code></td>
<td>
<p>Color used to fill the background pixels, defaults to <code>"white"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rel_size</code></td>
<td>
<p>The relative size of the resized image. Defaults to 100. For
example, setting <code>rel_size = 50</code> to an image of width <code style="white-space: pre;">⁠1280 x 720⁠</code>, the new
image will have a size of <code style="white-space: pre;">⁠640 x 360⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>top, bottom, left, right</code></td>
<td>
<p>The number of pixels removed from <code>top</code>,
<code>bottom</code>, <code>left</code>, and <code>right</code> when using <code>image_trim()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kern</code></td>
<td>
<p>An <code>Image</code> object or an array, containing the structuring
element. Defaults to a brushe generated with <code>EBImage::makeBrush()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>

<ul>
<li>
<p> For <code>image_filter()</code> is the median filter radius (integer). Defaults to <code>3</code>.
</p>
</li>
<li>
<p> For <code>image_dilate()</code> and <code>image_erode()</code> is an odd number containing the
size of the brush in pixels. Even numbers are rounded to the next odd one.
The default depends on the image resolution and is computed as the image
resolution (megapixels) times 20.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shape</code></td>
<td>
<p>A character vector indicating the shape of the brush. Can be
<code>box</code>, <code>disc</code>, <code>diamond</code>, <code>Gaussian</code> or <code>line</code>. Default is <code>disc</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed on to <code>image_binary()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>niter</code></td>
<td>
<p>The number of iterations to perform in the thinning procedure.
Defaults to 3. Set to <code>NULL</code> to iterate until the binary image is no longer
changing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache</code></td>
<td>
<p>The the L2 cache size of the system CPU in kB (integer).
Defaults to <code>512</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>A numeric denoting the standard deviation of the Gaussian filter
used for blurring. Defaults to <code>3</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>


<ul>
<li> <p><code>image_skeleton()</code> returns a binary <code>Image</code> object.
</p>
</li>
<li>
<p> All other functions returns a  modified version of <code>image</code> depending on the
<code style="white-space: pre;">⁠image_*()⁠</code> function used.
</p>
</li>
<li>
<p> If <code>image</code> is a list, a list of the same length will be returned.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Tiago Olivoto <a href="mailto:tiagoolivoto@gmail.com">tiagoolivoto@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(pliman)
img &lt;- image_pliman("sev_leaf.jpg")
plot(img)
img &lt;- image_resize(img, 50)
img1 &lt;- image_rotate(img, 45)
img2 &lt;- image_hreflect(img)
img3 &lt;- image_vreflect(img)
img4 &lt;- image_vertical(img)
image_combine(img1, img2, img3, img4)
</code></pre>


</div>
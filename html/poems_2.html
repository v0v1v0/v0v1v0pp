<div class="container">

<table style="width: 100%;"><tr>
<td>DispersalFriction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R6 class representing a dispersal friction.</h2>

<h3>Description</h3>

<p><code>R6</code> class functionality for modeling sea, ice and other
frictional barriers to dispersal within a spatially-explicit population model. The
dispersal friction model utilizes the
<code>gdistance</code> package functionality to
calculate distance multipliers to modify distance-based dispersal rates for
simulated migrations in a spatio-temporal frictional landscape. The frictional
landscape is defined via conductance/permeability values, the inverse of friction,
which ranges from zero (barrier) to one (no friction) with values in-between
representing some friction. For example, a conductance value of 1/5 = 0.2 represents
a landscape in which simulated animals move 5 times slower than a non-friction
landscape. In this example the resultant distance multiplier would be 5, thus
reducing the effective dispersal range.
</p>


<h3>Super classes</h3>

<p><code>poems::GenericClass</code> -&gt; <code>poems::GenericModel</code> -&gt; <code>poems::SpatialModel</code> -&gt; <code>DispersalFriction</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>attached</code></dt>
<dd>
<p>A list of dynamically attached attributes (name-value pairs).</p>
</dd>
</dl>
</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>model_attributes</code></dt>
<dd>
<p>A vector of model attribute names.</p>
</dd>
<dt><code>region</code></dt>
<dd>
<p>A <code>Region</code> (or inherited class) object specifying the study region.</p>
</dd>
<dt><code>coordinates</code></dt>
<dd>
<p>Data frame (or matrix) of X-Y population (WGS84) coordinates in longitude (degrees West) and latitude (degrees North) (get and set), or distance-based coordinates dynamically returned by region raster (get only).</p>
</dd>
<dt><code>parallel_cores</code></dt>
<dd>
<p>Number of cores for running the simulations in parallel.</p>
</dd>
<dt><code>write_to_dir</code></dt>
<dd>
<p>Directory path for storing distance multipliers when memory performance is an issue.</p>
</dd>
<dt><code>transition_directions</code></dt>
<dd>
<p>Number of transition directions or neighbors in which cells are connected: usually 4, 8 (default), or 16 (see <code>gdistance::transition</code>).</p>
</dd>
<dt><code>conductance</code></dt>
<dd>
<p>Matrix/raster of conductance (inverse friction) values (range: 0 = barrier; 0 &lt; some friction &lt; 1; 1 = no friction) for each grid cell (rows/cells) at each simulation time step (columns/layers).</p>
</dd>
<dt><code>attribute_aliases</code></dt>
<dd>
<p>A list of alternative alias names for model attributes (form: <code>alias = "attribute"</code>) to be used with the set and get attributes methods.</p>
</dd>
<dt><code>error_messages</code></dt>
<dd>
<p>A vector of error messages encountered when setting model attributes.</p>
</dd>
<dt><code>warning_messages</code></dt>
<dd>
<p>A vector of warning messages encountered when setting model attributes.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DispersalFriction-calculate_distance_multipliers"><code>DispersalFriction$calculate_distance_multipliers()</code></a>
</p>
</li>
<li> <p><a href="#method-DispersalFriction-clone"><code>DispersalFriction$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attribute"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attribute"><code>poems::GenericModel$get_attribute()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attribute_aliases"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attribute_aliases"><code>poems::GenericModel$get_attribute_aliases()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attribute_names"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attribute_names"><code>poems::GenericModel$get_attribute_names()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="get_attributes"><a href="../../poems/html/GenericModel.html#method-GenericModel-get_attributes"><code>poems::GenericModel$get_attributes()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="GenericModel" data-id="set_attributes"><a href="../../poems/html/GenericModel.html#method-GenericModel-set_attributes"><code>poems::GenericModel$set_attributes()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="SpatialModel" data-id="initialize"><a href="../../poems/html/SpatialModel.html#method-SpatialModel-initialize"><code>poems::SpatialModel$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="poems" data-topic="SpatialModel" data-id="new_clone"><a href="../../poems/html/SpatialModel.html#method-SpatialModel-new_clone"><code>poems::SpatialModel$new_clone()</code></a></span></li>
</ul></details><hr>
<a id="method-DispersalFriction-calculate_distance_multipliers"></a>



<h4>Method <code>calculate_distance_multipliers()</code>
</h4>

<p>Calculates and returns spatio-temporal dispersal distance multipliers for each in-range migration.
</p>


<h5>Usage</h5>

<div class="r"><pre>DispersalFriction$calculate_distance_multipliers(dispersal_indices, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dispersal_indices</code></dt>
<dd>
<p>Two-column integer matrix, data.frame, or array representing the target and source coordinate index for each in-range migration.</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Parameters passed via a <em>params</em> list or individually.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Temporal list of dispersal distance multiplier arrays with values for each in-range migration.
</p>


<hr>
<a id="method-DispersalFriction-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DispersalFriction$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">
#' U Island example region
coordinates &lt;- data.frame(
  x = rep(seq(177.01, 177.05, 0.01), 5),
  y = rep(seq(-18.01, -18.05, -0.01), each = 5)
)
template_raster &lt;- Region$new(coordinates = coordinates)$region_raster #' full extent
template_raster[][-c(7, 9, 12, 14, 17:19)] &lt;- NA #' make U Island
region &lt;- Region$new(template_raster = template_raster)
raster::plot(region$region_raster,
  main = "Example region (indices)",
  xlab = "Longitude (degrees)", ylab = "Latitude (degrees)",
  colNA = "blue"
)

#' Dispersal distances
dispersal_gen &lt;- DispersalGenerator$new(region = region)
dispersal_gen$set_attributes(params = list(p = 0.5, b = 700, r = 3000))
distances &lt;- round(dispersal_gen$calculate_distance_matrix()) #' in m
dispersal_gen$calculate_distance_data()
dispersal_indices &lt;- as.matrix(dispersal_gen$distance_data$base[, 1:2])

#' Distance multipliers with friction in cell 4
dispersal_friction &lt;- DispersalFriction$new(
  region = region,
  conductance = c(1, 1, 1, 0.5, 1, 1, 1)
)
multipliers &lt;- dispersal_friction$calculate_distance_multipliers(dispersal_indices)
cbind(dispersal_indices,
  distance = distances[dispersal_indices],
  multiplier = multipliers[[1]]
)

#' Note that crossing the water is avoided.

</code></pre>


</div>
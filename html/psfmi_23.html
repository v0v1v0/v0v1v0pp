<div class="container">

<table style="width: 100%;"><tr>
<td>km_estimates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Kaplan-Meier risk estimates for Net Reclassification Index analysis</h2>

<h3>Description</h3>

<p><code>km_estimates</code> Kaplan-Meier risk estimates for Net Reclassification Index analysis 
for Cox Regression Models
</p>


<h3>Usage</h3>

<pre><code class="language-R">km_estimates(data, p0, p1, time, status, t_risk, cutoff)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame with relevant predictors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p0</code></td>
<td>
<p>risk outcome probabilities for reference model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p1</code></td>
<td>
<p>risk outcome probabilities for new model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>Character vector. Name of time variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>Character vector. Name of status variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t_risk</code></td>
<td>
<p>Follow-up value to calculate cases, controls. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff</code></td>
<td>
<p>A numerical vector that defines the outcome probability cutoff values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Follow-up for which cases and controls are determined. For censored cases before this follow-up 
the expected risk of being a case is calculated by using the Kaplan-Meier value to calculate
the expected number of cases. These expected numbers are used to calculate the NRI proportions. 
(These are not shown by function <code>nricens</code>).
</p>


<h3>Value</h3>

<p>An object from which the following objects can be extracted: 
</p>

<ul>
<li>  <p><code>data</code> dataset. 
</p>
</li>
<li>  <p><code>prob_orig</code> outcome risk probabilities at t_risk for reference model.
</p>
</li>
<li>  <p><code>prob_new</code> outcome risk probabilities at t_risk for new model.
</p>
</li>
<li>  <p><code>time</code> name of time variable.
</p>
</li>
<li>  <p><code>status</code> name of status variable.
</p>
</li>
<li>  <p><code>cutoff</code> cutoff value for survival probability. 
</p>
</li>
<li>  <p><code>t_risk</code> follow-up time used to calculate outcome (risk) probabilities.
</p>
</li>
<li>  <p><code>reclass_totals</code> table with total reclassification numbers.
</p>
</li>
<li>  <p><code>reclass_cases</code> table with reclassification numbers for cases.
</p>
</li>
<li>  <p><code>reclass_controls</code> table with reclassification numbers for controls.
</p>
</li>
<li>  <p><code>totals</code> totals of controls, cases, censored cases.
</p>
</li>
<li>  <p><code>km_est</code> totals of cases calculated using Kaplan-Meiers risk estimates.
</p>
</li>
<li>  <p><code>nri_est</code> reclassification measures.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Martijn Heymans, 2023
</p>


<h3>References</h3>

<p>Cook NR, Ridker PM. Advances in measuring the effect of individual predictors of 
cardiovascular risk: the role of reclassification measures. Ann Intern Med. 2009;150(11):795-802.
</p>
<p>Steyerberg EW, Pencina MJ. Reclassification calculations for persons with incomplete 
follow-up. Ann Intern Med. 2010;152(3):195-6 (author reply 196-7).
</p>
<p>Pencina MJ, D'Agostino RB Sr, Steyerberg EW. Extensions of net reclassification 
improvement calculations to measure usefulness of new biomarkers. Stat Med. 2011;30(1):11-21
</p>
<p>Inoue E (2018). nricens: NRI for Risk Prediction Models with Time to Event and Binary 
Response Data. R package version 1.6, &lt;https://CRAN.R-project.org/package=nricens&gt;.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  library(survival)
  lbpmicox1 &lt;- subset(psfmi::lbpmicox, Impnr==1) # extract dataset
  
  fit_cox0 &lt;- 
      coxph(Surv(Time, Status) ~ Duration + Pain, data=lbpmicox1, x=TRUE)
  fit_cox1 &lt;- 
      coxph(Surv(Time, Status) ~ Duration + Pain + Function + Radiation, 
      data=lbpmicox1, x=TRUE)

  p0 &lt;- risk_coxph(fit_cox0, t_risk=80)
  p1 &lt;- risk_coxph(fit_cox1, t_risk=80)
  
  res_km &lt;- km_estimates(data=lbpmicox1,
                      p0=p0,
                      p1=p1,
                      time = "Time",
                      status = "Status",
                      cutoff=0.45,
                      t_risk=80)

</code></pre>


</div>
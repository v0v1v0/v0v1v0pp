<div class="container">

<table style="width: 100%;"><tr>
<td>Panel Generating Functions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Panel-Generators for Visualization of Party Trees </h2>

<h3>Description</h3>

<p>The plot method for <code>BinaryTree</code> and <code>mob</code> objects are rather
flexible and can be extended by panel functions. Some pre-defined
panel-generating functions of class <code>grapcon_generator</code>
for the most important cases are documented here.
</p>


<h3>Usage</h3>

<pre><code class="language-R">node_inner(ctreeobj, digits = 3, abbreviate = FALSE, 
  fill = "white", pval = TRUE, id = TRUE)
node_terminal(ctreeobj, digits = 3, abbreviate = FALSE, 
  fill = c("lightgray", "white"), id = TRUE)
edge_simple(treeobj, digits = 3, abbreviate = FALSE)
node_surv(ctreeobj, ylines = 2, id = TRUE, ...)
node_barplot(ctreeobj, col = "black", fill = NULL, beside = NULL,
  ymax = NULL, ylines = NULL, widths = 1, gap = NULL, 
  reverse = NULL, id = TRUE)
node_boxplot(ctreeobj, col = "black", fill = "lightgray", 
  width = 0.5,  yscale = NULL, ylines = 3, cex = 0.5, id = TRUE)
node_hist(ctreeobj, col = "black", fill = "lightgray", 
  freq = FALSE, horizontal = TRUE, xscale = NULL, ymax = NULL, 
  ylines = 3, id = TRUE, ...)
node_density(ctreeobj, col = "black", rug = TRUE, 
  horizontal = TRUE, xscale = NULL, yscale = NULL, ylines = 3, 
  id = TRUE)
node_scatterplot(mobobj, which = NULL, col = "black", 
  linecol = "red", cex = 0.5, pch = NULL, jitter = FALSE, 
  xscale = NULL, yscale = NULL, ylines = 1.5, id = TRUE, 
  labels = FALSE)
node_bivplot(mobobj, which = NULL, id = TRUE, pop = TRUE,
  pointcol = "black", pointcex = 0.5,
  boxcol = "black", boxwidth = 0.5, boxfill = "lightgray",
  fitmean = TRUE, linecol = "red",
  cdplot = FALSE, fivenum = TRUE, breaks = NULL,
  ylines = NULL, xlab = FALSE, ylab = FALSE, margins = rep(1.5, 4), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ctreeobj</code></td>
<td>
<p> an object of class <code>BinaryTree</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treeobj</code></td>
<td>
<p> an object of class <code>BinaryTree</code> or <code>mob</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mobobj</code></td>
<td>
<p> an object of class <code>mob</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p> integer, used for formating numbers. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abbreviate</code></td>
<td>
<p> logical indicating whether strings should be 
abbreviated. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col, pointcol</code></td>
<td>
<p> a color for points and lines. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p> a color to filling rectangles. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval</code></td>
<td>
<p> logical. Should p values be plotted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p> logical. Should node IDs be plotted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylines</code></td>
<td>
<p> number of lines for spaces in y-direction. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>widths</code></td>
<td>
<p> widths in barplots. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, boxwidth</code></td>
<td>
<p> width in boxplots. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gap</code></td>
<td>
<p> gap between bars in a barplot (<code>node_barplot</code>). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yscale</code></td>
<td>
<p> limits in y-direction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xscale</code></td>
<td>
<p> limits in x-direction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ymax</code></td>
<td>
<p> upper limit in y-direction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beside</code></td>
<td>
<p> logical indicating if barplots should be side by side or stacked. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>logical indicating whether the order of levels should be reversed
for barplots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>horizontal</code></td>
<td>
<p> logical indicating if the plots should be horizontal. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>
<p>logical; if <code>TRUE</code>, the histogram graphic is a representation
of frequencies. If <code>FALSE</code>, probabilities are plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug</code></td>
<td>
<p>logical indicating if a rug representation should be added. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p> numeric or character vector indicating which of the regressor
variables should be plotted (default = all).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linecol</code></td>
<td>
<p> color for fitted model lines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex, pointcex</code></td>
<td>
<p>character extension of points in scatter plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>
<p>plotting character of points in scatter plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jitter</code></td>
<td>
<p>logical. Should the points be jittered in y-direction?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>logical. Should axis labels be plotted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pop</code></td>
<td>
<p>logical. Should the panel viewports be popped?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxcol</code></td>
<td>
<p>color for box plot borders.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxfill</code></td>
<td>
<p>fill color for box plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitmean</code></td>
<td>
<p>logical. Should lines for the predicted means from the model
be added?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cdplot</code></td>
<td>
<p>logical. Should CD plots (or spinograms) be used for visualizing
the dependence of a categorical on a numeric variable?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fivenum</code></td>
<td>
<p>logical. When using spinograms, should the five point summary
of the explanatory variable be used for determining the breaks?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>a (list of) numeric vector(s) of breaks for the spinograms. If set to <code>NULL</code>
(the default), the <code>breaks</code> are chosen according to the <code>fivenum</code>
argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab, ylab</code></td>
<td>
<p> character with x- and y-axis labels. Can also be logical: if <code>FALSE</code>
axis labels are surpressed, if <code>TRUE</code> they are taken from the underlying data.
Can be a vector of labels for <code>xlab</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margins</code></td>
<td>
<p>margins of the viewports.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> additional arguments passed to callies.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>plot</code> methods for <code>BinaryTree</code> and <code>mob</code> objects provide an
extensible framework for the visualization of binary regression trees. The
user is allowed to specify panel functions for plotting terminal and inner
nodes as well as the corresponding edges. The panel functions to be used
should depend only on the node being visualzied, however, for setting up
an appropriate panel function, information from the whole tree is typically
required. Hence, <span class="pkg">party</span> adopts the framework of <code>grapcon_generator</code>
(graphical appearance control) from the <span class="pkg">vcd</span> package (Meyer, Zeileis and
Hornik, 2005) and provides several panel-generating functions. For convenience,
the panel-generating functions <code>node_inner</code> and <code>edge_simple</code> 
return panel functions to draw inner nodes and left and right edges. 
For drawing terminal nodes, the functions returned by the other panel 
functions can be used. The panel generating function <code>node_terminal</code> 
is a terse text-based representation of terminal nodes.
</p>
<p>Graphical representations of terminal nodes are available and depend on
the kind of model and the measurement scale of the variables modelled.
</p>
<p>For univariate regressions (typically fitted by <code>ctree</code>),
<code>node_surv</code> returns a functions that plots Kaplan-Meier curves in each 
terminal node; <code>node_barplot</code>, <code>node_boxplot</code>, <code>node_hist</code> and
<code>node_density</code> can be used to plot bar plots, box plots, histograms and 
estimated densities into the terminal nodes.
</p>
<p>For multivariate regressions (typically fitted by <code>mob</code>),
<code>node_bivplot</code> returns a panel function that creates bivariate plots
of the response against all regressors in the model. Depending on the scale
of the variables involved, scatter plots, box plots, spinograms (or CD plots)
and spine plots are created. For the latter two <code>spine</code> and
<code>cd_plot</code> from the <span class="pkg">vcd</span> package are re-used.
</p>


<h3>References</h3>

<p>David Meyer, Achim Zeileis, and Kurt Hornik (2006).
The Strucplot Framework: Visualizing Multi-Way Contingency Tables with vcd.
<em>Journal of Statistical Software</em>, <b>17</b>(3).
<a href="https://doi.org/10.18637/jss.v017.i03">doi:10.18637/jss.v017.i03</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  set.seed(290875)

  airq &lt;- subset(airquality, !is.na(Ozone))
  airct &lt;- ctree(Ozone ~ ., data = airq)

  ## default: boxplots
  plot(airct)
  
  ## change colors
  plot(airct, tp_args = list(col = "blue", fill = hsv(2/3, 0.5, 1)))
  ## equivalent to
  plot(airct, terminal_panel = node_boxplot(airct, col = "blue", 
                                            fill = hsv(2/3, 0.5, 1)))

  ### very simple; the mean is given in each terminal node
  plot(airct, type = "simple")

  ### density estimates
  plot(airct, terminal_panel = node_density)
    
  ### histograms 
  plot(airct, terminal_panel = node_hist(airct, ymax = 0.06, 
                                         xscale = c(0, 250)))
</code></pre>


</div>
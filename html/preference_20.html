<div class="container">

<table style="width: 100%;"><tr>
<td>preference.trial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a Preference Trial</h2>

<h3>Description</h3>

<p>Create a Preference Trial
</p>


<h3>Usage</h3>

<pre><code class="language-R">preference.trial(
  pref_ss,
  pref_effect,
  selection_ss,
  selection_effect,
  treatment_ss,
  treatment_effect,
  sigma2,
  pref_prop,
  choice_prop = 0.5,
  stratum_prop = 1,
  alpha = 0.05,
  k = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pref_ss</code></td>
<td>
<p>the sample size of the preference arm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pref_effect</code></td>
<td>
<p>the effect size of the preference arm (delta_pi).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selection_ss</code></td>
<td>
<p>the sample size of the selection arm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selection_effect</code></td>
<td>
<p>the effect size of selection arm (delta_nu).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_ss</code></td>
<td>
<p>the sample size of the treatment arm .</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_effect</code></td>
<td>
<p>the sample size of the treatment arm (delta_tau)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma2</code></td>
<td>
<p>the variance estimate of the outcome of interest. This 
value should be positive numeric values. If study is stratified, should 
be vector of within-stratum variances with length equal to the number of 
strata in the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pref_prop</code></td>
<td>
<p>the proportion of patients preferring treatment 1. This
value should be between 0 and 1 (phi).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>choice_prop</code></td>
<td>
<p>the proportion of patients assigned to choice arm in 
the initial randomization. Should be numeric value between
0 and 1 (default=0.5) (theta).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratum_prop</code></td>
<td>
<p>xi a numeric vector of the proportion of patients in 
each stratum. Length of vector should equal the number of strata in the 
study and sum of vector should be 1. All vector elements should be numeric
values between 0 and 1. Default is 1 (i.e. unstratified design) (xi).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>the desired type I error rate (default 0.05).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the ratio of treatment A to treatment B in the random arm
(default 1)..</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Turner RM, et al. (2014). "Sample Size and Power When Designing
a Randomized Trial for the Estimation of Treatment, Selection, and
Preference Effects." <em>Medical Decision Making</em>, <strong>34</strong>:711-719.
(<a href="https://pubmed.ncbi.nlm.nih.gov/24695962/">PubMed</a>)
</p>
<p>Cameron B, Esserman D (2016). "Sample Size and Power for a
Stratified Doubly Randomized Preference Design." <em>Stat Methods Med Res</em>.
(<a href="https://pubmed.ncbi.nlm.nih.gov/27872194">PubMed</a>)
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Unstratified single trial.
preference.trial(pref_ss=100, pref_effect=1, selection_ss=100, 
  selection_effect=1, treatment_ss=100, treatment_effect=1,
  sigma2=1, pref_prop=0.6)

# Stratified single trial.
preference.trial(pref_ss=100, pref_effect=1, selection_ss=100,
  selection_effect=1, treatment_ss=100, treatment_effect=1,
  sigma2=list(c(1, 0.8)), pref_prop=list(c(0.6, 0.3)),
  choice_prop=0.5, stratum_prop=list(c(0.3, 0.7)))

# Multiple trials unstratified.
preference.trial(pref_ss=100, pref_effect=seq(0.1, 2, by=0.5), 
  selection_ss=100, selection_effect=1, treatment_ss=100, 
  treatment_effect=1, sigma2=1, pref_prop=0.6)

# Multiple, stratified trials.
preference.trial(pref_ss=100, pref_effect=seq(0.1, 2, by=0.5), 
  selection_ss=100, selection_effect=1, treatment_ss=100, 
  treatment_effect=1, sigma2=list(c(1, 0.8)), pref_prop=list(c(0.6, 0.3)), 
  choice_prop=0.5, stratum_prop=list(c(0.3, 0.7)))

</code></pre>


</div>
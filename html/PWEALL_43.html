<div class="container">

<table style="width: 100%;"><tr>
<td>wlrcom</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A function to calculate the various weighted log-rank statistics and their varainces</h2>

<h3>Description</h3>

<p>A function to calculate the weighted log-rank statistics and their varainces given the weights including 
log-rank, gehan, Tarone-Ware, Peto-Peto, mPeto-Peto and Fleming-Harrington</p>


<h3>Usage</h3>

<pre><code class="language-R">wlrcom(y,d,z,tfix=max(y),p=c(1),q=c(1),eps=1.0e-08)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>observed times</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>non-censoring indicators</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>group indicators, <code>z</code>=1: treatment, <code>z</code>=0 control</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tfix</code></td>
<td>
<p>time point at which weighted log-rank is calculated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>a vector of power numbers for S in the Fleming-Harrington weight</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>a vector of power numbers for 1-S in the Fleming-Harrington weight, <code>q</code> and <code>p</code> should have the same length</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eps</code></td>
<td>
<p>the error tolerance when comparing event times</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>V1:3/21/2018</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>total number of subjects, combined groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>unscaled test statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>variances of the unsclaed test statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wlr</code></td>
<td>
<p>weighted log-rank statistics, i.e. scaled test statsitics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pvalue</code></td>
<td>
<p>two-sided p-values of <code>wlr</code></p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Xiaodong Luo</p>


<h3>Examples</h3>

<pre><code class="language-R">n&lt;-1000
pi1&lt;-0.5
taur&lt;-2.8
u&lt;-c(1/taur,1/taur)
ut&lt;-c(taur/2,taur)
r11&lt;-c(1,0.5)
r21&lt;-c(0.5,0.8)
r31&lt;-c(0.7,0.4)
r41&lt;-r51&lt;-r21
rc1&lt;-c(0.5,0.6)
r10&lt;-c(1,0.7)
r20&lt;-c(0.5,1)
r30&lt;-c(0.3,0.4)
r40&lt;-r50&lt;-r20
rc0&lt;-c(0.2,0.4)
tchange&lt;-c(0,1.873)
tcut&lt;-2

E&lt;-T&lt;-C&lt;-z&lt;-delta&lt;-rep(0,n)
E&lt;-rpwu(nr=n,u=u,ut=ut)$r
z&lt;-rbinom(n,1,pi1)
n1&lt;-sum(z)
n0&lt;-sum(1-z)
C[z==1]&lt;-rpwe(nr=n1,rate=rc1,tchange=tchange)$r
C[z==0]&lt;-rpwe(nr=n0,rate=rc0,tchange=tchange)$r
T[z==1]&lt;-rpwecx(nr=n1,rate1=r11,rate2=r21,rate3=r31,
                rate4=r41,rate5=r51,tchange=tchange,type=1)$r
T[z==0]&lt;-rpwecx(nr=n0,rate1=r10,rate2=r20,rate3=r30,
                rate4=r40,rate5=r50,tchange=tchange,type=1)$r
y&lt;-pmin(pmin(T,C),tcut-E)
y1&lt;-pmin(C,tcut-E)
d&lt;-rep(0,n);
d[T&lt;=y]&lt;-1

wlr4&lt;-wlrcom(y=y,d=d,z=z,p=c(1,1),q=c(0,1))
wlr4
</code></pre>


</div>
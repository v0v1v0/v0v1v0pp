<div class="container">

<table style="width: 100%;"><tr>
<td>mean.piar_index</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregate a price index over subperiods</h2>

<h3>Description</h3>

<p>Aggregate an index over subperiods by taking the (usually arithmetic) mean
of index values over consecutive windows of subperiods.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'chainable_piar_index'
mean(
  x,
  ...,
  weights = NULL,
  window = ntime(x),
  na.rm = FALSE,
  contrib = TRUE,
  r = 1
)

## S3 method for class 'direct_piar_index'
mean(
  x,
  ...,
  weights = NULL,
  window = ntime(x),
  na.rm = FALSE,
  contrib = TRUE,
  r = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A price index, as made by, e.g., <code>elemental_index()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not currently used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A numeric vector of weights for the index values in <code>x</code>, or
something that can be coerced into one. The
default is equal weights. It is usually easiest to specify these weights as
a matrix with a row for each index value in <code>x</code> and a column for each
time period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>A positive integer giving the size of the window used to
average index values across subperiods. The default averages over all periods
in <code>x</code>. Non-integers are truncated towards 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Should missing values be removed? By default, missing values
are not removed. Setting <code>na.rm = TRUE</code> is equivalent to overall mean
imputation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrib</code></td>
<td>
<p>Aggregate percent-change contributions in <code>x</code> (if any)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>Order of the generalized mean to aggregate index values. 0 for a
geometric index (the default for making elemental indexes), 1 for an
arithmetic index (the default for aggregating elemental indexes and
averaging indexes over subperiods), or -1 for a harmonic index (usually for
a Paasche index). Other values are possible; see
<code>gpindex::generalized_mean()</code> for details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>mean()</code> method constructs a set of non-overlapping windows of
length <code>window</code>, starting in the first period of the index, and takes
the mean of each index value in these windows for each level of the index.
The last window is discarded if it is incomplete (with a warning), so that
index values are
always averaged over <code>window</code> periods. The names for the first time
period in each window form the new names for the aggregated time periods.
</p>
<p>Percent-change contributions are aggregated if <code>contrib = TRUE</code> by treating
each product-subperiod pair as a unique product, then following the same
approach as <code>aggregate()</code>. The number of the
subperiod is appended to product names to make them unique across subperiods.
</p>
<p>An optional vector of weights can be specified when aggregating index values
over subperiods, which is often useful when aggregating a Paasche index; see
section 4.3 of Balk (2008) for details.
</p>


<h3>Value</h3>

<p>A price index, averaged over subperiods, that inherits from the same
class as <code>x</code>.
</p>


<h3>References</h3>

<p>Balk, B. M. (2008). <em>Price and Quantity Index Numbers</em>.
Cambridge University Press.
</p>


<h3>See Also</h3>

<p>Other index methods: 
<code>[.piar_index()</code>,
<code>aggregate.piar_index</code>,
<code>as.data.frame.piar_index()</code>,
<code>chain()</code>,
<code>contrib()</code>,
<code>head.piar_index()</code>,
<code>is.na.piar_index()</code>,
<code>levels.piar_index()</code>,
<code>merge.piar_index()</code>,
<code>split.piar_index()</code>,
<code>stack.piar_index()</code>,
<code>time.piar_index()</code>,
<code>window.piar_index()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">index &lt;- as_index(matrix(c(1:12, 12:1), 2, byrow = TRUE))

# Turn a monthly index into a quarterly index
mean(index, window = 3)

</code></pre>


</div>
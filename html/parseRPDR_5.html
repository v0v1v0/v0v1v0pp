<div class="container">

<table style="width: 100%;"><tr>
<td>convert_med</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adds boolean columns corresponding to a group of medications whether it is present in the given row.</h2>

<h3>Description</h3>

<p>Analyzes medication data loaded using <em>load_med</em>.
By default, the data.table is returned with new columns corresponding to boolean values, whether given group of medications are present.
If <em>collapse</em> is given, then the information is aggregated based-on the <em>collapse</em> column and the earliest of latest time of the given medication is provided.
</p>


<h3>Usage</h3>

<pre><code class="language-R">convert_med(
  d,
  code = "med",
  codes_to_find = NULL,
  collapse = NULL,
  code_time = "time_med",
  aggr_type = "earliest",
  nThread = parallel::detectCores() - 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>data.table, database containing medication data loaded using the <em>load_med</em> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>
<p>string, column name of the medication column. Defaults to <em>med</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>codes_to_find</code></td>
<td>
<p>list, a list of arrays corresponding to sets of medication names. New boolean columns with the name of each list element will be created.
These columns are indicators whether the given medication is present in the set of medication names or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>string, a column name on which to collapse the data.table.
Used in case we wish to assess whether given medications are present within all the same instances of <em>collapse</em>. See vignette for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code_time</code></td>
<td>
<p>string, column name of the time column. Defaults to <em>time_med</em>. Used in case collapse is present to provide the earliest or latest instance of diagnosing the given disease.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggr_type</code></td>
<td>
<p>string, if multiple occurences of the medications are present within the same case of <em>collapse</em>, which timepoint to return. Supported are: "earliest" or "latest". Defaults to <em>earliest</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nThread</code></td>
<td>
<p>integer, number of threads to use for parallelization. If it is set to 1, then no parallel backends are created and the function is executed sequentially.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data.table, with indicator columns whether given group of codes_to_find is present or not.
If <em>collapse</em> is present, then only unique ID and the summary columns are returned.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#Define medication group and add an indicator column whether
#the given medication group was administered
meds &lt;- list(statin = c("Simvastatin", "Atorvastatin"),
             NSAID  = c("Acetaminophen", "Paracetamol"))

data_med_indic &lt;- convert_med(d = data_med, codes_to_find = meds, nThread = 1)

#Summarize per patient if they ever had the given medication groups registered
data_med_indic_any &lt;- convert_med(d = data_med,
codes_to_find = meds, collapse = "ID_MERGE", nThread = 2)

## End(Not run)
</code></pre>


</div>
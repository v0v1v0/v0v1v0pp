<div class="container">

<table style="width: 100%;"><tr>
<td>direct</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Direct estimation of disaggregated indicators</h2>

<h3>Description</h3>

<p>Function <code>direct</code> estimates indicators only based on sample information.
The variance is estimated via a naive or calibrated bootstrap. The estimation
is adapted from the estimation of direct indicators in package
<span class="pkg">laeken</span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">direct(
  y,
  smp_data,
  smp_domains,
  weights = NULL,
  design = NULL,
  threshold = NULL,
  var = FALSE,
  boot_type = "naive",
  B = 50,
  seed = 123,
  X_calib = NULL,
  totals = NULL,
  custom_indicator = NULL,
  na.rm = FALSE,
  HT = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a character string indicating the variable that is used for
estimating the indicators. The variable must be contained in the sample data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smp_data</code></td>
<td>
<p>survey data containing variable y as well as sampling
domains, and weights if selected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smp_domains</code></td>
<td>
<p>a character containing the name of a variable
that indicates domains in the sample data. The variable must be numeric or a
factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>a character string containing the name of a variable for
the sampling weights in the sample data. This argument is optional and defaults
to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>a character string containing the name of a variable for different
strata for stratified sampling designs. This argument is optional and defaults
to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>a number defining a threshold. Alternatively, a threshold may
be defined as a <code>function</code> of <code>y</code> and <code>weights</code> returning a
numeric value. Such a function will be evaluated once for the point
estimation and in each iteration of the parametric bootstrap. See Example 2
for using a function as threshold.  A threshold is needed for calculation e.g.
of head count ratios and poverty gaps. The argument defaults to <code>NULL</code>.
In this case, the threshold is set to 60% of the median of the variable that
is selected as <code>y</code> similarly to the at-risk-of-poverty rate used in the
EU (see also <cite>Social Protection Committee 2001</cite>). However, any desired
threshold can be chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>if <code>TRUE</code>, estimates for the variance are calculated using a
naive or calibrated bootstrap. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot_type</code></td>
<td>
<p>a character string containing the name of the bootstrap
specification. Either a <code>"naive"</code> or a <code>"calibrate"</code> bootstrap can
be used. See also <code>bootVar</code>. Defaults to <code>naive</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>a number determining the number of bootstrap populations for the
bootstrap variance. Defaults to <code>50</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>an integer to set the seed for the random number generator. Random
number generation is used in the bootstrap approach. If seed is set to
<code>NULL</code>, seed is chosen randomly. Defaults to <code>123</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X_calib</code></td>
<td>
<p>a numeric matrix including calibration variables if the calibrated
bootstrap is chosen. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>totals</code></td>
<td>
<p>a numeric vector providing the population totals if the calibrated
bootstrap is chosen. If a vector is chosen, the length of the vector needs to
equal the number of columns in X_calib. Defaults to <code>NULL</code>. In this case,
the sampling weights are used to calculate the totals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_indicator</code></td>
<td>
<p>a list of functions containing the indicators to be
calculated additionally. Such functions must and must only depend on the
target variable <code>y</code>, the <code>weights</code> and the
<code>threshold</code> (numeric value) (see Example 3) even though some arguments
might not be used in the additional function. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>if <code>TRUE</code>, observations with <code>NA</code> values are deleted
from the sample data. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HT</code></td>
<td>
<p>if TRUE use Horvitz Thompson estimator.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The set of predefined indicators includes the mean, median, four
further quantiles (10%, 25%, 75% and 90%), head count ratio, poverty gap,
Gini coefficient and the quintile share ratio.
</p>


<h3>Value</h3>

<p>An object of class "direct", "emdi" that provides direct estimators
for regional disaggregated indicators and optionally corresponding variance
estimates. Several generic functions have methods for the
returned object. For a full list and descriptions of the components of objects
of class "emdi", see <code>emdiObject</code>.
</p>


<h3>References</h3>

<p>Alfons, A. and Templ, M. (2013). Estimation of Social Exclusion Indicators
from Complex Surveys: The <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> Package <span class="pkg">laeken</span>. Journal of
Statistical Software, 54(15), 1-25.  <br><br>
Social Protection Committee (2001). Report on Indicators in the Field of
Poverty and Social Exclusions, Technical Report, European Union.
</p>


<h3>See Also</h3>

<p><code>emdiObject</code>, <code>lme</code>,
<code>estimators.emdi</code>, <code>emdi_summaries</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Loading sample data
data("eusilcA_smp")

# Example 1: With weights and naive bootstrap
emdi_direct &lt;- direct(y = "eqIncome", smp_data = eusilcA_smp,
smp_domains = "district", weights = "weight", threshold = 11064.82, var = TRUE,
boot_type = "naive", B = 50, seed = 123, X_calib = NULL, totals = NULL,
na.rm = TRUE)

# Example 2: With function as threshold
emdi_direct &lt;- direct(y = "eqIncome", smp_data = eusilcA_smp,
smp_domains = "district", weights = "weight", threshold =
function(y, weights){0.6 * wtd.quantile(y, weights, 0.5)}, na.rm = TRUE)

# Example 3: With custom indicators
emdi_direct &lt;- direct(y = "eqIncome", smp_data = eusilcA_smp,
smp_domains = "district", weights = "weight", threshold = 10859.24,
var = TRUE, boot_type = "naive", B = 50, seed = 123, X_calib = NULL,
totals = NULL, custom_indicator = list(my_max = function(y, weights,
threshold){max(y)}, my_min = function(y, weights, threshold){min(y)}),
na.rm = TRUE)

</code></pre>


</div>
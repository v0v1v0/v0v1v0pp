<div class="container">

<table style="width: 100%;"><tr>
<td>regul.adj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Adjust regulation parameters </h2>

<h3>Description</h3>

<p>Calculate and plot an histogram of the distances between interpolated observations in a regulated time series and closest observations in the initial irregular time series. This allows to optimise the <code>tol</code> parameter
</p>


<h3>Usage</h3>

<pre><code class="language-R">regul.adj(x, xmin=min(x), frequency=NULL,
     deltat=(max(x, na.rm = TRUE) - min(x, na.rm = TRUE))/(length(x) - 1),
     tol=deltat, tol.type="both", nclass=50, col=c(4, 5, 2),
     xlab=paste("Time distance"), ylab=paste("Frequency"),
     main="Number of matching observations", plotit=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> a vector with times corresponding to the observations in the irregular initial time series </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xmin</code></td>
<td>
<p> the time corresponding to the first observation in the regular time series </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frequency</code></td>
<td>
<p> the frequency of observations in the regular time series </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltat</code></td>
<td>
<p> the interval between two successive observations in the regular time series. This is the inverse of <code>frequency</code>. Only one of both parameters need to be given. If both are provided, <code>frequency</code> supersedes <code>deltat</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p> the tolerance in the difference between two matching observations (in the original irregular series and in the regulated series). If <code>tol=0</code> both values must be strictly identical; a higher value for <code>tol</code> allows some fuzzy matching. <code>tol</code> must be a round fraction of <code>deltat</code> and cannot be higher than it, otherwise, it is adjusted to the closest acceptable value. By default, <code>tol=deltat</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol.type</code></td>
<td>
<p> the type of window to use for the time-tolerance: <code>"left"</code>, <code>"right"</code>, <code>"both"</code> (by default) or <code>"none"</code>. If <code>tol.type="left"</code>, corresponding <code>x</code> values are seeked in a window ]xregul-tol, xregul]. If <code>tol.type="right"</code>, they are seeked in the window [xregul, xregul+tol[. If <code>tol.type="both"</code>, then they are seeked in the window ]xregul-tol, xregul+tol]. If several observations are in this window, the closest one is used. Finally, if <code>tol.type="none"</code>, then <em>all</em> observations in the regulated time series are interpolated (even if exactly matching observations exist!) </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nclass</code></td>
<td>
<p> the number of classes to compute in the histogram. This is indicative, and will be adjusted by the algorithm to produce a nicely-formatted histogram. The default value is <code>nclass=50</code>. It is acceptable in many cases, but if the histogram is not correct, try a larger value </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p> the three colors to use to represent respectively the fist bar (exact coincidence), the middle bars (coincidence in a certain tolerance window) and the last bar (values always interpolated). By default, <code>col=c(4,5,2)</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p> the label of the x-axis </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p> the label of the y-axis </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p> the main title of the graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotit</code></td>
<td>
<p> if <code>plotit=TRUE</code> then the histogram is plotted. Otherwise, it is only calculated </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> additional graph parameters for the histogram </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is complementary to <code>regul.screen()</code>. While the later look for the best combination of the number of observations, the interval between observations and the position of the first observation on the time-scale for the regular time series, <code>regul.adj()</code> look for the optimal value for <code>tol</code>, the tolerance window.
</p>


<h3>Value</h3>

<p>A list with components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p> the parameters used for the regular time-scale </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match</code></td>
<td>
<p> the number of matching observations in the tolerance window </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exact.match</code></td>
<td>
<p> the number of exact matching observations </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match.counts</code></td>
<td>
<p> a vector with the number of matching observations for increasing values of <code>tol</code> </p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p> Philippe Grosjean (<a href="mailto:phgrosjean@sciviews.org">phgrosjean@sciviews.org</a>), Frédéric Ibanez (<a href="mailto:ibanez@obs-vlfr.fr">ibanez@obs-vlfr.fr</a>) </p>


<h3>See Also</h3>

 <p><code>regul.screen</code>, <code>regul</code> </p>


<h3>Examples</h3>

<pre><code class="language-R"># This example follows the example for regul.screen()
# where we determined that xmin=9, deltat=21, n=63, with tol=1.05
# is a good choice to regulate the irregular time series in 'releve' 
data(releve)
regul.adj(releve$Day, xmin=9, deltat=21)
# The histogram indicates that it is not useful to increase tol
# more than 1.05, because few observations will be added
# except if we increase it to 5-7, but this value could be
# considered to be too large in comparison with deltat=22
# On the other hand, with tol &lt;= 1, the number of matching
# observations will be almost divided by two!
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>retrospective</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Retrospective Design Analysis</h2>

<h3>Description</h3>

<p>Given the hypothetical population effect size and the study sample size, the
function <code>retrospective()</code> performs a retrospective design analysis for
Pearson's correlation test between two variables or <em>t</em>-test comparing
group means (Cohen's <em>d</em>). According to the defined alternative
hypothesis and the significance level, inferential risks (i.e., Power level,
Type M error, and Type S error) are computed together with the critical
effect value (i.e., the minimum absolute effect size value that would result
significant).
</p>


<h3>Usage</h3>

<pre><code class="language-R">retrospective(
  effect_size,
  sample_n1,
  sample_n2 = NULL,
  test_method = c("pearson", "two_sample", "welch", "paired", "one_sample"),
  alternative = c("two_sided", "less", "greater"),
  sig_level = 0.05,
  ratio_sd = 1,
  B = 10000,
  tl = -Inf,
  tu = Inf,
  B_effect = 1000,
  display_message = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>effect_size</code></td>
<td>
<p>a numeric value or function (see Details) indicating the
hypothetical population effect size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_n1</code></td>
<td>
<p>a numeric value indicating the sample size of the first
group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_n2</code></td>
<td>
<p>a numeric value indicating the sample size of the second
group. This argument is required when <code>test_method</code> is set to
<code>"two_sample"</code> or <code>"welch"</code>. In the case of <code>test_method =
"paired"</code>, set <code>sample_n2</code> equal to <code>sample_n1</code>. Whereas in the
case of <code>test_method = "one_sample"</code>, set <code>sample_n2</code> to
<code>NULL</code>. This argument is ignored for <code>test_method = "pearson"</code>.
See Test methods section in Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_method</code></td>
<td>
<p>a character string specifying the test type, must be one of
<code>"pearson"</code> (default, Pearson's correlation), <code>"two_sample"</code>
(independent two-sample <em>t</em>-test), <code>"welch"</code> (Welch's
<em>t</em>-test), <code>"paired"</code> (dependent <em>t</em>-test for paired
samples), or <code>"one_sample"</code> (one-sample <em>t</em>-test). You can specify
just the initial letters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis,
must be one of <code>"two_sided"</code> (default), <code>"greater"</code> or
<code>"less"</code>. You can specify just the initial letter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sig_level</code></td>
<td>
<p>a numeric value indicating the significance level on which
the alternative hypothesis is evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio_sd</code></td>
<td>
<p>a numeric value indicating the ratio between the standard
deviation in the first group and in the second group. This argument is
needed in the case of Welch's <em>t</em>-test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>a numeric  value indicating the number of iterations. Increase the
number of iterations to obtain more stable results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tl</code></td>
<td>
<p>optional value indicating the lower truncation point if
<code>effect_size</code> is defined as a function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tu</code></td>
<td>
<p>optional value indicating the upper truncation point if
<code>effect_size</code> is defined as a function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B_effect</code></td>
<td>
<p>a numeric  value indicating the number of sampled effects
if <code>effect_size</code> is defined as a function. Increase the number to
obtain more stable results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>display_message</code></td>
<td>
<p>a logical variable indicating whether to display or not
the progress bar. Not that this applies only when <code>effect_size</code> is
defined as a function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Conduct a retrospective design analysis to evaluate inferential risks
according to study design. A general overview is provided in the
<code>vignette("retrospective")</code>.
</p>
<p><strong>Population effect size</strong>
</p>
<p>The hypothetical population effect size (<code>effect_size</code>) can be set to a
single value or a function that allows sampling values from a given
distribution. The function has to be defined as <code>function(n)
 my_function(n, ...)</code>, with only one single argument <code>n</code> representing
the number of sampled values (e.g., <code>function(n) rnorm(n, mean = 0, sd
 = 1)</code>; <code>function(n) sample(c(.1,.3,.5), n, replace = TRUE)</code>). This
allows users to define hypothetical effect size distribution according to
their needs.
</p>
<p>Argument <code>B_effect</code> allows defining the number of sampled effects.
Users can access sampled effects in the <code>effect_info</code> list included in
the output to evaluate if the sample is representative of their
specification. Increase the number to obtain more accurate results but it
will require more computational time (default is 1000). To avoid long
computational times, we suggest adjusting <code>B</code> when using a function to
define the hypothetical population effect size.
</p>
<p>Optional arguments <code>tl</code> and <code>tu</code> allow truncating the sampling
distribution specifying the lower truncation point and upper  truncation
point respectively. Note that if <code>effect_type = "correlation"</code>,
distribution is automatically truncated between -1 and 1.
</p>
<p><strong>Test methods</strong>
</p>
<p>The function <code>retrospective()</code> performs a retrospective design analysis
considering correlations between two variables or comparisons between group
means.
</p>
<p>In the case of a correlation, only Pearson's correlation between two
variables is available, whereas Kendall's <em>tau</em> and Spearman's
<em>rho</em> are not implemented. The <code>test_method</code> argument has to be
set to <code>"pearson"</code> (default) and the <code>effect_size</code> argument is
used to define the hypothetical population effect size in terms of Pearson's
correlation coefficient (<code class="reqn">\rho</code>). The <code>sample_n2</code> argument is
ignored.
</p>
<p>In the case of a comparison between group means, the <code>effect_size</code>
argument is used to define the hypothetical population effect size in terms
of Cohen's <em>d</em> and the available <em>t</em>-tests are selected specifying
the argument <code>test_method</code>. For independent two-sample <em>t</em>-test,
use <code>"two_sample"</code> and indicate the sample size of the second group
(<code>sample_n2</code>). For Welch's <em>t</em>-test, use <code>"welch"</code> and
indicate and indicate the sample size of the second group (<code>sample_n2</code>)
and the ratio between the standard deviation in the first group and in the
second group (<code>ratio_sd</code>). For dependent <em>t</em>-test for paired
samples, use <code>"paired"</code> (<code>sample_n1</code> and <code>sample_n2</code> have to
be equal). For one-sample <em>t</em>-test, use <code>"one_sample"</code>
(<code>sample_n2</code> has to be <code>NULL</code>).
</p>
<p><strong>Study design</strong>
</p>
<p>Study design can be further defined according to statistical test
directionality and required <code class="reqn">\alpha</code>-level using the arguments
<code>alternative</code> and <code>sig_level</code> respectively.
</p>


<h3>Value</h3>

<p>A list with class "design_analysis" containing the following
components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>design_analysis</code></td>
<td>
<p>a character string indicating the type of design
analysis: "retrospective".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call_arguments</code></td>
<td>
<p>a list with all the arguments passed to the
function and the raw function call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect_info</code></td>
<td>
<p>a list with all the information regarding the
considered hypothetical population effect size. The list includes:
<code>effect_type</code> indicating the type of effect; <code>effect_function</code>
indicating the function from which effect are sampled or the string
"single_value" if a single value was provided; <code>effect_summary</code>
summary of the sampled effects; <code>effect_samples</code> vector with the
sampled effects (or unique value in the case of a single value). if
relevant <code>tl</code> and <code>tu</code> specifying the lower upper truncation
point respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_info</code></td>
<td>
<p>a list with all the information regarding the test
performed. The list includes: <code>test_method</code> character sting
indicating the test method (i.e., "pearson", "one_sample", "paired",
"two_sample", or "welch"); sample size (<code>sample_n1</code> and if relevant
<code>sample_n2</code>), alternative hypothesis (<code>alternative</code>),
significance level (<code>sig_level</code>)  and  degrees of freedom (<code>df</code>)
of the statistical test; <code>critical_effect</code> the minimum absolute
effect value that would result significant. Note that
<code>critical_effect</code> in the case of <code>alternative = "two_sided"</code> is
the absolute value and both positive and negative values should be
considered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retrospective_res</code></td>
<td>
<p>a data frame with the results of the design
analysis. Columns names are <code>power</code>, <code>typeM</code>, and <code>typeS</code>.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Altoè, G., Bertoldo, G., Zandonella Callegher, C., Toffalini, E.,
Calcagnì, A., Finos, L., &amp; Pastore, M. (2020). Enhancing Statistical
Inference in Psychological Research via Prospective and Retrospective Design
Analysis. Frontiers in Psychology, 10.
<a href="https://doi.org/10.3389/fpsyg.2019.02893">https://doi.org/10.3389/fpsyg.2019.02893</a>
</p>
<p>Bertoldo, G., Altoè, G., &amp; Zandonella Callegher, C. (2020).
Designing Studies and Evaluating Research Results: Type M and Type S Errors
for Pearson Correlation Coefficient. Retrieved from
<a href="https://psyarxiv.com/q9f86/">https://psyarxiv.com/q9f86/</a>
</p>
<p>Gelman, A., &amp; Carlin, J. (2014). Beyond Power Calculations: Assessing Type S
(Sign) and Type M (Magnitude) Errors. Perspectives on Psychological Science,
9(6), 641–651. <a href="https://doi.org/10.1177/1745691614551642">https://doi.org/10.1177/1745691614551642</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Pearson's correlation
retrospective(effect_size = .3, sample_n1 = 25, test_method = "pearson")

# Two-sample t-test
retrospective(effect_size = .3, sample_n1 = 25, sample_n2 = 35,
              test_method = "two_sample")
# Welch t-test
retrospective(effect_size = .3, sample_n1 = 25, sample_n2 = 35,
              test_method = "welch", ratio_sd = 1.5)
# Paired t-test
retrospective(effect_size = .3, sample_n1 = 25, sample_n2 = 25,
              test_method = "paired")
# One-sample t-test
retrospective(effect_size = .3, sample_n1 = 25, sample_n2 = NULL,
              test_method = "one_sample")





# Define effect_size using functions (long computational times)
# Remember to adjust B
retrospective(effect_size = function(n) rnorm(n, .3, .1), sample_n1 = 25,
              test_method = "pearson", tl = .15, B = 1e3)
retrospective(effect_size = function(n) rnorm(n, .3, .1), sample_n1 = 25,
              test_method = "one_sample", tl = .2, tu = .4, B = 1e3)


</code></pre>


</div>
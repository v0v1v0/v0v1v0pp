<div class="container">

<table style="width: 100%;"><tr>
<td>fixCSV</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tidy a comma separated value (CSV) file</h2>

<h3>Description</h3>

<p>Tidies up a Comma Separated Value (CSV) file, ensuring that each
row of the table in the file contains the same number of commas,
and no empty rows are left below the table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fixCSV(file, skip = 0, overwrite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>character: the name of the CSV file to be
‘fixed’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>integer: the number of lines in the CSV file to skip
before the header row of the table.  The skipped lines are copied
directly to the output file unchanged.  The default is
<code>skip=0</code>, implying that the header row is the first row of
the CSV file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>logical: Write output to a separate,
‘FIXED’ file (<code>overwrite=FALSE</code>, the default), or
overwrite the original file (<code>overwrite=TRUE</code>)?  If
<code>overwrite=TRUE</code>, the original file is copied to a
<code>.BAK</code> file before being overwritten.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>fixCSV</code> tidies up a Comma Separated Value (CSV) file
to ensure that the CSV file contains a strictly rectangular block
of data for input into R (ignoring any preliminary comment rows
via the <code>skip=</code> argument).
</p>
<p>CSV formatted files are a plain text file format for tabular data,
in which cell entries in the same row of a table are separated by
commas.  When such files are exported from other applications such
as spreadsheet software, the software has to decide whether any
empty cells to the right-hand side of, or below, the table or
spreadsheet should be represented by trailing commas in the CSV
file.  Such decisions can result in a ‘ragged’ table in the
CSV file, in which some rows contain fewer commas (‘short
rows’) or more commas (‘long rows’) than others, or where
empty rows below the table are included as comma-only rows in the
CSV file.
</p>
<p>While R's <code>read.table</code> and related functions can
sensibly extend short rows as needed, ragged tables in a CSV file
can still result in errors, unwanted empty rows (below the table)
or unwanted columns (to the right of the table) when the data is
loaded into R.
</p>
<p><code>fixCSV</code> reads in a specified CSV file and removes or adds
commas to rows, to ensure that each row in the body of the table
contains the same number of cells as the header row of the table.
Any empty rows below the table are also removed.  The resulting
table is then written back to file, either to a new file with
‘FIXED’ added to the filename (argument
<code>overwrite=FALSE</code>, the default) or overwriting the original
file (<code>overwrite=TRUE</code> - the original file is copied to a
<code>.BAK</code> file before being overwritten).
</p>
<p>Note that:
</p>

<ul>
<li>
<p> The table of data in the CSV file <em>must</em> contain a
header row of the correct length, since this row is used to
determine the correct number of columns for the table.  Note: if
this header row is too short, then subsequent rows will be
truncated to match the length of the header, so beware.
Misspecification of the <code>skip=</code> argument (see below) can
similarly lead to such corruption of the ‘fixed’ file.
</p>
</li>
<li>
<p> In the header row, any trailing commas representing empty
cells to the right of the (non-empty) header entries are first
removed before determining the correct number of columns for the
table.  Thus the length of the header row (and hence the assumed
width of the entire table) is determined by the <em>right-most
non-empty cell</em> in the header row.
</p>
</li>
<li> <p><code>fixCSV</code> does not remove empty cells, rows or columns
within the interior (or on the left side) of the table - it is
concerned only with the right and bottom boundaries of the table.
</p>
</li>
<li>
<p> A <code>skip=</code> argument is included to tell <code>fixCSV</code> to
ignore the specified number of comment rows preceding the header
row.  Such rows are simply copied over into the output file
unchanged.  The default for this parameter is <code>skip=0</code>, so
that the first row in the data file is assumed to be the header
row. As noted above, misspecification of this argument can
seriously corrupt the output.
</p>
</li>
<li> <p><code>fixCSV</code> can overwrite your data file(s) (via
<code>overwrite=TRUE</code>), and althought it makes a backup of your
original file, you should still make sure that you have a separate
backup of your data file in a safe place before using this
function!  The author of this code takes no responsibility for any
data loss or corruption as a result of the use of this routine...
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Alexander Zwart (alec.zwart at csiro.au)
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Assuming CSV file 'alleleDataFile.csv' exists in the current
## directory.  The following overwrites the CSV file - make sure
## you have a backup!

fixCSV("alleleDataFile.csv",overwrite=TRUE)


## End(Not run)
</code></pre>


</div>
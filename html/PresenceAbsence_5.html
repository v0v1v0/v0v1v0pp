<div class="container">

<table style="width: 100%;"><tr>
<td>cmx</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Confusion Matrix </h2>

<h3>Description</h3>

<p><code>cmx</code> calculates the confusion matrix for a single model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cmx(DATA, threshold = 0.5, which.model = 1, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DATA</code></td>
<td>
<p>a matrix or dataframe of observed and predicted values where each row represents one plot and where columns are:
</p>

<table>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> DATA[,1] </td>
<td style="text-align: left;"> plot ID </td>
<td style="text-align: left;"> text</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> DATA[,2] </td>
<td style="text-align: left;"> observed values </td>
<td style="text-align: left;"> zero-one values</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> DATA[,3] </td>
<td style="text-align: left;"> predicted probabilities from first model </td>
<td style="text-align: left;"> numeric (between 0 and 1)</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> DATA[,4] </td>
<td style="text-align: left;"> predicted probabilities from second model, etc... </td>
<td style="text-align: left;">  
	</td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>a cutoff value between zero and one used for translating predicted probabilities into 0 /1 values, defaults to 0.5. It must be a single value between zero and one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which.model</code></td>
<td>
<p>a number indicating which model from DATA should be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p> a logical indicating whether missing values should be removed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>cmx</code> calculates the confusion matrix for a single model at a single threshold. 
</p>
<p>If <code>DATA</code> contains more predictions from more than one model  <code>WHICH.DATA</code> can be used to specify which model should be used. If <code>WHICH.DATA</code> is not given, <code>cmx</code> will use predictions from the first model by default.
</p>
<p>When calculating the confusion matrix, any plot with a predicted probability greater than <code>threshold</code> is considered to be predicted <code>Present</code>, while any plot with a predicted probability less than or equal to <code>threshold</code> is considered to be predicted <code>Absent</code>. The only exception is when <code>threshold</code> equals zero. In that case, all plots are considered to be predicted <code>Present</code>.
</p>
<p>Unlike other functions in this library, <code>threshold</code> can not be a vector or an integer greater than one. Instead, <code>threshold</code> must be given as a single number between zero and one.
</p>
<p>If <code>na.rm</code> equals <code>FALSE</code> and <code>NA</code>'s are present in the <code>DATA</code> function will return <code>NA</code>.
</p>
<p>If <code>na.rm</code> equals <code>TRUE</code> and <code>NA</code>'s are present in the <code>DATA</code>, function will remove all rows where any of the values in the row consist of <code>NA</code>. Function will also print the number of rows that have been removed. 
</p>


<h3>Value</h3>

<p>the confusion matrix is returned in the form of a table where:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p>observed values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows</code></td>
<td>
<p>predicted values</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p> Elizabeth Freeman <a href="mailto:eafreeman@fs.fed.us">eafreeman@fs.fed.us</a> </p>


<h3>See Also</h3>

<p><code>pcc</code>, <code>sensitivity</code>, <code>specificity</code>, <code>Kappa</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
### EXAMPLE 1 ###
     ### generate simulated data ###
     set.seed(666)
     N=1000
     SIMDATA&lt;-matrix(0,N,3)
     SIMDATA&lt;-as.data.frame(SIMDATA)
     names(SIMDATA)&lt;-c("plotID","Observed","Predicted")
     SIMDATA$plotID&lt;-1:N
     SIMDATA$Observed&lt;-rbinom(n=N,size=1,prob=.2)
     SIMDATA$Predicted[SIMDATA$Observed==1]&lt;-rnorm(n=length(SIMDATA$Observed[SIMDATA$Observed==1]),
                                                   mean=.8,sd=.15)
     SIMDATA$Predicted[SIMDATA$Observed==0]&lt;-rnorm(n=length(SIMDATA$Observed[SIMDATA$Observed==0]),
                                                   mean=.2,sd=.15)
     SIMDATA$Predicted&lt;-(SIMDATA$Predicted-min(SIMDATA$Predicted))/
                           (max(SIMDATA$Predicted)-min(SIMDATA$Predicted))

     ### plot simulated data
     hist(SIMDATA$Predicted,100)

     ### calculate confusion matrix ###
     cmx(SIMDATA)

### EXAMPLE 2 ###

     data(SIM3DATA)

     cmx(SIM3DATA)
     cmx(SIM3DATA,which.model=2)
     cmx(SIM3DATA,which.model=3,threshold=.2)

</code></pre>


</div>
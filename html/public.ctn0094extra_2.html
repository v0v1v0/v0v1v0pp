<div class="container">

<table style="width: 100%;"><tr>
<td>CreateHistory</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a Subject History Table</h2>

<h3>Description</h3>

<p>Create a Subject History Table
</p>


<h3>Usage</h3>

<pre><code class="language-R">CreateHistory(
  rawData_ls,
  personsTable = "everybody",
  firstDay_int = NULL,
  lastDay_int = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rawData_ls</code></td>
<td>
<p>a list of tibbles returned by <code>loadRawData</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>personsTable</code></td>
<td>
<p>What is the name of the data table that contains all the
subject IDs? Defaults to <code>"everybody"</code>. If no such table exists, then
set this value to <code>"none"</code> and the unique subject IDs will be drawn
from all tables in <code>rawData_ls</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>firstDay_int</code></td>
<td>
<p>(OPTIONAL) What should be the first "day" counter for all
subjects? This may be beneficial to set if you wish to have the History
ignore all days before a certain point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lastDay_int</code></td>
<td>
<p>(OPTIONAL) What should be the last "day" counter for all
subjects?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>We may want to perform SQL-like operations on a set of tables. This
data table will form the "backbone" for future join operations. It creates
one record per person for each day in the study. The default behavior is
to set the date range to the smallest observed value for "when" across all
data tables to the largest observed value for "when" across all tables,
inclusive. Necessarily, this is <em>very</em> sensitive to outliers or
coding errors (for instance, if one subject has a "first day" 200 days
before Study Day 0, then this History table will include days -200 to -1
for ALL subjects, regardless of any recorded contact in this period).
</p>
<p>If this behavior is not desirable, you must specify a study range. For
example, you may have a short recruitment period followed by a 6-month
clinical trial. In this instance, you may want to ignore any data more
than 30 days prior to Study Day 0 for each subject or more than a few
weeks after the end of the trial. Thus, you would set
<code>firstDay_int = -30L</code> and <code>lastDay_int = 6 * 30 + 14</code>.
</p>


<h3>Value</h3>

<p>A tibble with columns <code>who</code> and <code>when</code>. Each subject will
have one row for each day in the study range.
</p>


<h3>Examples</h3>

<pre><code class="language-R">   data_ls &lt;- loadRawData(c("tlfb", "all_drugs", "everybody"))
   CreateHistory(rawData_ls = data_ls, firstDay_int = -30)
</code></pre>


</div>
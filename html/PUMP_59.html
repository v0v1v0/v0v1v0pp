<div class="container">

<table style="width: 100%;"><tr>
<td>pump_mdes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the minimum detectable effect size (MDES) (core function)</h2>

<h3>Description</h3>

<p>The user chooses the context (d_m), MTP,
power definition, and choices of all relevant design parameters.
</p>
<p>The functions performs a search algorithm,
and returns the MDES value within the specified tolerance.
For a list of choices for specific parameters, see pump_info().
</p>


<h3>Usage</h3>

<pre><code class="language-R">pump_mdes(
  d_m,
  MTP = NULL,
  numZero = NULL,
  propZero = NULL,
  M = 1,
  nbar,
  J = 1,
  K = 1,
  Tbar,
  alpha = 0.05,
  two.tailed = TRUE,
  target.power = 0.8,
  power.definition,
  tol = 0.02,
  numCovar.1 = 0,
  numCovar.2 = 0,
  numCovar.3 = 0,
  R2.1 = 0,
  R2.2 = 0,
  R2.3 = 0,
  ICC.2 = 0,
  ICC.3 = 0,
  omega.2 = 0,
  omega.3 = 0,
  rho = NULL,
  rho.matrix = NULL,
  B = 1000,
  max.steps = 20,
  tnum = 1000,
  start.tnum = round(tnum/10),
  final.tnum = 4 * tnum,
  parallel.WY.cores = 1,
  updateProgress = NULL,
  give.optimizer.warnings = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d_m</code></td>
<td>
<p>string; a single context, which is a design and model
code. See pump_info() for list of choices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MTP</code></td>
<td>
<p>string, or vector of strings; multiple testing
procedure(s). See pump_info() for list of choices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numZero</code></td>
<td>
<p>scalar; additional number of outcomes assumed to be
zero. Please provide NumZero + length(MDES) = M, if length(MDES)
is not 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>propZero</code></td>
<td>
<p>scalar; proportion of outcomes assumed to be zero
(alternative specification to numZero).  length(MDES) should be 1
or equal to (1-propZero)*M.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>scalar; the number of hypothesis tests (outcomes),
including zero outcomes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbar</code></td>
<td>
<p>scalar; the harmonic mean of the number of level 1
units per level 2 unit (students per school). Note that this is
not the total number of level 1 units, but instead the number of
level 1 units nested within each level 2 unit, so the total
number of level 1 units is nbar x J x K.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>J</code></td>
<td>
<p>scalar; the harmonic mean of number of level 2 units per
level 3 unit (schools per district). Note that this is not the
total number of level 2 units, but instead the number of level 2
units nested within each level 3 unit, so the total number of
level 2 units is J x K.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>scalar; the number of level 3 units (districts).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Tbar</code></td>
<td>
<p>scalar; the proportion of samples that are assigned to
the treatment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>scalar; the family wise error rate (FWER).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>two.tailed</code></td>
<td>
<p>scalar; TRUE/FALSE for two-tailed or one-tailed
power calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target.power</code></td>
<td>
<p>target power for search algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power.definition</code></td>
<td>
<p>see pump_info() for
possible power definitions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>tolerance for target power, defaults to 0.01 (1
This parameter controls when the search is done:
when estimated power (checked with 'final.tnum' iterations)
is within 'tol', the search stops.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numCovar.1</code></td>
<td>
<p>scalar; number of level 1 (individual)
covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numCovar.2</code></td>
<td>
<p>scalar; number of level 2 (school) covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numCovar.3</code></td>
<td>
<p>scalar; number of level 3 (district) covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R2.1</code></td>
<td>
<p>scalar, or vector of length M; percent of variation
explained by level 1 covariates for each outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R2.2</code></td>
<td>
<p>scalar, or vector of length M; percent of variation
explained by level 2 covariates for each outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R2.3</code></td>
<td>
<p>scalar, or vector of length M; percent of variation
explained by level 3 covariates for each outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICC.2</code></td>
<td>
<p>scalar, or vector of length M; level 2 (school)
intraclass correlation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICC.3</code></td>
<td>
<p>scalar, or vector length M; level 3 (district)
intraclass correlation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omega.2</code></td>
<td>
<p>scalar, or vector of length M; ratio of variance of
level 2 average impacts to variance of level 2 random intercepts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omega.3</code></td>
<td>
<p>scalar, or vector of length M; ratio of variance of
level 3 average impacts to variance of level 3 random intercepts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>scalar; assumed correlation between all pairs of test
statistics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho.matrix</code></td>
<td>
<p>matrix; alternate specification allowing a full
matrix of correlations between test statistics. Must specify
either rho or rho.matrix, but not both.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>scalar; the number of permutations for Westfall-Young
procedures.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.steps</code></td>
<td>
<p>how many steps allowed before terminating.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tnum</code></td>
<td>
<p>max number of samples for first iteration
of search algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start.tnum</code></td>
<td>
<p>number of samples to start search
(this will increase with each step).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>final.tnum</code></td>
<td>
<p>number of samples for final draw.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel.WY.cores</code></td>
<td>
<p>number of cores to use for parallel
processing of WY-SD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>updateProgress</code></td>
<td>
<p>function to update progress bar (only used
for PUMP shiny app).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>give.optimizer.warnings</code></td>
<td>
<p>whether to return
verbose optimizer warnings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE/FALSE; Print out diagnostics of time, etc.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a pumpresult object containing MDES results.
</p>


<h3>See Also</h3>

<p>For more detailed information about this function
and the user choices,
see the manuscript &lt;doi:10.18637/jss.v108.i06&gt;,
which includes a detailed Technical Appendix
including information about the designs and models
and parameters.
</p>


<h3>Examples</h3>

<pre><code class="language-R">mdes &lt;-  pump_mdes(
  d_m = "d3.1_m3rr2rr",
  MTP = 'HO',
  power.definition = 'D1indiv',
  target.power = 0.6,
  J = 30,
  K = 15,
  nbar = 50,
  M = 3,
  Tbar = 0.5, alpha = 0.05,
  two.tailed = FALSE,
  numCovar.1 = 1, numCovar.2 = 1,
  R2.1 = 0.1, R2.2 = 0.1,
  ICC.2 = 0.2, ICC.3 = 0.2,
  omega.2 = 0.1, omega.3 = 0.1,
  rho = 0.5, tnum = 2000)
</code></pre>


</div>
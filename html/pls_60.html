<div class="container">

<table style="width: 100%;"><tr>
<td>coef.mvr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract Information From a Fitted PLSR or PCR Model</h2>

<h3>Description</h3>

<p>Functions to extract information from <code>mvr</code> objects: Regression
coefficients, fitted values, residuals, the model frame, the model matrix,
names of the variables and components, and the <code class="reqn">X</code> variance explained by
the components.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'mvr'
coef(object, ncomp = object$ncomp, comps, intercept = FALSE, ...)

## S3 method for class 'mvr'
fitted(object, ...)

## S3 method for class 'mvr'
residuals(object, ...)

## S3 method for class 'mvr'
model.frame(formula, ...)

## S3 method for class 'mvr'
model.matrix(object, ...)

respnames(object)

prednames(object, intercept = FALSE)

compnames(object, comps, explvar = FALSE, ...)

explvar(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object, formula</code></td>
<td>
<p>an <code>mvr</code> object.  The fitted model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncomp, comps</code></td>
<td>
<p>vector of positive integers.  The components to include
in the coefficients or to extract the names of.  See below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intercept</code></td>
<td>
<p>logical.  Whether coefficients for the intercept should be
included.  Ignored if <code>comps</code> is specified.  Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments sent to underlying functions.  Currently only
used for <code>model.frame.mvr</code> and <code>model.matrix.mvr</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>explvar</code></td>
<td>
<p>logical.  Whether the explained <code class="reqn">X</code> variance should be
appended to the component names.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are mostly used inside other functions.  (Functions
<code>coef.mvr</code>, <code>fitted.mvr</code> and <code>residuals.mvr</code> are usually
called through their generic functions <code>coef</code>,
<code>fitted</code> and <code>residuals</code>, respectively.)
</p>
<p><code>coef.mvr</code> is used to extract the regression coefficients of a model,
i.e. the <code class="reqn">B</code> in <code class="reqn">y = XB</code> (for the <code class="reqn">Q</code> in <code class="reqn">y = TQ</code> where
<code class="reqn">T</code> is the scores, see <code>Yloadings</code>).  An array of dimension
<code>c(nxvar, nyvar, length(ncomp))</code> or <code>c(nxvar, nyvar,
length(comps))</code> is returned.
</p>
<p>If <code>comps</code> is missing (or is <code>NULL</code>), <code>coef()[,,ncomp[i]]</code>
are the coefficients for models with <code>ncomp[i]</code> components, for <code class="reqn">i
= 1, \ldots, length(ncomp)</code>.  Also, if <code>intercept = TRUE</code>, the first
dimension is <code class="reqn">nxvar + 1</code>, with the intercept coefficients as the first
row.
</p>
<p>If <code>comps</code> is given, however, <code>coef()[,,comps[i]]</code> are the
coefficients for a model with only the component <code>comps[i]</code>, i.e. the
contribution of the component <code>comps[i]</code> on the regression
coefficients.
</p>
<p><code>fitted.mvr</code> and <code>residuals.mvr</code> return the fitted values and
residuals, respectively.  If the model was fitted with <code>na.action =
na.exclude</code> (or after setting the default <code>na.action</code> to
<code>"na.exclude"</code> with <code>options</code>), the fitted values (or
residuals) corresponding to excluded observations are returned as <code>NA</code>;
otherwise, they are omitted.
</p>
<p><code>model.frame.mvr</code> returns the model frame; i.e. a data frame with all
variables neccessary to generate the model matrix.  See
<code>model.frame</code> for details.
</p>
<p><code>model.matrix.mvr</code> returns the (possibly coded) matrix used as <code class="reqn">X</code>
in the fitting.  See <code>model.matrix</code> for details.
</p>
<p><code>prednames</code>, <code>respnames</code> and <code>compnames</code> extract the names of
the <code class="reqn">X</code> variables, responses and components, respectively.  With
<code>intercept = TRUE</code> in <code>prednames</code>, the name of the intercept
variable (i.e. <code>"(Intercept)"</code>) is returned as well.  <code>compnames</code>
can also extract component names from score and loading matrices.  If
<code>explvar = TRUE</code> in <code>compnames</code>, the explained variance for each
component (if available) is appended to the component names.  For optimal
formatting of the explained variances when not all components are to be
used, one should specify the desired components with the argument
<code>comps</code>.
</p>
<p><code>explvar</code> extracts the amount of <code class="reqn">X</code> variance (in per cent)
explained by each component in the model.  It can also handle score and
loading matrices returned by <code>scores</code> and
<code>loadings</code>.
</p>


<h3>Value</h3>

<p><code>coef.mvr</code> returns an array of regression coefficients.
</p>
<p><code>fitted.mvr</code> returns an array with fitted values.
</p>
<p><code>residuals.mvr</code> returns an array with residuals.
</p>
<p><code>model.frame.mvr</code> returns a data frame.
</p>
<p><code>model.matrix.mvr</code> returns the <code class="reqn">X</code> matrix.
</p>
<p><code>prednames</code>, <code>respnames</code> and <code>compnames</code> return a character
vector with the corresponding names.
</p>
<p><code>explvar</code> returns a numeric vector with the explained variances, or
<code>NULL</code> if not available.
</p>


<h3>Author(s)</h3>

<p>Ron Wehrens and Bj√∏rn-Helge Mevik
</p>


<h3>See Also</h3>

<p><code>mvr</code>, <code>coef</code>, <code>fitted</code>,
<code>residuals</code>, <code>model.frame</code>,
<code>model.matrix</code>, <code>na.omit</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(yarn)
mod &lt;- pcr(density ~ NIR, data = yarn[yarn$train,], ncomp = 5)
B &lt;- coef(mod, ncomp = 3, intercept = TRUE)
## A manual predict method:
stopifnot(drop(B[1,,] + yarn$NIR[!yarn$train,] %*% B[-1,,]) ==
          drop(predict(mod, ncomp = 3, newdata = yarn[!yarn$train,])))

## Note the difference in formatting:
mod2 &lt;- pcr(density ~ NIR, data = yarn[yarn$train,])
compnames(mod2, explvar = TRUE)[1:3]
compnames(mod2, comps = 1:3, explvar = TRUE)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>aria2c_bulk_donwload</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bulk download of files using 'aria2c'</h2>

<h3>Description</h3>

<p>Bulk download of files using 'aria2c'
</p>


<h3>Usage</h3>

<pre><code class="language-R">aria2c_bulk_donwload(
  vector_or_file_path,
  default_directory,
  user = NULL,
  password = NULL,
  threads = 1,
  verbose = FALSE,
  secondary_args_aria = "--allow-overwrite --retry-wait=5 --max-tries=0"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>vector_or_file_path</code></td>
<td>
<p>either a vector of character strings or a valid path to a text file. See the output of the 'aria2c_download_paths()' function for the correct format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default_directory</code></td>
<td>
<p>a character string specifying a valid path where the files will be saved</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user</code></td>
<td>
<p>either NULL or a character string specifying the 'user' (normally this is the 'username' required in specific websites to have access and download files)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>password</code></td>
<td>
<p>either NULL or a character string specifying the 'password' (normally this is the 'password' required in specific websites to have access and download files)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threads</code></td>
<td>
<p>an integer value specifying the number of threads to run in parallel</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a boolean. If TRUE then information will be printed out in the console</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secondary_args_aria</code></td>
<td>
<p>a character vector specifying the additional parameters that can be passed to the 'aria2c' function. For instance, "–retry-wait": specifies the seconds to wait between retries and "–max-tries=0" means unlimited re-tries. See the References section for more details.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a character vector based on the verbosity of the function
</p>


<h3>References</h3>

<p>https://aria2.github.io/manual/en/html/aria2c.html
</p>
<p>https://aria2.github.io/manual/en/html/aria2c.html#cmdoption-retry-wait
</p>
<p>https://aria2.github.io/manual/en/html/aria2c.html#cmdoption-m
</p>
<p>https://aria2.github.io/manual/en/html/aria2c.html#exit-status
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

require(PlanetNICFI)

#....................................
# first extract the available Mosaics
#....................................

api_key = 'use_your_planet_nicfi_API_key'

mosaic_files = nicfi_mosaics(planet_api_key = api_key,
                             type = 'monthly',
                             crs_bbox = 4326,
                             URL = 'https://api.planet.com/basemaps/v1/mosaics',
                             verbose = TRUE)

#....................................
# keep the mosaic of 'September 2020'
#....................................

keep_idx = 1
mosaic_ID = mosaic_files$dtbl_mosaic$id[keep_idx]


#................................................................
# then extract the available Quad files for the Mosaic for an AOI
#................................................................

wkt_file = system.file('data_files/Sugar_Cane_Bolivia.wkt', package = "PlanetNICFI")
WKT = readLines(wkt_file, warn = FALSE)

quad_files = nicfi_quads_bbox(planet_api_key = api_key,
                              mosaic_id = mosaic_ID,
                              bbox_AOI = NULL,
                              wkt_AOI = WKT,
                              page_size = 10,
                              crs_bbox = 4326,
                              verbose = TRUE)

#..................................
# formated aria2c download weblinks
#..................................

web_links_aria2c = aria2c_download_paths(mosaic_output = mosaic_files,
                                         mosaic_id = mosaic_ID,
                                         quads_output = quad_files,
                                         img_type = 'tif')

#.........................................................
# download the .tif files that intersect with the bbox AOI
#.........................................................

temp_dir_out = tempdir()

all_threads = parallel::detectCores()
set_threads = length(web_links_aria2c) / 2
num_threads = ifelse(set_threads &lt; all_threads, set_threads, all_threads)
aria_args = '--allow-overwrite --file-allocation=none --retry-wait=5 --max-tries=0'

res_downl = aria2c_bulk_donwload(vector_or_file_path = web_links_aria2c,
                                 default_directory = temp_dir_out,
                                 user = NULL,
                                 password = NULL,
                                 threads = num_threads,
                                 verbose = TRUE,
                                 secondary_args_aria = aria_args)

## End(Not run)
</code></pre>


</div>
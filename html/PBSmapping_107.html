<div class="container">

<table style="width: 100%;"><tr>
<td>placeHoles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Place Holes Under Solids
</h2>

<h3>Description</h3>

<p>Place secondary polygons identified as holes (inner contours)
under primary polygons identified as solids (outer contours)
if the vertices of the holes lie completely within the vertices of the solids. 
This operation is performed for each primary polygon until all holes
have been assigned.
</p>


<h3>Usage</h3>

<pre><code class="language-R">placeHoles(polyset, minVerts=3, 
   orient=FALSE, show.progress=FALSE, unique.pid=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>polyset</code></td>
<td>
<p>a valid <span class="pkg">PBSmapping</span> PolySet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minVerts</code></td>
<td>
<p><code>numeric</code> – minimum number of vertices required for a polygon 
representing a hole to be retained (does not affect solids).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>orient</code></td>
<td>
<p><code>logical</code> – if <code>TRUE</code>, use each polygon's rotation 
to determine its nature: clockwise = solid (outer contour), counter-clockwise =
hole (inner contour).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.progress</code></td>
<td>
<p><code>logical</code> – if <code>TRUE</code>, display on the 
command console the progress of placing holes under solids.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unique.pid</code></td>
<td>
<p><code>logical</code> – if <code>TRUE</code>, ignore the input PIDs
and redefine them from 1 to the number of solids; this inherently destroys
the previous organisation that a creator may have intended for the PolySet.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The algorithm identifies outer contours (solids) and inner contours (holes)
using either the default PBSmapping method (solids = increasing <code>"POS"</code>,
holes = decreasing <code>"POS"</code>) or the rotational direction of the polygons
(solids = clockwise, holes = counter-clockwise).
</p>
<p>It then systematically starts matching holes with solids based on their vertices 
being completely within the boundaries of the solid.
If a hole happens to match a current solid completley (all vertices on the boundary),
then the hole is not matched to this solid because it is a hole in another solid
that creates space for the current solid.
</p>
<p>To facilitate computation, the algorithm assumes that once a 
hole is located in a solid, it will not occur in any other solid.
This means that for each successive solid, the number of 
candidate holes will either decrease or stay the same.
</p>
<p>This function makes use of the PBSmapping hidden function <code>".is.in"</code>
which uses the C code <code>"findPolys"</code>. The latter only returns events found
in a polygon (or on the boundary) but <code>.is.in</code> evaluates all events and 
returns a list containing:<br><code>"e.in"</code> – events within the polygon,<br><code>"e.out"</code> – events outside the polygon,<br><code>"all.in"</code> – logical value of whether all events are in the polygon,<br><code>"all.out"</code> – logical value of whether all events are outside the polygon,<br><code>"all.bdry"</code> – logical value of whether all events occur on the boundary of the polygon
</p>


<h3>Value</h3>

<p>Returns the input PolySet where holes have been arranged 
beneath appropriate solids for each <code>PID</code> (original or redefined).
</p>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head – Offshore Rockfish<br>
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br><em>locus opus</em>: Offsite, Vancouver BC<br>
Last modified <code>Rd: 2023-10-30</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmapping</span>:<br><code>findPolys</code>, 
<code>is.PolySet</code>,
<code>dot-is.in</code>
</p>


</div>
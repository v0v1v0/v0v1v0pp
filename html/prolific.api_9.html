<div class="container">

<table style="width: 100%;"><tr>
<td>api_access</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prolific API access</h2>

<h3>Description</h3>

<p>This class provides functionalities for accessing the <a href="https://docs.prolific.co/docs/api-docs/public/">Prolific API</a>.
The core method for this purpose is <code>access</code>, which can be used
to create, review, change, manage and delete studies on the Prolific platform.<br><em>The fields and methods are available as in RefClass or S4 objects (see examples).</em>
</p>


<h3>Fields</h3>


<dl>
<dt><code>accessors</code></dt>
<dd>
<p>(<code>character</code>):<br>
The commands for accessing the API.
The command for each type of access method can be altered using this field.
The default is
</p>
<pre>
     accessors = c(
        get    = "curl",
        post   = "curl -X POST",
        put    = "curl -X PUT",
        patch  = "curl -X PATCH",
        delete = "curl -X DELETE"
     )
</pre>
<p><strong>Note:</strong> <em>A value for each of the names <code>(get, post, put, patch and delete)</code> is required, as these represent the methods that can be used when accessing the API.</em></p>
</dd>
<dt><code>api_token</code></dt>
<dd>
<p>(<code>character</code>):<br>
The <a href="https://docs.prolific.co/docs/api-docs/public/#section/Authentication">Prolific API token</a>.</p>
</dd>
<dt><code>entrypoint</code></dt>
<dd>
<p>(<code>character</code>):<br>
The <a href="https://docs.prolific.co/docs/api-docs/public/#section/Get-started/Conventions">API's entrypoint URL</a>.</p>
</dd>
</dl>
<h3>Methods</h3>



<h4><code>access</code></h4>

<p>Main method for accessing the <a href="https://docs.prolific.co/docs/api-docs/public/">Prolific API</a>
</p>


<h5><strong>Parameters</strong></h5>


<dl>
<dt><code>endpoint</code></dt>
<dd>
<p>(<code>character</code>):</p>
</dd>
</dl>
<p><br>
The endpoint to access. If this is a vector, its elements are collapsed by <code>'/'</code>.
</p>
<dl>
<dt><code>method</code></dt>
<dd>
<p>(<code>character</code>):</p>
</dd>
</dl>
<p><br>
The method to use. One of <code>get, post, place, patch and delete</code>.
The commands associated with each method are defined in the <code>accessors</code> field of the <code>api_access</code> object.
</p>
<dl>
<dt><code>data</code></dt>
<dd>
<p>(<code>json string</code>, <code>json file</code>, <code>list</code>, <code>prolific_study object</code> or <code>NULL</code>)</p>
</dd>
</dl>
<p><br>
The data to be transfered in the body of the <a href="https://docs.prolific.co/docs/api-docs/public/">API</a> call.
R-objects are converted to a <code>json string</code> using <code>jsonlite:toJSON</code> .
<code>NULL</code> means that no data is transfered.
</p>
<dl>
<dt><code>as_list</code></dt>
<dd>
<p>(<code>logical</code>):</p>
</dd>
</dl>
<p><br>
Whether the return of the <a href="https://docs.prolific.co/docs/api-docs/public/">API</a> call should be converted to a list or (if applicable) prolific_study object,
rather than returned as the raw <code>json string</code>.

</p>



<h5><strong>Return Value</strong></h5>

<p>A <code>list</code> or <code>json string</code>, depending on argument <code>as_list</code>.
</p>



<h5><strong>Usage</strong></h5>

<pre>
     api_access$access(
          endpoint,
          method,
          data,
          as_list
     )
</pre>




<h4><code>check_authorization</code></h4>

<p>Check whether the <a href="https://docs.prolific.co/docs/api-docs/public/#section/Authentication">API authorization</a> works
</p>


<h5><strong>Return Value</strong></h5>

<p>A <code>logical</code> value that indicates whether the <a href="https://docs.prolific.co/docs/api-docs/public/#section/Authentication">API authorization</a> works.
</p>



<h5><strong>Usage</strong></h5>

<pre>
     api_access$check_authorization()
</pre>




<h3>Examples</h3>

<pre><code class="language-R">library(prolific.api)

# Create API access
prolific_api_access &lt;- api_access(api_token = "&lt;api_token&gt;")

# View fields
## RefClass Methods
prolific_api_access$accessors
prolific_api_access$api_token
prolific_api_access$entrypoint

## S4 Methods
accessors(prolific_api_access)
api_token(prolific_api_access)
entrypoint(prolific_api_access)

# Change fields
# (this is usually only required for the api_token)
# replace &lt;new_token&gt; in the by the actual API token
# before running these lines
## Not run: 
## RefClass Method
prolific_api_access$api_token &lt;- "&lt;new_token&gt;"
## S4 Method
api_token(prolific_api_access) &lt;- "&lt;new_token&gt;"

## End(Not run)


# Note: For the following code to work,
# you have to replace &lt;new_token&gt; in the lines above by the actual API token
## Not run: 
# Check wheter Authorization is working
## RefClass Method
prolific_api_access$check_authorization()
## S4 Method
check_authorization(prolific_api_access)

# Obtain list of existing studies
## RefClass Method
list_of_studies &lt;-
    prolific_api_access$access(
        endpoint = "studies",
        method = "get",
        as_list = TRUE
    )
## S4 Method
list_of_studies2 &lt;-
    access(
        prolific_api_access,
        endpoint = "studies",
        method = "get",
        as_list = TRUE
    )

## End(Not run)

</code></pre>


</div>
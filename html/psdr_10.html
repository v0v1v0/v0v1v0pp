<div class="container">

<table style="width: 100%;"><tr>
<td>MakeCompositeXYPlotForAllWindows</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find averaged xy plots</h2>

<h3>Description</h3>

<p>If there are multiple 2D plots where the range of the x values are the same,
then this function can allow you to average the y-values for all of these plots.
The increment of the x-values can be different because this function uses interpolation
to ensure each window has the same x-axis when the averaging step occurs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">MakeCompositeXYPlotForAllWindows(
  list.of.windows,
  name.of.col.containing.time.series,
  x_start = 0,
  x_end,
  x_increment
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>list.of.windows</code></td>
<td>
<p>A list of windows (dataframes). Each window should have the same range of values in the x-axis in order for averaging to work.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name.of.col.containing.time.series</code></td>
<td>
<p>A string that specifies the name of the column in the windows that correspond to the time series that should be used for making averaging.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_start</code></td>
<td>
<p>Numeric value specifying start of the new x-axis for the averaged PSD. Default is 0, so the first observation in the time series corresponds with x = 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_end</code></td>
<td>
<p>Numeric value specifying end of the new x-axis for the averaged PSD. Maximum value is the sampling_frequency divided by 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_increment</code></td>
<td>
<p>Numeric value specifying increment of the new x-axis for the averaged PSD.</p>
</td>
</tr>
</table>
<h3>Value</h3>


<ol>
<li>
<p> Vector of x values for plotting. The units will be number of observations. So if the time series has 100 observations and x_increment used is 1, then each tick mark on the x-axis corresponds to one observation unit.
</p>
</li>
<li>
<p> Vector of averaged y values after looking at all windows.
</p>
</li>
<li>
<p> Vector of standard deviation of y values for each x value.
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">#Create a vector of time that represent times where data are sampled.
Fs = 100; #sampling frequency in Hz
T = 1/Fs; #sampling period
L = 1000; #length of time vector
t = (0:(L-1))*T; #time vector

#First signal
#1. 1 Hz with amplitude of 4
S1 &lt;- 4*sin(2*pi*1*t)
S1.data.frame &lt;- as.data.frame(cbind(t, S1))
colnames(S1.data.frame) &lt;- c("Time", "Signal")

#Second signal
#1. 1 Hz with amplitude of -2
#2. 2 Hz with amplitude of -2
S2 &lt;- (-2)*sin(2*pi*1*t) - 2*sin(2*pi*2*t);
S2.data.frame &lt;- as.data.frame(cbind(t, S2))
colnames(S2.data.frame) &lt;- c("Time", "Signal")

#Third signal
#1. 1 Hz with amplitude of 2
#2. 2 Hz with amplitude of 2
S3 &lt;- 2*sin(2*pi*1*t) + 2*sin(2*pi*2*t);
S3.data.frame &lt;- as.data.frame(cbind(t, S3))
colnames(S3.data.frame) &lt;- c("Time", "Signal")

#Add all signals to a List
list.of.windows &lt;- list(S1.data.frame, S2.data.frame, S3.data.frame)

results &lt;- MakeCompositeXYPlotForAllWindows(list.of.windows, "Signal", 0, 999, 1)

x.values &lt;- results[[1]]

y.values &lt;- results[[2]]

stddev.y.values &lt;- results[[3]]

#plot each xy plot individually
#dev.new()
plot(t, S1, ylim = c(-5, 5), type = "l")
lines(t, S2, col="blue")
lines(t, S3, col="green")


#plot the averaged plot
#The only curve remaining should be the 1Hz with amplitude of 4/3.
#dev.new()
plot(x.values, y.values, type = "l")

#plot averaged plot with error bars
#dev.new()
plot(x.values, y.values, type = "l")
#Add error bars
arrows(x.values, y.values, x.values, y.values + stddev.y.values, length=0.05, angle=90)
arrows(x.values, y.values, x.values, y.values - stddev.y.values, length=0.05, angle=90)


</code></pre>


</div>
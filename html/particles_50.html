<div class="container">

<table style="width: 100%;"><tr>
<td>simulate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Start a simulation based on a graph</h2>

<h3>Description</h3>

<p>This function initiates a simulation based on the provided graph and
parameters. Any graph structure with a <code>tidygraph::as_tbl_graph()</code> method
is supported as input. This function does not start the simulation but merely
sets it up.
</p>


<h3>Usage</h3>

<pre><code class="language-R">simulate(
  graph,
  alpha = 1,
  alpha_min = 0.001,
  alpha_decay = 1 - alpha_min^(1/300),
  alpha_target = 0,
  velocity_decay = 0.4,
  setup = phyllotactic_genesis(),
  ...
)

is.simulation(x)

record(simulation, ...)

clear_history(simulation)

get_history(simulation, age = -1)

history_length(simulation)

reheat(simulation, alpha)

particles(simulation)

position(simulation)

velocity(simulation)

evolutions(simulation)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>graph</code></td>
<td>
<p>A graph in a format supported by tidygraph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The starting alpha value. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_min</code></td>
<td>
<p>The minimum alpha value after which the simulation is
terminated. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_decay</code></td>
<td>
<p>The speed at which the alpha value decreases. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_target</code></td>
<td>
<p>The alpha value that alpha drifts towards. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>velocity_decay</code></td>
<td>
<p>The dampening factor of the system. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setup</code></td>
<td>
<p>A function that takes the particle graph and returns a start
position and velocity to each particle. <code>particles</code> provides a range of
genesis functions to choose from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters for the simulation (currently ignored)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x, simulation</code></td>
<td>
<p>A simulation object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>The version to retrieve. Positive numbers count from the
beginning, while negative numbers counts backwards from current version.
Defaults to <code>-1</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A simulation in the context of the particles package is a series of
equidistant steps where the velocity and position of each particle is
updated. A few global rules applies to this cycle irrespectively of the
forces added to the simulation. Once a simulation is initiated an <code>alpha</code>
value is defined (defaults to <code>1</code>). At each step this alpha value is
decreased according to its distance to the <code>alpha_target</code> (defaults to <code>0</code>)
and <code>alpha_decay</code> (defaults to ~<code>0.023</code>). Once the alpha value gets below
<code>alpha_min</code> (defaults to <code>0.001</code>) the simulation seizes to take additional
steps. The default values is adapted from the d3-force implementation and
corresponds to 300 steps. Conceptually the <code>alpha</code> progression can be seen
as a cooling off of the system as the value decreases quickly in the
beginning and then slowly reach the target value. If it is not intended to
have a system that cools off, simply set the <code>alpha_target</code> value to the same
as <code>alpha</code>. At each step, after the new particle velocities has been
calculated but before they have been applied to the positions, a dampening
factor (<code>velocity_decay</code>) is applied in order to simulate the gradual loss
of momentum. If this is not intended for the simulation, simply set the value
to <code>0</code>.
</p>


<h3>Value</h3>

<p>A simulation object
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>record()</code>: Save the current state in the simulation's history
</p>
</li>
<li> <p><code>clear_history()</code>: Clear the current history from the simulation
</p>
</li>
<li> <p><code>get_history()</code>: Retrieve a simulation from the history
</p>
</li>
<li> <p><code>history_length()</code>: Get the number of versions stored in the history of the simulation
</p>
</li>
<li> <p><code>reheat()</code>: set the cooling of the simulation to a new value
</p>
</li>
<li> <p><code>particles()</code>: Extract the particle graph from a simulation
</p>
</li>
<li> <p><code>position()</code>: Extract the position coordinates from a simulation
</p>
</li>
<li> <p><code>velocity()</code>: Extract the velocity verlets from a simulation
</p>
</li>
<li> <p><code>evolutions()</code>: Get the number of generations the simulation has undergone
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">graph &lt;- tidygraph::create_notable('folkman')
graph |&gt;
  simulate()

</code></pre>


</div>
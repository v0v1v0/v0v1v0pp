<div class="container">

<table style="width: 100%;"><tr>
<td>prnsamplr-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Permanent Random Number Sampling
</h2>

<h3>Description</h3>

<p>Survey sampling using permanent random numbers (PRN's). A solution to the
    problem of unknown overlap between survey samples, which leads to a low
    precision in estimates when the survey is repeated or combined with other
    surveys. The PRN solution is to supply the U(0, 1) random numbers to the 
    sampling procedure, instead of having the sampling procedure generate them.
    In Lindblom (2014) &lt;doi:10.2478/jos-2014-0047&gt;, and therein cited articles,
    it is shown how this is carried out and how it improves the estimates. This
    package supports two common fixed-size sampling procedures (simple random 
    sampling and probability-proportional-to-size sampling) and includes a 
    function for transforming the PRN's in order to control the sample overlap.
</p>


<h3>Details</h3>

<p>This package provides two functions for drawing stratified PRN-assisted samples: <code>srs</code> and <code>pps</code>. The former – simple random sampling – assumes that each unit <code class="reqn">k</code> in a given stratum <code class="reqn">h</code> is equally likely to be sampled, with inclusion probability </p>
<p style="text-align: center;"><code class="reqn">\pi_k = \frac{n_h}{N_h}</code>
</p>
<p> for each stratum <code class="reqn">h</code>. The function then samples the <code class="reqn">n_h</code> elements with the smallest PRN's, for each stratum <code class="reqn">h</code>.
</p>
<p>The latter – Pareto <code class="reqn">\pi ps</code> sampling – assumes that large units are more likely to be sampled than small units. The function approximates this unknown inclusion probability as </p>
<p style="text-align: center;"><code class="reqn">\lambda_k = n_h \frac{x_k}{\sum_{i=1}^{n_h} x_i},</code>
</p>
<p> where <code class="reqn">x_k</code> is a size measure, and samples the <code class="reqn">n_h</code> elements with the smallest values of </p>
<p style="text-align: center;"><code class="reqn">Q_k = \frac{PRN_k(1 - \lambda_k)}{\lambda_k(1 - PRN_k)},</code>
</p>
<p> for each stratum <code class="reqn">h</code>.
</p>
<p>These two functions can be run standalone or via the wrapper function <code>samp</code>. Input to the functions is the sampling frame, stratification information and PRN's given as variables on the frame, and in the case for <code>pps</code> also a size measure given as variable on the frame. Output is a copy of the sampling frame containing sampling information, and in the case for <code>pps</code> also containing <code class="reqn">\lambda</code> and <code class="reqn">Q</code>.
</p>
<p>Provided is also a function <code>transformprn</code> via which it is possible to select where to start counting and in which direction when enumerating the PRN's in the sampling routines. This is done by specifying start and direction to <code>transformprn</code> and then calling <code>srs</code> or <code>pps</code> on its output.
</p>
<p>Finally, an example dataset is provided that can be used to illustrate the functionality of the package.
</p>


<h3>Author(s)</h3>

<p>Kira Coder Gylling
</p>
<p>Maintainer: Kira Coder Gylling &lt;kira.gylling@gmail.com&gt;
</p>


<h3>References</h3>

<p>Lindblom, A. (2014). "On Precision in Estimates of Change over Time where Samples are Positively Coordinated by Permanent Random Numbers." <em>Journal of Official Statistics</em>, vol.30, no.4, 2014, pp.773-785. https://doi.org/10.2478/jos-2014-0047.
</p>


<h3>See Also</h3>

<p><code>srs</code>,
<code>pps</code>,
<code>samp</code>,
<code>transformprn</code>,
<code>ExampleData</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">dfSRS &lt;- srs(df=ExampleData, 
             nsamp="nsample", 
             stratid="stratum", 
             prn="rands")

dfPPS &lt;- pps(df=ExampleData, 
             nsamp="nsample", 
             stratid="stratum", 
             prn="rands", 
             size="sizeM")

dfPRN &lt;- transformprn(df=ExampleData, 
                      prn="rands", 
                      direction="U", 
                      start=0.2)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>context-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Context class.</h2>

<h3>Description</h3>

<p>Class to organize information of context analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'context'
length(x)

## S4 method for signature 'context'
p_attributes(.Object)

## S4 method for signature 'context'
count(.Object)

## S4 method for signature 'context'
sample(x, size)

## S4 method for signature 'context'
enrich(
  .Object,
  s_attribute = NULL,
  p_attribute = NULL,
  decode = FALSE,
  stat = FALSE,
  verbose = TRUE,
  ...
)

## S4 method for signature 'context'
as.regions(x, node = TRUE)

## S4 method for signature 'context'
trim(
  .Object,
  s_attribute = NULL,
  positivelist = NULL,
  p_attribute = p_attributes(.Object),
  regex = FALSE,
  stoplist = NULL,
  fn = NULL,
  verbose = TRUE,
  progress = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>context</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.Object</code></td>
<td>
<p>A <code>context</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>An <code>integer</code> indicating sample size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s_attribute</code></td>
<td>
<p>The s-attribute(s) to add to <code>data.table</code> in slot <code>cpos</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_attribute</code></td>
<td>
<p>The p-attribute(s) to add to <code>data.table</code> in slot <code>cpos</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decode</code></td>
<td>
<p>A <code>logical</code> value, whether to convert integer ids to expressive
strings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p>A <code>logical</code> value, whether to generate / update slot <code>stat</code> from
the <code>cpos</code> table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A <code>logical</code>, whether to be talkative.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>To maintain backwards compatibility if argument <code>pAttribute</code> is
still used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node</code></td>
<td>
<p>A logical value, whether to include the node (i.e. query matches) in the region matrix
generated when creating a <code>partition</code> from a <code>context</code>-object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>positivelist</code></td>
<td>
<p>Tokens that are required to be present to keep a match.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regex</code></td>
<td>
<p>A <code>logical</code> value, whether arguments <code>positivlist</code> / <code>stoplist</code>
are interpreted as regular expressions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stoplist</code></td>
<td>
<p>Tokens that are used to exclude a match.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fn</code></td>
<td>
<p>A function that will be applied on context tables splitted by
match_id.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>A <code>logical</code> value, whether to show progress bar</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Objects of the class <code>context</code> include a <code>data.table</code> in the
slot <code>cpos</code>. The <code>data.table</code> will at least include the columns "match_id",
"cpos" and "position".
</p>
<p>The <code>length</code>-method will return the number of hits that were achieved.
</p>
<p>The <code>enrich()</code>-method can be used to add additional information to
the <code>data.table</code> in the <code>cpos</code>-slot of a <code>context</code>-object.
</p>


<h3>Slots</h3>


<dl>
<dt><code>query</code></dt>
<dd>
<p>The query examined (<code>character</code>).</p>
</dd>
<dt><code>count</code></dt>
<dd>
<p>An <code>integer</code> value, the number of hits for the query.</p>
</dd>
<dt><code>partition</code></dt>
<dd>
<p>The <code>partition</code> the <code>context</code> object is based on.</p>
</dd>
<dt><code>size_partition</code></dt>
<dd>
<p>The size of the partition, a length-one <code>integer</code> vector.</p>
</dd>
<dt><code>left</code></dt>
<dd>
<p>A length-one <code>integer</code> value, the number of tokens to the left of the query match.</p>
</dd>
<dt><code>right</code></dt>
<dd>
<p>An <code>integer</code> value, the number of tokens to the right of the query match.</p>
</dd>
<dt><code>size</code></dt>
<dd>
<p>A length-one <code>integer</code> value, the number of tokens covered by
the <code>context</code>-object, i.e. the number of tokens in the right and left context
of the node as well as query matches.</p>
</dd>
<dt><code>size_match</code></dt>
<dd>
<p>A length-one <code>integer</code> value, the number of tokens
matches by the query. Identical with the value in slot <code>count</code> if the query
is <em>not</em> a CQP query.</p>
</dd>
<dt><code>size_coi</code></dt>
<dd>
<p>A length-one <code>integer</code> value, the number of tokens in the
right and left context of the node (excluding query matches).</p>
</dd>
<dt><code>size_ref</code></dt>
<dd>
<p>A length-one <code>integer</code> value, the number of tokens in the
partition, without tokens matched and the tokens in the left and right
context.</p>
</dd>
<dt><code>boundary</code></dt>
<dd>
<p>An s-attribute (<code>character</code>).</p>
</dd>
<dt><code>p_attribute</code></dt>
<dd>
<p>The p-attribute of the query (<code>character</code>).</p>
</dd>
<dt><code>corpus</code></dt>
<dd>
<p>The CWB corpus used (<code>character</code>).</p>
</dd>
<dt><code>stat</code></dt>
<dd>
<p>A <code>data.table</code>, the statistics of the analysis.</p>
</dd>
<dt><code>encoding</code></dt>
<dd>
<p>Object of class <code>character</code>, encoding of the corpus.</p>
</dd>
<dt><code>cpos</code></dt>
<dd>
<p>A <code>data.table</code>, with the columns match_id, cpos, position, word_id.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p>A <code>character</code>-vector, statistical test used.</p>
</dd>
<dt><code>call</code></dt>
<dd>
<p>Object of class <code>character</code>, call that generated the object.</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R"># Keep matches for 'oil' only if first position to the left is 'crude'
.fn &lt;- function(x) if (x[position == -1L][["word"]] == "crude") x else NULL
crude_oil &lt;- context("REUTERS", "oil") %&gt;%
  enrich(p_attribute = "word", decode = TRUE) %&gt;%
  trim(fn = .fn)
</code></pre>


</div>
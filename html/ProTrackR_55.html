<div class="container">

<table style="width: 100%;"><tr>
<td>modArchive</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>ModArchive helper functions</h2>

<h3>Description</h3>

<p><a href="https://ModArchive.org">https://ModArchive.org</a> is on of the largest online archive of module files. These functions
will assist in accessing this archive.
</p>


<h3>Usage</h3>

<pre><code class="language-R">modArchive.info(mod.id, api.key)

modArchive.download(mod.id, ...)

modArchive.search.mod(
  search.text,
  search.where = c("filename_or_songtitle", "filename_and_songtitle", "filename",
    "songtitle", "module_instruments", "module_comments"),
  format.filter = c("unset", "669", "AHX", "DMF", "HVL", "IT", "MED", "MO3", "MOD",
    "MTM", "OCT", "OKT", "S3M", "STM", "XM"),
  size.filter = c("unset", "0-99", "100-299", "300-599", "600-1025", "1025-2999",
    "3072-6999", "7168-100000"),
  genre.filter = "deprecated",
  page,
  api.key
)

modArchive.request.count(api.key)

modArchive.max.requests(api.key)

modArchive.view.by(
  view.query,
  view.by = c("view_by_list", "view_by_rating_comments", "view_by_rating_reviews",
    "view_modules_by_artistid", "view_modules_by_guessed_artist"),
  format.filter = c("unset", "669", "AHX", "DMF", "HVL", "IT", "MED", "MO3", "MOD",
    "MTM", "OCT", "OKT", "S3M", "STM", "XM"),
  size.filter = c("unset", "0-99", "100-299", "300-599", "600-1025", "1025-2999",
    "3072-6999", "7168-100000"),
  page,
  api.key
)

modArchive.search.genre(
  genre.filter = c("unset", "Alternative", "Gothic", "Grunge", "Metal - Extreme",
    "Metal (general)", "Punk", "Chiptune", "Demo Style", "One Hour Compo", "Chillout",
    "Electronic - Ambient", "Electronic - Breakbeat", "Electronic - Dance",
    "Electronic - Drum and Bass", "Electronic - Gabber", "Electronic - Hardcore",
    "Electronic - House", "Electronic - IDM", "Electronic - Industrial",
    "Electronic - Jungle", "Electronic - Minimal", "Electronic - Other",
    "Electronic - Progressive", "Electronic - Rave", "Electronic - Techno", 
    
    "Electronic (general)", "Trance - Acid", "Trance - Dream", "Trance - Goa",
    "Trance - Hard", "Trance - Progressive", "Trance - Tribal", "Trance (general)",
    "Big Band", "Blues", "Jazz - Acid", "Jazz - Modern", "Jazz (general)", "Swing",
    "Bluegrass", "Classical", "Comedy", "Country", "Experimental", "Fantasy", "Folk",
    "Fusion", "Medieval", "New Ages", "Orchestral", "Other", "Piano", "Religious",
    "Soundtrack", "Spiritual", "Video Game", "Vocal Montage", "World", "Ballad", "Disco",
    "Easy Listening", 
     "Funk", "Pop - Soft", "Pop - Synth", "Pop (general)",
    "Rock - Hard", "Rock - Soft", "Rock (general)", "Christmas", "Halloween", "Hip-Hop",
    "R and B", "Reggae", "Ska", "Soul"),
  format.filter = c("unset", "669", "AHX", "DMF", "HVL", "IT", "MED", "MO3", "MOD",
    "MTM", "OCT", "OKT", "S3M", "STM", "XM"),
  size.filter = c("unset", "0-99", "100-299", "300-599", "600-1025", "1025-2999",
    "3072-6999", "7168-100000"),
  page,
  api.key
)

modArchive.search.artist(search.artist, page, api.key)

modArchive.search.hash(search.hash, api.key)

modArchive.random.pick(
  genre.filter = c("Alternative", "Gothic", "Grunge", "Metal - Extreme",
    "Metal (general)", "Punk", "Chiptune", "Demo Style", "One Hour Compo", "Chillout",
    "Electronic - Ambient", "Electronic - Breakbeat", "Electronic - Dance",
    "Electronic - Drum and Bass", "Electronic - Gabber", "Electronic - Hardcore",
    "Electronic - House", "Electronic - IDM", "Electronic - Industrial",
    "Electronic - Jungle", "Electronic - Minimal", "Electronic - Other",
    "Electronic - Progressive", "Electronic - Rave", "Electronic - Techno",
    "Electronic (general)", 
     "Trance - Acid", "Trance - Dream", "Trance - Goa",
    "Trance - Hard", "Trance - Progressive", "Trance - Tribal", "Trance (general)",
    "Big Band", "Blues", "Jazz - Acid", "Jazz - Modern", "Jazz (general)", "Swing",
    "Bluegrass", "Classical", "Comedy", "Country", "Experimental", "Fantasy", "Folk",
    "Fusion", "Medieval", "New Ages", "Orchestral", "Other", "Piano", "Religious",
    "Soundtrack", "Spiritual", "Video Game", "Vocal Montage", "World", "Ballad", "Disco",
    "Easy Listening", "Funk", "Pop - Soft", 
     "Pop - Synth", "Pop (general)",
    "Rock - Hard", "Rock - Soft", "Rock (general)", "Christmas", "Halloween", "Hip-Hop",
    "R and B", "Reggae", "Ska", "Soul"),
  format.filter = c("unset", "669", "AHX", "DMF", "HVL", "IT", "MED", "MO3", "MOD",
    "MTM", "OCT", "OKT", "S3M", "STM", "XM"),
  size.filter = c("unset", "0-99", "100-299", "300-599", "600-1025", "1025-2999",
    "3072-6999", "7168-100000"),
  api.key
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mod.id</code></td>
<td>
<p>An <code>integer</code> code used as module identifier in the ModArchive database.
A <code>mod.id</code> can be obtained by performing a search with <code>modArchive.search.mod</code>.
When downloading a module, make sure that the identifier represents a MOD file, as
other types will result in an error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api.key</code></td>
<td>
<p>Most ModArchive functions require a personal secret API key. This key can
be obtained from the ModArchive forum. See ‘ModArchive API Key’ section below for instructions
on how to obtain such a key.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments that are passed on to <code>read.module</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search.text</code></td>
<td>
<p>A <code>character</code> string to be used as terms to search
in the ModArchive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search.where</code></td>
<td>
<p>A <code>character</code> string indicating where in the module files
to search for the <code>search.text</code>. See usage section for the available options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format.filter</code></td>
<td>
<p>File format filter to be used in a search in the ModArchive.
See the usage section for all possible options. Default is "unset" (meaning that
it will search for any file format). Note that only the ‘MOD’ format
is supported by this package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size.filter</code></td>
<td>
<p>File size filter to be used in a search in the ModArchive.
Needs to be a <code>character</code> string representation of a file size
category as specified on ModArchive.org.
See the usage section for all possible options. Default is "unset" (meaning that
it will search for any file size). Note that the maximum file size of a
module is approximately 4068 kilobytes, meaning that the largest file size
category is irrelevant for ‘MOD’ files. Also note that the category names are
inconsistant, these are the literal catagories used by ModArchive</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>genre.filter</code></td>
<td>
<p>Genre filter to be used in some of the overviews from the ModArchive.
Needs to be a <code>character</code> string representation of a genre
as specified on ModArchive.org.
See the usage section for all possible options.
This argument is deprecated in the function <code>modArchive.search</code> since ProTrackR
version 0.3.4, other functions will still accept this argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page</code></td>
<td>
<p>Many of the ModArchive returns paginated tables. When this argument
is omitted, the first page is returned. Use an integer value to return a specific
page. The total number of pages of a search or view is returned as an attribute
to the returned base::data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>view.query</code></td>
<td>
<p>A query to be used in combination with the <code>view.by</code>
argument. Use the queries in combination with <code>view.by</code> as follows:
</p>

<ul>
<li> <p><code>view_by_list</code>: Use a single capital starting letter to browse
modules by name
</p>
</li>
<li> <p><code>view_by_rating_comments</code>: Provide a (user) rating by which you
wish to browse the modules
</p>
</li>
<li> <p><code>view_by_rating_reviews</code>: Provide a (reviewer) rating by which you
wish to browse the modules
</p>
</li>
<li> <p><code>view_modules_by_artistid</code>: Provide an artist id number
for whom you wish to browse his/her modules
</p>
</li>
<li> <p><code>view_modules_by_guessed_artist</code>: Provide an artist guessed
name for whom you wish to browser his/her modules
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>view.by</code></td>
<td>
<p>Indicate how the <code>modArchive.view.by</code> function should sort
the overview tables of modules. See ‘usage’ section for the possible options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search.artist</code></td>
<td>
<p>A character string representing the (guessed) artist name
or id number that you ar looking for in the archive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search.hash</code></td>
<td>
<p>The MD5 hash code of the specific module you are looking
for. See <a href="https://modarchive.org/?xml-api-usage-level3">https://modarchive.org/?xml-api-usage-level3</a> for details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>modArchive.info</code> function will retrieve info on a specific module from the
ModArchive. The <code>modArchive.search.mod</code>, <code>modArchive.search.genre</code> and
<code>modArchive.search.hash</code> functions can be used to find specific modules
in the archive. Use <code>modArchive.random.pick</code> to get module info on a random
module in the archive.
</p>
<p>Use the <code>modArchive.view.by</code>
function to browse the archive by specific aspects.
Note that the ModArchive also contains file formats other than ProTracker's MOD format.
This package can only handle the MOD format.
</p>
<p>The <code>modArchive.download</code> function will download a module from the archive.
</p>
<p>Use <code>modArchive.search.artist</code> to find artist details in the archive.
</p>
<p>Use <code>modArchive.request.count</code> to determine how many request you have
made in the current month with the specified key (see <code style="white-space: pre;">⁠ModArchive API key' section for details). Use ⁠</code>modArchive.max.requests<code style="white-space: pre;">⁠to determine how many request you are allowed to make each month with the provided key (see⁠</code>ModArchive API key'
section for details).
</p>


<h3>Value</h3>

<p><code>modArchive.info</code>, <code>modArchive.search.genre</code>,
<code>modArchive.search.hash</code>, <code>modArchive.random.pick</code> and
<code>modArchive.view.by</code> will return a data.frame
containing information on modules in the ModArchive. Note that this
data.frame is formatted differently since ProTrackR 0.3.4, which
may cause backward compatibility issues.
</p>
<p><code>modArchive.download</code> will download a module and return it as a
<code>PTModule</code> object.
</p>
<p><code>modArchive.search.artist</code>  will return a <code>data.frame</code>
containing information on artists on the ModArchive.
</p>
<p><code>modArchive.request.count</code> returns the number of ModArchive API request
that are left for this month, for the provided key.
</p>
<p><code>modArchive.max.requests</code> returns the maximum monthly requests for the
provided key.
</p>


<h3>ModArchive API key</h3>

<p>Since ProTrackR 0.3.4, the ModArchive helper functions have changed. In earlier
version, a labile html scraper was used, in 0.3.4 and later, this is replaced by
functions that more robustly use the Application Programming Interface (API)
provided by ModArchive. There are some downsides to this new approach: a
personal API key needs to be obtained from the ModArchive team; and the
ProTrackR package relies on yet another package (XML)
to parse the XML files that are returned by the API.
</p>
<p>So why is this switch? Well, first of all, this approach is better supported
by ModArchive. The personal API key is used to avoid excessive access by imposing
a monthly request limit (keep in mind that ModArchive provides free services and is
run by volunteers). The upside is that the XML files are a lot lighter than the
html files returned by the regular website. Therefore, the new functions are faster,
and they reduce the load on the ModArchive servers. The XML files also allow for
easier access to more of the ModArchive functionality as implemented in the
ModArchive helper functions described here.
</p>
<p>So how do you get your personal API key? First, you need to register at the
<a href="https://modarchive.org/forums/">ModArchive Forums</a>. Then follow the
instructions provided in this <a href="https://modarchive.org/forums/index.php?topic=1950.0">topic</a>
on the forum. For more info, see also the <a href="https://modarchive.org/?xml-api">API page</a>
on ModArchive.
</p>
<p>If you want to search for module files without an API key, one could make use of
to the modLand collection instead.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## most of the example below will fail as they require a
## real modArchive API key. The key used in these example
## is just a dummy. See details on how to get a key
## in the section 'ModArchive API Key' in the manual.

## Search for the module that is also used as
## an example in this package:
search.results &lt;- modArchive.search.mod("*_-_intro.mod",
                                        size.filter = "0-99",
                                        format.filter = "MOD",
                                        api.key = "&lt;your key here&gt;")

## apparently there are multiple modules in
## database that have '_-_intro' in their
## file name or title. Select the wanted
## module from the list (the one with the
## word 'protrackr' in the instrument names):
search.select &lt;- subset(search.results,
                        grepl("protrackr", search.results$instruments))

## get the same details, but now only for
## the specific module based on its ModArchive ID:
modArchive.info(search.select$id, api.key = "&lt;your key here&gt;")

## download the selected module from ModArchive.org:
mod &lt;- modArchive.download(search.select$id)

## here's a randomly picked module from the ModArchive:
info.random &lt;- modArchive.random.pick(api.key = "&lt;your key here&gt;")

## use modArchive.view.by to list the 2nd page
## of MOD files that start with the letter 'A'
info.list  &lt;- modArchive.view.by("A", "view_by_list", "MOD",
                                 page = 2,
                                 api.key = "&lt;your key here&gt;")

## list the modules of the artist with id number 89200:
artist.mods &lt;- modArchive.view.by("89200", "view_modules_by_artistid",
                                  format.filter = "MOD",
                                  api.key = "&lt;your key here&gt;")

## here's how you can list MOD files of a
## specific genre:
list.genre  &lt;- modArchive.search.genre("Chiptune", "MOD",
                                       api.key = "&lt;your key here&gt;")

## get module info for a specific hash code
mod.hash    &lt;- modArchive.search.hash("8f80bcab909f700619025bd7f2975749",
                                      "&lt;your key here&gt;")

## find modarchive artist info, search for artist name
## or artist id:
artist.list &lt;- modArchive.search.artist("89200",
                                        api.key = "&lt;your key here&gt;")

## How many requests did I make this month?:
modArchive.request.count("&lt;your key here&gt;")

## How many requests am I allowed to make each month?:
modArchive.max.requests("&lt;your key here&gt;")

## End(Not run)
</code></pre>


</div>
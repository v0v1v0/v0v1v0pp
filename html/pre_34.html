<div class="container">

<table style="width: 100%;"><tr>
<td>singleplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create partial dependence plot for a single variable in a prediction rule 
ensemble (pre)</h2>

<h3>Description</h3>

<p><code>singleplot</code> creates a partial dependence plot, which shows the effect of
a predictor variable on the ensemble's predictions. Note that plotting partial 
dependence is computationally intensive. Computation time will increase fast 
with increasing numbers of observations and variables. For large 
datasets, package 'plotmo' (Milborrow, 2019) provides more efficient functions 
for plotting partial dependence and also supports 'pre' models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">singleplot(
  object,
  varname,
  penalty.par.val = "lambda.1se",
  nvals = NULL,
  type = "response",
  ylab = NULL,
  response = NULL,
  gamma = NULL,
  newdata = NULL,
  xlab = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class <code>pre</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varname</code></td>
<td>
<p>character vector of length one, specifying the variable for
which the partial dependence plot should be created. Note that <code>varname</code>
should correspond to the variable as described in the model formula used
to generate the ensemble (i.e., including functions applied to the variable).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty.par.val</code></td>
<td>
<p>character or numeric. Value of the penalty parameter
<code class="reqn">\lambda</code> to be employed for selecting the final ensemble. The default
<code>"lambda.min"</code> employs the <code class="reqn">\lambda</code> value within 1 standard
error of the minimum cross-validated error. Alternatively, 
<code>"lambda.min"</code> may be specified, to employ the <code class="reqn">\lambda</code> value
with minimum cross-validated error, or a numeric value <code class="reqn">&gt;0</code> may be 
specified, with higher values yielding a sparser ensemble. To evaluate the 
trade-off between accuracy and sparsity of the final ensemble, inspect
<code>pre_object$glmnet.fit</code> and <code>plot(pre_object$glmnet.fit)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nvals</code></td>
<td>
<p>optional numeric vector of length one. For how many values of x
should the partial dependence plot be created?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character string. Type of prediction to be plotted on y-axis.
<code>type = "response"</code> gives fitted values for continuous outputs and
fitted probabilities for nominal outputs. <code>type = "link"</code> gives fitted
values for continuous outputs and linear predictor values for nominal outputs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>character. Label to be printed on the y-axis, defaults to the response
variable name(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>numeric vector of length 1. Only relevant for multivariate gaussian 
and multinomial responses. If <code>NULL</code> (default), PDPs for all response 
variables or categories will be produced. A single integer can be specified, 
indicating for which response variable or category PDPs should be produced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>Mixing parameter for relaxed fits. See
<code>coef.cv.glmnet</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>Optional <code>data.frame</code> in which to look for variables 
with which to predict. If <code>NULL</code> (the default), the <code>data.frame</code> used to fit the 
original ensemble will be used. Smaller subsets of the original data can
be specified to (substantially) reduce computation time. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>character. Label to be printed on the x-axis. If <code>NULL</code>,
the supplied <code>varname</code> will be printed on the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to 
<code>plot.default</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default, a partial dependence plot will be created for each unique
observed value of the specified predictor variable. See also section 8.1 of 
Friedman &amp; Popescu (2008).
</p>
<p>When the number of unique observed values is large, partial dependence functions
can take a very long time to compute. Specifying the <code>nvals</code> argument 
can substantially reduce computation time. When the
<code>nvals</code> argument is supplied, values for the minimum, maximum, and <code>(nvals - 2)</code>
intermediate values of the predictor variable will be plotted. Note that <code>nvals</code>
can be specified only for numeric and ordered input variables. If the plot is
requested for a nominal input variable, the <code>nvals</code> argument will be
ignored and a warning printed.
</p>
<p>Alternatively, <code>newdata</code> can be specified to provide a different (smaller) 
set of observations to compute partial dependence over.
If <code>mi_pre</code> was used to derive the original rule ensemble, 
function <code>mean_mi</code> can be used for this.
</p>


<h3>References</h3>

<p>Friedman, J. H., &amp; Popescu, B. E. (2008). Predictive learning 
via rule ensembles. <em>The Annals of Applied Statistics, 2</em>(3), 916-954.
</p>
<p>Milborrow, S. (2019). plotmo: Plot a model's residuals, response, and partial 
dependence plots. <a href="https://CRAN.R-project.org/package=plotmo">https://CRAN.R-project.org/package=plotmo</a>
</p>


<h3>See Also</h3>

<p><code>pre</code>, <code>pairplot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">airq &lt;- airquality[complete.cases(airquality), ]
set.seed(42)
airq.ens &lt;- pre(Ozone ~ ., data = airquality[complete.cases(airquality),])
singleplot(airq.ens, "Temp")

## For multinomial and mgaussian families, one PDP is created per category or outcome
set.seed(42)
airq.ens3 &lt;- pre(Ozone + Wind ~ ., data = airq, family = "mgaussian")
singleplot(airq.ens3, varname = "Day")

set.seed(42)
iris.ens &lt;- pre(Species ~ ., data = iris, family = "multinomial")
singleplot(iris.ens, varname = "Petal.Width")
</code></pre>


</div>
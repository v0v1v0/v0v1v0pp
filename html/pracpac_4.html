<div class="container">

<table style="width: 100%;"><tr>
<td>add_dockerfile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a Dockerfile to the docker directory</h2>

<h3>Description</h3>

<p>Adds a Dockerfile to the docker directory created by create_docker_dir.
Allows for specification of several preset use cases, whether or not use use
renv to manage dependencies, and optional overriding the base image.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_dockerfile(
  pkg_path = ".",
  img_path = NULL,
  use_renv = TRUE,
  use_case = "default",
  base_image = NULL,
  repos = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkg_path</code></td>
<td>
<p>Path to the package directory. Default is <code>"."</code> for the current working directory, which assumes developer is working in R package root. However, this can be set to another path as needed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>img_path</code></td>
<td>
<p>Path to the write the docker image definition contents. The default <code>NULL</code> will use <code style="white-space: pre;">⁠docker/⁠</code> as a subdirectory of the <code>pkg_path</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_renv</code></td>
<td>
<p>Logical; use renv? Defaults to <code>TRUE</code>. If <code>FALSE</code>, package dependencies are scraped from the <code>DESCRIPTION</code> file and the most recent versions will be installed in the image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_case</code></td>
<td>
<p>Name of the use case. Defaults to <code>"default"</code>, which only uses the base boilerplate. See <code>vignette("use-cases", package="pracpac")</code> for other use cases (e.g., <code>shiny</code>, <code>rstudio</code>, <code>pipeline</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_image</code></td>
<td>
<p>Name of the base image to start <code>FROM</code>. Default is <code>NULL</code> and the base image will be derived based on <code>use_case.</code> Optionally override this by setting the name of the base image (including tag if desired).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repos</code></td>
<td>
<p>Option to override the repos used for installing packages with <code>renv</code> by passing name of repository. Only used if <code>use_renv = TRUE</code>. Default is <code>NULL</code> meaning that the repos specified in <code>renv</code> lockfile will remain as-is and not be overridden.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is run as part of use_docker but can be used on its own.
</p>
<p>See <code>vignette("use-cases", package="pracpac")</code> for details on use cases.
</p>


<h3>Value</h3>

<p>Invisibly returns a list of package info returned by pkg_info. Primarily called for side-effect to create Dockerfile.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# Specify path to example package source and copy to tempdir()
# Note that in practice you do not need to copy to a tempdir()
# And in fact it may be easiest to use pracpac relative to your package directory root
ex_pkg_src &lt;- system.file("hellow", package = "pracpac", mustWork = TRUE)
file.copy(from = ex_pkg_src, to = tempdir(), recursive = TRUE)

# Default: FROM rocker/r-ver:latest with no additional template
# By default add_dockerfile requires you either to specify use_renv = FALSE
# Or run renv_deps() prior to add_dockerfile()
# The use_docker() wrapper runs these sequentially, and is recommended for most usage
add_dockerfile(pkg_path = file.path(tempdir(), "hellow"), use_renv = FALSE)
# Specify tidyverse base image
renv_deps(pkg_path = file.path(tempdir(), "hellow"))
add_dockerfile(pkg_path = file.path(tempdir(), "hellow"), base_image="rocker/tidyverse:4.2.2")
# Specify different default repo
add_dockerfile(pkg_path = file.path(tempdir(), "hellow"), repos="https://cran.wustl.edu/")
# RStudio template
add_dockerfile(pkg_path = file.path(tempdir(), "hellow"), use_case="rstudio")
# Shiny template
add_dockerfile(pkg_path = file.path(tempdir(), "hellow"), use_case = "shiny")
# Pipeline template
add_dockerfile(pkg_path = file.path(tempdir(), "hellow"), use_case="pipeline")

## End(Not run)
</code></pre>


</div>
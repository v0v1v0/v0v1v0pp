<div class="container">

<table style="width: 100%;"><tr>
<td>cvpre</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Full k-fold cross validation of a prediction rule ensemble (pre)</h2>

<h3>Description</h3>

<p><code>cvpre</code> performs k-fold cross validation on the dataset used to create 
the specified prediction rule ensemble, providing an estimate of predictive 
accuracy on future observations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cvpre(
  object,
  k = 10,
  penalty.par.val = "lambda.1se",
  pclass = 0.5,
  foldids = NULL,
  verbose = FALSE,
  parallel = FALSE,
  print = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class <code>pre</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>integer. The number of cross validation folds to be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty.par.val</code></td>
<td>
<p>character or numeric. Value of the penalty parameter
<code class="reqn">\lambda</code> to be employed for selecting the final ensemble. The default
<code>"lambda.min"</code> employs the <code class="reqn">\lambda</code> value within 1 standard
error of the minimum cross-validated error. Alternatively, 
<code>"lambda.min"</code> may be specified, to employ the <code class="reqn">\lambda</code> value
with minimum cross-validated error, or a numeric value <code class="reqn">&gt;0</code> may be 
specified, with higher values yielding a sparser ensemble. To evaluate the 
trade-off between accuracy and sparsity of the final ensemble, inspect
<code>pre_object$glmnet.fit</code> and <code>plot(pre_object$glmnet.fit)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pclass</code></td>
<td>
<p>numeric. Only used for binary classification. Cut-off value for the 
predicted probabilities that should be used to classify observations to the
second class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>foldids</code></td>
<td>
<p>numeric vector of <code>length(nrow(object$data))</code> (the number of
observations in the training data used to fit the original ensemble). Defaults to
<code>NULL</code>, resulting in the original training observations being randomly 
assigned to one of the <code class="reqn">k</code> folds. Depending on sample size, the number of 
factors in the data, the number of factor levels and their distributions, the
default may yield errors. See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical. Should progress of the cross validation be printed 
to the command line?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>logical. Should parallel foreach be used? Must register parallel 
beforehand, such as doMC or others.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print</code></td>
<td>
<p>logical. Should accuracy estimates be printed to the command line?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to <code>predict.pre</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The random sampling employed by default may yield folds including all 
observations with a given level of a given factor. This results in an error, 
as it requires predictions for factor levels to be computed that were not 
observed in the training data, which is impossible. By manually specifying the
<code>foldids</code> argument, users can make sure all class levels are represented in
each of the <code class="reqn">k</code> training partitions.
</p>


<h3>Value</h3>

<p>Calculates cross-validated estimates of predictive accuracy and prints 
these to the command line. For survival regression, accuracy is not calculated, 
as there is currently no agreed-upon way to best quantify accuracy in survival 
regression models. Users can compute their own accuracy estimates using the 
(invisibly returned) cross-validated predictions (<code>$cvpreds</code>). 
Invisibly, a list of three objects is returned: 
<code>accuracy</code> (containing accuracy estimates), <code>cvpreds</code>
(containing cross-validated predictions) and <code>fold_indicators</code> (a vector indicating
the cross validation fold each observation was part of). For (multivariate) continuous 
outcomes, accuracy is a list with elements <code>$MSE</code> (mean squared error on test 
observations) and <code>$MAE</code> (mean absolute error on test observations). For 
(binary and multiclass) classification, accuracy is a list with elements 
<code>$SEL</code> (mean squared error on predicted probabilities), <code>$AEL</code> (mean absolute 
error on predicted probabilities), <code>$MCR</code> (average misclassification error rate) 
and <code>$table</code> (proportion table with (mis)classification rates).
</p>


<h3>See Also</h3>

<p><code>pre</code>, <code>plot.pre</code>, 
<code>coef.pre</code>, <code>importance.pre</code>, <code>predict.pre</code>, 
<code>interact</code>, <code>print.pre</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(42)
airq.ens &lt;- pre(Ozone ~ ., data = airquality[complete.cases(airquality),])
airq.cv &lt;- cvpre(airq.ens)
</code></pre>


</div>
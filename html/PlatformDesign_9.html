<div class="container">

<table style="width: 100%;"><tr>
<td>platform_design2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A faster version of platform_design()</h2>

<h3>Description</h3>

<p>The function platform_design2() is a faster version of platform_design(). It adopts a more
efficient algorithm to find optimal design(s) for a two-period K+M experimental arm
platform trial given a user-specified family-wise error rate (or pair-wise error rate) and
marginal power. The K+M-experimental arm trial has K experimental arms and one control arm
during the first period, and later M experimental arms are added on the start of the second
period. The one common control arm is shared among all experimental arms across the trial.
The function calculates required sample sizes for each of the experimental arm (n2), the
concurrent control (n0_2), the total sample size (N2), the allocation ratios (A1 &amp; A2), and
the critical value (z_alpha1) for each  experimental arm-control comparison in the trial.
The number of patients saved in a K+M-experimental arm trial compared to conducting one
K-experimental arm and one M-experimental arm trial separately is also provided. Users
can choose to control for either FWER or PWER in the trial.
</p>


<h3>Usage</h3>

<pre><code class="language-R">platform_design2(
  nt,
  K,
  M,
  fwer = NULL,
  pwer = NULL,
  marginal.power,
  min.marginal.power = marginal.power,
  delta,
  seed = 123
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nt</code></td>
<td>
<p>the number of patients already enrolled on each of the K initial experimental arms
at the time the M new arms are added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>the number of experimental arms in the first period in a two-period K+M-experimental arm trial</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>the number of new experimental arms added at the start of the second period</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fwer</code></td>
<td>
<p>the family-wise type I error rate, default to be null, users need to choose
between controlling for fwer or pwer and input a value for this argument if fwer is chosen</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pwer</code></td>
<td>
<p>the pair-wise type I error rate, default to be null, users need to choose between
controlling for fwer or pwer and input a value for this argument if pwer is chosen</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marginal.power</code></td>
<td>
<p>the marginal power for each experimental-control comparison in the
K-experimental arm trial. This is also the marginal power the algorithm aims to achieve
in the K+M-experimental arm when min.marginal.power=marginal.power (default option).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.marginal.power</code></td>
<td>
<p>the marginal power the function aims to achieve in the K+M-experimental
arm trial, default to be the same as the marginal power of the K-experimental arm trial.
It will be the marginal power of the K+M-experimental arm if optimal design exists.
Don't change the default unless you need to achieve a marginal power level different than
that of the K-experimental arm trial.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>the standardized effect size expected to be detected in the trial</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>an integer used in random number generation for numerically evaluating
integration, default = 123</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is basically a faster version of platform_design(). Just like the latter,
It provides an optimized design in terms of minimizing the total sample size for adding M
additional experimental arms in the middle of a clinical trial which originally
have K experimental arms and 1 control arm, given user-defined FWER (or PWER) and marginal
power. The algorithm searches for the optimal design starting from the maximum N2 until it
reaches a design meets the requirements for both marginal and disjunctive power levels for
the K+M-experimental arm trial. If the function returns NULL for $design, the optimal design
for the K+M-experimental arm trial does not exists because the lower limits of marginal and disjunctive power cannot
be met at the same time given the inputs. Unlike the platform_design(), the suboptimal design
(i.e., the design only meets the requirement for the disjunctive power) is not provided.
</p>


<h3>Value</h3>

<p>The function returns a list, including <b>design_Karm</b> and <b>designs</b>.
</p>
<p><b>design_Karm</b> contains the design parameters for the K-experimental arm trial including:
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>K</em>, the number of experimental arms
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>n1</em>, the sample size for each of the K experimental
arms
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>n0_1</em>, the sample size of the common control arm
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>N1</em> the total sample size of a K-experimental arm trial
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>z_alpha1</em>, the critical value for the comparison between any of the K
experimental arms and the control
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>FWER1</em>, the family-wise error rate
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>z_beta1</em>, the quantile of the marginal power, i.e., qnorm(marginal
power)
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>Power1</em>, the disjunctive power
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>cor0</em>, the correlation of Z-test statistics between any two of the K
experimental arms
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>delta</em>, the standardized  effect size expected to be detected in the
K-experimental arm trial
</p>
<p><b>designs</b> contains the recommended optimal design parameters for the K+M-experimental arm
trial including:
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>n2</em> and <em>n0_2</em>, the sample sizes of each of the K+M experimental
arms and its corresponding concurrent control, respectively
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>nt</em> and <em>n0t</em>, the number of patients already enrolled on each
of the K initial experimental arms and the control arm, respectively, at the time the M new
arms are added
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>nc</em>, the total sample size of the control arm for the k+M trial, i.e.
, the sum of the concurrent (n0_2) and nonconcurrent (n0t) controls
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>N2</em>, the total sample size of the two-period K+M-experimental arm trial
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>A1</em>, the allocation ratio (control to experimental arm) before the
M new experimental arms are added and after the initial K experimental arms end
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>A2</em>, the allocation ratio (control to experimental arm) after the M
new experimental arms are added and before the initial K experimental arms end
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>cor1</em>, the correlation of Z-test statistics between any two of the K
initial experimental arms (or between any two of the M new arms)
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>cor2</em>, the correlation of Z-test statistics between any pair of one
initially opened and one newly added experimental arm
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>critical_value2</em>, the critical value for the comparison between each
experimental arm and the concurrent control in the K+M-experimental arm trial
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>mariginal.power2</em>, the marginal power for the K+M-experimental arm trial
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>disjunctive.power2</em>, the disjunctive power for the K+M-experimental arm trial
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>FWER2</em>, the family-wise type-I error rate for the K+M-experimental arm trial
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>delta</em>, the standardized effect size expected to be detected in the
K+M-experimental arm trial
</p>
<p><code style="white-space: pre;">⁠    ⁠</code><em>save</em>, the number of patients saved in the K+M-experimental arm trial compared to
conducting one K-experimental arm and one M-experimental arm trial separately.
</p>


<h3>Author(s)</h3>

<p><code style="white-space: pre;">⁠    ⁠</code>Xiaomeng Yuan, Haitao Pan
</p>


<h3>References</h3>

<p><code style="white-space: pre;">⁠    ⁠</code>Pan, H., Yuan, X. and Ye, J. (2022). An optimal two-period multiarm
platform design with new experimental arms added during the trial. Manuscript submitted for
publication.
</p>
<p><code style="white-space: pre;">⁠    ⁠</code>Dunnett, C. W. (1955). A multiple comparison procedure for comparing
several treatments with a control. Journal of the American Statistical Association, 50(272),
1096-1121.
</p>


<h3>Examples</h3>

<pre><code class="language-R">platform_design2(nt = 30, K = 2, M = 2, fwer = 0.025, marginal.power = 0.8,
 delta = 0.4)
#$design_Karm
#   K  n1 n0_1  N1  z_alpha1 FWER1   z_beta1      Power1      cor0   delta
# 1 2 101  143 345  2.220604 0.025 0.8416212   0.9222971 0.4142136   0.4
#
#$designs
#    n2 n0_2 nt n0t  nc  N2
#39 107  198 30  43 241 669
#40 106  202 30  43 245 669
#41 105  206 30  43 249 669
#42 104  210 30  43 253 669
#
#        A1       A2       cor1      cor2  critical_value2
#39 1.414214 2.012987 0.3508197 0.2746316       2.475233
#40 1.414214 2.092105 0.3441558 0.2708949       2.475790
#41 1.414214 2.173333 0.3376206 0.2671464       2.476330
#42 1.414214 2.256757 0.3312102 0.2633910       2.476854
#
#   marginal.power2 disjunctive.power2
#39  0.8001100      0.9853799
#40  0.8003363      0.9857541
#41  0.8003878      0.9860900
#42  0.8002699      0.9863903
#
#      FWER2    delta     save
#39    0.025      0.4       21
#40    0.025      0.4       21
#41    0.025      0.4       21
#42    0.025      0.4       21
</code></pre>


</div>
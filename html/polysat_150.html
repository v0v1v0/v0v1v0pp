<div class="container">

<table style="width: 100%;"><tr>
<td>reformatPloidies</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Convert Ploidy Format of a Dataset
</h2>

<h3>Description</h3>

<p>This function changes the class of the object in the <code>Ploidies</code>
slot of a <code>"gendata"</code> object.  (See the four subclasses described
in <code>"ploidysuper"</code>.)  Existing ploidy data can either
be erased or, if possible, used in the new format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">reformatPloidies(object, output = "collapse", na.rm = FALSE, erase = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>A <code>"gendata"</code> object.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>

<p>A character string indicating the desired result of the conversion:
<code>"matrix"</code> if ploidies should be indexed by both sample and locus,
<code>"sample"</code> if ploidies should be indexed only by sample,
<code>"locus"</code> if ploidies should be indexed only by locus, <code>"one"</code>
if there should be one ploidy for the entire dataset, or
<code>"collapse"</code> if ploidies should be converted to the simplest
possible format.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>

<p>Boolean.  If <code>FALSE</code>, <code>NA</code> is treated as a unique ploidy.  If
<code>TRUE</code>, <code>NA</code> values are ignored assuming that each sample
and/or locus has only one ploidy otherwise.  This argument is passed
directly to <code>plCollapse</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>erase</code></td>
<td>

<p>Boolean.  If <code>TRUE</code>, the new <code>Ploidies</code> slot is simply filled
with <code>NA</code> instead of existing ploidy values from <code>object</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is a versatile function that can accomplish several tasks
relating to the format of ploidies in the dataset:
</p>
<p>If you wish to change how ploidy is indexed, but don't care about
keeping any data in the <code>Ploidies</code> slot, set <code>erase=TRUE</code>
and <code>output</code> to <code>"matrix"</code>, <code>"sample"</code>, <code>"locus"</code>,
or <code>"one"</code>.
</p>
<p>If you wish to keep ploidy data while moving from a simpler format to
a more complex format (<em>i.e.</em> from <code>"one"</code> to any other
format, or from <code>"sample"</code> or <code>"locus"</code> to <code>"matrix"</code>),
leave <code>erase=FALSE</code> and set <code>output</code> to the desired format.
Existing data will be duplicated to fill out the new format.  For
example, if ploidies were indexed by sample and you change to matrix
format, the ploidy that had previously been recorded for each sample
will be duplicated for each locus.
</p>
<p>If you wish to keep ploidy data while performing any other format
conversions (<em>e.g.</em> <code>"matrix"</code> to <code>"sample"</code> or
<code>"sample"</code> to <code>"locus"</code>), the function will check that there
is one unique ploidy for each sample, locus, or the entire dataset (as
appropriate), and will produce an error if the conversion cannot be
done without a loss of information.
</p>
<p>If you wish to keep ploidy data and convert to the simplest possible
format, set <code>output="collapse"</code>.  The function will automatically
determine the simplest format for conversion without loss of data.
(The <code>read</code> functions in <span class="pkg">polysat</span> that take ploidy data from
the input file use this option.)
</p>


<h3>Value</h3>

<p>A <code>"gendata"</code> object that is a copy of <code>object</code> but with the
<code>Ploidies</code> slot converted to a new class.
</p>


<h3>Author(s)</h3>

<p>Lindsay V. Clark
</p>


<h3>See Also</h3>

<p><code>plCollapse</code>, <code>"ploidysuper"</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Make a new "genambig" object for this example
testdata &lt;- new("genambig")
Ploidies(testdata)

## If you need to reformat before you have entered any ploidy
## information:

# convert from matrix to sample format
testdata &lt;- reformatPloidies(testdata, output="sample")
Ploidies(testdata)

## If you have entered ploidy information but realized you can use a
## simpler format:

# Enter some ploidies
Ploidies(testdata)[1] &lt;- 2
Ploidies(testdata)

# Convert from "sample" to "one" with na.rm=TRUE
testdata &lt;- reformatPloidies(testdata, na.rm=TRUE, output="one")
Ploidies(testdata)

## If you change your mind and want to go back to a more complex format

# Convert from "one" to "locus"
testdata &lt;- reformatPloidies(testdata, output="locus")
Ploidies(testdata)
</code></pre>


</div>
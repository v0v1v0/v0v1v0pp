<div class="container">

<table style="width: 100%;"><tr>
<td>unit_prices</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Compute Prices for Portfolio Based on Units
</h2>

<h3>Description</h3>

<p>Compute prices for a portfolio based on outstanding shares.
</p>


<h3>Usage</h3>

<pre><code class="language-R">unit_prices(NAV,
            cashflows,
            initial.price, initial.shares = 0,
            cf.included = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>NAV</code></td>
<td>

<p>a dataframe of two columns: timestamp and net asset value
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cashflows</code></td>
<td>

<p>a data.frame of two or three columns: timestamp,
cashflow and (optionally) an id
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial.price</code></td>
<td>

<p>initial price
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial.shares</code></td>
<td>

<p>number of outstanding shares for first NAV
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cf.included</code></td>
<td>

<p>logical
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>This function is experimental, and its interface is
not stable yet.</strong>
</p>
<p>The function may be used to compute the returns for a
portfolio with external cashflows, i.e. what is
usually called time-weighted returns.
</p>
<p>Valuation (i.e. the computation of the NAV) must take
place before external cashflows. Fairness suggests
that: what price would you give an external investor
if you had not valued the positions? And even if
fairness mattered not: suppose we traded on a
specific day, had a positive PL, and ended the day in
cash. We could then not differentiate any more
between a cash increase because of an external inflow
and a cash increase because of a profitable trade.
</p>


<h3>Value</h3>

<p>A data.frame
</p>
<table>
<tr style="vertical-align: top;">
<td><code>timestamp</code></td>
<td>
<p>the timestamp</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NAV</code></td>
<td>
<p>total NAV</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>price</code></td>
<td>
<p>NAV per share</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>outstanding units (i.e. shares) after cashflows</p>
</td>
</tr>
</table>
<p>Attached as an attribute is a <code>data.frame</code>
<code>transactions</code>.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>Schumann, E. (2023) <em>Portfolio Management with
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span></em>. <a href="https://enricoschumann.net/PMwR/">https://enricoschumann.net/PMwR/</a>
</p>


<h3>See Also</h3>

<p><code>returns</code>, <code>pl</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">NAV &lt;- data.frame(timestamp = seq(as.Date("2017-01-01"),
                                  as.Date("2017-01-10"),
                                  by = "1 day"),
                  NAV = c(100:104, 205:209))

cf &lt;- data.frame(timestamp = c(as.Date("2017-01-01"),
                               as.Date("2017-01-06")),
                 cashflow = c(100, 100))

unit_prices(NAV, cf, cf.included = TRUE)
##     timestamp NAV    price    units
## 1  2017-01-01 100 100.0000 1.000000
## 2  2017-01-02 101 101.0000 1.000000
## 3  2017-01-03 102 102.0000 1.000000
## 4  2017-01-04 103 103.0000 1.000000
## 5  2017-01-05 104 104.0000 1.000000
## 6  2017-01-06 205 105.0000 1.952381
## 7  2017-01-07 206 105.5122 1.952381
## 8  2017-01-08 207 106.0244 1.952381
## 9  2017-01-09 208 106.5366 1.952381
## 10 2017-01-10 209 107.0488 1.952381
</code></pre>


</div>
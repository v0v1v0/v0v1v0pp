<div class="container">

<table style="width: 100%;"><tr>
<td>CreateProtocolHistory</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a Subject History Table by Protocol</h2>

<h3>Description</h3>

<p>Create a Subject History Table by Protocol
</p>


<h3>Usage</h3>

<pre><code class="language-R">CreateProtocolHistory(start_vec, end_vec, persons_df = "everybody")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>start_vec</code></td>
<td>
<p>a named integer vector with the number of days before
subject consent when the subject history should start, per protocol</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_vec</code></td>
<td>
<p>a named integer vector with the length of the study phase of
interest, per protocol</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>persons_df</code></td>
<td>
<p>Either the name of the data frame that contains all the
subject IDs and their clinical trials (which defaults to
<code>"everybody"</code>), or a data frame with this information. See "Details"
for more information.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>We may want to perform SQL-like operations on a set of tables. This
data table will form the "backbone" for future join operations. It creates
one record per person in each study for each day in those studies (when
<code>persons_df</code> is set to <code>"everybody"</code>), or it creates one record
per person contained in the table <code>persons_df</code> for each day in those
studies. The default behavior is to use the supplied <code>"everybody"</code>
table for all consenting subjects in the CTN-0027, CTN-0030, and CTN-0051
clinical trials. However, users may only care about a smaller subset of
these patients, so a subset of the <code>"everybody"</code> data frame can be
supplied to the <code>persons_df</code> argument if desired.
</p>
<p>NOTE: this function is only appropriate for trial with fixed start and
end days (such as CTN-0027 or CTN-0051). For studies with variable-length
(i.e., subject-specific) protocol lengths, please use
<code>CreateSubjectProtocolHistory()</code> instead.
</p>


<h3>Value</h3>

<p>A tibble with columns <code>who</code>, <code>project</code>, and <code>when</code>.
Each subject will have one row for each day in the study range.
</p>


<h3>Examples</h3>

<pre><code class="language-R">   start_int &lt;- c(`27` = -30L, `51` = -30L)
   end_int   &lt;- c(`27` = 168L, `51` = 168L)
   
   CreateProtocolHistory(
     start_vec = start_int, end_vec = end_int
   )
   
</code></pre>


</div>
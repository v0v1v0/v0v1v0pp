<div class="container">

<table style="width: 100%;"><tr>
<td>homogeneity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Testing homogeneity of the PD rating model</h2>

<h3>Description</h3>

<p><code>homogeneity</code> performs homogeneity testing of PD model based on the rating grades and selected segment.
This test is usually applied on application portfolio, but it can be applied also on model development sample.
Additionally, this method requires higher number of observations per segment modalities within each rating in order
to produce available results. For segments with less than 30 observations, test is not performed.
If as a segment user selects numeric variable from the application portfolio, variable will be grouped in selected number of
groups (argument <code>segment.num</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">homogeneity(app.port, def.ind, rating, segment, segment.num, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>app.port</code></td>
<td>
<p>Application portfolio (data frame) which contains default indicator (0/1),
ratings in use and variable used as a segment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>def.ind</code></td>
<td>
<p>Name of the column that represents observed default indicator (0/1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rating</code></td>
<td>
<p>Name of the column that represent rating grades in use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>segment</code></td>
<td>
<p>Name of the column that represent testing segments. If it is of numeric type, than it is first grouped
into <code>segment.num</code> of groups otherwise is it used as supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>segment.num</code></td>
<td>
<p>Number of groups used for numeric variables supplied as a segment. Only applicable if <code>segment</code>
is of numeric type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Significance level of p-value for two proportion test. Default is 0.05.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Testing procedure is implemented for each rating separately comparing default rate from one segment modality to
the default rate from the rest of segment modalities.
</p>


<h3>Value</h3>

<p>The command <code>homogeneity</code> returns a data frame with the following columns:
</p>

<ul>
<li>
<p> segment.var: Variable used as a segment.
</p>
</li>
<li>
<p> rating: Unique values of rating grades from application portfolio..
</p>
</li>
<li>
<p> segment.mod: Tested segment modality. Default rate from this segment is compared with default rate from the
rest of the modalities within the each rating.
</p>
</li>
<li>
<p> no: Number of observations of the analyzed rating.
</p>
</li>
<li>
<p> nb: Number of defaults (bad cases) of the analyzed rating.
</p>
</li>
<li>
<p> no.segment: Number of observations of the analyzed segment modality.
</p>
</li>
<li>
<p> no.rest: Number of observations of the rest of the segment modalities.
</p>
</li>
<li>
<p> nb.segment: Number of defaults of the analyzed segment modality.
</p>
</li>
<li>
<p> nb.rest: Number of defaults of the rest of the segment modalities.
</p>
</li>
<li>
<p> p.val: Two proportion test (two sided) p-value.
</p>
</li>
<li>
<p> alpha: Selected significance level.
</p>
</li>
<li>
<p> res: Accepted hypothesis.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">suppressMessages(library(PDtoolkit))
data(loans)
#estimate some dummy model
mod.frm &lt;- `Creditability` ~ `Account Balance` + `Duration of Credit (month)` +
				`Age (years)` + `Value Savings/Stocks` + 
				`Duration in Current address`
lr.mod &lt;- glm(mod.frm, family = "binomial", data = loans)
summary(lr.mod)$coefficients
#model predictions
loans$pred &lt;-  unname(predict(lr.mod, type = "response", newdata = loans))
#scale probabilities
loans$score &lt;- scaled.score(probs = loans$pred, score = 600, odd = 50/1, pdo = 20)
#group scores into ratings
loans$rating &lt;- ndr.bin(x = round(loans$score), y = loans$Creditability, y.type = "bina")[[2]]
#simulate dummy application portfolio (oversample loans data) 
set.seed(2211)
app.port &lt;- loans[sample(1:nrow(loans), 2500, rep = TRUE), ]
#run homogeneity test on ratings based on the Credit Amount segments
homogeneity(app.port = app.port, 
	def.ind = "Creditability", 
	rating = "rating", 
	segment = "Credit Amount",
	segment.num = 4, 
	alpha = 0.05)
</code></pre>


</div>
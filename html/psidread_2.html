<div class="container">

<table style="width: 100%;"><tr>
<td>psid_reshape</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rename and reshape your PSID dataset</h2>

<h3>Description</h3>

<p><code>psid_reshape()</code> serves as the final step in processing your PSID data which helps the user rename and reshape the data frame to produce output in your desired format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">psid_reshape(psid_df, str_df, shape = "wide", level = "individual")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>psid_df</code></td>
<td>
<p>The data frame generated from psid_read() function. The user should not change anything on the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>str_df</code></td>
<td>
<p>The structure data frame generated from psid_str() function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shape</code></td>
<td>
<p>The shape you would like the data frame to be.
"long" if you want to have each line represent the data for each person at each year;
"wide" if you want to have each line represent the data for all waves for each person;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>The level of output. Default value is set to 'individual'.
The user can also set this value to 'household' if needed. Deduplication will be performed and leave only the record of household head for each household.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function offers options in data output at both the household and individual levels.
When the user specifies for household-level output, the output will only retain the household head's record for each household.
This option will be useful if the user aims to conduct family-level analysis.
In contrast, individual-level output includes details for all family members.
</p>
<p>Additionally, <code>psid_reshape()</code> allows for choosing between wide and long formats.
In the wide format, variables are named as <code>VARNAME_YYYY</code>.
</p>


<h3>Value</h3>

<p>A data frame with self-defined variable name
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Import dataset use `psid_str()`, `psid_unzip()` and `psid_read()`
psid_varlist = c(" hh_age || [13]ER53017 [17]ER66017"," p_age || [13]ER34204")
str_df &lt;- psid_str(varlist = psid_varlist, type = "separated")
# Below is the file path for the package test data, set this to your own directory
indir &lt;- system.file(package = "psidread","extdata")
df &lt;- psid_read(indir = indir,
                str_df = str_df,
                idvars = c("ER30000"),
                type = "package",
                filename = NA)
# Example 1: Individual-level output in long format
ind_long_df &lt;- psid_reshape(psid_df = df,
                          str_df = str_df,
                          shape = "long",
                          level = "individual")
# Example 2: Household-level output in wide format
fam_wide_df &lt;- psid_reshape(psid_df = df,
                            str_df = str_df,
                            shape = "wide",
                            level = "household")
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>form_smooth</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Smooth pdqr-function</h2>

<h3>Description</h3>

<p>Smooth pdqr-function using random sampling and corresponding
new_*() function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">form_smooth(f, n_sample = 10000, args_new = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>A pdqr-function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sample</code></td>
<td>
<p>Number of elements to sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>args_new</code></td>
<td>
<p>List of extra arguments for new_*() to control
<code>density()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>General idea of smoothing is to preserve "sampling randomness" as
much as reasonably possible while creating more "smooth" probability mass or
density function.
</p>
<p>At first step, sample of size <code>n_sample</code> is generated from distribution
represented by <code>f</code>. Then, based on the sample, "continuous" d-function is
created with <code>new_d()</code> and arguments from <code>args_new</code> list. To account for
density()'s default behavior of "stretching range" by
adding small tails, support of d-function is forced to be
equal to <code>f</code>'s support (this is done with <code>form_resupport()</code> and method
"reflect"). Output represents a "smooth" version of <code>f</code> as d-function.
</p>
<p>Final output is computed by modifying "y" or "prob" column of <code>f</code>'s "x_tbl" metadata to be proportional to values of "smooth" output at
corresponding points from "x" column. This way output distribution has
exactly the same "x" grid as <code>f</code> but "more smooth" nature.
</p>


<h3>Value</h3>

<p>A smoothed version of <code>f</code> with the same class and
type.
</p>


<h3>See Also</h3>

<p>Other form functions: 
<code>form_estimate()</code>,
<code>form_mix()</code>,
<code>form_regrid()</code>,
<code>form_resupport()</code>,
<code>form_retype()</code>,
<code>form_tails()</code>,
<code>form_trans()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(101)

# Type "discrete"
bad_dis &lt;- new_d(
  data.frame(x = sort(runif(100)), prob = runif(100)),
  type = "discrete"
)
smoothed_dis &lt;- form_smooth(bad_dis)
plot(bad_dis)
lines(smoothed_dis, col = "blue")

# Type "continuous"
bad_con &lt;- new_d(
  data.frame(x = sort(runif(100)), y = runif(100)),
  type = "continuous"
)
smoothed_con &lt;- form_smooth(bad_con)
plot(bad_con)
lines(smoothed_con, col = "blue")
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>form_mix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Form mixture of distributions</h2>

<h3>Description</h3>

<p>Based on a list of pdqr-functions and vector of weights form a pdqr-function
for corresponding mixture distribution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">form_mix(f_list, weights = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>f_list</code></td>
<td>
<p>List of pdqr-functions. Can have different
classes and types (see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Numeric vector of weights or <code>NULL</code> (default; corresponds to
equal weights). Should be non-negative numbers with positive sum.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Type of output mixture</strong> is determined by the following algorithm:
</p>

<ul>
<li>
<p> If <code>f_list</code> consists only from pdqr-functions of "discrete" type, then
output will have "discrete" type.
</p>
</li>
<li>
<p> If <code>f_list</code> has at least one pdqr-function of type "continuous", then
output will have "continuous" type. In this case all "discrete"
pdqr-functions in <code>f_list</code> are approximated with corresponding dirac-like
"continuous" functions (with form_retype(*, method = "dirac")). <strong>Note</strong> that this approximation has consequences
during computation of comparisons. For example, if original "discrete"
function <code>f</code> is for distribution with one element <code>x</code>, then probability of
<code>f &gt;= x</code> being true is 1. After retyping to dirac-like function, this
probability will be 0.5, because of symmetrical dirac-like approximation.
Using a little nudge to <code>x</code> of <code>1e-7</code> magnitude in the correct direction
(<code>f &gt;= x - 1e-7</code> in this case) will have expected output.
</p>
</li>
</ul>
<p><strong>Class of output mixture</strong> is determined by the class of the first element
of <code>f_list</code>. To change output class, use one of <code style="white-space: pre;">⁠as_*()⁠</code> functions to change
class of first element in <code>f_list</code> or class of output.
</p>
<p><strong>Note</strong> that if output "continuous" pdqr-function for mixture distribution
(in theory) should have discontinuous density, it is approximated
continuously: discontinuities are represented as intervals in
"x_tbl" with extreme slopes (see Examples).
</p>


<h3>Value</h3>

<p>A pdqr-function for mixture distribution of certain
type and class (see Details).
</p>


<h3>See Also</h3>

<p>Other form functions: 
<code>form_estimate()</code>,
<code>form_regrid()</code>,
<code>form_resupport()</code>,
<code>form_retype()</code>,
<code>form_smooth()</code>,
<code>form_tails()</code>,
<code>form_trans()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># All "discrete"
d_binom &lt;- as_d(dbinom, size = 10, prob = 0.5)
r_pois &lt;- as_r(rpois, lambda = 1)
dis_mix &lt;- form_mix(list(d_binom, r_pois))
plot(dis_mix)

# All "continuous"
p_norm &lt;- as_p(pnorm)
d_unif &lt;- as_d(dunif)

con_mix &lt;- form_mix(list(p_norm, d_unif), weights = c(0.7, 0.3))
## Output is a p-function, as is first element of `f_list`
con_mix
plot(con_mix)

## Use `as_*()` functions to change class
d_con_mix &lt;- as_d(con_mix)

## Theoretical output density should be discontinuous, but here it is
## approximated with continuous function
con_x_tbl &lt;- meta_x_tbl(con_mix)
con_x_tbl[(con_x_tbl$x &gt;= -1e-4) &amp; (con_x_tbl$x &lt;= 1e-4), ]

# Some "discrete", some "continuous"
all_mix &lt;- form_mix(list(d_binom, d_unif))
plot(all_mix)
all_x_tbl &lt;- meta_x_tbl(all_mix)

## What dirac-like approximation looks like
all_x_tbl[(all_x_tbl$x &gt;= 1.5) &amp; (all_x_tbl$x &lt;= 2.5), ]
</code></pre>


</div>
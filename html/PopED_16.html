<div class="container">

<table style="width: 100%;"><tr>
<td>create_design_space</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create design variables and a design space for a full description of an optimization problem.</h2>

<h3>Description</h3>

<p><code>create_design_space</code> takes an initial design and arguments for a design space and 
creates a design and design space for design optimization.
Checks the sizes of supplied design space variables and 
changes them to sizes that  make sense if there are inconsistencies.  
Function arguments can use shorthand notation (single values, vectors, lists of vectors and 
list of list) or matricies.
Returns a list of matricies compatible with PopED.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_design_space(
  design,
  maxni = NULL,
  minni = NULL,
  maxtotni = NULL,
  mintotni = NULL,
  maxgroupsize = NULL,
  mingroupsize = NULL,
  maxtotgroupsize = NULL,
  mintotgroupsize = NULL,
  maxxt = NULL,
  minxt = NULL,
  xt_space = NULL,
  maxa = NULL,
  mina = NULL,
  a_space = NULL,
  x_space = NULL,
  use_grouped_xt = FALSE,
  grouped_xt = NULL,
  use_grouped_a = FALSE,
  grouped_a = NULL,
  use_grouped_x = FALSE,
  grouped_x = NULL,
  our_zero = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>The output from a call to <code>create_design</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxni</code></td>
<td>
<p>Vector defining the maximum number of samples per group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minni</code></td>
<td>
<p>Vector defining the minimum number of samples per group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxtotni</code></td>
<td>
<p>Number defining the maximum number of samples allowed in the experiment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mintotni</code></td>
<td>
<p>Number defining the minimum number of samples allowed in the experiment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxgroupsize</code></td>
<td>
<p>Vector defining the maximum size of the different groups (maximum number of individuals in each group)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mingroupsize</code></td>
<td>
<p>Vector defining the minimum size of the different groups (minimum num individuals in each group)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxtotgroupsize</code></td>
<td>
<p>The total maximal groupsize over all groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mintotgroupsize</code></td>
<td>
<p>The total minimal groupsize over all groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxxt</code></td>
<td>
<p>Matrix or single value defining the maximum value for each xt sample.  If a single value is 
supplied then all xt values are given the same maximum value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minxt</code></td>
<td>
<p>Matrix or single value defining the minimum value for each xt sample.  If a single value is 
supplied then all xt values are given the same minimum value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xt_space</code></td>
<td>
<p>Cell array <code>cell</code> defining the discrete variables allowed for each xt value.
Can also be a vector of values <code>c(1:10)</code> (same values allowed for all xt), or a list of lists 
<code>list(1:10, 2:23, 4:6)</code> (one for each value in xt in row major order or just for one row in xt, 
and all other rows will be duplicated).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxa</code></td>
<td>
<p>Vector defining the maximum value for each covariate. IF a single value is supplied then
all a values are given the same maximum value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mina</code></td>
<td>
<p>Vector defining the minimum value for each covariate. IF a single value is supplied then
all a values are given the same minimum value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a_space</code></td>
<td>
<p>Cell array <code>cell</code> defining the discrete variables allowed for each a value.
Can also be a list of values <code>list(1:10)</code> (same values allowed for all a), or a list of lists 
<code>list(1:10, 2:23, 4:6)</code> (one for each value in a).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_space</code></td>
<td>
<p>Cell array <code>cell</code> defining the discrete variables for each x value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_grouped_xt</code></td>
<td>
<p>Group sampling times between groups so that each group has the same values (<code>TRUE</code> or <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouped_xt</code></td>
<td>
<p>Matrix defining the grouping of sample points. Matching integers mean that the points are matched.
Allows for finer control than <code>use_grouped_xt</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_grouped_a</code></td>
<td>
<p>Group continuous design variables between groups so that each group has the same values (<code>TRUE</code> or <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouped_a</code></td>
<td>
<p>Matrix defining the grouping of continuous design variables. Matching integers mean that the values are matched.
Allows for finer control than <code>use_grouped_a</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_grouped_x</code></td>
<td>
<p>Group discrete design variables between groups so that each group has the same values (<code>TRUE</code> or <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouped_x</code></td>
<td>
<p>Matrix defining the grouping of discrete design variables. Matching integers mean that the values are matched.
Allows for finer control than <code>use_grouped_x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>our_zero</code></td>
<td>
<p>Value to interpret as zero in design.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If a value (or a vector or a list of values) is supplied that corresponds to only one group and the design has
multiple groups then all groups will have the same value(s). If a matrix is expected then a list of lists can be supplied 
instead, each list corresponding to a group.
</p>


<h3>See Also</h3>

<p>Other poped_input: 
<code>convert_variables()</code>,
<code>create.poped.database()</code>,
<code>create_design()</code>,
<code>downsizing_general_design()</code>,
<code>poped.choose()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(PopED)

design_1 &lt;- create_design(xt=list(c(1,2,3,4,5),
                                  c(1,2,3,4)),
                          groupsize=c(50,20),
                          a=list(c(WT=70,DOSE=1000),
                                 c(DOSE=1000,WT=35)))

ds_1 &lt;- create_design_space(design_1)

ds_1_a &lt;- create_design_space(design_1,our_zero = 1e-5)

ds_2 &lt;- create_design_space(design_1,maxni=10,maxxt=10,minxt=0)

ds_3 &lt;- create_design_space(design_1,maxni=10,mingroupsize=20,maxxt=10,minxt=0)

ds_4 &lt;- create_design_space(design_1,maxa=c(100,2000))

ds_5 &lt;- create_design_space(design_1,mina=c(10,20))

design_2 &lt;- create_design(xt=list(c(1,2,3,4,5),
                                  c(1,2,3,4)),
                          groupsize=c(50,20),
                          a=list(c(WT=70,DOSE=1000),
                                 c(WT=35,DOSE=1000)),
                          x=list(c(SEX=1,DOSE_discrete=100),
                                 c(SEX=2,DOSE_discrete=200)))

ds_6 &lt;- create_design_space(design_2) 

ds_7 &lt;- create_design_space(design_2,
                            x_space=list(SEX=c(1,2),
                                         DOSE_discrete=seq(100,400,by=20)))

ds_8 &lt;- create_design_space(design_2,
                            x_space=list(SEX=c(1,2),
                                         DOSE_discrete=seq(100,400,by=20)),
                            grouped_xt=c(1,2,3,4,5))

ds_9 &lt;- create_design_space(design_2,
                            x_space=list(SEX=c(1,2),
                                         DOSE_discrete=seq(100,400,by=20)),
                            use_grouped_xt=TRUE)

design_3 &lt;- create_design(xt=list(c(1,2,3,4,5),
                                  c(1,2,3,4)),
                          groupsize=c(50,20),
                          a=list(c(WT=35,DOSE=1000)),
                          x=list(c(SEX=1,DOSE_discrete=100)))

ds_10 &lt;- create_design_space(design_3,
                             x_space=list(SEX=c(1,2),DOSE_discrete=seq(100,400,by=20)),
                             use_grouped_a=TRUE)

ds_11 &lt;- create_design_space(design_2,
                             x_space=list(SEX=c(1,2),DOSE_discrete=seq(100,400,by=20)),
                             grouped_a=list(c(1,2),c(3,2)))

ds_12 &lt;- create_design_space(design_3,
                             x_space=list(SEX=c(1,2),DOSE_discrete=seq(100,400,by=20)),
                             use_grouped_x=TRUE)

ds_13 &lt;- create_design_space(design_3,
                             x_space=list(SEX=c(1,2),DOSE_discrete=seq(100,400,by=20)),
                             grouped_x=list(c(1,2),c(3,2)))

seq_1 &lt;- 1:10
ds_14 &lt;- create_design_space(design_1,maxxt=10,minxt=0,
                             xt_space = list(seq_1,seq_1,seq_1,seq_1,seq_1))
ds_15 &lt;- create_design_space(design_1,maxxt=10,minxt=0,xt_space = list(seq_1))

possible_values &lt;- as.matrix(cbind(list(0:10),list(0:10),list(0:10),list(0:20),list(0:20)))
xt_space &lt;- as.matrix(rbind(possible_values,possible_values))

ds_16 &lt;- create_design_space(design_1,maxxt=10,minxt=0,xt_space = xt_space)

ds_17 &lt;- create_design_space(design_1,a_space = list(1:100,seq(1000,100000,by=1000)))

</code></pre>


</div>
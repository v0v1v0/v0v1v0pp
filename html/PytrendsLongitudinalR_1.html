<div class="container">

<table style="width: 100%;"><tr>
<td>concat_time_series</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Concatenate Multiple Time-Series Data Sets</h2>

<h3>Description</h3>

<p>This function concatenates the time-series data collected by the 'time_series()' function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">concat_time_series(params, reference_geo_code = "US", zero_replace = 0.1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>A list containing parameters including keyword, topic, folder_name, start_date, end_date, and data_format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_geo_code</code></td>
<td>
<p>Google Trends Geo code for the user-selected reference region. For example, UK's Geo is 'GB', Central Denmark Region's Geo is 'DK-82, and US DMA Philadelphia PA's Geo is '504'. The default is 'US'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero_replace</code></td>
<td>
<p>When re-scaling data from different time periods for concatenation, the last/first data point of a time period may be zero. Then the calculation will throw an error, or every single data point will be zero. To avoid this, the user can adjust the zero to an insignificant number to continue the calculation. The default is 0.1.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This method concatenates the reference time-series data collected by the 'time_series()' function when the function has produced more than one data file. Because the time series data of each time period is normalized, the multiple time-series data sets are not on the same scale and must be re-scaled.
The re-scaled reference time-series data will be used in the next step to re-scale the cross-section data. If the given period is less than 269 days/weeks/months, and the 'time_series()' function produced only one data file, concatenation is unnecessary, and thus no concatenated file will be created in this step. The user can move to the 'convert_cross_section()' function without any problems.
</p>


<h3>Value</h3>

<p>No return value, called for side effects. The function concatenates the time-series data and saves it as a CSV file.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Please note that this example may take a few minutes to run
# Create a temporary folder for the example

# Ensure the temporary folder is cleaned up after the example
if (reticulate::py_module_available("pytrends")) {
  params &lt;- initialize_request_trends(
    keyword = "Coronavirus disease 2019",
    topic = "/g/11j2cc_qll",
    folder_name = file.path(tempdir(), "test_folder"),
    start_date = "2017-12-31",
    end_date = "2024-05-19",
    data_format = "weekly"
  )
  result &lt;- TRUE

  # Run the time_series function and handle TooManyRequestsError
  tryCatch({
    time_series(params, reference_geo_code = "US-CA")
  }, error = function(e) {
    message("An error occurred: ", conditionMessage(e))
    result &lt;- FALSE # Indicate failure only on error
  })

  # Check if at least one file is present in the expected directory
  data_dir &lt;- file.path("test_folder", "weekly", "over_time", "US-CA")
  if (result &amp;&amp; length(list.files(data_dir)) &gt; 0) {
    concat_time_series(params, reference_geo_code = "US-CA")
  } else {
    if (result) {
      message("Skipping concat_time_series because no files were found in the expected directory.")
    } else {
      message("Skipping concat_time_series because time_series failed.")
    }
    result &lt;- FALSE
  }

  # Clean up temporary directory
  on.exit(unlink("test_folder", recursive = TRUE))
} else {
  message("The 'pytrends' module is not available.
  Please install it by running install_pytrendslongitudinalr()")
}

</code></pre>


</div>
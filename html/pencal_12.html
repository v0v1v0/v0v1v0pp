<div class="container">

<table style="width: 100%;"><tr>
<td>prepare_longdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare longitudinal data for PRC</h2>

<h3>Description</h3>

<p>This function removes from a longitudinal dataframe
all measurements taken after the occurence of the event 
or after censoring. It is used internally by <code>fit_lmms</code>
and it assumes that <code>df</code> is sorted by <code>subj.id</code>,
with survival times given in the same order by subject id
(<code>fit_lmms</code> automatically performs this sorting when
needed)
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepare_longdata(df, t.from.base, subj.id, survtime, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>dataframe with the longitudinal measurements</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.from.base</code></td>
<td>
<p>name (as character) of the variable containing
time from baseline in <code>df</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subj.id</code></td>
<td>
<p>name of the subject id variable in <code>df</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survtime</code></td>
<td>
<p>vector containing the survival time or censoring time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>if <code>TRUE</code>, a summary of the data manipulation
is printed</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing: a reduced dataframe called <code>df.sanitized</code>, 
where only measurements taken before <code>t</code> are retained; the number of
measurements retained (<code>n.kept</code>) and removed (<code>n.removed</code>)
from the input data frame
</p>


<h3>Author(s)</h3>

<p>Mirko Signorelli
</p>


<h3>References</h3>

<p>Signorelli, M. (2024). pencal: an R Package for the Dynamic 
Prediction of Survival with Many Longitudinal Predictors. 
To appear in: The R Journal. Preprint: arXiv:2309.15600
</p>
<p>Signorelli, M., Spitali, P., Al-Khalili Szigyarto, C, 
The MARK-MD Consortium, Tsonaka, R. (2021). 
Penalized regression calibration: a method for the prediction 
of survival outcomes using complex longitudinal and 
high-dimensional data. Statistics in Medicine, 40 (27), 6178-6196.
DOI: 10.1002/sim.9178
</p>


</div>
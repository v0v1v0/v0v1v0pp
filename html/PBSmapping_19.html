<div class="container">

<table style="width: 100%;"><tr>
<td>calcVoronoi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculate Voronoi Tesselation
</h2>

<h3>Description</h3>

<p>Calculate the Voronoi (Dirichlet) tesselation for a set of points.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calcVoronoi(xydata, xlim=NULL, ylim=NULL, eps=1e-09, frac=0.0001)

.expandEdges(polys, pts, xlim, ylim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xydata</code></td>
<td>
<p><code>numeric</code> – data frame with columns <code>X</code> and <code>Y</code>
containing the points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p><code>numeric</code> – range of X-coordinates; a bounding box for the
coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p><code>numeric</code> – range of Y-coordinates; a bounding box for the
coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eps</code></td>
<td>
<p><code>numeric</code> – the value of epsilon used in testing whether a quantity is
zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frac</code></td>
<td>
<p><code>numeric</code> – used to detect duplicate input points, which meet the
condition <code class="reqn">\left | x1 - x2 \right | &lt; \mbox{frac} \times
    (\mbox{xmax} - \mbox{xmin}) \mbox{and} \left | y1 - y2 \right | &lt;
    \mbox{frac} \times (\mbox{ymax} - \mbox{ymin})</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polys</code></td>
<td>
<p><code>numeric</code> – valid <code>PolySet</code> data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pts</code></td>
<td>
<p><code>numeric</code> – data.frame with <code>'X'</code> and <code>'Y'</code> columns</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This routine ignores all columns other than <code>'X'</code> and <code>'Y'</code>.
</p>
<p>If the user leaves <code>'xlim'</code> and <code>'ylim'</code> unspecified, the
function defaults to the range of the data with each extent expanded
by ten percent of the range.
</p>
<p>This function sets the attribute <code>'projection'</code> to <code>1</code> and the
attribute <code>'zone'</code> to <code>NULL</code> as it assumes this projection in
its calculations.
</p>


<h3>Value</h3>

<p><code>'PolySet'</code> with columns <code>'PID'</code>, <code>'POS'</code>, <code>'X'</code>, and <code>'Y'</code>.
</p>
<p>Auxiliary dot function <code>'.expandEdges'</code> returns an expanded <code>'PolySet'</code>.
</p>


<h3>Author(s)</h3>

<p><a href="https://github.com/boersn/">Nicholas M. Boers</a>,
Software Engineer, Jobber, Edmonton AB
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head – Offshore Rockfish<br>
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br><em>locus opus</em>: Remote office, Vancouver BC<br>
Last modified <code>Rd: 2024-09-03</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmapping</span>:<br><code>addPoints</code>,
<code>addPolys</code>,
<code>calcArea</code>,
<code>calcCentroid</code>,
<code>calcConvexHull</code>,
<code>calcMidRange</code>,
<code>calcSummary</code>,
<code>locateEvents</code>,
<code>plotMap</code>,
<code>plotPoints</code>,
<code>plotPolys</code>,
<code>PolySet</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">local(envir=.PBSmapEnv,expr={
  oldpar = par(no.readonly=TRUE)
  #--- create some EventData
  events &lt;- as.EventData(data.frame(
    EID=1:200, X=rnorm(200), Y=rnorm(200)), projection=1)
  #--- calculate the Voronoi tesselation
  polys &lt;- calcVoronoi(events)
  #--- create PolyData to color it based on area
  polyData &lt;- calcArea(polys)
  names(polyData)[is.element(names(polyData), "area")] &lt;- "Z"
  colSeq &lt;- seq(0.4, 0.95, length=4)
  polyData &lt;- makeProps(polyData,
    breaks=quantile(polyData$Z,c(0,.25,.5,.75,1)),
    propName="col", propVals=rgb(colSeq,colSeq,colSeq))
  #--- plot the tesselation
  plotMap(polys, polyProps=polyData)
  #--- plot the points
  addPoints(events, pch=19)
  par(oldpar)
})
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>subjectProfileCombine</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Combine subject profile plots.</h2>

<h3>Description</h3>

<p>Visualizations of different modules are combined
by subject.
The plots are aligned in the time axis (if requested).
If the plots should be aligned:
</p>

<ul>
<li>
<p>the same time limits are set for all plots
</p>
</li>
<li>
<p>the time axis is transformed if any of the
plot was created with a time transformation
</p>
</li>
<li>
<p>the time axis is expanded for all plots 
if any of the plot was created with a time axis expanded.<br>
The <code>expansion</code> object for
the combined plot is created 
from the max of each expansion element across modules.
</p>
</li>
</ul>
<p>If some plots are missing for a specific subject,
an empty plot is created, containing information
as a text based on the <code>label</code> with which the plot was created.
</p>


<h3>Usage</h3>

<pre><code class="language-R">subjectProfileCombine(
  listPlots,
  timeLim = NULL,
  timeAlign = "all",
  timeAlignPerSubject = "none",
  subjectVar = "USUBJID",
  maxNLines = NULL,
  refLines = NULL,
  refLinesData = NULL,
  refLinesTimeVar = NULL,
  refLinesLabelVar = NULL,
  shiny = FALSE,
  verbose = FALSE,
  nCores = 1,
  reportPerSubject = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>listPlots</code></td>
<td>
<p>listPlots per subject as created inside the
<code>subjectProfileCombine</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLim</code></td>
<td>
<p>time limits, as returned by the
<code>getTimeLimSubjectProfilePlots</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeAlign</code></td>
<td>
<p>Character vector with time alignment across modules/subjects, either:
</p>

<ul>
<li>
<p>'all' (by default): all plots have the same time limits
</p>
</li>
<li>
<p>'none': each of the plot (module*subject) has its own time limits
</p>
</li>
<li>
<p>character vector with names of the modules which
should have the same time limits
(should correspond to the names of <code>listPlots</code>)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeAlignPerSubject</code></td>
<td>
<p>Character vector, specifying if the plots
should be aligned (or not) across subjects
</p>

<ul>
<li>
<p>'none' (by default): all modules to align
have the same time limit across subjects
</p>
</li>
<li>
<p>'all': all modules to align
have different time limits per subject
</p>
</li>
<li>
<p>character vector with subset of the modules to align per subject
(should correspond to the names of <code>listPlots</code>)
</p>
</li>
</ul>
<p>Only the modules already specified in <code>timeAlign</code>
can be aligned by subject.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subjectVar</code></td>
<td>
<p>String, variable of <code>data</code> with subject ID</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxNLines</code></td>
<td>
<p>Maximum number of lines for a combined plot,
to fit in the page height. <br>
When the different visualizations
are combined for each subject, they will be allocated 
to different pages if the number of lines of the combined visualization
is higher than this number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refLines</code></td>
<td>
<p>(optional) nested list with details for reference line(s).
Each sublist contains:
</p>

<ul>
<li>
<p>(required) 'label': string with label for the reference line
</p>
</li>
<li>
<p>(required) 'time': unique time (x) coordinate for the reference line
</p>
</li>
<li>
<p>(optional) 'color': color for the reference line,
'black' by default
</p>
</li>
<li>
<p>(optional) 'linetype': linetype for the reference line,
'dotted' by default
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refLinesData</code></td>
<td>
<p>data.frame with data from which the reference line(s) should be extracted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refLinesTimeVar</code></td>
<td>
<p>string, variable of <code>refLinesData</code> with time for reference line(s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refLinesLabelVar</code></td>
<td>
<p>string, variable of <code>refLinesData</code> with label for reference line(s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shiny</code></td>
<td>
<p>logical, set to TRUE (FALSE by default) 
if the report is generated from a Shiny application.
Messages during report creation will be included in the Shiny interface,
and it will be mentioned at the end of the report.
In this case, the <code>shiny</code> package should be available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical, if TRUE print messages during execution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nCores</code></td>
<td>
<p>Integer containing the number of cores used for the computation
(1 by default). If more than 1, computation is parallelized, in this case
the package <code>parallel</code> is required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reportPerSubject</code></td>
<td>
<p>Logical, if TRUE (FALSE by default)
export a subject profile report by subject.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a nested list of <code>ggplot</code> object, 
containing the combined
profile plots across modules for each subject/page.<br>
Each plot object contains in the associated attribute:
<code>metaData</code> containing: <code>nLines</code>: an estimation
of the number of 'lines' each plot occupies 
(e.g. to set height of the exported figure).
</p>


<h3>Author(s)</h3>

<p>Laure Cougnaud
</p>


</div>
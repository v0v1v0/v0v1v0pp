<div class="container">

<table style="width: 100%;"><tr>
<td>b31crvl</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>ASME B31G. Basic computer program CRVL.BAS</h2>

<h3>Description</h3>

<p>Imitation of <em>CVRL.BAS</em> computer program presented in
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>
<em>Appendix A</em> for determining allowable length and allowable operating
pressure
</p>


<h3>Usage</h3>

<pre><code class="language-R">b31crvl(maop, d, wth, smys, def = 0.72, depth, l)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>maop</code></td>
<td>
<p>maximum allowable operating pressure - <em>MAOP</em>, [<em>PSI</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smys</code></td>
<td>
<p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>def</code></td>
<td>
<p>appropriate (combined) design factor from
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.4.2002.pdf">ASME B31.4</a>,
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.8.2003.pdf">ASME B31.8</a>,
or <a href="https://www.asme.org/codes-standards/find-codes-standards/b31-11-slurry-transportation-piping-systems">ASME B31.11</a>,
[]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l</code></td>
<td>
<p>measured maximum longitudinal length of the corroded area, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Columns <em>maop</em>, <em>d</em>, <em>wth</em>, <em>smys</em>, <em>def</em>,
<em>depth</em>, <em>l</em> in the output <em>data.frame</em> come from
function's input, other columns are calculated.
</p>
<p>For univariate case (when lengths of all input vectors are one) messages
that imitate <em>CRVL.BAS</em> console output are printed.
</p>


<h3>Value</h3>

<p>Object of <em>S3</em>-class <em>crvl</em> which is a <em>data.frame</em> with
the next numeric columns:
</p>

<dl>
<dt>maop</dt>
<dd>
<p>maximum allowable operating pressure - <em>MAOP</em>, [<em>PSI</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>d</dt>
<dd>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>wth</dt>
<dd>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>smys</dt>
<dd>
<p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>def</dt>
<dd>
<p>appropriate (combined) design factor from
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.4.2002.pdf">ASME B31.4</a>,
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.8.2003.pdf">ASME B31.8</a>,
or <a href="https://www.asme.org/codes-standards/find-codes-standards/b31-11-slurry-transportation-piping-systems">ASME B31.11</a>, [].
Type: <code>assert_double</code>.</p>
</dd>
<dt>depth</dt>
<dd>
<p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>l</dt>
<dd>
<p>measured maximum longitudial length of corroded area, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>status</dt>
<dd>
<p>Operational status of pipe:
<em>1</em> - excellent,
<em>2</em> - monitoring is recommended,
<em>3</em> - alert! replace the pipe immediately!
Type: <code>assert_numeric</code>.</p>
</dd>
<dt>design_pressure</dt>
<dd>
<p>design pressure of pipe, [<em>PSI</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>safe_pressure</dt>
<dd>
<p>safe maximum pressure for the corroded area, [<em>PSI</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>pressure_exceeding</dt>
<dd>
<p>whether operator's action is required to reduce
<em>MOAP</em> lower than the maximum safe pressure
of the corroded area. Type: <code>assert_logical</code>.</p>
</dd>
<dt>allowed_corrosion_depth</dt>
<dd>
<p>allowable depth of the corroded area, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>A</dt>
<dd>
<p>intermediate factor related to the geometry of the corroded area, []. Type: <code>assert_double</code>.</p>
</dd>
<dt>allowed_corrosion_length</dt>
<dd>
<p>allowable length of the corroded area, [<em>inch</em>]. Type: <code>assert_double</code>.</p>
</dd>
<dt>AP</dt>
<dd>
<p>another intermediate factor related to the geometry of the corroded area, []. Type: <code>assert_double</code>.</p>
</dd>
</dl>
<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31 G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASME B31G</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code>b31gacd()</code>,
<code>b31gacl()</code>,
<code>b31gafr()</code>,
<code>b31gdep()</code>,
<code>b31gmodpf()</code>,
<code>b31gops()</code>,
<code>b31gpf()</code>,
<code>b31gsap()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(pipenostics)

## Further examples are inspired by those used in Appendix A of
## ASME B31G-1991 to verify correct entry of CRVL.BAS source code

## Example 1
b31crvl(maop = 910, d = 30, wth = .438, smys = 52000, def  = .72, depth = .1, l = 7.5)
#
# -- Calculated data --
# Intermediate factor (A) = 1.847
# Design pressure = 1093 PSI; Safe pressure = 1093 PSI
# Pipe may be operated safely at MAOP, 910 PSI
# With corrosion length 7.500 inch, maximum allowed corrosion depth is 0.2490 inch; A = 1.847
# With corrosion depth 0.100 inch, maximum allowed corrosion length is Inf inch; A = 5.000


## Example 2
b31crvl(maop = 400, d = 20, wth = .25, smys = 35000, def  = 0.5, depth = 0.18, l = 10)
#
# -- Calculated data --
# Intermediate factor (A) = 3.993
# Design pressure = 438 PSI; Safe pressure = 284 PSI
# Reduce operating pressure so it will not exceed 284 PSI, and so operate legally and safely
# With corrosion length 10.000 inch, maximum allowed corrosion depth is 0.0790 inch; A = 3.993
# With corrosion depth 0.180 inch, maximum allowed corrosion length is 2.0180 inch; A = 0.806


## Example 3
b31crvl(maop = 910, d = 24, wth = .432, smys = 52000, def  = .72, depth = 0.13, l = 30)
#
# -- Calculated data --
# Intermediate factor (A) = 8.320
# Design pressure = 1348 PSI; Safe pressure = 1037 PSI
# Pipe may be operated safely at MAOP, 910 PSI
# With corrosion length 30.000 inch, maximum allowed corrosion depth is 0.1670 inch; A = 8.320
# With corrosion depth 0.130 inch, maximum allowed corrosion length is Inf inch; A = 5.000


## Example 4
b31crvl(maop = 910, d = 24, wth = .432, smys = 52000, def  = .72, depth = .3, l = 30)
#
# -- Calculated data --
# Intermediate factor (A) = 8.320
# Design pressure = 1348 PSI; Safe pressure = 453 PSI
# Reduce operating pressure so it will not exceed 453 PSI, and so operate legally and safely
# With corrosion length 30.000 inch, maximum allowed corrosion depth is 0.1670 inch; A = 8.320
# With corrosion depth 0.300 inch, maximum allowed corrosion length is 12.8670 inch; A = 3.568


## Example 5
b31crvl(maop = 731, d = 24, wth = .281, smys = 52000, def  = 0.72, depth = 0.08, l = 15)
#
# -- Calculated data --
# Intermediate factor (A) = 5.158
# Design pressure = 877 PSI; Safe pressure = 690 PSI
# Reduce operating pressure so it will not exceed 690 PSI, and so operate legally and safely
# With corrosion length 15.000 inch, maximum allowed corrosion depth is 0.0680 inch; A = 5.158
# With corrosion depth 0.080 inch, maximum allowed corrosion length is 11.6340 inch; A = 4.000


## Example 6
b31crvl(maop = 1e3, d = 36, wth = .5, smys = 52000, def  = 0.72, depth = 0.41, l = 100)
# Alert! Corrosion depth exceeds 80 % of pipe wall! Pipe must be replaced!
# -- Calculated data --
# Intermediate factor (A) = 21.048
# Design pressure = 1040 PSI; Safe pressure = 206 PSI
# Repair or replace pipe because corrosion depth exceeds 80 % of pipe wall!
# Reduce operating pressure so it will not exceed 206 PSI, and so operate legally and safely
# With corrosion length 100.000 inch, maximum allowed corrosion depth is 0.0630 inch; A = 21.048
# With corrosion depth 0.410 inch, maximum allowed corrosion length is 2.5560 inch; A = 0.538
# But 0.410 inch exceeds allowable corrosion depth!!!


## Example 7
b31crvl(maop = 877, d = 12.625, wth = .5, smys = 35000, def  = .4, depth = .035, l = 3)
# Corrosion depth is less than 10 % of pipe wall. No resrictions on operation
# -- Calculated data --
# Intermediate factor (A) = 1.066
# Design pressure = 1109 PSI; Safe pressure = 1109 PSI
# Pipe may be operated safely at MAOP, 877 PSI
# With corrosion length 3.000 inch, maximum allowed corrosion depth is 0.4000 inch; A = 1.066
# With corrosion depth 0.035 inch, maximum allowed corrosion length is Inf inch; A = 5.000


## Example 8
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .125, l = 12)
#
# -- Calculated data --
# Intermediate factor (A) = 3.093
# Design pressure = 875 PSI; Safe pressure = 845 PSI
# Pipe may be operated safely at MAOP, 790 PSI
# With corrosion length 12.000 inch, maximum allowed corrosion depth is 0.1790 inch; A = 3.093
# With corrosion depth 0.125 inch, maximum allowed corrosion length is 15.5190 inch; A = 4.000


## TEST #1
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .179, l = 12)
#
#-- Calculated data --
# Intermediate factor (A) = 3.093
# Design pressure = 875 PSI; Safe pressure = 791 PSI
# Pipe may be operated safely at MAOP, 790 PSI
# With corrosion length 12.000 inch, maximum allowed corrosion depth is 0.1790 inch; A = 3.093
# With corrosion depth 0.179 inch, maximum allowed corrosion length is 12.1820 inch; A = 3.140


## TEST #1A
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .179, l = 12.182)
#
# -- Calculated data --
# Intermediate factor (A) = 3.140
# Design pressure = 875 PSI; Safe pressure = 790 PSI
# Pipe may be operated safely at MAOP, 790 PSI
# With corrosion length 12.182 inch, maximum allowed corrosion depth is 0.1780 inch; A = 3.140
# With corrosion depth 0.179 inch, maximum allowed corrosion length is 12.1820 inch; A = 3.140


## TEST #1B
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .180, l = 12.182)
#
# -- Calculated data --
# Intermediate factor (A) = 3.140
# Design pressure = 875 PSI; Safe pressure = 789 PSI
# Reduce operating pressure so it will not exceed 789 PSI, and so operate legally and safely
# With corrosion length 12.182 inch, maximum allowed corrosion depth is 0.1780 inch; A = 3.140
# With corrosion depth 0.180 inch, maximum allowed corrosion length is 11.9610 inch; A = 3.083


## TEST #2
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .179, l = 12.297)
#
# -- Calculated data --
# Intermediate factor (A) = 3.170
# Design pressure = 875 PSI; Safe pressure = 789 PSI
# Reduce operating pressure so it will not exceed 789 PSI, and so operate legally and safely
# With corrosion length 12.297 inch, maximum allowed corrosion depth is 0.1780 inch; A = 3.170
# With corrosion depth 0.179 inch, maximum allowed corrosion length is 12.1820 inch; A = 3.140


## All examples at once:
data(b31gdata)
examples &lt;- with(b31gdata, b31crvl(maop, d, wth, smys, def, depth, l))

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>streaks</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Up and Down Streaks
</h2>

<h3>Description</h3>

<p>Compute up and down streaks for time-series.
</p>


<h3>Usage</h3>

<pre><code class="language-R">streaks(x, ...)

## Default S3 method:
streaks(x, up =  0.2, down = -up,
        initial.state = NA, y = NULL, relative = TRUE, ...)
## S3 method for class 'zoo'
streaks(x, up =  0.2, down = -up,
        initial.state = NA, y = NULL, relative = TRUE, ...)
## S3 method for class 'NAVseries'
streaks(x, up =  0.2, down = -up,
        initial.state = NA, bm = NULL, relative = TRUE, ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a price series
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial.state</code></td>
<td>

<p><code>NA</code>, <code>"up"</code> or <code>"down"</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>up</code></td>
<td>

<p>a number, such as 0.1 (i.e. 10%)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>down</code></td>
<td>

<p>a negative number, such as -0.1 (i.e. -10%)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>another price series
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bm</code></td>
<td>

<p>another price series. Mapped to ‘<code>y</code>’
in the default method.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relative</code></td>
<td>

<p>logical
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>other arguments passed to methods
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>streaks</code> is a generic function. It computes
series of uninterrupted up and down movements
(‘streaks’) in a price series. Uninterrupted
is meant in the sense that no countermovement of
<code>down</code> (<code>up</code>) percent or more occurs in up
(down) movements.
</p>
<p>There are methods for numeric vectors, and
<code>NAVseries</code> and <code>zoo</code> objects.
</p>
<p>The turning points (extreme points) are computed with
the benefit of hindsight: the starting point (the
low) of an up streak can only be determined once the
streak is triggered, i.e. the up streak has already
run its minimum amount. Vice versa for down streaks.
</p>
<p>When ‘<code>up</code>’ and ‘<code>down</code>’ are
not equal, results may be inconsistent: in the
current implementation, <code>streaks</code> alternates
between up and down streaks. Suppose <code>up</code> is
large compared with <code>down</code>, i.e. it takes long
to trigger up streaks, but they are easily
broken. Down streaks, on the other hand, are quickly
triggered but rarely broken. Now suppose that a down
streak is broken by an up streak: it may then well be
that the up streak would never have been counted as
such, because it was actually broken itself by
another down streak. The implementation for differing
values of ‘<code>up</code>’ and ‘<code>down</code>’
may change in the future.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code>:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>beginning of streak</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>end of streak</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state</code></td>
<td>
<p><code>up</code>, <code>down</code> or <code>NA</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return,change</code></td>
<td>
<p>the return over the streak. If <code>y</code>
was specified, geometric excess return is
computed (see Examples). If <code>relative</code> is <code>FALSE</code>,
the column is named <code>change</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Enrico Schumann &lt;es@enricoschumann.net&gt;
</p>


<h3>References</h3>

<p>Schumann, E. (2023) <em>Portfolio Management with R</em>.
<a href="https://enricoschumann.net/PMwR/">https://enricoschumann.net/PMwR/</a>; in particular, see<br><a href="https://enricoschumann.net/R/packages/PMwR/manual/PMwR.html#drawdowns-streaks">https://enricoschumann.net/R/packages/PMwR/manual/PMwR.html#drawdowns-streaks</a>
</p>


<h3>See Also</h3>

<p><code>drawdowns</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">streaks(DAX[[1]], t = as.Date(row.names(DAX)))

## results &lt;- streaks(x = &lt;...&gt;, y = &lt;...&gt;)
##
## ===&gt; *arithmetic* excess returns
##       x[results$end]/x[results$start] -
##       y[results$end]/y[results$start]
## ===&gt; *geometric* excess returns
##       x[results$end]/x[results$start] /
##      (y[results$end]/y[results$start]) - 1
</code></pre>


</div>
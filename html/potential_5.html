<div class="container">

<table style="width: 100%;"><tr>
<td>mcpotential</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute the Potential Model using Parallelization</h2>

<h3>Description</h3>

<p>This function computes the potential model with a cutoff 
distance and parallel
computation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mcpotential(x, y, var, fun, span, beta, limit = 3 * span, ncl, size = 500)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an sf object (POINT), the set of known observations to estimate
the potentials from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>an sf object (POINT), the set of unknown units for which the
function computes the estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>names of the variables in <code>x</code> from which potentials are
computed. Quantitative variables with no negative values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>spatial interaction function. Options are "p"
(pareto, power law) or "e" (exponential).
For pareto the interaction is defined as: (1 + alpha * mDistance) ^ (-beta).
For "exponential" the interaction is defined as:
exp(- alpha * mDistance ^ beta).
The alpha parameter is computed from parameters given by the user
(<code>beta</code> and <code>span</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>span</code></td>
<td>
<p>distance where the density of probability of the spatial
interaction function equals 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>impedance factor for the spatial interaction function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>maximum distance used to retrieve <code>x</code> points, in map units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncl</code></td>
<td>
<p>number of clusters. <code>ncl</code> is set to
<code>parallel::detectCores() - 1</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p><code>mcpotential</code> splits <code>y</code> in smaller chunks and
dispatches the computation in <code>ncl</code> cores, <code>size</code> indicates the
size of each chunks.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If only one variable is computed a vector is returned, if more than
one variable is computed a matrix is returned.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(sf)
g &lt;- create_grid(x = n3_poly, res = 20000)
pot &lt;- mcpotential(
  x = n3_pt, y = g, var = "POP19",
  fun = "e", span = 75000, beta = 2, 
  limit = 300000, 
  ncl = 2
)
g$OUTPUT &lt;- pot
equipot &lt;- equipotential(g, var = "OUTPUT", mask = n3_poly)
plot(equipot["center"], pal = hcl.colors(nrow(equipot), "cividis"))

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>autoplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot performance evaluation measures with ggplot2</h2>

<h3>Description</h3>

<p>The <code>autoplot</code> function plots performance evaluation measures
by using <span class="pkg">ggplot2</span> instead of the general R plot.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'sscurves'
autoplot(object, curvetype = c("ROC", "PRC"), ...)

## S3 method for class 'mscurves'
autoplot(object, curvetype = c("ROC", "PRC"), ...)

## S3 method for class 'smcurves'
autoplot(object, curvetype = c("ROC", "PRC"), ...)

## S3 method for class 'mmcurves'
autoplot(object, curvetype = c("ROC", "PRC"), ...)

## S3 method for class 'sspoints'
autoplot(object, curvetype = .get_metric_names("basic"), ...)

## S3 method for class 'mspoints'
autoplot(object, curvetype = .get_metric_names("basic"), ...)

## S3 method for class 'smpoints'
autoplot(object, curvetype = .get_metric_names("basic"), ...)

## S3 method for class 'mmpoints'
autoplot(object, curvetype = .get_metric_names("basic"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An <code>S3</code> object generated by <code>evalmod</code>.
The <code>autoplot</code> function accepts the following <code>S3</code> objects for two
different modes, "rocprc" and "basic".
</p>

<ol>
<li>
<p> ROC and Precision-Recall curves (<code>mode = "rocprc"</code>)
</p>

<table>
<tr>
<td style="text-align: left;">
    <strong><code>S3</code> object</strong>
    </td>
<td style="text-align: left;"> <strong># of models</strong>
    </td>
<td style="text-align: left;"> <strong># of test datasets</strong> </td>
</tr>
<tr>
<td style="text-align: left;">

    sscurves </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    mscurves </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    smcurves </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> multiple </td>
</tr>
<tr>
<td style="text-align: left;">
    mmcurves </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> multiple
  </td>
</tr>
</table>
</li>
<li>
<p> Basic evaluation measures (<code>mode = "basic"</code>)
</p>

<table>
<tr>
<td style="text-align: left;">
    <strong><code>S3</code> object</strong>
    </td>
<td style="text-align: left;"> <strong># of models</strong>
    </td>
<td style="text-align: left;"> <strong># of test datasets</strong> </td>
</tr>
<tr>
<td style="text-align: left;">

    sspoints </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    mspoints </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> single   </td>
</tr>
<tr>
<td style="text-align: left;">
    smpoints </td>
<td style="text-align: left;"> single   </td>
<td style="text-align: left;"> multiple </td>
</tr>
<tr>
<td style="text-align: left;">
    mmpoints </td>
<td style="text-align: left;"> multiple </td>
<td style="text-align: left;"> multiple
  </td>
</tr>
</table>
</li>
</ol>
<p>See the <strong>Value</strong> section of <code>evalmod</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>curvetype</code></td>
<td>
<p>A character vector with the following curve types.
</p>

<ol>
<li>
<p> ROC and Precision-Recall curves (mode = "rocprc")
</p>

<table>
<tr>
<td style="text-align: left;">
      <strong>curvetype</strong>
      </td>
<td style="text-align: left;"> <strong>description</strong> </td>
</tr>
<tr>
<td style="text-align: left;">

      ROC </td>
<td style="text-align: left;"> ROC curve </td>
</tr>
<tr>
<td style="text-align: left;">
      PRC </td>
<td style="text-align: left;"> Precision-Recall curve
    </td>
</tr>
</table>
<p>Multiple <code>curvetype</code> can be combined, such as
<code>c("ROC", "PRC")</code>.
</p>
</li>
<li>
<p> Basic evaluation measures (mode = "basic")
</p>

<table>
<tr>
<td style="text-align: left;">
      <strong>curvetype</strong>
      </td>
<td style="text-align: left;"> <strong>description</strong> </td>
</tr>
<tr>
<td style="text-align: left;">

      error </td>
<td style="text-align: left;"> Normalized ranks vs. error rate </td>
</tr>
<tr>
<td style="text-align: left;">
      accuracy </td>
<td style="text-align: left;"> Normalized ranks vs. accuracy </td>
</tr>
<tr>
<td style="text-align: left;">
      specificity </td>
<td style="text-align: left;"> Normalized ranks vs. specificity </td>
</tr>
<tr>
<td style="text-align: left;">
      sensitivity </td>
<td style="text-align: left;"> Normalized ranks vs. sensitivity </td>
</tr>
<tr>
<td style="text-align: left;">
      precision </td>
<td style="text-align: left;"> Normalized ranks vs. precision </td>
</tr>
<tr>
<td style="text-align: left;">
      mcc </td>
<td style="text-align: left;"> Normalized ranks vs. Matthews correlation coefficient </td>
</tr>
<tr>
<td style="text-align: left;">
      fscore </td>
<td style="text-align: left;"> Normalized ranks vs. F-score
   </td>
</tr>
</table>
<p>Multiple <code>curvetype</code> can be combined, such as
<code>c("precision", "sensitivity")</code>.
</p>
</li>
</ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Following additional arguments can be specified.
</p>

<dl>
<dt>type</dt>
<dd>
<p>A character to specify the line type as follows.
</p>

<dl>
<dt>"l"</dt>
<dd>
<p>lines</p>
</dd>
<dt>"p"</dt>
<dd>
<p>points</p>
</dd>
<dt>"b"</dt>
<dd>
<p>both lines and points</p>
</dd>
</dl>
</dd>
<dt>show_cb</dt>
<dd>
<p>A Boolean value to specify whether point-wise confidence
bounds are drawn. It is effective only when <code>calc_avg</code> of the
<code>evalmod</code> function is set to <code>TRUE</code> .
</p>
</dd>
<dt>raw_curves</dt>
<dd>
<p>A Boolean value to specify whether raw curves are
shown instead of the average curve. It is effective only
when <code>raw_curves</code> of the <code>evalmod</code> function is set to
<code>TRUE</code>.
</p>
</dd>
<dt>show_legend</dt>
<dd>
<p>A Boolean value to specify whether the legend is shown.
</p>
</dd>
<dt>ret_grob</dt>
<dd>
<p>A logical value to indicate whether
<code>autoplot</code> returns a <code>grob</code> object. The <code>grob</code> object
is internally generated by <code>arrangeGrob</code>.
The <code>grid.draw</code> function takes a <code>grob</code> object and
shows a plot. It is effective only when a multiple-panel plot is
generated, for example, when <code>curvetype</code> is <code>c("ROC", "PRC")</code>.
</p>
</dd>
<dt>reduce_points</dt>
<dd>
<p>A Boolean value to decide whether the points should be reduced
when <code>mode = "rocprc"</code>. The points are reduced according to
<code>x_bins</code> of the <code>evalmod</code> function.
The default values is <code>TRUE</code>.
</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>autoplot</code> function returns a <code>ggplot</code> object
for a single-panel plot and a frame-grob object for a multiple-panel plot.
</p>


<h3>See Also</h3>

<p><code>evalmod</code> for generating an <code>S3</code> object.
<code>fortify</code> for converting a curves and points object
to a data frame.  <code>plot</code> for plotting the equivalent curves
with the general R plot.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Load libraries
library(ggplot2)
library(grid)

##################################################
### Single model &amp; single test dataset
###

## Load a dataset with 10 positives and 10 negatives
data(P10N10)

## Generate an sscurve object that contains ROC and Precision-Recall curves
sscurves &lt;- evalmod(scores = P10N10$scores, labels = P10N10$labels)

## Plot both ROC and Precision-Recall curves
autoplot(sscurves)

## Reduced/Full supporting points
sampss &lt;- create_sim_samples(1, 50000, 50000)
evalss &lt;- evalmod(scores = sampss$scores, labels = sampss$labels)

# Reduced supporting point
system.time(autoplot(evalss))

# Full supporting points
system.time(autoplot(evalss, reduce_points = FALSE))

## Get a grob object for multiple plots
pp1 &lt;- autoplot(sscurves, ret_grob = TRUE)
plot.new()
grid.draw(pp1)

## A ROC curve
autoplot(sscurves, curvetype = "ROC")

## A Precision-Recall curve
autoplot(sscurves, curvetype = "PRC")

## Generate an sspoints object that contains basic evaluation measures
sspoints &lt;- evalmod(
  mode = "basic", scores = P10N10$scores,
  labels = P10N10$labels
)

## Normalized ranks vs. basic evaluation measures
autoplot(sspoints)

## Normalized ranks vs. precision
autoplot(sspoints, curvetype = "precision")


##################################################
### Multiple models &amp; single test dataset
###

## Create sample datasets with 100 positives and 100 negatives
samps &lt;- create_sim_samples(1, 100, 100, "all")
mdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]]
)

## Generate an mscurve object that contains ROC and Precision-Recall curves
mscurves &lt;- evalmod(mdat)

## ROC and Precision-Recall curves
autoplot(mscurves)

## Reduced/Full supporting points
sampms &lt;- create_sim_samples(5, 50000, 50000)
evalms &lt;- evalmod(scores = sampms$scores, labels = sampms$labels)

# Reduced supporting point
system.time(autoplot(evalms))

# Full supporting points
system.time(autoplot(evalms, reduce_points = FALSE))

## Hide the legend
autoplot(mscurves, show_legend = FALSE)

## Generate an mspoints object that contains basic evaluation measures
mspoints &lt;- evalmod(mdat, mode = "basic")

## Normalized ranks vs. basic evaluation measures
autoplot(mspoints)

## Hide the legend
autoplot(mspoints, show_legend = FALSE)


##################################################
### Single model &amp; multiple test datasets
###

## Create sample datasets with 100 positives and 100 negatives
samps &lt;- create_sim_samples(10, 100, 100, "good_er")
mdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]],
  dsids = samps[["dsids"]]
)

## Generate an smcurve object that contains ROC and Precision-Recall curves
smcurves &lt;- evalmod(mdat, raw_curves = TRUE)

## Average ROC and Precision-Recall curves
autoplot(smcurves, raw_curves = FALSE)

## Hide confidence bounds
autoplot(smcurves, raw_curves = FALSE, show_cb = FALSE)

## Raw ROC and Precision-Recall curves
autoplot(smcurves, raw_curves = TRUE, show_cb = FALSE)

## Reduced/Full supporting points
sampsm &lt;- create_sim_samples(4, 5000, 5000)
mdatsm &lt;- mmdata(sampsm$scores, sampsm$labels, expd_first = "dsids")
evalsm &lt;- evalmod(mdatsm, raw_curves = TRUE)

# Reduced supporting point
system.time(autoplot(evalsm, raw_curves = TRUE))

# Full supporting points
system.time(autoplot(evalsm, raw_curves = TRUE, reduce_points = FALSE))

## Generate an smpoints object that contains basic evaluation measures
smpoints &lt;- evalmod(mdat, mode = "basic")

## Normalized ranks vs. average basic evaluation measures
autoplot(smpoints)


##################################################
### Multiple models &amp; multiple test datasets
###

## Create sample datasets with 100 positives and 100 negatives
samps &lt;- create_sim_samples(10, 100, 100, "all")
mdat &lt;- mmdata(samps[["scores"]], samps[["labels"]],
  modnames = samps[["modnames"]],
  dsids = samps[["dsids"]]
)

## Generate an mscurve object that contains ROC and Precision-Recall curves
mmcurves &lt;- evalmod(mdat, raw_curves = TRUE)

## Average ROC and Precision-Recall curves
autoplot(mmcurves, raw_curves = FALSE)

## Show confidence bounds
autoplot(mmcurves, raw_curves = FALSE, show_cb = TRUE)

## Raw ROC and Precision-Recall curves
autoplot(mmcurves, raw_curves = TRUE)

## Reduced/Full supporting points
sampmm &lt;- create_sim_samples(4, 5000, 5000)
mdatmm &lt;- mmdata(sampmm$scores, sampmm$labels,
  modnames = c("m1", "m2"),
  dsids = c(1, 2), expd_first = "modnames"
)
evalmm &lt;- evalmod(mdatmm, raw_curves = TRUE)

# Reduced supporting point
system.time(autoplot(evalmm, raw_curves = TRUE))

# Full supporting points
system.time(autoplot(evalmm, raw_curves = TRUE, reduce_points = FALSE))

## Generate an mmpoints object that contains basic evaluation measures
mmpoints &lt;- evalmod(mdat, mode = "basic")

## Normalized ranks vs. average basic evaluation measures
autoplot(mmpoints)


##################################################
### N-fold cross validation datasets
###

## Load test data
data(M2N50F5)

## Speficy nessesary columns to create mdat
cvdat &lt;- mmdata(
  nfold_df = M2N50F5, score_cols = c(1, 2),
  lab_col = 3, fold_col = 4,
  modnames = c("m1", "m2"), dsids = 1:5
)

## Generate an mmcurve object that contains ROC and Precision-Recall curves
cvcurves &lt;- evalmod(cvdat)

## Average ROC and Precision-Recall curves
autoplot(cvcurves)

## Show confidence bounds
autoplot(cvcurves, show_cb = TRUE)

## Generate an mmpoints object that contains basic evaluation measures
cvpoints &lt;- evalmod(cvdat, mode = "basic")

## Normalized ranks vs. average basic evaluation measures
autoplot(cvpoints)

## End(Not run)

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>with_parameters_test_that</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Execute a test with parameters.</h2>

<h3>Description</h3>

<p>This function is an extension of [testthat::test_that()] that lets you pass
a series of testing parameters. These values are substituted into your
regular testing code block, making it reusable and reducing duplication.
</p>


<h3>Usage</h3>

<pre><code class="language-R">with_parameters_test_that(
  desc_stub,
  code,
  ...,
  .cases = NULL,
  .test_name = NULL
)

cases(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>desc_stub</code></td>
<td>
<p>A string scalar. Used in creating the names of the
parameterized tests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>
<p>Test code containing expectations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Named arguments of test parameters. All vectors should have the
same length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.cases</code></td>
<td>
<p>A data frame where each row contains test parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.test_name</code></td>
<td>
<p>An alternative way for providing test names. If provided,
the name will be appended to the stub description in 'desc_stub'. If not
provided, test names will be automatically generated.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>You have a couple of options for passing parameters to you test. You can
use named vectors/ lists. The function will assert that you have correct
lengths before proceeding to test execution. Alternatively you can used
a 'data.frame' or list in combination with the splice unquote operator
<code>!!!</code>. Last, you can use the constructor 'cases()', which
is similar to building a 'data.frame' rowwise. If you manually build the
data frame, pass it in the '.cases' argument.
</p>
<p>## Naming test cases
</p>
<p>If the user passes a character vector as '.test_name', each instance is
combined with 'desc_stub' to create the completed test name. Similarly, the
named argument from 'cases()' is combined with 'desc_stub' to create the
parameterized test names. When names aren't provided, they will be
automatically generated using the test data.
</p>
<p>Names follow the pattern of "name=value, name=value" for all elements in a
test case.
</p>


<h3>Examples</h3>

<pre><code class="language-R">with_parameters_test_that("trigonometric functions match identities:",
  {
    testthat::expect_equal(expr, numeric_value)
  },
  expr = c(sin(pi / 4), cos(pi / 4), tan(pi / 4)),
  numeric_value = c(1 / sqrt(2), 1 / sqrt(2), 1),
  .test_name = c("sin", "cos", "tan")
)

# Run the same test with the cases() constructor
with_parameters_test_that(
  "trigonometric functions match identities",
  {
    testthat::expect_equal(expr, numeric_value)
  },
  cases(
    sin = list(expr = sin(pi / 4), numeric_value = 1 / sqrt(2)),
    cos = list(expr = cos(pi / 4), numeric_value = 1 / sqrt(2)),
    tan = list(expr = tan(pi / 4), numeric_value = 1)
  )
)

# If names aren't provided, they are automatically generated.
with_parameters_test_that(
  "trigonometric functions match identities",
  {
    testthat::expect_equal(expr, numeric_value)
  },
  cases(
    list(expr = sin(pi / 4), numeric_value = 1 / sqrt(2)),
    list(expr = cos(pi / 4), numeric_value = 1 / sqrt(2)),
    list(expr = tan(pi / 4), numeric_value = 1)
  )
)
# The first test case is named "expr=0.7071068, numeric_value="0.7071068"
# and so on.

# Or, pass a data frame of cases, perhaps using a helper function
make_cases &lt;- function() {
  tibble::tribble(
    ~.test_name, ~expr, ~numeric_value,
    "sin", sin(pi / 4), 1 / sqrt(2),
    "cos", cos(pi / 4), 1 / sqrt(2),
    "tan", tan(pi / 4), 1
  )
}

with_parameters_test_that(
  "trigonometric functions match identities",
  {
    testthat::expect_equal(expr, numeric_value)
  },
  .cases = make_cases()
)
</code></pre>


</div>
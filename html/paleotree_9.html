<div class="container">

<table style="width: 100%;"><tr>
<td>binTimeData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bin Simulated Temporal Ranges in Discrete Intervals</h2>

<h3>Description</h3>

<p>Converts a matrix of simulated continuous-time first occurrences and last
occurrences for fossil taxa into first and last occurrences given in some set
of discrete-time intervals, either simulated or place <em>a priori</em>,
which is output along with
information of the dates of the given intervals.
</p>


<h3>Usage</h3>

<pre><code class="language-R">binTimeData(timeData, int.length = 1, start = NA, int.times = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>timeData</code></td>
<td>
<p>Two-column matrix of simulated first and last occurrences in
absolute continuous time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int.length</code></td>
<td>
<p>Time interval length, default is 1 time-unit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>Starting time for calculating the intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int.times</code></td>
<td>
<p>A two column matrix with the start and end times of the
intervals to be used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function takes a simulated matrix of per-taxon first and last
occurrences and, by dividing the time-scale into time intervals of non-zero
length, lists taxon occurrences within those interval. By default, a set of
sequential non-overlapping time-interval of equal non-zero length are used,
with the length controlled by the argument int.length.
</p>
<p>Alternatively, a two column matrix of interval start and end times to be
used can be input via the argument <code>int.times</code>. None of these intervals can
have a duration (temporal length) greater than zero. If a first or last
appearance in the input range data could fit into multiple intervals (i.e.
the input discrete time intervals are overlapping), then the appearance data
is placed in the interval of the shortest duration. When output, the
interval times matrix (see below) will be sorted from first to last.
</p>
<p>As with many functions in the <code>paleotree</code> package, absolute time is always
decreasing, i.e. the present day is zero. However, the numbering of
intervals giving in the output increases with time, as these are numbered
relative to each other, from first to last.
</p>
<p>As of version 1.7 of <code>paleotree</code>, taxa which are
extant as indicated in <code>timeData</code> as being
in a time interval bounded <code>(0, 0)</code>, unless time-bins are preset using
argument <code>int.times</code> (prior to version 1.5 they were erroneously listed as
NA).
</p>


<h3>Value</h3>

<p>A list containing: </p>
<table>
<tr style="vertical-align: top;">
<td><code>int.times</code></td>
<td>
<p>A 2-column matrix with the start
and end times of the intervals used; time decreases relative to the
present.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taxon.times</code></td>
<td>
<p>A 2-column matrix with the first and last
occurrences of taxa in the intervals listed in <code>int.times</code>, with numbers
referring to the row of <code>int.times</code>.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>This function is <em>SPECIFICALLY</em> for simulating the effect of having a discrete
time-scale for analyses using simulations. This function should not be used
for non-simulations uses, such as binning temporal occurrences for analyses
of real data. In those case, the temporal ranges (which, in real data, will
probably be given as discrete time intervals) should already be tabulated
within discrete intervals prior to use in <code>paleotree</code>. The user should place
the temporal information in a <code>list</code> object, as described for the output of
<code>binTimeData</code>.
</p>


<h3>Author(s)</h3>

<p>David W. Bapst
</p>


<h3>See Also</h3>

<p><code>simFossilRecord</code>, <code>sampleRanges</code>,
<code>taxicDivCont</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Simulate some fossil ranges with simFossilRecord
set.seed(444)
record &lt;- simFossilRecord(p = 0.1, 
                          q = 0.1, 
                          nruns = 1,
                          nTotalTaxa = c(30,40), 
                          nExtant = 0
                          )
taxa &lt;- fossilRecord2fossilTaxa(record)
# simulate a fossil record with imperfect sampling via sampleRanges
rangesCont &lt;- sampleRanges(taxa,r = 0.5)
# Now let's use binTimeData() to bin in intervals of 1 time unit
rangesDisc &lt;- binTimeData(rangesCont,int.length = 1)
# plot with taxicDivDisc()
equalDiscInt &lt;- taxicDivDisc(rangesDisc)

# example with pre-set intervals input (including overlapping)
presetIntervals &lt;- cbind(
    c(1000, 990, 970, 940),
    c(980, 970, 950, 930)
    )
rangesDisc1 &lt;- binTimeData(rangesCont,
    int.times = presetIntervals)

# plot the diversity curve with these uneven bins
taxicDivDisc(rangesDisc1)

# now let's plot the diversity from these unequal-length bins
   # with the original equal length intervals from above
taxicDivDisc(rangesDisc1, int.times = equalDiscInt[,1:2])


####################################
#example with extant taxa
set.seed(444)
record &lt;- simFossilRecord(p = 0.1, 
                          q = 0.1, 
                          nruns = 1,
                          nTotalTaxa = c(30,40)
                          )
taxa &lt;- fossilRecord2fossilTaxa(record)
# simulate a fossil record 
    # with imperfect sampling via sampleRanges
rangesCont &lt;- sampleRanges(
    taxa, r = 0.5,
    modern.samp.prob = 1)
# Now let's use binTimeDat to bin into intervals of 1 time-unit
rangesDisc &lt;- binTimeData(rangesCont,
    int.length = 1)
# plot with taxicDivDisc()
taxicDivDisc(rangesDisc)

# example with pre-set intervals input
    # (including overlapping)
presetIntervals &lt;- cbind(
    c(40, 30, 20, 10),
    c(30, 20, 10, 0)
    )
rangesDisc1 &lt;- binTimeData(rangesCont,
    int.times = presetIntervals)
    
taxicDivDisc(rangesDisc1)

</code></pre>


</div>
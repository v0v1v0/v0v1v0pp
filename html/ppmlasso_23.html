<div class="container">

<table style="width: 100%;"><tr>
<td>getEnvVar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract environmental data to presence locations</h2>

<h3>Description</h3>

<p>Given a matrix of quadrature points and a list of species presences, this
function extracts environmental data to presence locations using bilinear interpolation.</p>


<h3>Usage</h3>

<pre><code class="language-R">getEnvVar(sp.xy, env.grid, env.scale, coord = c("X", "Y"), envfilename = "SpEnvData", 
tol = 0.01, writefile = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sp.xy</code></td>
<td>
<p>A matrix of species locations containing at least one column representing
longitude and one column representing latitude.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env.grid</code></td>
<td>
<p>The geo-referenced matrix of environmental grids.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env.scale</code></td>
<td>
<p>The spatial resolution of the quadrature scheme from which the 
environmental data is extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coord</code></td>
<td>
<p>A vector containing the names of the longitude and latitude coordinates,
as in <code>sampleQuad</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envfilename</code></td>
<td>
<p>An optional argument containing the name of the saved file. Setting
<code>envfilename =</code> <code>"SpEnvData"</code> will save a matrix <code>sp.dat</code> containing the species presence
locations and the interpolated environmental data to the file <code>"SpEnvData.RData"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>An optional argument to specify the tolerance level of coordinate error passed to an internal call to the <code>griddify</code> function, set to 0.01 by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>writefile</code></td>
<td>
<p>A logical argument to determine whether the output should be written to a file or not. If <code>TRUE</code> (the default), the output will be saved with the file name as described in the <code>envfilename</code> argument.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>At a given species location with coordinates <code class="reqn">(x, y)</code>, the interpolated value of the
environmental variable <code class="reqn">z</code> is calculated as a weighted average of <code class="reqn">z</code> at four reference
quadrature points <code class="reqn">(x^{(1)}, y^{(1)})</code>, <code class="reqn">(x^{(1)}, y^{(2)})</code>, <code class="reqn">(x^{(2)}, y^{(1)})</code> and <code class="reqn">(x^{(2)}, y^{(2)})</code>
that form a square of nominated side length <code>env.scale</code> surrounding <code class="reqn">(x, y)</code>.</p>


<h3>Value</h3>

<p>A matrix containing locations of species presences in the first two columns
and the interpolated environmental data in the remaining columns.</p>


<h3>Author(s)</h3>

<p>Ian W. Renner</p>


<h3>Examples</h3>

<pre><code class="language-R">data(BlueMountains)
species.env = getEnvVar(BlueMountains$eucalypt, env.grid = BlueMountains$env, env.scale = 0.5,
envfilename = NA, writefile = FALSE)
</code></pre>


</div>
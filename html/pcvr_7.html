<div class="container">

<table style="width: 100%;"><tr>
<td>bw.time</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Time conversion and plotting for bellwether data</h2>

<h3>Description</h3>

<p>Time conversion and plotting for bellwether data
</p>


<h3>Usage</h3>

<pre><code class="language-R">bw.time(
  df = NULL,
  mode = c("DAS", "DAP", "DAE"),
  plantingDelay = NULL,
  phenotype = NULL,
  cutoff = 1,
  timeCol = "timestamp",
  group = "Barcodes",
  plot = TRUE,
  format = "%Y-%m-%d %H:%M:%S",
  traitCol = "trait",
  valueCol = "value",
  index = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Data frame to use, this can be in wide or long format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>One of "DAS", "DAP" or "DAE" (Days After Planting and Days After Emergence).
Defaults to adding all columns.
Note that if timeCol is not an integer then DAS is always returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plantingDelay</code></td>
<td>
<p>If 'mode' includes "DAP" then 'plantingDelay' is used to adjust "DAS"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phenotype</code></td>
<td>
<p>If 'mode' includes "DAE" then this is the phenotype used to classify emergence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff</code></td>
<td>
<p>If 'mode' inlcludes "DAE" then this value is used to classify emergence.
Defaults to 1, meaning an image with a value of 1 or more for 'phenotype' has "emerged".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeCol</code></td>
<td>
<p>Column of input time values, defaults to "timestamp".
If this is not an integer then it is assumed to be
a timestamp in the format of the format argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>Grouping variables to specify unique plants as a character vector.
This defaults to "Barcodes". These taken together should identify a unique plant across time,
although often "angle" or "rotation" should be added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical, should plots of the new time variables be printed?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>An R POSIXct format, defaults to lemnatech standard format.
This is only used if timeCol is not an integer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>traitCol</code></td>
<td>
<p>Column with phenotype names, defaults to "trait".
This should generally not need to be changed from the default.
If this and valueCol are present in colnames(df) then the data
is assumed to be in long format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valueCol</code></td>
<td>
<p>Column with phenotype values, defaults to "value".
This should generally not need to be changed from the default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>Optionally a time to use as the beginning of the experiment. This
may be useful if you have multiple datasets or you are adding data from bw.water
and plants were watered before being imaged or if you want to index days off of
midnight. This defaults to NULL but will take any value coercible to POSIXct by
<code>as.POSIXct(... , tz="UTC")</code> such as "2020-01-01 18:30:00"</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The input dataframe with new integer columns for different ways
of describing time in the experiment. If plot is TRUE then a ggplot is also returned as part of
a list.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

sv &lt;- read.pcv(
  "https://raw.githubusercontent.com/joshqsumner/pcvrTestData/main/pcv4-single-value-traits.csv",
  mode = "wide", reader = "fread"
)
sv$genotype = substr(sv$barcode, 3, 5)
sv$genotype = ifelse(sv$genotype == "002", "B73",
  ifelse(sv$genotype == "003", "W605S",
    ifelse(sv$genotype == "004", "MM", "Mo17")
  )
)
sv$fertilizer = substr(sv$barcode, 8, 8)
sv$fertilizer = ifelse(sv$fertilizer == "A", "100",
  ifelse(sv$fertilizer == "B", "50", "0")
)
sv &lt;- bw.time(sv,
  plantingDelay = 0, phenotype = "area_pixels", cutoff = 10,
  timeCol = "timestamp", group = c("barcode", "rotation"), plot = FALSE
)


svl &lt;- read.pcv(
  "https://raw.githubusercontent.com/joshqsumner/pcvrTestData/main/pcv4-single-value-traits.csv",
  mode = "long", reader = "fread"
)
svl$genotype = substr(svl$barcode, 3, 5)
svl$genotype = ifelse(svl$genotype == "002", "B73",
  ifelse(svl$genotype == "003", "W605S",
    ifelse(svl$genotype == "004", "MM", "Mo17")
  )
)
svl$fertilizer = substr(svl$barcode, 8, 8)
svl$fertilizer = ifelse(svl$fertilizer == "A", "100",
  ifelse(svl$fertilizer == "B", "50", "0")
)
svl &lt;- bw.time(svl,
  plantingDelay = 0, phenotype = "area_pixels", cutoff = 10, timeCol = "timestamp",
  group = c("barcode", "rotation"), plot = FALSE
)


</code></pre>


</div>
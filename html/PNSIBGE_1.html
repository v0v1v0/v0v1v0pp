<div class="container">

<table style="width: 100%;"><tr>
<td>get_pns</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download, label, deflate and create survey design object for PNS microdata</h2>

<h3>Description</h3>

<p>Core function of package. With this function only, the user can download a PNS microdata from a year and get a sample design object ready to use with <code>survey</code> package functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_pns(
  year,
  selected = FALSE,
  anthropometry = FALSE,
  vars = NULL,
  labels = TRUE,
  deflator = TRUE,
  design = TRUE,
  reload = TRUE,
  curlopts = list(),
  savedir = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>The year of the data to be downloaded. Must be a number equal to 2013 or 2019. Vector not accepted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selected</code></td>
<td>
<p>Logical value. If <code>TRUE</code>, the specific questionnaire for selected resident will be used. If <code>FALSE</code>, the basic questionnaire for household and residents will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anthropometry</code></td>
<td>
<p>Logical value. If <code>TRUE</code>, the specific questionnaire for the anthropometry module of the selected resident will be used. If <code>FALSE</code>, the questionnaire defined by the <code>selected</code> argument of this function will be used. This argument will be used only if <code>year</code> is equal to 2019.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>Vector of variable names to be kept for analysis. Default is to keep all variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>Logical value. If <code>TRUE</code>, categorical variables will presented as factors with labels corresponding to the survey's dictionary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deflator</code></td>
<td>
<p>Logical value. If <code>TRUE</code>, deflator variables will be available for use in the microdata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>Logical value. If <code>TRUE</code>, will return an object of class <code>survey.design</code> or <code>svyrep.design</code>. It is strongly recommended to keep this parameter as <code>TRUE</code> for further analysis. If <code>FALSE</code>, only the microdata will be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reload</code></td>
<td>
<p>Logical value. If <code>TRUE</code>, will re-download the files even if they already exist in the save directory. If <code>FALSE</code>, will be checked if the files already exist in the save directory and the download will not be performed repeatedly, be careful with coinciding names of microdata files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>curlopts</code></td>
<td>
<p>A named list object identifying the curl options for the handle when using functions from <code>RCurl</code> package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>savedir</code></td>
<td>
<p>Directory to save the downloaded data. Default is to use a temporary directory.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>survey.design</code> or <code>svyrep.design</code> with the data from PNS and its sample design, or a tibble with selected variables of the microdata, including the necessary survey design ones.
</p>


<h3>Note</h3>

<p>For more information, visit the survey official website &lt;<a href="https://www.ibge.gov.br/estatisticas/sociais/saude/9160-pesquisa-nacional-de-saude.html?=&amp;t=o-que-e">https://www.ibge.gov.br/estatisticas/sociais/saude/9160-pesquisa-nacional-de-saude.html?=&amp;t=o-que-e</a>&gt; and consult the other functions of this package, described below.
</p>


<h3>See Also</h3>

<p>read_pns for reading PNS microdata.<br> pns_labeller for labeling categorical variables from PNS microdata.<br> pns_deflator for adding deflator variables to PNS microdata.<br> pns_design for creating PNS survey design object.<br> pns_example for getting the path of the PNS toy example files.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
pns.svy &lt;- get_pns(year=2019, selected=FALSE, anthropometry=FALSE, vars=c("J007","J009"),
                       labels=TRUE, deflator=TRUE, design=TRUE,
                       reload=TRUE, curlopts=list(), savedir=tempdir())
# Calculating proportion of people diagnosed with chronic diseases
if (!is.null(pns.svy)) survey::svymean(x=~J007, design=pns.svy, na.rm=TRUE)
pns.svy2 &lt;- get_pns(year=2019, selected=TRUE, anthropometry=FALSE, vars=c("N001","N00101"),
                       labels=TRUE, deflator=TRUE, design=TRUE,
                       reload=TRUE, curlopts=list(), savedir=tempdir())
# Calculating proportion of people's self-rated health
if (!is.null(pns.svy2)) survey::svymean(x=~N001, design=pns.svy2, na.rm=TRUE)
pns.svy3 &lt;- get_pns(year=2019, selected=FALSE, anthropometry=TRUE, vars=c("W00101","W00201"),
                       labels=TRUE, deflator=TRUE, design=TRUE,
                       reload=TRUE, curlopts=list(), savedir=tempdir())
# Calculating the average weight of people
if (!is.null(pns.svy3)) survey::svymean(x=~W00101, design=pns.svy3, na.rm=TRUE)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>map_newdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Map new data to a predinfo object</h2>

<h3>Description</h3>

<p>This function takes a <code>predinfo</code> object and applies (maps) a new data to
this object to check there is consistency between the two. This function is
not usually called directly, but rather within  other functions within the
package, such as <code>pred_predict</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">map_newdata(
  x,
  new_data,
  binary_outcome = NULL,
  survival_time = NULL,
  event_indicator = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class "predinfo".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_data</code></td>
<td>
<p>data.frame upon which the prediction model should be applied
(for subsequent validation/model updating/model aggregation).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>binary_outcome</code></td>
<td>
<p>Character variable giving the name of the column in
<code>new_data</code> that represents the observed binary outcomes (should be
coded 0 and 1 for non-event and event, respectively). Only relevant for
<code>model_type</code>="logistic"; leave as <code>NULL</code> otherwise. Leave as
<code>NULL</code> if <code>new_data</code> does not contain any outcomes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survival_time</code></td>
<td>
<p>Character variable giving the name of the column in
<code>new_data</code> that represents the observed survival times. Only relevant
for <code>model_type</code>="survival"; leave as <code>NULL</code> otherwise. Leave as
<code>NULL</code> if <code>new_data</code> does not contain any survival outcomes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_indicator</code></td>
<td>
<p>Character variable giving the name of the column in
<code>new_data</code> that represents the observed survival indicator (1 for
event, 0 for censoring). Only relevant for <code>model_type</code>="survival";
leave as <code>NULL</code> otherwise. Leave as <code>NULL</code> if <code>new_data</code>
does not contain any survival outcomes.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function maps a new dataset onto a <code>pred_info</code> object. The
new dataset might be a validation dataset (to test the performance of the
existing prediction model) and/or it might be the dataset on which one
wishes to apply model updating methods to revise the model. In any case,
this should be specified in <code>new_data</code> as a data.frame. Each row
should be an observation (e.g. patient) and each variable/column should be
a predictor variable. The predictor variables need to include (as a
minimum) all of the predictor variables that are included in the existing
prediction model (i.e., each of the variable names supplied to
<code>pred_input_info</code>, through the <code>model_info</code> parameter,
must match the name of a variables in <code>new_data</code>).
</p>
<p>Any factor variables within <code>new_data</code> must be converted to dummy
(0/1) variables before calling this function. <code>dummy_vars</code> can
help with this.
</p>
<p><code>binary_outcome</code>, <code>survival_time</code> and <code>event_indicator</code> are
used to specify the outcome variable(s) within <code>new_data</code>, if relevant
(use <code>binary_outcome</code> if <code>model_type</code> = "logistic", or use
<code>survival_time</code> and <code>event_indicator</code> if <code>model_type</code> =
"survival"). For example, if validating an existing model, then these
inputs specify the columns of <code>new_data</code> that will be used for
assessing predictive performance of the predictions in the validation
dataset. If <code>new_data</code> does not contain outcomes, then leave these
inputs to the default of <code>NULL</code>.
</p>


<h3>Value</h3>

<p>Returns a list of the predinfo object, the new_data, and outcomes.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#as above, this function is not usually called directly, but an example of
#such use is:
model1 &lt;- pred_input_info(model_type = "logistic",
                          model_info = SYNPM$Existing_logistic_models[1,])
map_newdata(x = model1,
            new_data = SYNPM$ValidationData[1:10,],
            binary_outcome = "Y")

</code></pre>


</div>
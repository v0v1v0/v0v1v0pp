<div class="container">

<table style="width: 100%;"><tr>
<td>dbPool</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a pool of database connections</h2>

<h3>Description</h3>

<p><code>dbPool()</code> is a drop-in replacement for <code>DBI::dbConnect()</code> that
provides a shared pool of connections that can automatically reconnect
to the database if needed.
See DBI-wrap for methods to use with pool objects,
and DBI-custom for unsupported methods and the "pool" way of using them.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dbPool(
  drv,
  ...,
  minSize = 1,
  maxSize = Inf,
  onCreate = NULL,
  idleTimeout = 60,
  validationInterval = 60,
  validateQuery = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>drv</code></td>
<td>
<p>A DBI Driver, e.g. <code>RSQLite::SQLite()</code>,
<code>RPostgres::Postgres()</code>, <code>odbc::odbc()</code> etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed on to <code>DBI::dbConnect()</code>. These are used to
identify the database and provide needed authentication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minSize, maxSize</code></td>
<td>
<p>The minimum and maximum number of objects in the pool.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onCreate</code></td>
<td>
<p>A function that takes a single argument, a connection,
and is called when the connection is created. Use this with
<code>DBI::dbExecute()</code> to set default options on every connection created
by the pool.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idleTimeout</code></td>
<td>
<p>Number of seconds to wait before destroying idle objects
(i.e. objects available for checkout over and above <code>minSize</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validationInterval</code></td>
<td>
<p>Number of seconds to wait between validating
objects that are available for checkout. These objects are validated
in the background to keep them alive.
</p>
<p>To force objects to be validated on every checkout, set
<code>validationInterval = 0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validateQuery</code></td>
<td>
<p>A simple query that can be used to verify that the
connetction is valid. If not provided, <code>dbPool()</code> will try a few common
options, but these don't work for all databases.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A new connection is created transparently
</p>

<ul>
<li>
<p> if the pool is empty
</p>
</li>
<li>
<p> if the currently checked out connection is invalid
(checked at most once every <code>validationInterval</code> seconds)
</p>
</li>
<li>
<p> if the pool is not full and the connections are all in use
</p>
</li>
</ul>
<p>Use <code>poolClose()</code> to close the pool and all connections in it.
See <code>poolCreate()</code> for details on the internal workings of the pool.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># You use a dbPool in the same way as a standard DBI connection
pool &lt;- dbPool(RSQLite::SQLite(), dbname = demoDb())
pool

dbGetQuery(pool, "SELECT * FROM mtcars LIMIT 4")

# Always close a pool when you're done using it
poolClose(pool)
</code></pre>


</div>
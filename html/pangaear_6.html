<div class="container">

<table style="width: 100%;"><tr>
<td>pg_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download data from Pangaea.</h2>

<h3>Description</h3>

<p>Grabs data as a dataframe or list of dataframes from a Pangaea data
repository URI; see: <a href="https://www.pangaea.de/">https://www.pangaea.de/</a>
</p>


<h3>Usage</h3>

<pre><code class="language-R">pg_data(doi, overwrite = TRUE, mssgs = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>doi</code></td>
<td>
<p>DOI of Pangaeae single dataset, or of a collection of datasets.
Expects either just a DOI of the form <code>10.1594/PANGAEA.746398</code>, or with
the URL part in front, like
<a href="https://doi.pangaea.de/10.1594/PANGAEA.746398">https://doi.pangaea.de/10.1594/PANGAEA.746398</a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>(logical) Ovewrite a file if one is found with the same name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mssgs</code></td>
<td>
<p>(logical) print information messages. Default: <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Curl options passed on to crul::verb-GET</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Data files are stored in an operating system appropriate location.
Run <code>pg_cache$cache_path_get()</code> to get the storage location
on your machine. See pg_cache for more information, including how to
set a different base path for downloaded files.
</p>
<p>Some files/datasets require the user to be logged in. For now we
just pass on these - that is, give back nothing other than metadata.
</p>


<h3>Value</h3>

<p>One or more items of class pangaea, each with the doi, parent doi
(if many dois within a parent doi), url, citation, path, and data object.
Data object depends on what kind of file it is. For tabular data, we print
the first 10 columns or so; for a zip file we list the files in the zip
(but leave it up to the user to dig unzip and get files from the zip file);
for png files, we point the user to read the file in with <code>png::readPNG()</code>
</p>


<h3>Author(s)</h3>

<p>Naupaka Zimmerman, Scott Chamberlain
</p>


<h3>References</h3>

<p><a href="https://www.pangaea.de">https://www.pangaea.de</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# a single file
(res &lt;- pg_data(doi='10.1594/PANGAEA.807580'))
res[[1]]$doi
res[[1]]$citation
res[[1]]$data
res[[1]]$metadata

# another single file
pg_data(doi='10.1594/PANGAEA.807584')

# Many files
(res &lt;- pg_data(doi='10.1594/PANGAEA.761032'))
res[[1]]
res[[2]]

# Manipulating the cache
## list files in the cache
pg_cache$list()

## clear all data
# pg_cache$delete_all()
pg_cache$list()

## clear a single dataset by DOI
pg_data(doi='10.1594/PANGAEA.812093')
pg_cache$list()
path &lt;- grep("PANGAEA.812093", pg_cache$list(), value = TRUE)
pg_cache$delete(path)
pg_cache$list()

# search for datasets, then pass in DOIs
(searchres &lt;- pg_search(query = 'birds', count = 20))
pg_data(searchres$doi[1])

# png file
pg_data(doi = "10.1594/PANGAEA.825428")

# zip file
pg_data(doi = "10.1594/PANGAEA.860500")

# login required
## we skip file download
pg_data("10.1594/PANGAEA.788547")

## End(Not run)
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>boxplot.precmed</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A set of box plots of estimated ATEs from the <code>"precmed"</code> object</h2>

<h3>Description</h3>

<p>Provides box plots which depict distributions of estimated ATEs for each multi-category subgroup in
the validation set across all cross-validation iterations. The subgroups are mutually exclusive and
are categorized by the CATE score percentiles (<code>prop.multi</code> specified in <code>catecv()</code> or
<code>catecvmean()</code>). Box plots of mutually exclusive subgroups are constructed separately by scoring
method specified in <code>catecv()</code>. This should be run only after results of <code>catecv()</code> or
<code>catecvmean()</code>) have been obtained.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'precmed'
boxplot(
  x,
  ylab = NULL,
  plot.hr = FALSE,
  title = waiver(),
  theme = theme_classic(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>"precmed"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>A character value for the y-axis label to describe what the ATE is. Default is <code>NULL</code>,
which creates a default y-axis label based on available data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.hr</code></td>
<td>
<p>A logical value indicating whether the hazard ratios should be plotted in the
validation curves (<code>TRUE</code>). Otherwise, the restricted mean time lost is plotted (<code>FALSE</code>).
This argument is only applicable to survival outcomes. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>The text for the title</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theme</code></td>
<td>
<p>Defaults to <code>theme_classic()</code>. Other options include <code>theme_grey()</code>, <code>theme_bw()</code>, <code>theme_light()</code>, <code>theme_dark()</code>, and <code>theme_void()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other parameters</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>boxplot()</code> takes in outputs from <code>catecv()</code> and generates
the box plots of estimated ATEs for multi-category subgroups of the validation set.
The box plots together with the overall ATE reference line can help compare the scoring methods'
ability to distinguish subgroups of patients with different treatment effects.
</p>
<p>For a given scoring method, box plots showing increasing or decreasing trends across the
multi-category subgroups indicate presence of treatment effect heterogeneity
(and the ability of the scoring method to capture it). On the contrary, box plots which
are relatively aligned across the multi-category subgroups indicate absence of treatment
effect heterogeneity (or the inability of the scoring method to capture it).
</p>


<h3>Value</h3>

<p>Returns sets of box plots, one set for each scoring method, over each of the multi-category
subgroups. A gray horizontal dashed line of the overall ATE is included as a reference.
</p>


<h3>References</h3>

<p>Yadlowsky, S., Pellegrini, F., Lionetto, F., Braune, S., &amp; Tian, L. (2020).
<em>Estimation and validation of ratio-based conditional average treatment effects using
observational data. Journal of the American Statistical Association, 1-18.</em> DOI: 10.1080/01621459.2020.1772080.
</p>


<h3>See Also</h3>

<p><code>plot</code> and <code>abc()</code> for <code>"precmed"</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Count outcome
eval_1 &lt;- catecv(response = "count",
                 data = countExample,
                 score.method = "poisson",
                 cate.model = y ~ age + female + previous_treatment +
                                  previous_cost + previous_number_relapses +
                                  offset(log(years)),
                 ps.model = trt ~ age + previous_treatment,
                 higher.y = FALSE,
                 cv.n = 5)

boxplot(eval_1, ylab = "Rate ratio of drug1 vs drug0 in each subgroup")

# Survival outcome
library(survival)
tau0 &lt;- with(survivalExample,
             min(quantile(y[trt == "drug1"], 0.95), quantile(y[trt == "drug0"], 0.95)))
eval_2 &lt;- catecv(response = "survival",
                 data = survivalExample,
                 score.method = c("poisson", "randomForest"),
                 cate.model = Surv(y, d) ~ age + female + previous_cost +
                                           previous_number_relapses,
                 ps.model = trt ~ age + previous_treatment,
                 initial.predictor.method = "randomForest",
                 ipcw.model = ~ age + previous_cost + previous_treatment,
                 tau0 = tau0,
                 higher.y = TRUE,
                 cv.n = 5,
                 seed = 999)

boxplot(eval_2, ylab = "RMTL ratio of drug1 vs drug0 in each subgroup")


</code></pre>


</div>
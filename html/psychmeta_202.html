<div class="container">

<table style="width: 100%;"><tr>
<td>simulate_r_sample</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulation of data with measurement error and range-restriction artifacts</h2>

<h3>Description</h3>

<p>This function simulates a psychometric sample and produces correlation matrices, artifact information, and other descriptive statistics that have been affected by measurement error and/or range restriction.
It allows the formation of composite variables within the simulation and allows selection to be performed on any or all variables, including composites.
By setting the sample size to <code>n = Inf</code>, users can explore the effects of measurement error and/or range restriction on parameters without the influence of sampling error.
To generate multiple samples and compile a database of simulated statistics, see the <code>simulate_r_database</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">simulate_r_sample(
  n,
  rho_mat,
  rel_vec = rep(1, ncol(rho_mat)),
  mu_vec = rep(0, ncol(rho_mat)),
  sigma_vec = rep(1, ncol(rho_mat)),
  sr_vec = rep(1, ncol(rho_mat)),
  k_items_vec = rep(1, ncol(rho_mat)),
  wt_mat = NULL,
  sr_composites = NULL,
  var_names = NULL,
  composite_names = NULL,
  n_as_ni = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Number of cases to simulate before performing selection. If <code>Inf</code>, function will simulate parameter values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho_mat</code></td>
<td>
<p>Matrix of true-score correlations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rel_vec</code></td>
<td>
<p>Vector of reliabilities corresponding to the variables in <code>rho_mat.</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mu_vec</code></td>
<td>
<p>Vector of means.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma_vec</code></td>
<td>
<p>Vector of observed-score standard deviations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_vec</code></td>
<td>
<p>Vector of selection ratios corresponding to the variables in <code>rho_mat</code>
(set selection ratios to 1 for variables that should not be used in selection).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k_items_vec</code></td>
<td>
<p>Number of test items comprising each of the variables to be simulated (all are single-item variables by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt_mat</code></td>
<td>
<p>Optional matrix of weights to use in forming a composite of the variables in <code>rho_mat.</code> Matrix should have as many rows (or vector elements) as there are variables in <code>rho_mat</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_composites</code></td>
<td>
<p>Optional vector selection ratios for composite variables. If not <code>NULL</code>, <code>sr_composites</code> must have as many elements as there are columns in <code>wt_mat</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_names</code></td>
<td>
<p>Vector of variable names corresponding to the variables in <code>rho_mat</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>composite_names</code></td>
<td>
<p>Optional vector of names for composite variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_as_ni</code></td>
<td>
<p>Logical argument determining whether n specifies the incumbent sample size (TRUE) or the applicant sample size (FALSE; default). This can only be TRUE when only one variable is involved in selection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of study information, including correlations, reliabilities, standard deviations, means, and <em>u</em> ratios for true scores and for observed scores.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## Generate data for a simple sample with two variables:
simulate_r_sample(n = 1000, rho_mat = matrix(c(1, .5, .5, 1), 2, 2),
          rel_vec = c(.8, .8), sr_vec = c(1, .5), var_names = c("Y", "X"))

## Generate data for samples with five variables, of which subsets are used to form composites:
rho_mat &lt;- matrix(.5, 5, 5)
diag(rho_mat) &lt;- 1

## Simulate parameters by supply n = Inf
simulate_r_sample(n = Inf, rho_mat = rho_mat,
                rel_vec = rep(.8, 5), sr_vec = c(1, 1, 1, 1, .5),
                wt_mat = cbind(c(0, 0, 0, .3, 1), c(1, .3, 0, 0, 0)), sr_composites = c(.7, .5))

## Finite sample sizes allow the generation of sample data
simulate_r_sample(n = 1000, rho_mat = rho_mat,
                rel_vec = rep(.8, 5), sr_vec = c(1, 1, 1, 1, .5),
                wt_mat = cbind(c(0, 0, 0, .3, 1), c(1, .3, 0, 0, 0)), sr_composites = c(.7, .5))

## End(Not run)                 
</code></pre>


</div>
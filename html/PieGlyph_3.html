<div class="container">

<table style="width: 100%;"><tr>
<td>geom_pie_glyph</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Scatter plot with points replaced by axis-invariant pie-chart glyphs</h2>

<h3>Description</h3>

<p>This geom replaces the points in a scatter plot with pie-chart glyphs showing
the relative proportions of different categories. The pie-chart glyphs are
independent of the plot dimensions, so won't distort when the plot is scaled.
The ideal dataset for this geom would contain columns with non-negative
values showing the magnitude of the different categories to be shown in the
pie glyphs (The proportions of the different categories within the pie glyph
will be calculated automatically). The different categories can also be
stacked together into a single column according to the rules of tidy-data
(see vignette('tidy-data') or vignette('pivot') for more information).
</p>


<h3>Usage</h3>

<pre><code class="language-R">geom_pie_glyph(
  mapping = NULL,
  data = NULL,
  slices,
  values = NA,
  stat = "identity",
  position = "identity",
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mapping</code></td>
<td>
<p>Set of aesthetic (see Aesthetics below) mappings to be created
by <code>aes()</code> or
<code>aes_()</code>. If specified and
inherit.aes = TRUE (the default), it is combined with the
default mapping at the top level of the plot. You must supply
mapping if there is no plot mapping.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data to be displayed in this layer of the plot. <br>
The default, <code>NULL</code>, inherits the plot data specified in the
<code>ggplot()</code> call. <br>
A <code>data.frame</code>, or other object, will override the plot data.
All objects will be fortified to produce a data frame. See
<code>fortify()</code> for which variables
will be created. <br>
A <code>function</code> will be called with a single argument, the plot
data. The return value must be a <code>data.frame</code>, and will be
used as the layer data. A <code>function</code> can be created from a
<code>formula</code> (e.g. ~ <code>head(.x, 10)</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slices</code></td>
<td>
<p>Each pie glyph in the plot shows the relative abundances of a
set of categories; those categories are specified by this
argument and should contain numeric and non-negative values.
The names of the categories can be the names of individual
columns (wide format) or can be stacked and contained in a
single column (long format using
<code>pivot_longer()</code>).
The categories can also be specified as the numeric
indices of the columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>This parameter is not needed if the data is in wide format.
The default is <code>NA</code> assuming that the categories are in
separate columns. However, if the pie categories are stacked
in one column, this parameter describes the column for the
values of the categories shown in the pie glyphs. The values
should be numeric and non-negative and the proportions of the
different slices within each observation will be calculated
automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer,
either as a <code>ggproto Geom</code> subclass or as a string naming
the stat stripped of the <code>stat_</code> prefix (e.g. <code>"count"</code>
rather than <code>"stat_count"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>position</code></td>
<td>
<p>Position adjustment, either as a string naming the adjustment
(e.g. <code>"jitter"</code> to use <code>position_jitter</code>), or the
result of a call to a position adjustment function. Use the
latter if you need to change the settings of the adjustment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>If all slices for an observation are <code>NA</code> or <code>0</code>, the
observation is dropped while if at least one slice is not
<code>NA</code>, the other slices with value <code>NA</code> are assumed to
be 0. This parameter indicates whether the user is notified
about these changes. If <code>FALSE</code>, the default, user is given
a warning. If <code>TRUE</code>, the problematic observations are
silently removed/modified to 0, without notifying the user.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.legend</code></td>
<td>
<p>Logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are
mapped. <code>FALSE</code> never includes, and <code>TRUE</code>
always includes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics, rather
than combining with them</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments passed on to layer(). These are often aesthetics,
used to set an aesthetic to a fixed value, like <code>colour = "red"</code> or
<code>radius = 1</code>. They may also be parameters to the paired geom/stat.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A ggplot layer
</p>


<h3>Aesthetics</h3>

<p>geom_pie_glyph understands the following aesthetics (required aesthetics are in bold):
</p>

<ul>
<li> <p><strong>x</strong> - variable to be shown on X-axis.
</p>
</li>
<li> <p><strong>y</strong> - variable to be shown on Y-axis.
</p>
</li>
<li>
<p> alpha - adjust opacity of the pie glyphs.
</p>
</li>
<li>
<p> radius - adjust the radius of the pie glyphs (in cm).
</p>
</li>
<li>
<p> colour - specify colour of the border of pie glyphs.
</p>
</li>
<li>
<p> linetype - specify style of pie glyph borders.
</p>
</li>
<li>
<p> linewidth - specify width of pie glyph borders (in mm).
</p>
</li>
<li>
<p> group - specify grouping structure for the observations (see
<code>grouping</code> for more details).
</p>
</li>
<li>
<p> pie_group - manually specify a grouping variable for separating pie-glyphs
with identical x and y coordinates (see
<code>vignette("unusual-situations")</code> for more information).
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
## Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)

## Simulate raw data
set.seed(123)
plot_data &lt;- data.frame(response = rnorm(10, 100, 30),
                        system = as.factor(1:10),
                        group = sample(size = 10,
                                       x = c("G1", "G2", "G3"),
                                       replace = TRUE),
                        A = round(runif(10, 3, 9), 2),
                        B = round(runif(10, 1, 5), 2),
                        C = round(runif(10, 3, 7), 2),
                        D = round(runif(10, 1, 9), 2))

head(plot_data)

## Basic plot
ggplot(data = plot_data, aes(x = system, y = response))+
   geom_pie_glyph(slices = c("A", "B", "C", "D"),
                  data = plot_data)+
   theme_classic()


## Change pie radius using `radius` and border colour using `colour`
ggplot(data = plot_data, aes(x = system, y = response))+
       # Can also specify slices as column indices
       geom_pie_glyph(slices = 4:7, data = plot_data,
                      colour = "black", radius = 0.5)+
       theme_classic()


## Map radius to a variable
p &lt;- ggplot(data = plot_data, aes(x = system, y = response))+
       geom_pie_glyph(aes(radius = group),
                      slices = c("A", "B", "C", "D"),
                      data = plot_data, colour = "black")+
                      theme_classic()
p


## Add custom labels
p &lt;- p + labs(x = "System", y = "Response",
              fill = "Attributes", radius = "Group")
p


## Change slice colours
p + scale_fill_manual(values = c("#56B4E9", "#CC79A7",
                                 "#F0E442", "#D55E00"))


##### Stack the attributes in one column
# The attributes can also be stacked into one column to generate
# the plot. This variant of the function is useful for situations
# when the data is in tidy format. See vignette("tidy-data") and
# vignette("pivot") for more information.

plot_data_stacked &lt;- plot_data %&gt;%
                        pivot_longer(cols = c("A", "B", "C", "D"),
                                     names_to = "Attributes",
                                     values_to = "values")
head(plot_data_stacked, 8)


ggplot(data = plot_data_stacked, aes(x = system, y = response))+
  # Along with slices column, values column is also needed now
  geom_pie_glyph(slices = "Attributes", values = "values")+
  theme_classic()
</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>ic</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Information component</h2>

<h3>Description</h3>

<p>Calculates the information component ("IC") and credibility
interval, used in disproportionality analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ic(obs = NULL, exp = NULL, shrinkage = 0.5, conf_lvl = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>A numeric vector with observed counts, i.e. number of reports
for the selected drug-event-combination. Note that shrinkage (e.g. +0.5) is added
inside the function and should not be included here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp</code></td>
<td>
<p>A numeric vector with expected counts, i.e. number of reports
to be expected given a comparator or <em>background</em>. Note that shrinkage
(e.g. +0.5) is added inside the function and should not be included here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shrinkage</code></td>
<td>
<p>A non-negative numeric value, to be added to
observed and expected count. Default is 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The IC is a log2-transformed observed-to-expected ratio, based on
the relative reporting rate (RRR) for counts, but modified with an addition
of "shrinkage" to protect against spurious associations.
</p>
<p style="text-align: center;"><code class="reqn">\hat{IC} = log_{2}(\frac{\hat{O}+k}{\hat{E}+k})</code>
</p>

<p>where <code class="reqn">\hat{O}</code> = observed number of reports, <code class="reqn">k</code> is the shrinkage
(typically +0.5), and expected <code class="reqn">\hat{E}</code> is (for RRR, and using the
entire database as comparator or <em>background</em>) estimated as
</p>
<p style="text-align: center;"><code class="reqn"> \hat{E} = \frac{\hat{N}_{drug} \times \hat{N}_{event}}{\hat{N}_{TOT}}</code>
</p>

<p>where <code class="reqn">\hat{N}_{drug}</code>, <code class="reqn">\hat{N}_{event}</code> and <code class="reqn">\hat{N}_{TOT}</code> are the number of
reports with the drug, the event, and in the whole database respectively.
</p>
<p>The credibility interval is created from the quantiles of the posterior
gamma distribution with shape (<code class="reqn">\hat{S}</code>) and rate (<code class="reqn">\hat{R}</code>) parameters as
</p>
<p style="text-align: center;"><code class="reqn">\hat{S} = \hat{O} + k</code>
</p>

<p style="text-align: center;"><code class="reqn">\hat{R} = \hat{E} + k</code>
</p>

<p>using the <code>stats::qgamma</code> function. Parameter <code class="reqn">k</code> is the shrinkage defined
earlier. For completeness, a credibility interval of the gamma distributed <code class="reqn">X</code> (i.e.
<code class="reqn">X \sim \Gamma(\hat{S}, \hat{R})</code> where <code class="reqn">\hat{S}</code> and <code class="reqn">\hat{R}</code> are shape and rate parameters)
with associated quantile function <code class="reqn">Q_X(p)</code> for a significance level <code class="reqn">\alpha</code> is
constructed as
</p>
<p style="text-align: center;"><code class="reqn">[Q_X(\alpha/2), Q_X(1-\alpha/2)]</code>
</p>



<h3>Value</h3>

<p>A tibble with three columns (point estimate and credibility bounds).
</p>


<h3>Further details</h3>

<p>From a bayesian point-of-view, the credibility interval of the IC is constructed
from the poisson-gamma conjugacy. The shrinkage constitutes a prior of
observed and expected of 0.5. A shrinkage of +0.5 with a gamma-quantile based 95 %
credibility interval cannot have lower bound above 0 unless the observed count
exceeds 3. One benefit of <code class="reqn">log_{2}</code> is to provide
a log-scale for convenient plotting of multiple IC values side-by-side.
</p>


<h3>References</h3>

<p>Norén GN, Hopstadius J, Bate A (2011).
“Shrinkage observed-to-expected ratios for robust and transparent large-scale pattern discovery.”
<em>Statistical Methods in Medical Research</em>, <b>22</b>(1), 57–69.
<a href="https://doi.org/10.1177/0962280211403604">doi:10.1177/0962280211403604</a>, <a href="https://doi.org/10.1177/0962280211403604">https://doi.org/10.1177/0962280211403604</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">ic(obs = 20, exp = 10)
# Note that obs and exp can be vectors (of equal length, no recycling allowed)
ic(obs = c(20, 30), exp = c(10, 10))
</code></pre>


</div>
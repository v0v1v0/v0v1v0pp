<div class="container">

<table style="width: 100%;"><tr>
<td>get_covariate_balance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate covariate balance</h2>

<h3>Description</h3>

<p>Calculate covariate balance for user specified covariates across matched sets. Balance is assessed by taking the average
of the difference between the values of the specified covariates for the treated unit(s) and the weighted average of
the control units across all matched sets. Results are standardized and are expressed in standard deviations.
Balance is calculated for each period in the specified lag window.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_covariate_balance(
  matched.sets,
  data,
  covariates,
  use.equal.weights = FALSE,
  plot = FALSE,
  reference.line = TRUE,
  legend = TRUE,
  ylab = "SD",
  include.treatment.period = TRUE,
  legend.position = "topleft",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>matched.sets</code></td>
<td>
<p>A <code>matched.set</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The time series cross sectional data set (as a <code>data.frame</code> object) used to produce the <code>matched.set</code> object. This data set should be identical to the one passed to <code>PanelMatch()</code> and <code>PanelEstimate()</code> to ensure consistent results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>a character vector, specifying the names of the covariates for which the user is interested in calculating balance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.equal.weights</code></td>
<td>
<p>logical. If set to TRUE, then equal weights will be assigned to control units, rather than using whatever calculated weights have been assigned. This is helpful for assessing the improvement in covariate balance as a result of refining the matched sets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical. When TRUE, a plot showing the covariate balance calculation results will be shown. When FALSE, no plot is made, but the results of the calculations are returned. default is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference.line</code></td>
<td>
<p>logical indicating whether or not a horizontal line should be present on the plot at y = 0. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>logical indicating whether or not a legend identifying the variables should be included on the plot. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Label for y axis. Default is "SD". This is the same as the ylab argument to <code>plot()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.treatment.period</code></td>
<td>
<p>logical. Default is TRUE. When TRUE, covariate balance measures for the period during which treatment occurs is included. These calculations are not included when FALSE. Users may wish to leave this period off in some circumstances. For instance, one would expect covariate balance to be poor during this period when treatment is continuous and a lagged outcome is included in the refinement formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.position</code></td>
<td>
<p>position of legend. See documentation for graphics::legend. Default is "topleft"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional graphical parameters to be passed to the <code>plot</code> function in base R.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">dem.sub &lt;- dem[dem[, "wbcode2"] &lt;= 100, ]
# create subset of data for simplicity
#add some additional data to data set for demonstration purposes
dem.sub$rdata &lt;- runif(runif(nrow(dem.sub)))
pm.obj &lt;- PanelMatch(lead = 0:3, lag = 4, time.id = "year", unit.id = "wbcode2", treatment = "dem",
                    outcome.var ="y", refinement.method = "ps.match",
                    data = dem.sub, match.missing = TRUE,
                    covs.formula = ~ tradewb + rdata + I(lag(tradewb, 1:4)) + I(lag(y, 1:4)),
                    size.match = 5, qoi = "att")
get_covariate_balance(pm.obj$att, dem.sub, covariates = c("tradewb", "rdata"),
                         ylim = c(-2,2))

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>subset-method</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Subsetting corpora and subcorpora</h2>

<h3>Description</h3>

<p>The structural attributes of a corpus (s-attributes) can be used
to generate subcorpora (i.e. a <code>subcorpus</code> class object) by applying the
<code>subset</code>-method. To obtain a <code>subcorpus</code>, the <code>subset</code>-method can be
applied on a corpus represented by a <code>corpus</code> object, a length-one
<code>character</code> vector (as a shortcut), and on a <code>subcorpus</code> object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'corpus'
subset(x, subset, regex = FALSE, verbose = FALSE, ...)

## S4 method for signature 'character'
subset(x, ...)

## S4 method for signature 'subcorpus'
subset(x, subset, verbose = FALSE, ...)

## S4 method for signature 'remote_corpus'
subset(x, subset)

## S4 method for signature 'subcorpus_bundle'
subset(x, ..., iterate = FALSE, verbose = TRUE, progress = FALSE, mc = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>corpus</code> or <code>subcorpus</code> object. A corpus may also specified by a
length-one <code>character</code> vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>A <code>logical</code> expression indicating elements or rows to
keep. The expression may be unevaluated (using <code>quote()</code> or
<code>bquote()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regex</code></td>
<td>
<p>A <code>logical</code> value. If <code>TRUE</code>, values for s-attributes
defined using the three dots (...) are interpreted as regular expressions
and passed into a <code>grep</code> call for subsetting a table with the regions
and values of structural attributes. If <code>FALSE</code> (the default), values
for s-attributes must match exactly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A <code>logical</code> value, whether to show progress messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>An expression that will be used to create a subcorpus from
s-attributes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iterate</code></td>
<td>
<p>A <code>logical</code> value, if <code>TRUE</code>, process very single object of
<code>x</code> individually.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>A <code>logical</code> value, whether to display progress bar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc</code></td>
<td>
<p>An <code>integer</code> value, number of cores to use. If <code>NULL</code> (default),
no multithreading.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The default approach for subsetting a <code>subcorpus_bundle</code> is to
temporarily merge objects into a single <code>subcorpus</code>, perform <code>subset()</code>,
and restore <code>subcorpus_bundle</code> by splitting on the s-attribute of the input
<code>subcorpus_bundle</code>. This approach may have unintended results, if <code>x</code> has
been generated using complex criteria. This may be the case for instance,
if <code>x</code> resulted from <code>as.speeches()</code>. In this scenario, set argument
<code>iterate</code> to <code>TRUE</code> to iterate over objects in bundle one-by-one.
</p>


<h3>Value</h3>

<p>A <code>subcorpus</code> object. If the expression provided by argument <code>subset</code>
includes undefined s-attributes, a warning is issued and the return value
is <code>NULL</code>.
</p>


<h3>See Also</h3>

<p>The methods applicable for the <code>subcorpus</code> object resulting from
subsetting a corpus or subcorpus are described in the documentation of the
<code style="white-space: pre;">⁠\link{subcorpus-class}⁠</code>. Note that the <code>subset</code>-method can also be applied
to <code>textstat-class</code> objects (and objects inheriting from this
class).
</p>


<h3>Examples</h3>

<pre><code class="language-R">use("polmineR")

# examples for standard and non-standard evaluation
a &lt;- corpus("GERMAPARLMINI")

# subsetting a corpus object using non-standard evaluation
sc &lt;- subset(a, speaker == "Angela Dorothea Merkel")
sc &lt;- subset(a, speaker == "Angela Dorothea Merkel" &amp; date == "2009-10-28")
sc &lt;- subset(a, grepl("Merkel", speaker))
sc &lt;- subset(a, grepl("Merkel", speaker) &amp; date == "2009-10-28")

# subsetting corpus specified by character vector
sc &lt;- subset("GERMAPARLMINI", grepl("Merkel", speaker))
sc &lt;- subset("GERMAPARLMINI", speaker == "Angela Dorothea Merkel")
sc &lt;- subset("GERMAPARLMINI", speaker == "Angela Dorothea Merkel" &amp; date == "2009-10-28")
sc &lt;- subset("GERMAPARLMINI", grepl("Merkel", speaker) &amp; date == "2009-10-28")

# subsetting a corpus using the (old) logic of the partition-method
sc &lt;- subset(a, speaker = "Angela Dorothea Merkel")
sc &lt;- subset(a, speaker = "Angela Dorothea Merkel", date = "2009-10-28")
sc &lt;- subset(a, speaker = "Merkel", regex = TRUE)
sc &lt;- subset(a, speaker = c("Merkel", "Kauder"), regex = TRUE)
sc &lt;- subset(a, speaker = "Merkel", date = "2009-10-28", regex = TRUE)

# providing the value for s-attribute as a variable
who &lt;- "Volker Kauder"
sc &lt;- subset(a, quote(speaker == !!who))

# quoting and quosures necessary when programming against subset
# note how variable who needs to be handled
gparl &lt;- corpus("GERMAPARLMINI")
subcorpora &lt;- lapply(
  c("Angela Dorothea Merkel", "Volker Kauder", "Ronald Pofalla"),
  function(who) subset(gparl, speaker == !!who)
)

# subset a subcorpus_bundle
merkel &lt;- corpus("GERMAPARLMINI") %&gt;%
  split(s_attribute = "protocol_date") %&gt;%
  subset(speaker == "Angela Dorothea Merkel")

# iterate over objects in bundle one by one 
sp &lt;- corpus("GERMAPARLMINI") %&gt;%
  as.speeches(
    s_attribute_name = "speaker",
    s_attribute_date = "protocol_date",
    progress = FALSE
  ) %&gt;%
  subset(interjection == "speech", iterate = TRUE, progress = FALSE)
</code></pre>


</div>
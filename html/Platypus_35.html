<div class="container">

<table style="width: 100%;"><tr>
<td>VDJ_db_load</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Load and preprocess a list of antigen-specific databases</h2>

<h3>Description</h3>

<p>Preprocessing function for several antigen databases for both TCRs (VDJdb, McPAS-TCR, TBAdb) and BCRs (TBAdb), saving them either at a specified path, or loading them as a database list for downstream integration/analyses.
</p>


<h3>Usage</h3>

<pre><code class="language-R">VDJ_db_load(
  databases,
  file.paths,
  preprocess,
  species,
  filter.sequences,
  remove.na,
  vgm.names,
  keep.only.common,
  output.format,
  saving.path
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>databases</code></td>
<td>
<p>list of databases to be processed and saved. Currently supported ones include: VDJdb(='vdjdb'), McPAS-TCR(='mcpas'), TBAdb(='tbdadb_tcr' or 'tbadb_bcr').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.paths</code></td>
<td>
<p>list of file paths for the specified databases (in the database parameter). If NULL, will try to locally download the databases from the archived download links.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preprocess</code></td>
<td>
<p>boolean - if T, will preprocess each database individually.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species</code></td>
<td>
<p>string - either 'Human' or 'Mouse', the species for the processed database. Needs preprocess=T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter.sequences</code></td>
<td>
<p>string - 'VDJ' to remove rows with NA VDJ sequences, 'VJ' to remove rows with NA VJ sequences, 'VDJ.VJ' to remove rows with both VDJ and VJ sequences missing. Needs preprocess=T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove.na</code></td>
<td>
<p>string or NULL - 'all' will remove all rows with missing values from the database, 'common' will remove only rows with missing values for the shared columns among all databases ('VJ_cdr3s_aa','VDJ_cdr3s_aa','Species','Epitope','Antigen species'), 'vgm' will remove missing values for columns shared with the VDJ object (specific to each database). Needs preprocess=T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vgm.names</code></td>
<td>
<p>boolean - if T, will change all column names of the shared columns (with VDJ) to match those from VDJ. Use this to integrate the antigen data into VDJ using VDJ_antigen_integrate or VDJ_db_annotate. Needs preprocess=T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.only.common</code></td>
<td>
<p>boolean - if T, will only keep the columns shared between all databases ('VJ_cdr3s_aa','VDJ_cdr3s_aa','Species','Epitope','Antigen species') for each processed database. Needs preprocess=T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.format</code></td>
<td>
<p>string - 'df.list' to save all databases as a list, 'save' to save them as csv files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saving.path</code></td>
<td>
<p>string - directory where the processed databases should be locally saved if output.format='save'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Processed antigen-specific databases for both TCRs and BCRs.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
try({
VDJ_db_load(databases=list('vdjdb'),file.paths=NULL,
preprocess=TRUE,species='Mouse',filter.sequences='VDJ.VJ',
remove.na='vgm', vgm.names=TRUE, keep.only.common=TRUE,
output.format='df.list', saving.path = tempdir())
})

</code></pre>


</div>
<div class="container">

<table style="width: 100%;"><tr>
<td>pgmm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generalized Method of Moments (GMM) Estimation for Panel Data</h2>

<h3>Description</h3>

<p>Generalized method of moments estimation for static or dynamic
models with panel data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pgmm(
  formula,
  data,
  subset,
  na.action,
  effect = c("twoways", "individual"),
  model = c("onestep", "twosteps"),
  collapse = FALSE,
  lost.ts = NULL,
  transformation = c("d", "ld"),
  fsm = NULL,
  index = NULL,
  ...
)

## S3 method for class 'pgmm'
coef(object, ...)

## S3 method for class 'pgmm'
summary(object, robust = TRUE, time.dummies = FALSE, ...)

## S3 method for class 'summary.pgmm'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a symbolic description for the model to be
estimated. The preferred interface is now to indicate a
multi–part formula, the first two parts describing the
covariates and the GMM instruments and, if any, the third part
the 'normal' instruments,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a <code>data.frame</code> (neither factors nor character vectors
will be accepted in <code>data.frame</code>),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>see <code>lm()</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>see <code>lm()</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect</code></td>
<td>
<p>the effects introduced in the model, one of
<code>"twoways"</code> (the default) or <code>"individual"</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>one of <code>"onestep"</code> (the default) or <code>"twosteps"</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>if <code>TRUE</code>, the GMM instruments are collapsed (default is
<code>FALSE</code>),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lost.ts</code></td>
<td>
<p>the number of lost time series: if <code>NULL</code>, this is
automatically computed. Otherwise, it can be defined by the
user as a numeric vector of length 1 or 2. The first element is
the number of lost time series in the model in difference, the
second one in the model in level. If the second element is
missing, it is set to the first one minus one,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transformation</code></td>
<td>
<p>the kind of transformation to apply to the
model: either <code>"d"</code> (the default value) for the
"difference GMM" model or <code>"ld"</code> for the "system GMM" model,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fsm</code></td>
<td>
<p>the matrix for the one step estimator: one of <code>"I"</code>
(identity matrix) or <code>"G"</code> (<code class="reqn">=D'D</code> where <code class="reqn">D</code> is the
first–difference operator) if <code>transformation="d"</code>, one of
<code>"GI"</code> or <code>"full"</code> if <code>transformation="ld"</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>the indexes,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object, x</code></td>
<td>
<p>an object of class <code>"pgmm"</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robust</code></td>
<td>
<p>for pgmm's summary method: if <code>TRUE</code> (default), robust inference
is performed in the summary,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.dummies</code></td>
<td>
<p>for pgmm's summary method: if <code>TRUE</code>, the estimated
coefficients of time dummies are present in the table of coefficients;
default is <code>FALSE</code>, thus time dummies are dropped in summary's coefficient
table (argument is only meaningful if there are time dummies in the model,
i.e., only for <code>effect = "twoways"</code>),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>digits,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>the maximum length of the lines in the print output.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>pgmm</code> estimates a model for panel data with a generalized method
of moments (GMM) estimator. The description of the model to
estimate is provided with a multi–part formula which is (or which
is coerced to) a <code>Formula</code> object. The first right–hand side part
describes the covariates. The second one, which is mandatory,
describes the GMM instruments. The third one, which is optional,
describes the 'normal' instruments. By default, all the variables
of the model which are not used as GMM instruments are used as
normal instruments with the same lag structure as the one specified
in the model.
</p>
<p><code>y~lag(y, 1:2)+lag(x1, 0:1)+lag(x2, 0:2) | lag(y, 2:99)</code> is similar to
</p>
<p><code>y~lag(y, 1:2)+lag(x1, 0:1)+lag(x2, 0:2) | lag(y, 2:99) | lag(x1, 0:1)+lag(x2, 0:2)</code>
</p>
<p>and indicates that all lags from 2 of <code>y</code> are used
as GMM instruments.
</p>
<p><code>transformation</code> indicates how the model should be transformed for
the estimation. <code>"d"</code> gives the "difference GMM" model
(see Arellano and Bond 1991), <code>"ld"</code> the "system GMM" model
(see Blundell and Bond 1998).
</p>
<p><code>pgmm</code> is an attempt to adapt GMM estimators available within the
DPD library for GAUSS (see Arellano and Bond 1998) and Ox
(see Arellano and Bond 2012) and within the xtabond2
library for Stata (see Roodman 2009).
</p>


<h3>Value</h3>

<p>An object of class <code>c("pgmm","panelmodel")</code>, which has the
following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>coefficients</code></td>
<td>
<p>the vector (or the list for fixed effects) of
coefficients,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>the list of residuals for each individual,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcov</code></td>
<td>
<p>the covariance matrix of the coefficients,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitted.values</code></td>
<td>
<p>the vector of fitted values,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df.residual</code></td>
<td>
<p>degrees of freedom of the residuals,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>a list containing the variables used for the
estimation for each individual,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>a list containing the instruments for each individual (a matrix per
list element) (two lists in case of system GMM,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>A1</code></td>
<td>
<p>the weighting matrix for the one–step estimator,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>A2</code></td>
<td>
<p>the weighting matrix for the two–steps estimator,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>the call.</p>
</td>
</tr>
</table>
<p>In addition, it has attribute <code>"pdim"</code> which contains the pdim object for
the model.
</p>
<p>It has <code>print</code>, <code>summary</code> and <code>print.summary</code> methods.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>References</h3>

<p>Arellano M, Bond S (1991).
“Some Tests of Specification for Panel Data : Monte Carlo Evidence and an Application to Employment Equations.”
<em>Review of Economic Studies</em>, <b>58</b>, 277–297.<br><br> Arellano M, Bond S (1998).
“Dynamic panel data estimation using DPD98 for GAUSS: a guide for users.”
unpublished.<br><br> Arellano M, Bond S (2012).
“Panel data estimation using DPD for Ox.”
unpublished, <a href="https://www.doornik.com/download/oxmetrics7/Ox_Packages/dpd.pdf">https://www.doornik.com/download/oxmetrics7/Ox_Packages/dpd.pdf</a>.<br><br> Blundell R, Bond S (1998).
“Initial Conditions and Moment Restrictions in Dynamic Panel Data Models.”
<em>Journal of Econometrics</em>, <b>87</b>, 115–143.<br><br> Roodman D (2009).
“How to do xtabond2: An introduction to difference and system GMM in Stata.”
<em>The Stata Journal</em>, <b>9</b>, 86-136.
<a href="https://www.stata-journal.com/article.html?article=st0159">https://www.stata-journal.com/article.html?article=st0159</a>.
</p>


<h3>See Also</h3>

<p><code>sargan()</code> for the Hansen–Sargan test and <code>mtest()</code> for
Arellano–Bond's test of serial correlation.  <code>dynformula()</code> for
dynamic formulas (deprecated).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data("EmplUK", package = "plm")

## Arellano and Bond (1991), table 4 col. b 
z1 &lt;- pgmm(log(emp) ~ lag(log(emp), 1:2) + lag(log(wage), 0:1)
           + log(capital) + lag(log(output), 0:1) | lag(log(emp), 2:99),
            data = EmplUK, effect = "twoways", model = "twosteps")
summary(z1, robust = FALSE)

## Blundell and Bond (1998) table 4 (cf. DPD for OX p. 12 col. 4)
z2 &lt;- pgmm(log(emp) ~ lag(log(emp), 1)+ lag(log(wage), 0:1) +
           lag(log(capital), 0:1) | lag(log(emp), 2:99) +
           lag(log(wage), 2:99) + lag(log(capital), 2:99),
           data = EmplUK, effect = "twoways", model = "onestep", 
           transformation = "ld")
summary(z2, robust = TRUE)

## Not run: 
## Same with the old formula or dynformula interface
## Arellano and Bond (1991), table 4, col. b 
z1 &lt;- pgmm(log(emp) ~ log(wage) + log(capital) + log(output),
            lag.form = list(2,1,0,1), data = EmplUK, 
            effect = "twoways", model = "twosteps",
            gmm.inst = ~log(emp), lag.gmm = list(c(2,99)))
summary(z1, robust = FALSE)

## Blundell and Bond (1998) table 4 (cf DPD for OX p. 12 col. 4)
z2 &lt;- pgmm(dynformula(log(emp) ~ log(wage) + log(capital), list(1,1,1)), 
            data = EmplUK, effect = "twoways", model = "onestep", 
            gmm.inst = ~log(emp) + log(wage) + log(capital), 
            lag.gmm = c(2,99), transformation = "ld")
summary(z2, robust = TRUE)

## End(Not run)

</code></pre>


</div>